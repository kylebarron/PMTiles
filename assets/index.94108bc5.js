function R5(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(o){if(o!=="default"&&!(o in e)){var l=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:function(){return n[o]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const L5=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}};L5();var uf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function F5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=Symbol.for("react.element"),O5=Symbol.for("react.portal"),$5=Symbol.for("react.fragment"),B5=Symbol.for("react.strict_mode"),V5=Symbol.for("react.profiler"),N5=Symbol.for("react.provider"),U5=Symbol.for("react.context"),j5=Symbol.for("react.forward_ref"),G5=Symbol.for("react.suspense"),W5=Symbol.for("react.memo"),q5=Symbol.for("react.lazy"),rS=Symbol.iterator;function Z5(e){return e===null||typeof e!="object"?null:(e=rS&&e[rS]||e["@@iterator"],typeof e=="function"?e:null)}var oC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aC=Object.assign,sC={};function sh(e,t,n){this.props=e,this.context=t,this.refs=sC,this.updater=n||oC}sh.prototype.isReactComponent={};sh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lC(){}lC.prototype=sh.prototype;function kx(e,t,n){this.props=e,this.context=t,this.refs=sC,this.updater=n||oC}var Tx=kx.prototype=new lC;Tx.constructor=kx;aC(Tx,sh.prototype);Tx.isPureReactComponent=!0;var iS=Array.isArray,uC=Object.prototype.hasOwnProperty,Cx={current:null},cC={key:!0,ref:!0,__self:!0,__source:!0};function hC(e,t,n){var o,l={},h=null,y=null;if(t!=null)for(o in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(h=""+t.key),t)uC.call(t,o)&&!cC.hasOwnProperty(o)&&(l[o]=t[o]);var u=arguments.length-2;if(u===1)l.children=n;else if(1<u){for(var S=Array(u),w=0;w<u;w++)S[w]=arguments[w+2];l.children=S}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)l[o]===void 0&&(l[o]=u[o]);return{$$typeof:Bf,type:e,key:h,ref:y,props:l,_owner:Cx.current}}function H5(e,t){return{$$typeof:Bf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Px(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bf}function X5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var oS=/\/+/g;function P_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?X5(""+e.key):t.toString(36)}function Nm(e,t,n,o,l){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(h){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Bf:case O5:y=!0}}if(y)return y=e,l=l(y),e=o===""?"."+P_(y,0):o,iS(l)?(n="",e!=null&&(n=e.replace(oS,"$&/")+"/"),Nm(l,t,n,"",function(w){return w})):l!=null&&(Px(l)&&(l=H5(l,n+(!l.key||y&&y.key===l.key?"":(""+l.key).replace(oS,"$&/")+"/")+e)),t.push(l)),1;if(y=0,o=o===""?".":o+":",iS(e))for(var u=0;u<e.length;u++){h=e[u];var S=o+P_(h,u);y+=Nm(h,t,n,S,l)}else if(S=Z5(e),typeof S=="function")for(e=S.call(e),u=0;!(h=e.next()).done;)h=h.value,S=o+P_(h,u++),y+=Nm(h,t,n,S,l);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function im(e,t,n){if(e==null)return e;var o=[],l=0;return Nm(e,o,"","",function(h){return t.call(n,h,l++)}),o}function K5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bi={current:null},Um={transition:null},Y5={ReactCurrentDispatcher:Bi,ReactCurrentBatchConfig:Um,ReactCurrentOwner:Cx};rn.Children={map:im,forEach:function(e,t,n){im(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return im(e,function(){t++}),t},toArray:function(e){return im(e,function(t){return t})||[]},only:function(e){if(!Px(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rn.Component=sh;rn.Fragment=$5;rn.Profiler=V5;rn.PureComponent=kx;rn.StrictMode=B5;rn.Suspense=G5;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y5;rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=aC({},e.props),l=e.key,h=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,y=Cx.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)uC.call(t,S)&&!cC.hasOwnProperty(S)&&(o[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)o.children=n;else if(1<S){u=Array(S);for(var w=0;w<S;w++)u[w]=arguments[w+2];o.children=u}return{$$typeof:Bf,type:e.type,key:l,ref:h,props:o,_owner:y}};rn.createContext=function(e){return e={$$typeof:U5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:N5,_context:e},e.Consumer=e};rn.createElement=hC;rn.createFactory=function(e){var t=hC.bind(null,e);return t.type=e,t};rn.createRef=function(){return{current:null}};rn.forwardRef=function(e){return{$$typeof:j5,render:e}};rn.isValidElement=Px;rn.lazy=function(e){return{$$typeof:q5,_payload:{_status:-1,_result:e},_init:K5}};rn.memo=function(e,t){return{$$typeof:W5,type:e,compare:t===void 0?null:t}};rn.startTransition=function(e){var t=Um.transition;Um.transition={};try{e()}finally{Um.transition=t}};rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rn.useCallback=function(e,t){return Bi.current.useCallback(e,t)};rn.useContext=function(e){return Bi.current.useContext(e)};rn.useDebugValue=function(){};rn.useDeferredValue=function(e){return Bi.current.useDeferredValue(e)};rn.useEffect=function(e,t){return Bi.current.useEffect(e,t)};rn.useId=function(){return Bi.current.useId()};rn.useImperativeHandle=function(e,t,n){return Bi.current.useImperativeHandle(e,t,n)};rn.useInsertionEffect=function(e,t){return Bi.current.useInsertionEffect(e,t)};rn.useLayoutEffect=function(e,t){return Bi.current.useLayoutEffect(e,t)};rn.useMemo=function(e,t){return Bi.current.useMemo(e,t)};rn.useReducer=function(e,t,n){return Bi.current.useReducer(e,t,n)};rn.useRef=function(e){return Bi.current.useRef(e)};rn.useState=function(e){return Bi.current.useState(e)};rn.useSyncExternalStore=function(e,t,n){return Bi.current.useSyncExternalStore(e,t,n)};rn.useTransition=function(){return Bi.current.useTransition()};rn.version="18.1.0";W.exports=rn;var Re=W.exports,Fv=R5({__proto__:null,default:Re},[W.exports]),Ov={},my={exports:{}},Po={},dC={exports:{}},fC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,at){var bt=Ne.length;Ne.push(at);e:for(;0<bt;){var Bt=bt-1>>>1,lt=Ne[Bt];if(0<l(lt,at))Ne[Bt]=at,Ne[bt]=lt,bt=Bt;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function o(Ne){if(Ne.length===0)return null;var at=Ne[0],bt=Ne.pop();if(bt!==at){Ne[0]=bt;e:for(var Bt=0,lt=Ne.length,zn=lt>>>1;Bt<zn;){var Jt=2*(Bt+1)-1,Jn=Ne[Jt],Ot=Jt+1,Wn=Ne[Ot];if(0>l(Jn,bt))Ot<lt&&0>l(Wn,Jn)?(Ne[Bt]=Wn,Ne[Ot]=bt,Bt=Ot):(Ne[Bt]=Jn,Ne[Jt]=bt,Bt=Jt);else if(Ot<lt&&0>l(Wn,bt))Ne[Bt]=Wn,Ne[Ot]=bt,Bt=Ot;else break e}}return at}function l(Ne,at){var bt=Ne.sortIndex-at.sortIndex;return bt!==0?bt:Ne.id-at.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var y=Date,u=y.now();e.unstable_now=function(){return y.now()-u}}var S=[],w=[],C=1,A=null,z=3,G=!1,Z=!1,H=!1,fe=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Ne){for(var at=n(w);at!==null;){if(at.callback===null)o(w);else if(at.startTime<=Ne)o(w),at.sortIndex=at.expirationTime,t(S,at);else break;at=n(w)}}function le(Ne){if(H=!1,K(Ne),!Z)if(n(S)!==null)Z=!0,xn(ue);else{var at=n(w);at!==null&&dn(le,at.startTime-Ne)}}function ue(Ne,at){Z=!1,H&&(H=!1,B(Ee),Ee=-1),G=!0;var bt=z;try{for(K(at),A=n(S);A!==null&&(!(A.expirationTime>at)||Ne&&!Ve());){var Bt=A.callback;if(typeof Bt=="function"){A.callback=null,z=A.priorityLevel;var lt=Bt(A.expirationTime<=at);at=e.unstable_now(),typeof lt=="function"?A.callback=lt:A===n(S)&&o(S),K(at)}else o(S);A=n(S)}if(A!==null)var zn=!0;else{var Jt=n(w);Jt!==null&&dn(le,Jt.startTime-at),zn=!1}return zn}finally{A=null,z=bt,G=!1}}var ge=!1,ye=null,Ee=-1,je=5,ke=-1;function Ve(){return!(e.unstable_now()-ke<je)}function $t(){if(ye!==null){var Ne=e.unstable_now();ke=Ne;var at=!0;try{at=ye(!0,Ne)}finally{at?Tt():(ge=!1,ye=null)}}else ge=!1}var Tt;if(typeof V=="function")Tt=function(){V($t)};else if(typeof MessageChannel!="undefined"){var Ct=new MessageChannel,Nt=Ct.port2;Ct.port1.onmessage=$t,Tt=function(){Nt.postMessage(null)}}else Tt=function(){fe($t,0)};function xn(Ne){ye=Ne,ge||(ge=!0,Tt())}function dn(Ne,at){Ee=fe(function(){Ne(e.unstable_now())},at)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){Z||G||(Z=!0,xn(ue))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return n(S)},e.unstable_next=function(Ne){switch(z){case 1:case 2:case 3:var at=3;break;default:at=z}var bt=z;z=at;try{return Ne()}finally{z=bt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,at){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var bt=z;z=Ne;try{return at()}finally{z=bt}},e.unstable_scheduleCallback=function(Ne,at,bt){var Bt=e.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?Bt+bt:Bt):bt=Bt,Ne){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=bt+lt,Ne={id:C++,callback:at,priorityLevel:Ne,startTime:bt,expirationTime:lt,sortIndex:-1},bt>Bt?(Ne.sortIndex=bt,t(w,Ne),n(S)===null&&Ne===n(w)&&(H?(B(Ee),Ee=-1):H=!0,dn(le,bt-Bt))):(Ne.sortIndex=lt,t(S,Ne),Z||G||(Z=!0,xn(ue))),Ne},e.unstable_shouldYield=Ve,e.unstable_wrapCallback=function(Ne){var at=z;return function(){var bt=z;z=at;try{return Ne.apply(this,arguments)}finally{z=bt}}}})(fC);dC.exports=fC;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=W.exports,ko=dC.exports;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mC=new Set,cf={};function hu(e,t){Zc(e,t),Zc(e+"Capture",t)}function Zc(e,t){for(cf[e]=t,e=0;e<t.length;e++)mC.add(t[e])}var ls=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$v=Object.prototype.hasOwnProperty,J5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aS={},sS={};function Q5(e){return $v.call(sS,e)?!0:$v.call(aS,e)?!1:J5.test(e)?sS[e]=!0:(aS[e]=!0,!1)}function eD(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tD(e,t,n,o){if(t===null||typeof t=="undefined"||eD(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vi(e,t,n,o,l,h,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=y}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ri[e]=new Vi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ri[t]=new Vi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ri[e]=new Vi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ri[e]=new Vi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ri[e]=new Vi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ri[e]=new Vi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ri[e]=new Vi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ri[e]=new Vi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ri[e]=new Vi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ix=/[\-:]([a-z])/g;function Mx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ix,Mx);ri[t]=new Vi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ix,Mx);ri[t]=new Vi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ix,Mx);ri[t]=new Vi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ri[e]=new Vi(e,1,!1,e.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ri[e]=new Vi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ax(e,t,n,o){var l=ri.hasOwnProperty(t)?ri[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tD(t,n,l,o)&&(n=null),o||l===null?Q5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,o=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var ys=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,om=Symbol.for("react.element"),Sc=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),zx=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),gC=Symbol.for("react.provider"),yC=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Nv=Symbol.for("react.suspense_list"),Rx=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),_C=Symbol.for("react.offscreen"),lS=Symbol.iterator;function bd(e){return e===null||typeof e!="object"?null:(e=lS&&e[lS]||e["@@iterator"],typeof e=="function"?e:null)}var sr=Object.assign,I_;function Od(e){if(I_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I_=t&&t[1]||""}return`
`+I_+e}var M_=!1;function A_(e,t){if(!e||M_)return"";M_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var l=w.stack.split(`
`),h=o.stack.split(`
`),y=l.length-1,u=h.length-1;1<=y&&0<=u&&l[y]!==h[u];)u--;for(;1<=y&&0<=u;y--,u--)if(l[y]!==h[u]){if(y!==1||u!==1)do if(y--,u--,0>u||l[y]!==h[u]){var S=`
`+l[y].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=y&&0<=u);break}}}finally{M_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Od(e):""}function nD(e){switch(e.tag){case 5:return Od(e.type);case 16:return Od("Lazy");case 13:return Od("Suspense");case 19:return Od("SuspenseList");case 0:case 2:case 15:return e=A_(e.type,!1),e;case 11:return e=A_(e.type.render,!1),e;case 1:return e=A_(e.type,!0),e;default:return""}}function Uv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ec:return"Fragment";case Sc:return"Portal";case Bv:return"Profiler";case zx:return"StrictMode";case Vv:return"Suspense";case Nv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yC:return(e.displayName||"Context")+".Consumer";case gC:return(e._context.displayName||"Context")+".Provider";case Dx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rx:return t=e.displayName||null,t!==null?t:Uv(e.type)||"Memo";case Os:t=e._payload,e=e._init;try{return Uv(e(t))}catch{}}return null}function rD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uv(t);case 8:return t===zx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function el(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iD(e){var t=vC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(y){o=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function am(e){e._valueTracker||(e._valueTracker=iD(e))}function xC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=vC(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function yg(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function jv(e,t){var n=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function uS(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=el(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wC(e,t){t=t.checked,t!=null&&Ax(e,"checked",t,!1)}function Gv(e,t){wC(e,t);var n=el(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wv(e,t.type,el(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wv(e,t,n){(t!=="number"||yg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $d=Array.isArray;function $c(e,t,n,o){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&o&&(e[n].defaultSelected=!0)}else{for(n=""+el(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function qv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ge(92));if($d(n)){if(1<n.length)throw Error(Ge(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:el(n)}}function bC(e,t){var n=el(t.value),o=el(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function dS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sm,EC=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sm=sm||document.createElement("div"),sm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oD=["Webkit","ms","Moz","O"];Object.keys(Hd).forEach(function(e){oD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hd[t]=Hd[e]})});function kC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hd.hasOwnProperty(e)&&Hd[e]?(""+t).trim():t+"px"}function TC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,l=kC(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,l):e[n]=l}}var aD=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hv(e,t){if(t){if(aD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function Xv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kv=null;function Lx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yv=null,Bc=null,Vc=null;function fS(e){if(e=Uf(e)){if(typeof Yv!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=xy(t),Yv(e.stateNode,e.type,t))}}function CC(e){Bc?Vc?Vc.push(e):Vc=[e]:Bc=e}function PC(){if(Bc){var e=Bc,t=Vc;if(Vc=Bc=null,fS(e),t)for(e=0;e<t.length;e++)fS(t[e])}}function IC(e,t){return e(t)}function MC(){}var z_=!1;function AC(e,t,n){if(z_)return e(t,n);z_=!0;try{return IC(e,t,n)}finally{z_=!1,(Bc!==null||Vc!==null)&&(MC(),PC())}}function df(e,t){var n=e.stateNode;if(n===null)return null;var o=xy(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ge(231,t,typeof n));return n}var Jv=!1;if(ls)try{var Sd={};Object.defineProperty(Sd,"passive",{get:function(){Jv=!0}}),window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{Jv=!1}function sD(e,t,n,o,l,h,y,u,S){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(C){this.onError(C)}}var Xd=!1,_g=null,vg=!1,Qv=null,lD={onError:function(e){Xd=!0,_g=e}};function uD(e,t,n,o,l,h,y,u,S){Xd=!1,_g=null,sD.apply(lD,arguments)}function cD(e,t,n,o,l,h,y,u,S){if(uD.apply(this,arguments),Xd){if(Xd){var w=_g;Xd=!1,_g=null}else throw Error(Ge(198));vg||(vg=!0,Qv=w)}}function du(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pS(e){if(du(e)!==e)throw Error(Ge(188))}function hD(e){var t=e.alternate;if(!t){if(t=du(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var n=e,o=t;;){var l=n.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){n=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===n)return pS(l),e;if(h===o)return pS(l),t;h=h.sibling}throw Error(Ge(188))}if(n.return!==o.return)n=l,o=h;else{for(var y=!1,u=l.child;u;){if(u===n){y=!0,n=l,o=h;break}if(u===o){y=!0,o=l,n=h;break}u=u.sibling}if(!y){for(u=h.child;u;){if(u===n){y=!0,n=h,o=l;break}if(u===o){y=!0,o=h,n=l;break}u=u.sibling}if(!y)throw Error(Ge(189))}}if(n.alternate!==o)throw Error(Ge(190))}if(n.tag!==3)throw Error(Ge(188));return n.stateNode.current===n?e:t}function DC(e){return e=hD(e),e!==null?RC(e):null}function RC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=RC(e);if(t!==null)return t;e=e.sibling}return null}var LC=ko.unstable_scheduleCallback,mS=ko.unstable_cancelCallback,dD=ko.unstable_shouldYield,fD=ko.unstable_requestPaint,xr=ko.unstable_now,pD=ko.unstable_getCurrentPriorityLevel,Fx=ko.unstable_ImmediatePriority,FC=ko.unstable_UserBlockingPriority,xg=ko.unstable_NormalPriority,mD=ko.unstable_LowPriority,OC=ko.unstable_IdlePriority,gy=null,za=null;function gD(e){if(za&&typeof za.onCommitFiberRoot=="function")try{za.onCommitFiberRoot(gy,e,void 0,(e.current.flags&128)===128)}catch{}}var da=Math.clz32?Math.clz32:vD,yD=Math.log,_D=Math.LN2;function vD(e){return e>>>=0,e===0?32:31-(yD(e)/_D|0)|0}var lm=64,um=4194304;function Bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wg(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,y=n&268435455;if(y!==0){var u=y&~l;u!==0?o=Bd(u):(h&=y,h!==0&&(o=Bd(h)))}else y=n&~l,y!==0?o=Bd(y):h!==0&&(o=Bd(h));if(o===0)return 0;if(t!==0&&t!==o&&(t&l)===0&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((o&4)!==0&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-da(t),l=1<<n,o|=e[n],t&=~l;return o}function xD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wD(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var y=31-da(h),u=1<<y,S=l[y];S===-1?((u&n)===0||(u&o)!==0)&&(l[y]=xD(u,t)):S<=t&&(e.expiredLanes|=u),h&=~u}}function e1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $C(){var e=lm;return lm<<=1,(lm&4194240)===0&&(lm=64),e}function D_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-da(t),e[t]=n}function bD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-da(n),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,n&=~h}}function Ox(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-da(n),l=1<<o;l&t|e[o]&t&&(e[o]|=t),n&=~l}}var En=0;function BC(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var VC,$x,NC,UC,jC,t1=!1,cm=[],qs=null,Zs=null,Hs=null,ff=new Map,pf=new Map,Bs=[],SD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gS(e,t){switch(e){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":ff.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pf.delete(t.pointerId)}}function Ed(e,t,n,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Uf(t),t!==null&&$x(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ED(e,t,n,o,l){switch(t){case"focusin":return qs=Ed(qs,e,t,n,o,l),!0;case"dragenter":return Zs=Ed(Zs,e,t,n,o,l),!0;case"mouseover":return Hs=Ed(Hs,e,t,n,o,l),!0;case"pointerover":var h=l.pointerId;return ff.set(h,Ed(ff.get(h)||null,e,t,n,o,l)),!0;case"gotpointercapture":return h=l.pointerId,pf.set(h,Ed(pf.get(h)||null,e,t,n,o,l)),!0}return!1}function GC(e){var t=Zl(e.target);if(t!==null){var n=du(t);if(n!==null){if(t=n.tag,t===13){if(t=zC(n),t!==null){e.blockedOn=t,jC(e.priority,function(){NC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=n1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Kv=o,n.target.dispatchEvent(o),Kv=null}else return t=Uf(n),t!==null&&$x(t),e.blockedOn=n,!1;t.shift()}return!0}function yS(e,t,n){jm(e)&&n.delete(t)}function kD(){t1=!1,qs!==null&&jm(qs)&&(qs=null),Zs!==null&&jm(Zs)&&(Zs=null),Hs!==null&&jm(Hs)&&(Hs=null),ff.forEach(yS),pf.forEach(yS)}function kd(e,t){e.blockedOn===t&&(e.blockedOn=null,t1||(t1=!0,ko.unstable_scheduleCallback(ko.unstable_NormalPriority,kD)))}function mf(e){function t(l){return kd(l,e)}if(0<cm.length){kd(cm[0],e);for(var n=1;n<cm.length;n++){var o=cm[n];o.blockedOn===e&&(o.blockedOn=null)}}for(qs!==null&&kd(qs,e),Zs!==null&&kd(Zs,e),Hs!==null&&kd(Hs,e),ff.forEach(t),pf.forEach(t),n=0;n<Bs.length;n++)o=Bs[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Bs.length&&(n=Bs[0],n.blockedOn===null);)GC(n),n.blockedOn===null&&Bs.shift()}var Nc=ys.ReactCurrentBatchConfig,bg=!0;function TD(e,t,n,o){var l=En,h=Nc.transition;Nc.transition=null;try{En=1,Bx(e,t,n,o)}finally{En=l,Nc.transition=h}}function CD(e,t,n,o){var l=En,h=Nc.transition;Nc.transition=null;try{En=4,Bx(e,t,n,o)}finally{En=l,Nc.transition=h}}function Bx(e,t,n,o){if(bg){var l=n1(e,t,n,o);if(l===null)j_(e,t,o,Sg,n),gS(e,o);else if(ED(l,e,t,n,o))o.stopPropagation();else if(gS(e,o),t&4&&-1<SD.indexOf(e)){for(;l!==null;){var h=Uf(l);if(h!==null&&VC(h),h=n1(e,t,n,o),h===null&&j_(e,t,o,Sg,n),h===l)break;l=h}l!==null&&o.stopPropagation()}else j_(e,t,o,null,n)}}var Sg=null;function n1(e,t,n,o){if(Sg=null,e=Lx(o),e=Zl(e),e!==null)if(t=du(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sg=e,null}function WC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pD()){case Fx:return 1;case FC:return 4;case xg:case mD:return 16;case OC:return 536870912;default:return 16}default:return 16}}var Us=null,Vx=null,Gm=null;function qC(){if(Gm)return Gm;var e,t=Vx,n=t.length,o,l="value"in Us?Us.value:Us.textContent,h=l.length;for(e=0;e<n&&t[e]===l[e];e++);var y=n-e;for(o=1;o<=y&&t[n-o]===l[h-o];o++);return Gm=l.slice(e,1<o?1-o:void 0)}function Wm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hm(){return!0}function _S(){return!1}function Io(e){function t(n,o,l,h,y){this._reactName=n,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?hm:_S,this.isPropagationStopped=_S,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hm)},persist:function(){},isPersistent:hm}),t}var lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=Io(lh),Nf=sr({},lh,{view:0,detail:0}),PD=Io(Nf),R_,L_,Td,yy=sr({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ux,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Td&&(Td&&e.type==="mousemove"?(R_=e.screenX-Td.screenX,L_=e.screenY-Td.screenY):L_=R_=0,Td=e),R_)},movementY:function(e){return"movementY"in e?e.movementY:L_}}),vS=Io(yy),ID=sr({},yy,{dataTransfer:0}),MD=Io(ID),AD=sr({},Nf,{relatedTarget:0}),F_=Io(AD),zD=sr({},lh,{animationName:0,elapsedTime:0,pseudoElement:0}),DD=Io(zD),RD=sr({},lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LD=Io(RD),FD=sr({},lh,{data:0}),xS=Io(FD),OD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=BD[e])?!!t[e]:!1}function Ux(){return VD}var ND=sr({},Nf,{key:function(e){if(e.key){var t=OD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$D[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ux,charCode:function(e){return e.type==="keypress"?Wm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),UD=Io(ND),jD=sr({},yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wS=Io(jD),GD=sr({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ux}),WD=Io(GD),qD=sr({},lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZD=Io(qD),HD=sr({},yy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XD=Io(HD),KD=[9,13,27,32],jx=ls&&"CompositionEvent"in window,Kd=null;ls&&"documentMode"in document&&(Kd=document.documentMode);var YD=ls&&"TextEvent"in window&&!Kd,ZC=ls&&(!jx||Kd&&8<Kd&&11>=Kd),bS=String.fromCharCode(32),SS=!1;function HC(e,t){switch(e){case"keyup":return KD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kc=!1;function JD(e,t){switch(e){case"compositionend":return XC(t);case"keypress":return t.which!==32?null:(SS=!0,bS);case"textInput":return e=t.data,e===bS&&SS?null:e;default:return null}}function QD(e,t){if(kc)return e==="compositionend"||!jx&&HC(e,t)?(e=qC(),Gm=Vx=Us=null,kc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ZC&&t.locale!=="ko"?null:t.data;default:return null}}var e4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ES(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!e4[e.type]:t==="textarea"}function KC(e,t,n,o){CC(o),t=Eg(t,"onChange"),0<t.length&&(n=new Nx("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Yd=null,gf=null;function t4(e){sP(e,0)}function _y(e){var t=Pc(e);if(xC(t))return e}function n4(e,t){if(e==="change")return t}var YC=!1;if(ls){var O_;if(ls){var $_="oninput"in document;if(!$_){var kS=document.createElement("div");kS.setAttribute("oninput","return;"),$_=typeof kS.oninput=="function"}O_=$_}else O_=!1;YC=O_&&(!document.documentMode||9<document.documentMode)}function TS(){Yd&&(Yd.detachEvent("onpropertychange",JC),gf=Yd=null)}function JC(e){if(e.propertyName==="value"&&_y(gf)){var t=[];KC(t,gf,e,Lx(e)),AC(t4,t)}}function r4(e,t,n){e==="focusin"?(TS(),Yd=t,gf=n,Yd.attachEvent("onpropertychange",JC)):e==="focusout"&&TS()}function i4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _y(gf)}function o4(e,t){if(e==="click")return _y(t)}function a4(e,t){if(e==="input"||e==="change")return _y(t)}function s4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fa=typeof Object.is=="function"?Object.is:s4;function yf(e,t){if(fa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var l=n[o];if(!$v.call(t,l)||!fa(e[l],t[l]))return!1}return!0}function CS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function PS(e,t){var n=CS(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CS(n)}}function QC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eP(){for(var e=window,t=yg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yg(e.document)}return t}function Gx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function l4(e){var t=eP(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QC(n.ownerDocument.documentElement,n)){if(o!==null&&Gx(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=PS(n,h);var y=PS(n,o);l&&y&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u4=ls&&"documentMode"in document&&11>=document.documentMode,Tc=null,r1=null,Jd=null,i1=!1;function IS(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;i1||Tc==null||Tc!==yg(o)||(o=Tc,"selectionStart"in o&&Gx(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Jd&&yf(Jd,o)||(Jd=o,o=Eg(r1,"onSelect"),0<o.length&&(t=new Nx("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Tc)))}function dm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cc={animationend:dm("Animation","AnimationEnd"),animationiteration:dm("Animation","AnimationIteration"),animationstart:dm("Animation","AnimationStart"),transitionend:dm("Transition","TransitionEnd")},B_={},tP={};ls&&(tP=document.createElement("div").style,"AnimationEvent"in window||(delete Cc.animationend.animation,delete Cc.animationiteration.animation,delete Cc.animationstart.animation),"TransitionEvent"in window||delete Cc.transitionend.transition);function vy(e){if(B_[e])return B_[e];if(!Cc[e])return e;var t=Cc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tP)return B_[e]=t[n];return e}var nP=vy("animationend"),rP=vy("animationiteration"),iP=vy("animationstart"),oP=vy("transitionend"),aP=new Map,MS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(e,t){aP.set(e,t),hu(t,[e])}for(var V_=0;V_<MS.length;V_++){var N_=MS[V_],c4=N_.toLowerCase(),h4=N_[0].toUpperCase()+N_.slice(1);ol(c4,"on"+h4)}ol(nP,"onAnimationEnd");ol(rP,"onAnimationIteration");ol(iP,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(oP,"onTransitionEnd");Zc("onMouseEnter",["mouseout","mouseover"]);Zc("onMouseLeave",["mouseout","mouseover"]);Zc("onPointerEnter",["pointerout","pointerover"]);Zc("onPointerLeave",["pointerout","pointerover"]);hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vd));function AS(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,cD(o,t,void 0,e),e.currentTarget=null}function sP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var y=o.length-1;0<=y;y--){var u=o[y],S=u.instance,w=u.currentTarget;if(u=u.listener,S!==h&&l.isPropagationStopped())break e;AS(l,u,w),h=S}else for(y=0;y<o.length;y++){if(u=o[y],S=u.instance,w=u.currentTarget,u=u.listener,S!==h&&l.isPropagationStopped())break e;AS(l,u,w),h=S}}}if(vg)throw e=Qv,vg=!1,Qv=null,e}function Un(e,t){var n=t[u1];n===void 0&&(n=t[u1]=new Set);var o=e+"__bubble";n.has(o)||(lP(t,e,2,!1),n.add(o))}function U_(e,t,n){var o=0;t&&(o|=4),lP(n,e,o,t)}var fm="_reactListening"+Math.random().toString(36).slice(2);function _f(e){if(!e[fm]){e[fm]=!0,mC.forEach(function(n){n!=="selectionchange"&&(d4.has(n)||U_(n,!1,e),U_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fm]||(t[fm]=!0,U_("selectionchange",!1,t))}}function lP(e,t,n,o){switch(WC(t)){case 1:var l=TD;break;case 4:l=CD;break;default:l=Bx}n=l.bind(null,t,n,e),l=void 0,!Jv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function j_(e,t,n,o,l){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var u=o.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(y===4)for(y=o.return;y!==null;){var S=y.tag;if((S===3||S===4)&&(S=y.stateNode.containerInfo,S===l||S.nodeType===8&&S.parentNode===l))return;y=y.return}for(;u!==null;){if(y=Zl(u),y===null)return;if(S=y.tag,S===5||S===6){o=h=y;continue e}u=u.parentNode}}o=o.return}AC(function(){var w=h,C=Lx(n),A=[];e:{var z=aP.get(e);if(z!==void 0){var G=Nx,Z=e;switch(e){case"keypress":if(Wm(n)===0)break e;case"keydown":case"keyup":G=UD;break;case"focusin":Z="focus",G=F_;break;case"focusout":Z="blur",G=F_;break;case"beforeblur":case"afterblur":G=F_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=vS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=MD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=WD;break;case nP:case rP:case iP:G=DD;break;case oP:G=ZD;break;case"scroll":G=PD;break;case"wheel":G=XD;break;case"copy":case"cut":case"paste":G=LD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=wS}var H=(t&4)!==0,fe=!H&&e==="scroll",B=H?z!==null?z+"Capture":null:z;H=[];for(var V=w,K;V!==null;){K=V;var le=K.stateNode;if(K.tag===5&&le!==null&&(K=le,B!==null&&(le=df(V,B),le!=null&&H.push(vf(V,le,K)))),fe)break;V=V.return}0<H.length&&(z=new G(z,Z,null,n,C),A.push({event:z,listeners:H}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",z&&n!==Kv&&(Z=n.relatedTarget||n.fromElement)&&(Zl(Z)||Z[us]))break e;if((G||z)&&(z=C.window===C?C:(z=C.ownerDocument)?z.defaultView||z.parentWindow:window,G?(Z=n.relatedTarget||n.toElement,G=w,Z=Z?Zl(Z):null,Z!==null&&(fe=du(Z),Z!==fe||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(G=null,Z=w),G!==Z)){if(H=vS,le="onMouseLeave",B="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(H=wS,le="onPointerLeave",B="onPointerEnter",V="pointer"),fe=G==null?z:Pc(G),K=Z==null?z:Pc(Z),z=new H(le,V+"leave",G,n,C),z.target=fe,z.relatedTarget=K,le=null,Zl(C)===w&&(H=new H(B,V+"enter",Z,n,C),H.target=K,H.relatedTarget=fe,le=H),fe=le,G&&Z)t:{for(H=G,B=Z,V=0,K=H;K;K=ac(K))V++;for(K=0,le=B;le;le=ac(le))K++;for(;0<V-K;)H=ac(H),V--;for(;0<K-V;)B=ac(B),K--;for(;V--;){if(H===B||B!==null&&H===B.alternate)break t;H=ac(H),B=ac(B)}H=null}else H=null;G!==null&&zS(A,z,G,H,!1),Z!==null&&fe!==null&&zS(A,fe,Z,H,!0)}}e:{if(z=w?Pc(w):window,G=z.nodeName&&z.nodeName.toLowerCase(),G==="select"||G==="input"&&z.type==="file")var ue=n4;else if(ES(z))if(YC)ue=a4;else{ue=i4;var ge=r4}else(G=z.nodeName)&&G.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ue=o4);if(ue&&(ue=ue(e,w))){KC(A,ue,n,C);break e}ge&&ge(e,z,w),e==="focusout"&&(ge=z._wrapperState)&&ge.controlled&&z.type==="number"&&Wv(z,"number",z.value)}switch(ge=w?Pc(w):window,e){case"focusin":(ES(ge)||ge.contentEditable==="true")&&(Tc=ge,r1=w,Jd=null);break;case"focusout":Jd=r1=Tc=null;break;case"mousedown":i1=!0;break;case"contextmenu":case"mouseup":case"dragend":i1=!1,IS(A,n,C);break;case"selectionchange":if(u4)break;case"keydown":case"keyup":IS(A,n,C)}var ye;if(jx)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else kc?HC(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(ZC&&n.locale!=="ko"&&(kc||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&kc&&(ye=qC()):(Us=C,Vx="value"in Us?Us.value:Us.textContent,kc=!0)),ge=Eg(w,Ee),0<ge.length&&(Ee=new xS(Ee,e,null,n,C),A.push({event:Ee,listeners:ge}),ye?Ee.data=ye:(ye=XC(n),ye!==null&&(Ee.data=ye)))),(ye=YD?JD(e,n):QD(e,n))&&(w=Eg(w,"onBeforeInput"),0<w.length&&(C=new xS("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:w}),C.data=ye))}sP(A,t)})}function vf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Eg(e,t){for(var n=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=df(e,n),h!=null&&o.unshift(vf(e,h,l)),h=df(e,t),h!=null&&o.push(vf(e,h,l))),e=e.return}return o}function ac(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zS(e,t,n,o,l){for(var h=t._reactName,y=[];n!==null&&n!==o;){var u=n,S=u.alternate,w=u.stateNode;if(S!==null&&S===o)break;u.tag===5&&w!==null&&(u=w,l?(S=df(n,h),S!=null&&y.unshift(vf(n,S,u))):l||(S=df(n,h),S!=null&&y.push(vf(n,S,u)))),n=n.return}y.length!==0&&e.push({event:t,listeners:y})}var f4=/\r\n?/g,p4=/\u0000|\uFFFD/g;function DS(e){return(typeof e=="string"?e:""+e).replace(f4,`
`).replace(p4,"")}function pm(e,t,n){if(t=DS(t),DS(e)!==t&&n)throw Error(Ge(425))}function kg(){}var o1=null,a1=null;function s1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var l1=typeof setTimeout=="function"?setTimeout:void 0,m4=typeof clearTimeout=="function"?clearTimeout:void 0,RS=typeof Promise=="function"?Promise:void 0,g4=typeof queueMicrotask=="function"?queueMicrotask:typeof RS!="undefined"?function(e){return RS.resolve(null).then(e).catch(y4)}:l1;function y4(e){setTimeout(function(){throw e})}function G_(e,t){var n=t,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(o===0){e.removeChild(l),mf(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=l}while(n);mf(t)}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function LS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uh=Math.random().toString(36).slice(2),Ia="__reactFiber$"+uh,xf="__reactProps$"+uh,us="__reactContainer$"+uh,u1="__reactEvents$"+uh,_4="__reactListeners$"+uh,v4="__reactHandles$"+uh;function Zl(e){var t=e[Ia];if(t)return t;for(var n=e.parentNode;n;){if(t=n[us]||n[Ia]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=LS(e);e!==null;){if(n=e[Ia])return n;e=LS(e)}return t}e=n,n=e.parentNode}return null}function Uf(e){return e=e[Ia]||e[us],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function xy(e){return e[xf]||null}var c1=[],Ic=-1;function al(e){return{current:e}}function Gn(e){0>Ic||(e.current=c1[Ic],c1[Ic]=null,Ic--)}function Bn(e,t){Ic++,c1[Ic]=e.current,e.current=t}var tl={},xi=al(tl),Qi=al(!1),iu=tl;function Hc(e,t){var n=e.type.contextTypes;if(!n)return tl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in n)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function eo(e){return e=e.childContextTypes,e!=null}function Tg(){Gn(Qi),Gn(xi)}function FS(e,t,n){if(xi.current!==tl)throw Error(Ge(168));Bn(xi,t),Bn(Qi,n)}function uP(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(Ge(108,rD(e)||"Unknown",l));return sr({},n,o)}function Cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tl,iu=xi.current,Bn(xi,e),Bn(Qi,Qi.current),!0}function OS(e,t,n){var o=e.stateNode;if(!o)throw Error(Ge(169));n?(e=uP(e,t,iu),o.__reactInternalMemoizedMergedChildContext=e,Gn(Qi),Gn(xi),Bn(xi,e)):Gn(Qi),Bn(Qi,n)}var ns=null,wy=!1,W_=!1;function cP(e){ns===null?ns=[e]:ns.push(e)}function x4(e){wy=!0,cP(e)}function sl(){if(!W_&&ns!==null){W_=!0;var e=0,t=En;try{var n=ns;for(En=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}ns=null,wy=!1}catch(l){throw ns!==null&&(ns=ns.slice(e+1)),LC(Fx,sl),l}finally{En=t,W_=!1}}return null}var w4=ys.ReactCurrentBatchConfig;function sa(e,t){if(e&&e.defaultProps){t=sr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Pg=al(null),Ig=null,Mc=null,Wx=null;function qx(){Wx=Mc=Ig=null}function Zx(e){var t=Pg.current;Gn(Pg),e._currentValue=t}function h1(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Uc(e,t){Ig=e,Wx=Mc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ji=!0),e.firstContext=null)}function Xo(e){var t=e._currentValue;if(Wx!==e)if(e={context:e,memoizedValue:t,next:null},Mc===null){if(Ig===null)throw Error(Ge(308));Mc=e,Ig.dependencies={lanes:0,firstContext:e}}else Mc=Mc.next=e;return t}var ca=null,$s=!1;function Hx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,eI(e)?(e=n.interleaved,e===null?(t.next=t,ca===null?ca=[n]:ca.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function qm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Ox(e,n)}}function $S(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var l=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?l=h=y:h=h.next=y,n=n.next}while(n!==null);h===null?l=h=t:h=h.next=t}else l=h=t;n={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mg(e,t,n,o){var l=e.updateQueue;$s=!1;var h=l.firstBaseUpdate,y=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var S=u,w=S.next;S.next=null,y===null?h=w:y.next=w,y=S;var C=e.alternate;C!==null&&(C=C.updateQueue,u=C.lastBaseUpdate,u!==y&&(u===null?C.firstBaseUpdate=w:u.next=w,C.lastBaseUpdate=S))}if(h!==null){var A=l.baseState;y=0,C=w=S=null,u=h;do{var z=u.lane,G=u.eventTime;if((o&z)===z){C!==null&&(C=C.next={eventTime:G,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var Z=e,H=u;switch(z=t,G=n,H.tag){case 1:if(Z=H.payload,typeof Z=="function"){A=Z.call(G,A,z);break e}A=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=H.payload,z=typeof Z=="function"?Z.call(G,A,z):Z,z==null)break e;A=sr({},A,z);break e;case 2:$s=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,z=l.effects,z===null?l.effects=[u]:z.push(u))}else G={eventTime:G,lane:z,tag:u.tag,payload:u.payload,callback:u.callback,next:null},C===null?(w=C=G,S=A):C=C.next=G,y|=z;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;z=u,u=z.next,z.next=null,l.lastBaseUpdate=z,l.shared.pending=null}}while(1);if(C===null&&(S=A),l.baseState=S,l.firstBaseUpdate=w,l.lastBaseUpdate=C,t=l.shared.interleaved,t!==null){l=t;do y|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);su|=y,e.lanes=y,e.memoizedState=A}}function BS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=n,typeof l!="function")throw Error(Ge(191,l));l.call(o)}}}var dP=new pC.Component().refs;function d1(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:sr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var by={isMounted:function(e){return(e=e._reactInternals)?du(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Fi(),l=Ys(e),h=as(o,l);h.payload=t,n!=null&&(h.callback=n),Xs(e,h),t=Zo(e,l,o),t!==null&&qm(t,e,l)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Fi(),l=Ys(e),h=as(o,l);h.tag=1,h.payload=t,n!=null&&(h.callback=n),Xs(e,h),t=Zo(e,l,o),t!==null&&qm(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fi(),o=Ys(e),l=as(n,o);l.tag=2,t!=null&&(l.callback=t),Xs(e,l),t=Zo(e,o,n),t!==null&&qm(t,e,o)}};function VS(e,t,n,o,l,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,y):t.prototype&&t.prototype.isPureReactComponent?!yf(n,o)||!yf(l,h):!0}function fP(e,t,n){var o=!1,l=tl,h=t.contextType;return typeof h=="object"&&h!==null?h=Xo(h):(l=eo(t)?iu:xi.current,o=t.contextTypes,h=(o=o!=null)?Hc(e,l):tl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=by,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function NS(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&by.enqueueReplaceState(t,t.state,null)}function f1(e,t,n,o){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=dP,Hx(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Xo(h):(h=eo(t)?iu:xi.current,l.context=Hc(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(d1(e,t,h,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&by.enqueueReplaceState(l,l.state,null),Mg(e,n,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}var Ac=[],zc=0,Ag=null,zg=0,jo=[],Go=0,ou=null,is=1,os="";function Bl(e,t){Ac[zc++]=zg,Ac[zc++]=Ag,Ag=e,zg=t}function pP(e,t,n){jo[Go++]=is,jo[Go++]=os,jo[Go++]=ou,ou=e;var o=is;e=os;var l=32-da(o)-1;o&=~(1<<l),n+=1;var h=32-da(t)+l;if(30<h){var y=l-l%5;h=(o&(1<<y)-1).toString(32),o>>=y,l-=y,is=1<<32-da(t)+l|n<<l|o,os=h+e}else is=1<<h|n<<l|o,os=e}function Xx(e){e.return!==null&&(Bl(e,1),pP(e,1,0))}function Kx(e){for(;e===Ag;)Ag=Ac[--zc],Ac[zc]=null,zg=Ac[--zc],Ac[zc]=null;for(;e===ou;)ou=jo[--Go],jo[Go]=null,os=jo[--Go],jo[Go]=null,is=jo[--Go],jo[Go]=null}var bo=null,Yi=null,Yn=!1,ua=null;function mP(e,t){var n=Wo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function US(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bo=e,Yi=rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bo=e,Yi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ou!==null?{id:is,overflow:os}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bo=e,Yi=null,!0):!1;default:return!1}}function p1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m1(e){if(Yn){var t=Yi;if(t){var n=t;if(!US(e,t)){if(p1(e))throw Error(Ge(418));t=rs(n.nextSibling);var o=bo;t&&US(e,t)?mP(o,n):(e.flags=e.flags&-4097|2,Yn=!1,bo=e)}}else{if(p1(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Yn=!1,bo=e}}}function jS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bo=e}function Cd(e){if(e!==bo)return!1;if(!Yn)return jS(e),Yn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!s1(e.type,e.memoizedProps)),t&&(t=Yi)){if(p1(e)){for(e=Yi;e;)e=rs(e.nextSibling);throw Error(Ge(418))}for(;t;)mP(e,t),t=rs(t.nextSibling)}if(jS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yi=rs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yi=null}}else Yi=bo?rs(e.stateNode.nextSibling):null;return!0}function Xc(){Yi=bo=null,Yn=!1}function Yx(e){ua===null?ua=[e]:ua.push(e)}function Pd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ge(309));var o=n.stateNode}if(!o)throw Error(Ge(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(y){var u=l.refs;u===dP&&(u=l.refs={}),y===null?delete u[h]:u[h]=y},t._stringRef=h,t)}if(typeof e!="string")throw Error(Ge(284));if(!n._owner)throw Error(Ge(290,e))}return e}function mm(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GS(e){var t=e._init;return t(e._payload)}function gP(e){function t(B,V){if(e){var K=B.deletions;K===null?(B.deletions=[V],B.flags|=16):K.push(V)}}function n(B,V){if(!e)return null;for(;V!==null;)t(B,V),V=V.sibling;return null}function o(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function l(B,V){return B=nl(B,V),B.index=0,B.sibling=null,B}function h(B,V,K){return B.index=K,e?(K=B.alternate,K!==null?(K=K.index,K<V?(B.flags|=2,V):K):(B.flags|=2,V)):(B.flags|=1048576,V)}function y(B){return e&&B.alternate===null&&(B.flags|=2),B}function u(B,V,K,le){return V===null||V.tag!==6?(V=Y_(K,B.mode,le),V.return=B,V):(V=l(V,K),V.return=B,V)}function S(B,V,K,le){var ue=K.type;return ue===Ec?C(B,V,K.props.children,le,K.key):V!==null&&(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Os&&GS(ue)===V.type)?(le=l(V,K.props),le.ref=Pd(B,V,K),le.return=B,le):(le=Ym(K.type,K.key,K.props,null,B.mode,le),le.ref=Pd(B,V,K),le.return=B,le)}function w(B,V,K,le){return V===null||V.tag!==4||V.stateNode.containerInfo!==K.containerInfo||V.stateNode.implementation!==K.implementation?(V=J_(K,B.mode,le),V.return=B,V):(V=l(V,K.children||[]),V.return=B,V)}function C(B,V,K,le,ue){return V===null||V.tag!==7?(V=Jl(K,B.mode,le,ue),V.return=B,V):(V=l(V,K),V.return=B,V)}function A(B,V,K){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Y_(""+V,B.mode,K),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case om:return K=Ym(V.type,V.key,V.props,null,B.mode,K),K.ref=Pd(B,null,V),K.return=B,K;case Sc:return V=J_(V,B.mode,K),V.return=B,V;case Os:var le=V._init;return A(B,le(V._payload),K)}if($d(V)||bd(V))return V=Jl(V,B.mode,K,null),V.return=B,V;mm(B,V)}return null}function z(B,V,K,le){var ue=V!==null?V.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ue!==null?null:u(B,V,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case om:return K.key===ue?S(B,V,K,le):null;case Sc:return K.key===ue?w(B,V,K,le):null;case Os:return ue=K._init,z(B,V,ue(K._payload),le)}if($d(K)||bd(K))return ue!==null?null:C(B,V,K,le,null);mm(B,K)}return null}function G(B,V,K,le,ue){if(typeof le=="string"&&le!==""||typeof le=="number")return B=B.get(K)||null,u(V,B,""+le,ue);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case om:return B=B.get(le.key===null?K:le.key)||null,S(V,B,le,ue);case Sc:return B=B.get(le.key===null?K:le.key)||null,w(V,B,le,ue);case Os:var ge=le._init;return G(B,V,K,ge(le._payload),ue)}if($d(le)||bd(le))return B=B.get(K)||null,C(V,B,le,ue,null);mm(V,le)}return null}function Z(B,V,K,le){for(var ue=null,ge=null,ye=V,Ee=V=0,je=null;ye!==null&&Ee<K.length;Ee++){ye.index>Ee?(je=ye,ye=null):je=ye.sibling;var ke=z(B,ye,K[Ee],le);if(ke===null){ye===null&&(ye=je);break}e&&ye&&ke.alternate===null&&t(B,ye),V=h(ke,V,Ee),ge===null?ue=ke:ge.sibling=ke,ge=ke,ye=je}if(Ee===K.length)return n(B,ye),Yn&&Bl(B,Ee),ue;if(ye===null){for(;Ee<K.length;Ee++)ye=A(B,K[Ee],le),ye!==null&&(V=h(ye,V,Ee),ge===null?ue=ye:ge.sibling=ye,ge=ye);return Yn&&Bl(B,Ee),ue}for(ye=o(B,ye);Ee<K.length;Ee++)je=G(ye,B,Ee,K[Ee],le),je!==null&&(e&&je.alternate!==null&&ye.delete(je.key===null?Ee:je.key),V=h(je,V,Ee),ge===null?ue=je:ge.sibling=je,ge=je);return e&&ye.forEach(function(Ve){return t(B,Ve)}),Yn&&Bl(B,Ee),ue}function H(B,V,K,le){var ue=bd(K);if(typeof ue!="function")throw Error(Ge(150));if(K=ue.call(K),K==null)throw Error(Ge(151));for(var ge=ue=null,ye=V,Ee=V=0,je=null,ke=K.next();ye!==null&&!ke.done;Ee++,ke=K.next()){ye.index>Ee?(je=ye,ye=null):je=ye.sibling;var Ve=z(B,ye,ke.value,le);if(Ve===null){ye===null&&(ye=je);break}e&&ye&&Ve.alternate===null&&t(B,ye),V=h(Ve,V,Ee),ge===null?ue=Ve:ge.sibling=Ve,ge=Ve,ye=je}if(ke.done)return n(B,ye),Yn&&Bl(B,Ee),ue;if(ye===null){for(;!ke.done;Ee++,ke=K.next())ke=A(B,ke.value,le),ke!==null&&(V=h(ke,V,Ee),ge===null?ue=ke:ge.sibling=ke,ge=ke);return Yn&&Bl(B,Ee),ue}for(ye=o(B,ye);!ke.done;Ee++,ke=K.next())ke=G(ye,B,Ee,ke.value,le),ke!==null&&(e&&ke.alternate!==null&&ye.delete(ke.key===null?Ee:ke.key),V=h(ke,V,Ee),ge===null?ue=ke:ge.sibling=ke,ge=ke);return e&&ye.forEach(function($t){return t(B,$t)}),Yn&&Bl(B,Ee),ue}function fe(B,V,K,le){if(typeof K=="object"&&K!==null&&K.type===Ec&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case om:e:{for(var ue=K.key,ge=V;ge!==null;){if(ge.key===ue){if(ue=K.type,ue===Ec){if(ge.tag===7){n(B,ge.sibling),V=l(ge,K.props.children),V.return=B,B=V;break e}}else if(ge.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Os&&GS(ue)===ge.type){n(B,ge.sibling),V=l(ge,K.props),V.ref=Pd(B,ge,K),V.return=B,B=V;break e}n(B,ge);break}else t(B,ge);ge=ge.sibling}K.type===Ec?(V=Jl(K.props.children,B.mode,le,K.key),V.return=B,B=V):(le=Ym(K.type,K.key,K.props,null,B.mode,le),le.ref=Pd(B,V,K),le.return=B,B=le)}return y(B);case Sc:e:{for(ge=K.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===K.containerInfo&&V.stateNode.implementation===K.implementation){n(B,V.sibling),V=l(V,K.children||[]),V.return=B,B=V;break e}else{n(B,V);break}else t(B,V);V=V.sibling}V=J_(K,B.mode,le),V.return=B,B=V}return y(B);case Os:return ge=K._init,fe(B,V,ge(K._payload),le)}if($d(K))return Z(B,V,K,le);if(bd(K))return H(B,V,K,le);mm(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,V!==null&&V.tag===6?(n(B,V.sibling),V=l(V,K),V.return=B,B=V):(n(B,V),V=Y_(K,B.mode,le),V.return=B,B=V),y(B)):n(B,V)}return fe}var Kc=gP(!0),yP=gP(!1),jf={},Da=al(jf),wf=al(jf),bf=al(jf);function Hl(e){if(e===jf)throw Error(Ge(174));return e}function Jx(e,t){switch(Bn(bf,t),Bn(wf,e),Bn(Da,jf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zv(t,e)}Gn(Da),Bn(Da,t)}function Yc(){Gn(Da),Gn(wf),Gn(bf)}function _P(e){Hl(bf.current);var t=Hl(Da.current),n=Zv(t,e.type);t!==n&&(Bn(wf,e),Bn(Da,n))}function Qx(e){wf.current===e&&(Gn(Da),Gn(wf))}var or=al(0);function Dg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var q_=[];function ew(){for(var e=0;e<q_.length;e++)q_[e]._workInProgressVersionPrimary=null;q_.length=0}var Zm=ys.ReactCurrentDispatcher,Z_=ys.ReactCurrentBatchConfig,au=0,ar=null,zr=null,Wr=null,Rg=!1,Qd=!1,Sf=0,b4=0;function mi(){throw Error(Ge(321))}function tw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fa(e[n],t[n]))return!1;return!0}function nw(e,t,n,o,l,h){if(au=h,ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zm.current=e===null||e.memoizedState===null?T4:C4,e=n(o,l),Qd){h=0;do{if(Qd=!1,Sf=0,25<=h)throw Error(Ge(301));h+=1,Wr=zr=null,t.updateQueue=null,Zm.current=P4,e=n(o,l)}while(Qd)}if(Zm.current=Lg,t=zr!==null&&zr.next!==null,au=0,Wr=zr=ar=null,Rg=!1,t)throw Error(Ge(300));return e}function rw(){var e=Sf!==0;return Sf=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?ar.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function Ko(){if(zr===null){var e=ar.alternate;e=e!==null?e.memoizedState:null}else e=zr.next;var t=Wr===null?ar.memoizedState:Wr.next;if(t!==null)Wr=t,zr=e;else{if(e===null)throw Error(Ge(310));zr=e,e={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},Wr===null?ar.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function Ef(e,t){return typeof t=="function"?t(e):t}function H_(e){var t=Ko(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var o=zr,l=o.baseQueue,h=n.pending;if(h!==null){if(l!==null){var y=l.next;l.next=h.next,h.next=y}o.baseQueue=l=h,n.pending=null}if(l!==null){h=l.next,o=o.baseState;var u=y=null,S=null,w=h;do{var C=w.lane;if((au&C)===C)S!==null&&(S=S.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var A={lane:C,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};S===null?(u=S=A,y=o):S=S.next=A,ar.lanes|=C,su|=C}w=w.next}while(w!==null&&w!==h);S===null?y=o:S.next=u,fa(o,t.memoizedState)||(Ji=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=S,n.lastRenderedState=o}if(e=n.interleaved,e!==null){l=e;do h=l.lane,ar.lanes|=h,su|=h,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function X_(e){var t=Ko(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var o=n.dispatch,l=n.pending,h=t.memoizedState;if(l!==null){n.pending=null;var y=l=l.next;do h=e(h,y.action),y=y.next;while(y!==l);fa(h,t.memoizedState)||(Ji=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,o]}function vP(){}function xP(e,t){var n=ar,o=Ko(),l=t(),h=!fa(o.memoizedState,l);if(h&&(o.memoizedState=l,Ji=!0),o=o.queue,iw(SP.bind(null,n,o,e),[e]),o.getSnapshot!==t||h||Wr!==null&&Wr.memoizedState.tag&1){if(n.flags|=2048,kf(9,bP.bind(null,n,o,l,t),void 0,null),Lr===null)throw Error(Ge(349));(au&30)!==0||wP(n,t,l)}return l}function wP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ar.updateQueue,t===null?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bP(e,t,n,o){t.value=n,t.getSnapshot=o,EP(t)&&Zo(e,1,-1)}function SP(e,t,n){return n(function(){EP(t)&&Zo(e,1,-1)})}function EP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fa(e,n)}catch{return!0}}function WS(e){var t=Ta();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:e},t.queue=e,e=e.dispatch=k4.bind(null,ar,e),[t.memoizedState,e]}function kf(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=ar.updateQueue,t===null?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function kP(){return Ko().memoizedState}function Hm(e,t,n,o){var l=Ta();ar.flags|=e,l.memoizedState=kf(1|t,n,void 0,o===void 0?null:o)}function Sy(e,t,n,o){var l=Ko();o=o===void 0?null:o;var h=void 0;if(zr!==null){var y=zr.memoizedState;if(h=y.destroy,o!==null&&tw(o,y.deps)){l.memoizedState=kf(t,n,h,o);return}}ar.flags|=e,l.memoizedState=kf(1|t,n,h,o)}function qS(e,t){return Hm(8390656,8,e,t)}function iw(e,t){return Sy(2048,8,e,t)}function TP(e,t){return Sy(4,2,e,t)}function CP(e,t){return Sy(4,4,e,t)}function PP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function IP(e,t,n){return n=n!=null?n.concat([e]):null,Sy(4,4,PP.bind(null,t,e),n)}function ow(){}function MP(e,t){var n=Ko();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&tw(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function AP(e,t){var n=Ko();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&tw(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function zP(e,t,n){return(au&21)===0?(e.baseState&&(e.baseState=!1,Ji=!0),e.memoizedState=n):(fa(n,t)||(n=$C(),ar.lanes|=n,su|=n,e.baseState=!0),t)}function S4(e,t){var n=En;En=n!==0&&4>n?n:4,e(!0);var o=Z_.transition;Z_.transition={};try{e(!1),t()}finally{En=n,Z_.transition=o}}function DP(){return Ko().memoizedState}function E4(e,t,n){var o=Ys(e);n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},RP(e)?LP(t,n):(FP(e,t,n),n=Fi(),e=Zo(e,o,n),e!==null&&OP(e,t,o))}function k4(e,t,n){var o=Ys(e),l={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(RP(e))LP(t,l);else{FP(e,t,l);var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,u=h(y,n);if(l.hasEagerState=!0,l.eagerState=u,fa(u,y))return}catch{}finally{}n=Fi(),e=Zo(e,o,n),e!==null&&OP(e,t,o)}}function RP(e){var t=e.alternate;return e===ar||t!==null&&t===ar}function LP(e,t){Qd=Rg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function FP(e,t,n){eI(e)?(e=t.interleaved,e===null?(n.next=n,ca===null?ca=[t]:ca.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function OP(e,t,n){if((n&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Ox(e,n)}}var Lg={readContext:Xo,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},T4={readContext:Xo,useCallback:function(e,t){return Ta().memoizedState=[e,t===void 0?null:t],e},useContext:Xo,useEffect:qS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hm(4194308,4,PP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hm(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Ta();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=E4.bind(null,ar,e),[o.memoizedState,e]},useRef:function(e){var t=Ta();return e={current:e},t.memoizedState=e},useState:WS,useDebugValue:ow,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=WS(!1),t=e[0];return e=S4.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ar,l=Ta();if(Yn){if(n===void 0)throw Error(Ge(407));n=n()}else{if(n=t(),Lr===null)throw Error(Ge(349));(au&30)!==0||wP(o,t,n)}l.memoizedState=n;var h={value:n,getSnapshot:t};return l.queue=h,qS(SP.bind(null,o,h,e),[e]),o.flags|=2048,kf(9,bP.bind(null,o,h,n,t),void 0,null),n},useId:function(){var e=Ta(),t=Lr.identifierPrefix;if(Yn){var n=os,o=is;n=(o&~(1<<32-da(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=Sf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=b4++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},C4={readContext:Xo,useCallback:MP,useContext:Xo,useEffect:iw,useImperativeHandle:IP,useInsertionEffect:TP,useLayoutEffect:CP,useMemo:AP,useReducer:H_,useRef:kP,useState:function(){return H_(Ef)},useDebugValue:ow,useDeferredValue:function(e){var t=Ko();return zP(t,zr.memoizedState,e)},useTransition:function(){var e=H_(Ef)[0],t=Ko().memoizedState;return[e,t]},useMutableSource:vP,useSyncExternalStore:xP,useId:DP,unstable_isNewReconciler:!1},P4={readContext:Xo,useCallback:MP,useContext:Xo,useEffect:iw,useImperativeHandle:IP,useInsertionEffect:TP,useLayoutEffect:CP,useMemo:AP,useReducer:X_,useRef:kP,useState:function(){return X_(Ef)},useDebugValue:ow,useDeferredValue:function(e){var t=Ko();return zr===null?t.memoizedState=e:zP(t,zr.memoizedState,e)},useTransition:function(){var e=X_(Ef)[0],t=Ko().memoizedState;return[e,t]},useMutableSource:vP,useSyncExternalStore:xP,useId:DP,unstable_isNewReconciler:!1};function aw(e,t){try{var n="",o=t;do n+=nD(o),o=o.return;while(o);var l=n}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l}}function g1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var I4=typeof WeakMap=="function"?WeakMap:Map;function $P(e,t,n){n=as(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Og||(Og=!0,k1=o),g1(e,t)},n}function BP(e,t,n){n=as(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;n.payload=function(){return o(l)},n.callback=function(){g1(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){g1(e,t),typeof o!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),n}function ZS(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new I4;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(n)||(l.add(n),e=U4.bind(null,e,t,n),t.then(e,e))}function HS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function XS(e,t,n,o,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=as(-1,1),t.tag=2,Xs(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var VP,y1,NP,UP;VP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y1=function(){};NP=function(e,t,n,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,Hl(Da.current);var h=null;switch(n){case"input":l=jv(e,l),o=jv(e,o),h=[];break;case"select":l=sr({},l,{value:void 0}),o=sr({},o,{value:void 0}),h=[];break;case"textarea":l=qv(e,l),o=qv(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=kg)}Hv(n,o);var y;n=null;for(w in l)if(!o.hasOwnProperty(w)&&l.hasOwnProperty(w)&&l[w]!=null)if(w==="style"){var u=l[w];for(y in u)u.hasOwnProperty(y)&&(n||(n={}),n[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(cf.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in o){var S=o[w];if(u=l!=null?l[w]:void 0,o.hasOwnProperty(w)&&S!==u&&(S!=null||u!=null))if(w==="style")if(u){for(y in u)!u.hasOwnProperty(y)||S&&S.hasOwnProperty(y)||(n||(n={}),n[y]="");for(y in S)S.hasOwnProperty(y)&&u[y]!==S[y]&&(n||(n={}),n[y]=S[y])}else n||(h||(h=[]),h.push(w,n)),n=S;else w==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(h=h||[]).push(w,S)):w==="children"?typeof S!="string"&&typeof S!="number"||(h=h||[]).push(w,""+S):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(cf.hasOwnProperty(w)?(S!=null&&w==="onScroll"&&Un("scroll",e),h||u===S||(h=[])):(h=h||[]).push(w,S))}n&&(h=h||[]).push("style",n);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};UP=function(e,t,n,o){n!==o&&(t.flags|=4)};function Id(e,t){if(!Yn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function M4(e,t,n){var o=t.pendingProps;switch(Kx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(t),null;case 1:return eo(t.type)&&Tg(),gi(t),null;case 3:return o=t.stateNode,Yc(),Gn(Qi),Gn(xi),ew(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Cd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ua!==null&&(P1(ua),ua=null))),y1(e,t),gi(t),null;case 5:Qx(t);var l=Hl(bf.current);if(n=t.type,e!==null&&t.stateNode!=null)NP(e,t,n,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ge(166));return gi(t),null}if(e=Hl(Da.current),Cd(t)){o=t.stateNode,n=t.type;var h=t.memoizedProps;switch(o[Ia]=t,o[xf]=h,e=(t.mode&1)!==0,n){case"dialog":Un("cancel",o),Un("close",o);break;case"iframe":case"object":case"embed":Un("load",o);break;case"video":case"audio":for(l=0;l<Vd.length;l++)Un(Vd[l],o);break;case"source":Un("error",o);break;case"img":case"image":case"link":Un("error",o),Un("load",o);break;case"details":Un("toggle",o);break;case"input":uS(o,h),Un("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Un("invalid",o);break;case"textarea":hS(o,h),Un("invalid",o)}Hv(n,h),l=null;for(var y in h)if(h.hasOwnProperty(y)){var u=h[y];y==="children"?typeof u=="string"?o.textContent!==u&&(h.suppressHydrationWarning!==!0&&pm(o.textContent,u,e),l=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&pm(o.textContent,u,e),l=["children",""+u]):cf.hasOwnProperty(y)&&u!=null&&y==="onScroll"&&Un("scroll",o)}switch(n){case"input":am(o),cS(o,h,!0);break;case"textarea":am(o),dS(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=kg)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(n,{is:o.is}):(e=y.createElement(n),n==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,n),e[Ia]=t,e[xf]=o,VP(e,t,!1,!1),t.stateNode=e;e:{switch(y=Xv(n,o),n){case"dialog":Un("cancel",e),Un("close",e),l=o;break;case"iframe":case"object":case"embed":Un("load",e),l=o;break;case"video":case"audio":for(l=0;l<Vd.length;l++)Un(Vd[l],e);l=o;break;case"source":Un("error",e),l=o;break;case"img":case"image":case"link":Un("error",e),Un("load",e),l=o;break;case"details":Un("toggle",e),l=o;break;case"input":uS(e,o),l=jv(e,o),Un("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=sr({},o,{value:void 0}),Un("invalid",e);break;case"textarea":hS(e,o),l=qv(e,o),Un("invalid",e);break;default:l=o}Hv(n,l),u=l;for(h in u)if(u.hasOwnProperty(h)){var S=u[h];h==="style"?TC(e,S):h==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&EC(e,S)):h==="children"?typeof S=="string"?(n!=="textarea"||S!=="")&&hf(e,S):typeof S=="number"&&hf(e,""+S):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(cf.hasOwnProperty(h)?S!=null&&h==="onScroll"&&Un("scroll",e):S!=null&&Ax(e,h,S,y))}switch(n){case"input":am(e),cS(e,o,!1);break;case"textarea":am(e),dS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+el(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?$c(e,!!o.multiple,h,!1):o.defaultValue!=null&&$c(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=kg)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gi(t),null;case 6:if(e&&t.stateNode!=null)UP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ge(166));if(n=Hl(bf.current),Hl(Da.current),Cd(t)){if(o=t.stateNode,n=t.memoizedProps,o[Ia]=t,(h=o.nodeValue!==n)&&(e=bo,e!==null))switch(e.tag){case 3:pm(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pm(o.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Ia]=t,t.stateNode=o}return gi(t),null;case 13:if(Gn(or),o=t.memoizedState,Yn&&Yi!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(o=Yi;o;)o=rs(o.nextSibling);return Xc(),t.flags|=98560,t}if(o!==null&&o.dehydrated!==null){if(o=Cd(t),e===null){if(!o)throw Error(Ge(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ge(317));o[Ia]=t}else Xc(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return gi(t),null}return ua!==null&&(P1(ua),ua=null),(t.flags&128)!==0?(t.lanes=n,t):(o=o!==null,n=!1,e===null?Cd(t):n=e.memoizedState!==null,o!==n&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(or.current&1)!==0?Dr===0&&(Dr=3):dw())),t.updateQueue!==null&&(t.flags|=4),gi(t),null);case 4:return Yc(),y1(e,t),e===null&&_f(t.stateNode.containerInfo),gi(t),null;case 10:return Zx(t.type._context),gi(t),null;case 17:return eo(t.type)&&Tg(),gi(t),null;case 19:if(Gn(or),h=t.memoizedState,h===null)return gi(t),null;if(o=(t.flags&128)!==0,y=h.rendering,y===null)if(o)Id(h,!1);else{if(Dr!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=Dg(e),y!==null){for(t.flags|=128,Id(h,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)h=n,e=o,h.flags&=14680066,y=h.alternate,y===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=y.childLanes,h.lanes=y.lanes,h.child=y.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=y.memoizedProps,h.memoizedState=y.memoizedState,h.updateQueue=y.updateQueue,h.type=y.type,e=y.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bn(or,or.current&1|2),t.child}e=e.sibling}h.tail!==null&&xr()>Jc&&(t.flags|=128,o=!0,Id(h,!1),t.lanes=4194304)}else{if(!o)if(e=Dg(y),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Id(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!Yn)return gi(t),null}else 2*xr()-h.renderingStartTime>Jc&&n!==1073741824&&(t.flags|=128,o=!0,Id(h,!1),t.lanes=4194304);h.isBackwards?(y.sibling=t.child,t.child=y):(n=h.last,n!==null?n.sibling=y:t.child=y,h.last=y)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=xr(),t.sibling=null,n=or.current,Bn(or,o?n&1|2:n&1),t):(gi(t),null);case 22:case 23:return hw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(ho&1073741824)!==0&&(gi(t),t.subtreeFlags&6&&(t.flags|=8192)):gi(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}var A4=ys.ReactCurrentOwner,Ji=!1;function Di(e,t,n,o){t.child=e===null?yP(t,null,n,o):Kc(t,e.child,n,o)}function KS(e,t,n,o,l){n=n.render;var h=t.ref;return Uc(t,l),o=nw(e,t,n,o,h,l),n=rw(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,cs(e,t,l)):(Yn&&n&&Xx(t),t.flags|=1,Di(e,t,o,l),t.child)}function YS(e,t,n,o,l){if(e===null){var h=n.type;return typeof h=="function"&&!fw(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,jP(e,t,h,o,l)):(e=Ym(n.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var y=h.memoizedProps;if(n=n.compare,n=n!==null?n:yf,n(y,o)&&e.ref===t.ref)return cs(e,t,l)}return t.flags|=1,e=nl(h,o),e.ref=t.ref,e.return=t,t.child=e}function jP(e,t,n,o,l){if(e!==null){var h=e.memoizedProps;if(yf(h,o)&&e.ref===t.ref)if(Ji=!1,t.pendingProps=o=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Ji=!0);else return t.lanes=e.lanes,cs(e,t,l)}return _1(e,t,n,o,l)}function GP(e,t,n){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(Rc,ho),ho|=n;else if((n&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:n,Bn(Rc,ho),ho|=o;else return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bn(Rc,ho),ho|=e,null;else h!==null?(o=h.baseLanes|n,t.memoizedState=null):o=n,Bn(Rc,ho),ho|=o;return Di(e,t,l,n),t.child}function WP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _1(e,t,n,o,l){var h=eo(n)?iu:xi.current;return h=Hc(t,h),Uc(t,l),n=nw(e,t,n,o,h,l),o=rw(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,cs(e,t,l)):(Yn&&o&&Xx(t),t.flags|=1,Di(e,t,n,l),t.child)}function JS(e,t,n,o,l){if(eo(n)){var h=!0;Cg(t)}else h=!1;if(Uc(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),fP(t,n,o),f1(t,n,o,l),o=!0;else if(e===null){var y=t.stateNode,u=t.memoizedProps;y.props=u;var S=y.context,w=n.contextType;typeof w=="object"&&w!==null?w=Xo(w):(w=eo(n)?iu:xi.current,w=Hc(t,w));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function";A||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(u!==o||S!==w)&&NS(t,y,o,w),$s=!1;var z=t.memoizedState;y.state=z,Mg(t,o,y,l),S=t.memoizedState,u!==o||z!==S||Qi.current||$s?(typeof C=="function"&&(d1(t,n,C,o),S=t.memoizedState),(u=$s||VS(t,n,u,o,z,S,w))?(A||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=S),y.props=o,y.state=S,y.context=w,o=u):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,hP(e,t),u=t.memoizedProps,w=t.type===t.elementType?u:sa(t.type,u),y.props=w,A=t.pendingProps,z=y.context,S=n.contextType,typeof S=="object"&&S!==null?S=Xo(S):(S=eo(n)?iu:xi.current,S=Hc(t,S));var G=n.getDerivedStateFromProps;(C=typeof G=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(u!==A||z!==S)&&NS(t,y,o,S),$s=!1,z=t.memoizedState,y.state=z,Mg(t,o,y,l);var Z=t.memoizedState;u!==A||z!==Z||Qi.current||$s?(typeof G=="function"&&(d1(t,n,G,o),Z=t.memoizedState),(w=$s||VS(t,n,w,o,z,Z,S)||!1)?(C||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,Z,S),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,Z,S)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Z),y.props=o,y.state=Z,y.context=S,o=w):(typeof y.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return v1(e,t,n,o,h,l)}function v1(e,t,n,o,l,h){WP(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return l&&OS(t,n,!1),cs(e,t,h);o=t.stateNode,A4.current=t;var u=y&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=Kc(t,e.child,null,h),t.child=Kc(t,null,u,h)):Di(e,t,u,h),t.memoizedState=o.state,l&&OS(t,n,!0),t.child}function qP(e){var t=e.stateNode;t.pendingContext?FS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&FS(e,t.context,!1),Jx(e,t.containerInfo)}function QS(e,t,n,o,l){return Xc(),Yx(l),t.flags|=256,Di(e,t,n,o),t.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function ym(e){return{baseLanes:e,cachePool:null,transitions:null}}function eE(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function ZP(e,t,n){var o=t.pendingProps,l=or.current,h=!1,y=(t.flags&128)!==0,u;if((u=y)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Bn(or,l&1),e===null)return m1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,h?(o=t.mode,h=t.child,l={mode:"hidden",children:l},(o&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=l):h=Vg(l,o,0,null),e=Jl(e,o,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=ym(n),t.memoizedState=gm,e):x1(t,l));if(l=e.memoizedState,l!==null){if(u=l.dehydrated,u!==null){if(y)return t.flags&256?(t.flags&=-257,_m(e,t,n,Error(Ge(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=Vg({mode:"visible",children:o.children},l,0,null),h=Jl(h,l,n,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,(t.mode&1)!==0&&Kc(t,e.child,null,n),t.child.memoizedState=ym(n),t.memoizedState=gm,h);if((t.mode&1)===0)t=_m(e,t,n,null);else if(u.data==="$!")t=_m(e,t,n,Error(Ge(419)));else if(o=(n&e.childLanes)!==0,Ji||o){if(o=Lr,o!==null){switch(n&-n){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}o=(h&(o.suspendedLanes|n))!==0?0:h,o!==0&&o!==l.retryLane&&(l.retryLane=o,Zo(e,o,-1))}dw(),t=_m(e,t,n,Error(Ge(421)))}else u.data==="$?"?(t.flags|=128,t.child=e.child,t=j4.bind(null,e),u._reactRetry=t,t=null):(n=l.treeContext,Yi=rs(u.nextSibling),bo=t,Yn=!0,ua=null,n!==null&&(jo[Go++]=is,jo[Go++]=os,jo[Go++]=ou,is=n.id,os=n.overflow,ou=t),t=x1(t,t.pendingProps.children),t.flags|=4096);return t}return h?(o=nE(e,t,o.children,o.fallback,n),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?ym(n):eE(l,n),h.childLanes=e.childLanes&~n,t.memoizedState=gm,o):(n=tE(e,t,o.children,n),t.memoizedState=null,n)}return h?(o=nE(e,t,o.children,o.fallback,n),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?ym(n):eE(l,n),h.childLanes=e.childLanes&~n,t.memoizedState=gm,o):(n=tE(e,t,o.children,n),t.memoizedState=null,n)}function x1(e,t){return t=Vg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tE(e,t,n,o){var l=e.child;return e=l.sibling,n=nl(l,{mode:"visible",children:n}),(t.mode&1)===0&&(n.lanes=o),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n}function nE(e,t,n,o,l){var h=t.mode;e=e.child;var y=e.sibling,u={mode:"hidden",children:n};return(h&1)===0&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=nl(e,u),n.subtreeFlags=e.subtreeFlags&14680064),y!==null?o=nl(y,o):(o=Jl(o,h,l,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,o}function _m(e,t,n,o){return o!==null&&Yx(o),Kc(t,e.child,null,n),e=x1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rE(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),h1(e.return,t,n)}function K_(e,t,n,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=n,h.tailMode=l)}function HP(e,t,n){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(Di(e,t,o.children,n),o=or.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rE(e,n,t);else if(e.tag===19)rE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Bn(or,o),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Dg(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),K_(t,!1,l,n,h);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Dg(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}K_(t,!0,n,null,h);break;case"together":K_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),su|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,n=nl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function z4(e,t,n){switch(t.tag){case 3:qP(t),Xc();break;case 5:_P(t);break;case 1:eo(t.type)&&Cg(t);break;case 4:Jx(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Bn(Pg,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Bn(or,or.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?ZP(e,t,n):(Bn(or,or.current&1),e=cs(e,t,n),e!==null?e.sibling:null);Bn(or,or.current&1);break;case 19:if(o=(n&t.childLanes)!==0,(e.flags&128)!==0){if(o)return HP(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Bn(or,or.current),o)break;return null;case 22:case 23:return t.lanes=0,GP(e,t,n)}return cs(e,t,n)}function D4(e,t){switch(Kx(t),t.tag){case 1:return eo(t.type)&&Tg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yc(),Gn(Qi),Gn(xi),ew(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Qx(t),null;case 13:if(Gn(or),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Xc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Gn(or),null;case 4:return Yc(),null;case 10:return Zx(t.type._context),null;case 22:case 23:return hw(),null;case 24:return null;default:return null}}var vm=!1,_i=!1,R4=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Dc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){fr(e,t,o)}else n.current=null}function w1(e,t,n){try{n()}catch(o){fr(e,t,o)}}var iE=!1;function L4(e,t){if(o1=bg,e=eP(),Gx(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var y=0,u=-1,S=-1,w=0,C=0,A=e,z=null;t:for(;;){for(var G;A!==n||l!==0&&A.nodeType!==3||(u=y+l),A!==h||o!==0&&A.nodeType!==3||(S=y+o),A.nodeType===3&&(y+=A.nodeValue.length),(G=A.firstChild)!==null;)z=A,A=G;for(;;){if(A===e)break t;if(z===n&&++w===l&&(u=y),z===h&&++C===o&&(S=y),(G=A.nextSibling)!==null)break;A=z,z=A.parentNode}A=G}n=u===-1||S===-1?null:{start:u,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(a1={focusedElem:e,selectionRange:n},bg=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){t=dt;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var H=Z.memoizedProps,fe=Z.memoizedState,B=t.stateNode,V=B.getSnapshotBeforeUpdate(t.elementType===t.type?H:sa(t.type,H),fe);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var K=t.stateNode.containerInfo;if(K.nodeType===1)K.textContent="";else if(K.nodeType===9){var le=K.body;le!=null&&(le.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(ue){fr(t,t.return,ue)}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}return Z=iE,iE=!1,Z}function ef(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&w1(t,n,h)}l=l.next}while(l!==o)}}function Ey(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function b1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function XP(e){var t=e.alternate;t!==null&&(e.alternate=null,XP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ia],delete t[xf],delete t[u1],delete t[_4],delete t[v4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KP(e){return e.tag===5||e.tag===3||e.tag===4}function oE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function S1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kg));else if(o!==4&&(e=e.child,e!==null))for(S1(e,t,n),e=e.sibling;e!==null;)S1(e,t,n),e=e.sibling}function E1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(E1(e,t,n),e=e.sibling;e!==null;)E1(e,t,n),e=e.sibling}var Qr=null,la=!1;function Rs(e,t,n){for(n=n.child;n!==null;)YP(e,t,n),n=n.sibling}function YP(e,t,n){if(za&&typeof za.onCommitFiberUnmount=="function")try{za.onCommitFiberUnmount(gy,n)}catch{}switch(n.tag){case 5:_i||Dc(n,t);case 6:var o=Qr,l=la;Qr=null,Rs(e,t,n),Qr=o,la=l,Qr!==null&&(la?(e=Qr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qr.removeChild(n.stateNode));break;case 18:Qr!==null&&(la?(e=Qr,n=n.stateNode,e.nodeType===8?G_(e.parentNode,n):e.nodeType===1&&G_(e,n),mf(e)):G_(Qr,n.stateNode));break;case 4:o=Qr,l=la,Qr=n.stateNode.containerInfo,la=!0,Rs(e,t,n),Qr=o,la=l;break;case 0:case 11:case 14:case 15:if(!_i&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,y=h.destroy;h=h.tag,y!==void 0&&((h&2)!==0||(h&4)!==0)&&w1(n,t,y),l=l.next}while(l!==o)}Rs(e,t,n);break;case 1:if(!_i&&(Dc(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){fr(n,t,u)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(_i=(o=_i)||n.memoizedState!==null,Rs(e,t,n),_i=o):Rs(e,t,n);break;default:Rs(e,t,n)}}function aE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new R4),t.forEach(function(o){var l=G4.bind(null,e,o);n.has(o)||(n.add(o),o.then(l,l))})}}function ia(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var l=n[o];try{var h=e,y=t,u=y;e:for(;u!==null;){switch(u.tag){case 5:Qr=u.stateNode,la=!1;break e;case 3:Qr=u.stateNode.containerInfo,la=!0;break e;case 4:Qr=u.stateNode.containerInfo,la=!0;break e}u=u.return}if(Qr===null)throw Error(Ge(160));YP(h,y,l),Qr=null,la=!1;var S=l.alternate;S!==null&&(S.return=null),l.return=null}catch(w){fr(l,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JP(t,e),t=t.sibling}function JP(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ia(t,e),Sa(e),o&4){try{ef(3,e,e.return),Ey(3,e)}catch(Z){fr(e,e.return,Z)}try{ef(5,e,e.return)}catch(Z){fr(e,e.return,Z)}}break;case 1:ia(t,e),Sa(e),o&512&&n!==null&&Dc(n,n.return);break;case 5:if(ia(t,e),Sa(e),o&512&&n!==null&&Dc(n,n.return),e.flags&32){var l=e.stateNode;try{hf(l,"")}catch(Z){fr(e,e.return,Z)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,y=n!==null?n.memoizedProps:h,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&wC(l,h),Xv(u,y);var w=Xv(u,h);for(y=0;y<S.length;y+=2){var C=S[y],A=S[y+1];C==="style"?TC(l,A):C==="dangerouslySetInnerHTML"?EC(l,A):C==="children"?hf(l,A):Ax(l,C,A,w)}switch(u){case"input":Gv(l,h);break;case"textarea":bC(l,h);break;case"select":var z=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var G=h.value;G!=null?$c(l,!!h.multiple,G,!1):z!==!!h.multiple&&(h.defaultValue!=null?$c(l,!!h.multiple,h.defaultValue,!0):$c(l,!!h.multiple,h.multiple?[]:"",!1))}l[xf]=h}catch(Z){fr(e,e.return,Z)}}break;case 6:if(ia(t,e),Sa(e),o&4){if(e.stateNode===null)throw Error(Ge(162));w=e.stateNode,C=e.memoizedProps;try{w.nodeValue=C}catch(Z){fr(e,e.return,Z)}}break;case 3:if(ia(t,e),Sa(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{mf(t.containerInfo)}catch(Z){fr(e,e.return,Z)}break;case 4:ia(t,e),Sa(e);break;case 13:ia(t,e),Sa(e),w=e.child,w.flags&8192&&w.memoizedState!==null&&(w.alternate===null||w.alternate.memoizedState===null)&&(uw=xr()),o&4&&aE(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(_i=(C=_i)||w,ia(t,e),_i=C):ia(t,e),Sa(e),o&8192){C=e.memoizedState!==null;e:for(A=null,z=e;;){if(z.tag===5){if(A===null){A=z;try{l=z.stateNode,C?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=z.stateNode,S=z.memoizedProps.style,y=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=kC("display",y))}catch(Z){fr(e,e.return,Z)}}}else if(z.tag===6){if(A===null)try{z.stateNode.nodeValue=C?"":z.memoizedProps}catch(Z){fr(e,e.return,Z)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;A===z&&(A=null),z=z.return}A===z&&(A=null),z.sibling.return=z.return,z=z.sibling}if(C&&!w&&(e.mode&1)!==0)for(dt=e,e=e.child;e!==null;){for(w=dt=e;dt!==null;){switch(C=dt,A=C.child,C.tag){case 0:case 11:case 14:case 15:ef(4,C,C.return);break;case 1:if(Dc(C,C.return),h=C.stateNode,typeof h.componentWillUnmount=="function"){z=C,G=C.return;try{l=z,h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(Z){fr(z,G,Z)}}break;case 5:Dc(C,C.return);break;case 22:if(C.memoizedState!==null){lE(w);continue}}A!==null?(A.return=C,dt=A):lE(w)}e=e.sibling}}break;case 19:ia(t,e),Sa(e),o&4&&aE(e);break;case 21:break;default:ia(t,e),Sa(e)}}function Sa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(KP(n)){var o=n;break e}n=n.return}throw Error(Ge(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(hf(l,""),o.flags&=-33);var h=oE(e);E1(e,h,l);break;case 3:case 4:var y=o.stateNode.containerInfo,u=oE(e);S1(e,u,y);break;default:throw Error(Ge(161))}}catch(S){fr(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F4(e,t,n){dt=e,QP(e)}function QP(e,t,n){for(var o=(e.mode&1)!==0;dt!==null;){var l=dt,h=l.child;if(l.tag===22&&o){var y=l.memoizedState!==null||vm;if(!y){var u=l.alternate,S=u!==null&&u.memoizedState!==null||_i;u=vm;var w=_i;if(vm=y,(_i=S)&&!w)for(dt=l;dt!==null;)y=dt,S=y.child,y.tag===22&&y.memoizedState!==null?uE(l):S!==null?(S.return=y,dt=S):uE(l);for(;h!==null;)dt=h,QP(h),h=h.sibling;dt=l,vm=u,_i=w}sE(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,dt=h):sE(e)}}function sE(e){for(;dt!==null;){var t=dt;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:_i||Ey(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!_i)if(n===null)o.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:sa(t.type,n.memoizedProps);o.componentDidUpdate(l,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&BS(t,h,o);break;case 3:var y=t.updateQueue;if(y!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}BS(t,y,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&n.focus();break;case"img":S.src&&(n.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var C=w.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&mf(A)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ge(163))}_i||t.flags&512&&b1(t)}catch(z){fr(t,t.return,z)}}if(t===e){dt=null;break}if(n=t.sibling,n!==null){n.return=t.return,dt=n;break}dt=t.return}}function lE(e){for(;dt!==null;){var t=dt;if(t===e){dt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,dt=n;break}dt=t.return}}function uE(e){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ey(4,t)}catch(S){fr(t,n,S)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(S){fr(t,l,S)}}var h=t.return;try{b1(t)}catch(S){fr(t,h,S)}break;case 5:var y=t.return;try{b1(t)}catch(S){fr(t,y,S)}}}catch(S){fr(t,t.return,S)}if(t===e){dt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,dt=u;break}dt=t.return}}var O4=Math.ceil,Fg=ys.ReactCurrentDispatcher,sw=ys.ReactCurrentOwner,qo=ys.ReactCurrentBatchConfig,gn=0,Lr=null,Pr=null,ni=0,ho=0,Rc=al(0),Dr=0,Tf=null,su=0,ky=0,lw=0,tf=null,Ki=null,uw=0,Jc=1/0,ts=null,Og=!1,k1=null,Ks=null,xm=!1,js=null,$g=0,nf=0,T1=null,Xm=-1,Km=0;function Fi(){return(gn&6)!==0?xr():Xm!==-1?Xm:Xm=xr()}function Ys(e){return(e.mode&1)===0?1:(gn&2)!==0&&ni!==0?ni&-ni:w4.transition!==null?(Km===0&&(Km=$C()),Km):(e=En,e!==0||(e=window.event,e=e===void 0?16:WC(e.type)),e)}function Zo(e,t,n){if(50<nf)throw nf=0,T1=null,Error(Ge(185));var o=Ty(e,t);return o===null?null:(Vf(o,t,n),((gn&2)===0||o!==Lr)&&(o===Lr&&((gn&2)===0&&(ky|=t),Dr===4&&Vs(o,ni)),to(o,n),t===1&&gn===0&&(e.mode&1)===0&&(Jc=xr()+500,wy&&sl())),o)}function Ty(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function eI(e){return(Lr!==null||ca!==null)&&(e.mode&1)!==0&&(gn&2)===0}function to(e,t){var n=e.callbackNode;wD(e,t);var o=wg(e,e===Lr?ni:0);if(o===0)n!==null&&mS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&mS(n),t===1)e.tag===0?x4(cE.bind(null,e)):cP(cE.bind(null,e)),g4(function(){gn===0&&sl()}),n=null;else{switch(BC(o)){case 1:n=Fx;break;case 4:n=FC;break;case 16:n=xg;break;case 536870912:n=OC;break;default:n=xg}n=lI(n,tI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tI(e,t){if(Xm=-1,Km=0,(gn&6)!==0)throw Error(Ge(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var o=wg(e,e===Lr?ni:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=Bg(e,o);else{t=o;var l=gn;gn|=2;var h=rI();(Lr!==e||ni!==t)&&(ts=null,Jc=xr()+500,Yl(e,t));do try{V4();break}catch(u){nI(e,u)}while(1);qx(),Fg.current=h,gn=l,Pr!==null?t=0:(Lr=null,ni=0,t=Dr)}if(t!==0){if(t===2&&(l=e1(e),l!==0&&(o=l,t=C1(e,l))),t===1)throw n=Tf,Yl(e,0),Vs(e,o),to(e,xr()),n;if(t===6)Vs(e,o);else{if(l=e.current.alternate,(o&30)===0&&!$4(l)&&(t=Bg(e,o),t===2&&(h=e1(e),h!==0&&(o=h,t=C1(e,h))),t===1))throw n=Tf,Yl(e,0),Vs(e,o),to(e,xr()),n;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(Ge(345));case 2:Vl(e,Ki,ts);break;case 3:if(Vs(e,o),(o&130023424)===o&&(t=uw+500-xr(),10<t)){if(wg(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){Fi(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=l1(Vl.bind(null,e,Ki,ts),t);break}Vl(e,Ki,ts);break;case 4:if(Vs(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var y=31-da(o);h=1<<y,y=t[y],y>l&&(l=y),o&=~h}if(o=l,o=xr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*O4(o/1960))-o,10<o){e.timeoutHandle=l1(Vl.bind(null,e,Ki,ts),o);break}Vl(e,Ki,ts);break;case 5:Vl(e,Ki,ts);break;default:throw Error(Ge(329))}}}return to(e,xr()),e.callbackNode===n?tI.bind(null,e):null}function C1(e,t){var n=tf;return e.current.memoizedState.isDehydrated&&(Yl(e,t).flags|=256),e=Bg(e,t),e!==2&&(t=Ki,Ki=n,t!==null&&P1(t)),e}function P1(e){Ki===null?Ki=e:Ki.push.apply(Ki,e)}function $4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var l=n[o],h=l.getSnapshot;l=l.value;try{if(!fa(h(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vs(e,t){for(t&=~lw,t&=~ky,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-da(t),o=1<<n;e[n]=-1,t&=~o}}function cE(e){if((gn&6)!==0)throw Error(Ge(327));jc();var t=wg(e,0);if((t&1)===0)return to(e,xr()),null;var n=Bg(e,t);if(e.tag!==0&&n===2){var o=e1(e);o!==0&&(t=o,n=C1(e,o))}if(n===1)throw n=Tf,Yl(e,0),Vs(e,t),to(e,xr()),n;if(n===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vl(e,Ki,ts),to(e,xr()),null}function cw(e,t){var n=gn;gn|=1;try{return e(t)}finally{gn=n,gn===0&&(Jc=xr()+500,wy&&sl())}}function lu(e){js!==null&&js.tag===0&&(gn&6)===0&&jc();var t=gn;gn|=1;var n=qo.transition,o=En;try{if(qo.transition=null,En=1,e)return e()}finally{En=o,qo.transition=n,gn=t,(gn&6)===0&&sl()}}function hw(){ho=Rc.current,Gn(Rc)}function Yl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,m4(n)),Pr!==null)for(n=Pr.return;n!==null;){var o=n;switch(Kx(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Tg();break;case 3:Yc(),Gn(Qi),Gn(xi),ew();break;case 5:Qx(o);break;case 4:Yc();break;case 13:Gn(or);break;case 19:Gn(or);break;case 10:Zx(o.type._context);break;case 22:case 23:hw()}n=n.return}if(Lr=e,Pr=e=nl(e.current,null),ni=ho=t,Dr=0,Tf=null,lw=ky=su=0,Ki=tf=null,ca!==null){for(t=0;t<ca.length;t++)if(n=ca[t],o=n.interleaved,o!==null){n.interleaved=null;var l=o.next,h=n.pending;if(h!==null){var y=h.next;h.next=l,o.next=y}n.pending=o}ca=null}return e}function nI(e,t){do{var n=Pr;try{if(qx(),Zm.current=Lg,Rg){for(var o=ar.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Rg=!1}if(au=0,Wr=zr=ar=null,Qd=!1,Sf=0,sw.current=null,n===null||n.return===null){Dr=1,Tf=t,Pr=null;break}e:{var h=e,y=n.return,u=n,S=t;if(t=ni,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var w=S,C=u,A=C.tag;if((C.mode&1)===0&&(A===0||A===11||A===15)){var z=C.alternate;z?(C.updateQueue=z.updateQueue,C.memoizedState=z.memoizedState,C.lanes=z.lanes):(C.updateQueue=null,C.memoizedState=null)}var G=HS(y);if(G!==null){G.flags&=-257,XS(G,y,u,h,t),G.mode&1&&ZS(h,w,t),t=G,S=w;var Z=t.updateQueue;if(Z===null){var H=new Set;H.add(S),t.updateQueue=H}else Z.add(S);break e}else{if((t&1)===0){ZS(h,w,t),dw();break e}S=Error(Ge(426))}}else if(Yn&&u.mode&1){var fe=HS(y);if(fe!==null){(fe.flags&65536)===0&&(fe.flags|=256),XS(fe,y,u,h,t),Yx(S);break e}}h=S,Dr!==4&&(Dr=2),tf===null?tf=[h]:tf.push(h),S=aw(S,u),u=y;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var B=$P(u,S,t);$S(u,B);break e;case 1:h=S;var V=u.type,K=u.stateNode;if((u.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ks===null||!Ks.has(K)))){u.flags|=65536,t&=-t,u.lanes|=t;var le=BP(u,h,t);$S(u,le);break e}}u=u.return}while(u!==null)}oI(n)}catch(ue){t=ue,Pr===n&&n!==null&&(Pr=n=n.return);continue}break}while(1)}function rI(){var e=Fg.current;return Fg.current=Lg,e===null?Lg:e}function dw(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Lr===null||(su&268435455)===0&&(ky&268435455)===0||Vs(Lr,ni)}function Bg(e,t){var n=gn;gn|=2;var o=rI();(Lr!==e||ni!==t)&&(ts=null,Yl(e,t));do try{B4();break}catch(l){nI(e,l)}while(1);if(qx(),gn=n,Fg.current=o,Pr!==null)throw Error(Ge(261));return Lr=null,ni=0,Dr}function B4(){for(;Pr!==null;)iI(Pr)}function V4(){for(;Pr!==null&&!dD();)iI(Pr)}function iI(e){var t=sI(e.alternate,e,ho);e.memoizedProps=e.pendingProps,t===null?oI(e):Pr=t,sw.current=null}function oI(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=M4(n,t,ho),n!==null){Pr=n;return}}else{if(n=D4(n,t),n!==null){n.flags&=32767,Pr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dr=6,Pr=null;return}}if(t=t.sibling,t!==null){Pr=t;return}Pr=t=e}while(t!==null);Dr===0&&(Dr=5)}function Vl(e,t,n){var o=En,l=qo.transition;try{qo.transition=null,En=1,N4(e,t,n,o)}finally{qo.transition=l,En=o}return null}function N4(e,t,n,o){do jc();while(js!==null);if((gn&6)!==0)throw Error(Ge(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(bD(e,h),e===Lr&&(Pr=Lr=null,ni=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||xm||(xm=!0,lI(xg,function(){return jc(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=qo.transition,qo.transition=null;var y=En;En=1;var u=gn;gn|=4,sw.current=null,L4(e,n),JP(n,e),l4(a1),bg=!!o1,a1=o1=null,e.current=n,F4(n),fD(),gn=u,En=y,qo.transition=h}else e.current=n;if(xm&&(xm=!1,js=e,$g=l),h=e.pendingLanes,h===0&&(Ks=null),gD(n.stateNode),to(e,xr()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)o(t[n]);if(Og)throw Og=!1,e=k1,k1=null,e;return($g&1)!==0&&e.tag!==0&&jc(),h=e.pendingLanes,(h&1)!==0?e===T1?nf++:(nf=0,T1=e):nf=0,sl(),null}function jc(){if(js!==null){var e=BC($g),t=qo.transition,n=En;try{if(qo.transition=null,En=16>e?16:e,js===null)var o=!1;else{if(e=js,js=null,$g=0,(gn&6)!==0)throw Error(Ge(331));var l=gn;for(gn|=4,dt=e.current;dt!==null;){var h=dt,y=h.child;if((dt.flags&16)!==0){var u=h.deletions;if(u!==null){for(var S=0;S<u.length;S++){var w=u[S];for(dt=w;dt!==null;){var C=dt;switch(C.tag){case 0:case 11:case 15:ef(8,C,h)}var A=C.child;if(A!==null)A.return=C,dt=A;else for(;dt!==null;){C=dt;var z=C.sibling,G=C.return;if(XP(C),C===w){dt=null;break}if(z!==null){z.return=G,dt=z;break}dt=G}}}var Z=h.alternate;if(Z!==null){var H=Z.child;if(H!==null){Z.child=null;do{var fe=H.sibling;H.sibling=null,H=fe}while(H!==null)}}dt=h}}if((h.subtreeFlags&2064)!==0&&y!==null)y.return=h,dt=y;else e:for(;dt!==null;){if(h=dt,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ef(9,h,h.return)}var B=h.sibling;if(B!==null){B.return=h.return,dt=B;break e}dt=h.return}}var V=e.current;for(dt=V;dt!==null;){y=dt;var K=y.child;if((y.subtreeFlags&2064)!==0&&K!==null)K.return=y,dt=K;else e:for(y=V;dt!==null;){if(u=dt,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:Ey(9,u)}}catch(ue){fr(u,u.return,ue)}if(u===y){dt=null;break e}var le=u.sibling;if(le!==null){le.return=u.return,dt=le;break e}dt=u.return}}if(gn=l,sl(),za&&typeof za.onPostCommitFiberRoot=="function")try{za.onPostCommitFiberRoot(gy,e)}catch{}o=!0}return o}finally{En=n,qo.transition=t}}return!1}function hE(e,t,n){t=aw(n,t),t=$P(e,t,1),Xs(e,t),t=Fi(),e=Ty(e,1),e!==null&&(Vf(e,1,t),to(e,t))}function fr(e,t,n){if(e.tag===3)hE(e,e,n);else for(;t!==null;){if(t.tag===3){hE(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ks===null||!Ks.has(o))){e=aw(n,e),e=BP(t,e,1),Xs(t,e),e=Fi(),t=Ty(t,1),t!==null&&(Vf(t,1,e),to(t,e));break}}t=t.return}}function U4(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Fi(),e.pingedLanes|=e.suspendedLanes&n,Lr===e&&(ni&n)===n&&(Dr===4||Dr===3&&(ni&130023424)===ni&&500>xr()-uw?Yl(e,0):lw|=n),to(e,t)}function aI(e,t){t===0&&((e.mode&1)===0?t=1:(t=um,um<<=1,(um&130023424)===0&&(um=4194304)));var n=Fi();e=Ty(e,t),e!==null&&(Vf(e,t,n),to(e,n))}function j4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aI(e,n)}function G4(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ge(314))}o!==null&&o.delete(t),aI(e,n)}var sI;sI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qi.current)Ji=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Ji=!1,z4(e,t,n);Ji=(e.flags&131072)!==0}else Ji=!1,Yn&&(t.flags&1048576)!==0&&pP(t,zg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=Hc(t,xi.current);Uc(t,n),l=nw(null,t,o,e,l,n);var h=rw();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,eo(o)?(h=!0,Cg(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Hx(t),l.updater=by,t.stateNode=l,l._reactInternals=t,f1(t,o,e,n),t=v1(null,t,o,!0,h,n)):(t.tag=0,Yn&&h&&Xx(t),Di(null,t,l,n),t=t.child),t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=q4(o),e=sa(o,e),l){case 0:t=_1(null,t,o,e,n);break e;case 1:t=JS(null,t,o,e,n);break e;case 11:t=KS(null,t,o,e,n);break e;case 14:t=YS(null,t,o,sa(o.type,e),n);break e}throw Error(Ge(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:sa(o,l),_1(e,t,o,l,n);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:sa(o,l),JS(e,t,o,l,n);case 3:e:{if(qP(t),e===null)throw Error(Ge(387));o=t.pendingProps,h=t.memoizedState,l=h.element,hP(e,t),Mg(t,o,null,n);var y=t.memoizedState;if(o=y.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=Error(Ge(423)),t=QS(e,t,o,n,l);break e}else if(o!==l){l=Error(Ge(424)),t=QS(e,t,o,n,l);break e}else for(Yi=rs(t.stateNode.containerInfo.firstChild),bo=t,Yn=!0,ua=null,n=yP(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xc(),o===l){t=cs(e,t,n);break e}Di(e,t,o,n)}t=t.child}return t;case 5:return _P(t),e===null&&m1(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,y=l.children,s1(o,l)?y=null:h!==null&&s1(o,h)&&(t.flags|=32),WP(e,t),Di(e,t,y,n),t.child;case 6:return e===null&&m1(t),null;case 13:return ZP(e,t,n);case 4:return Jx(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Kc(t,null,o,n):Di(e,t,o,n),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:sa(o,l),KS(e,t,o,l,n);case 7:return Di(e,t,t.pendingProps,n),t.child;case 8:return Di(e,t,t.pendingProps.children,n),t.child;case 12:return Di(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,y=l.value,Bn(Pg,o._currentValue),o._currentValue=y,h!==null)if(fa(h.value,y)){if(h.children===l.children&&!Qi.current){t=cs(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){y=h.child;for(var S=u.firstContext;S!==null;){if(S.context===o){if(h.tag===1){S=as(-1,n&-n),S.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var C=w.pending;C===null?S.next=S:(S.next=C.next,C.next=S),w.pending=S}}h.lanes|=n,S=h.alternate,S!==null&&(S.lanes|=n),h1(h.return,n,t),u.lanes|=n;break}S=S.next}}else if(h.tag===10)y=h.type===t.type?null:h.child;else if(h.tag===18){if(y=h.return,y===null)throw Error(Ge(341));y.lanes|=n,u=y.alternate,u!==null&&(u.lanes|=n),h1(y,n,t),y=h.sibling}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===t){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}Di(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,Uc(t,n),l=Xo(l),o=o(l),t.flags|=1,Di(e,t,o,n),t.child;case 14:return o=t.type,l=sa(o,t.pendingProps),l=sa(o.type,l),YS(e,t,o,l,n);case 15:return jP(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:sa(o,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,eo(o)?(e=!0,Cg(t)):e=!1,Uc(t,n),fP(t,o,l),f1(t,o,l,n),v1(null,t,o,!0,e,n);case 19:return HP(e,t,n);case 22:return GP(e,t,n)}throw Error(Ge(156,t.tag))};function lI(e,t){return LC(e,t)}function W4(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(e,t,n,o){return new W4(e,t,n,o)}function fw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q4(e){if(typeof e=="function")return fw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dx)return 11;if(e===Rx)return 14}return 2}function nl(e,t){var n=e.alternate;return n===null?(n=Wo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ym(e,t,n,o,l,h){var y=2;if(o=e,typeof e=="function")fw(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Ec:return Jl(n.children,l,h,t);case zx:y=8,l|=8;break;case Bv:return e=Wo(12,n,t,l|2),e.elementType=Bv,e.lanes=h,e;case Vv:return e=Wo(13,n,t,l),e.elementType=Vv,e.lanes=h,e;case Nv:return e=Wo(19,n,t,l),e.elementType=Nv,e.lanes=h,e;case _C:return Vg(n,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gC:y=10;break e;case yC:y=9;break e;case Dx:y=11;break e;case Rx:y=14;break e;case Os:y=16,o=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=Wo(y,n,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function Jl(e,t,n,o){return e=Wo(7,e,o,t),e.lanes=n,e}function Vg(e,t,n,o){return e=Wo(22,e,o,t),e.elementType=_C,e.lanes=n,e.stateNode={},e}function Y_(e,t,n){return e=Wo(6,e,null,t),e.lanes=n,e}function J_(e,t,n){return t=Wo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Z4(e,t,n,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D_(0),this.expirationTimes=D_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D_(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function pw(e,t,n,o,l,h,y,u,S){return e=new Z4(e,t,n,u,S),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Wo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hx(h),e}function H4(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sc,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function uI(e){if(!e)return tl;e=e._reactInternals;e:{if(du(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(eo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var n=e.type;if(eo(n))return uP(e,n,t)}return t}function cI(e,t,n,o,l,h,y,u,S){return e=pw(n,o,!0,e,l,h,y,u,S),e.context=uI(null),n=e.current,o=Fi(),l=Ys(n),h=as(o,l),h.callback=t!=null?t:null,Xs(n,h),e.current.lanes=l,Vf(e,l,o),to(e,o),e}function Cy(e,t,n,o){var l=t.current,h=Fi(),y=Ys(l);return n=uI(n),t.context===null?t.context=n:t.pendingContext=n,t=as(h,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),Xs(l,t),e=Zo(l,y,h),e!==null&&qm(e,l,y),y}function Ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mw(e,t){dE(e,t),(e=e.alternate)&&dE(e,t)}function X4(){return null}var hI=typeof reportError=="function"?reportError:function(e){console.error(e)};function gw(e){this._internalRoot=e}Py.prototype.render=gw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Cy(e,t,null,null)};Py.prototype.unmount=gw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lu(function(){Cy(null,e,null,null)}),t[us]=null}};function Py(e){this._internalRoot=e}Py.prototype.unstable_scheduleHydration=function(e){if(e){var t=UC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bs.length&&t!==0&&t<Bs[n].priority;n++);Bs.splice(n,0,e),n===0&&GC(e)}};function yw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Iy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fE(){}function K4(e,t,n,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var w=Ng(y);h.call(w)}}var y=cI(t,o,e,0,null,!1,!1,"",fE);return e._reactRootContainer=y,e[us]=y.current,_f(e.nodeType===8?e.parentNode:e),lu(),y}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var u=o;o=function(){var w=Ng(S);u.call(w)}}var S=pw(e,0,!1,null,null,!1,!1,"",fE);return e._reactRootContainer=S,e[us]=S.current,_f(e.nodeType===8?e.parentNode:e),lu(function(){Cy(t,S,n,o)}),S}function My(e,t,n,o,l){var h=n._reactRootContainer;if(h){var y=h;if(typeof l=="function"){var u=l;l=function(){var S=Ng(y);u.call(S)}}Cy(t,y,e,l)}else y=K4(n,t,e,l,o);return Ng(y)}VC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bd(t.pendingLanes);n!==0&&(Ox(t,n|1),to(t,xr()),(gn&6)===0&&(Jc=xr()+500,sl()))}break;case 13:var o=Fi();lu(function(){return Zo(e,1,o)}),mw(e,1)}};$x=function(e){if(e.tag===13){var t=Fi();Zo(e,134217728,t),mw(e,134217728)}};NC=function(e){if(e.tag===13){var t=Fi(),n=Ys(e);Zo(e,n,t),mw(e,n)}};UC=function(){return En};jC=function(e,t){var n=En;try{return En=e,t()}finally{En=n}};Yv=function(e,t,n){switch(t){case"input":if(Gv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var l=xy(o);if(!l)throw Error(Ge(90));xC(o),Gv(o,l)}}}break;case"textarea":bC(e,n);break;case"select":t=n.value,t!=null&&$c(e,!!n.multiple,t,!1)}};IC=cw;MC=lu;var Y4={usingClientEntryPoint:!1,Events:[Uf,Pc,xy,CC,PC,cw]},Md={findFiberByHostInstance:Zl,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},J4={bundleType:Md.bundleType,version:Md.version,rendererPackageName:Md.rendererPackageName,rendererConfig:Md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=DC(e),e===null?null:e.stateNode},findFiberByHostInstance:Md.findFiberByHostInstance||X4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{gy=wm.inject(J4),za=wm}catch{}}Po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y4;Po.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yw(t))throw Error(Ge(200));return H4(e,t,null,n)};Po.createRoot=function(e,t){if(!yw(e))throw Error(Ge(299));var n=!1,o="",l=hI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=pw(e,1,!1,null,null,n,!1,o,l),e[us]=t.current,_f(e.nodeType===8?e.parentNode:e),new gw(t)};Po.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=DC(t),e=e===null?null:e.stateNode,e};Po.flushSync=function(e){return lu(e)};Po.hydrate=function(e,t,n){if(!Iy(t))throw Error(Ge(200));return My(null,e,t,!0,n)};Po.hydrateRoot=function(e,t,n){if(!yw(e))throw Error(Ge(405));var o=n!=null&&n.hydratedSources||null,l=!1,h="",y=hI;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),t=cI(t,null,e,1,n!=null?n:null,l,!1,h,y),e[us]=t.current,_f(e),o)for(e=0;e<o.length;e++)n=o[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Py(t)};Po.render=function(e,t,n){if(!Iy(t))throw Error(Ge(200));return My(null,e,t,!1,n)};Po.unmountComponentAtNode=function(e){if(!Iy(e))throw Error(Ge(40));return e._reactRootContainer?(lu(function(){My(null,null,e,!1,function(){e._reactRootContainer=null,e[us]=null})}),!0):!1};Po.unstable_batchedUpdates=cw;Po.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Iy(n))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return My(e,t,n,!1,o)};Po.version="18.1.0-next-22edb9f77-20220426";function dI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dI)}catch(e){console.error(e)}}dI(),my.exports=Po;var Q4=my.exports,pE=my.exports;Ov.createRoot=pE.createRoot,Ov.hydrateRoot=pE.hydrateRoot;var Cn="colors",zi="sizes",pt="space",eR={gap:pt,gridGap:pt,columnGap:pt,gridColumnGap:pt,rowGap:pt,gridRowGap:pt,inset:pt,insetBlock:pt,insetBlockEnd:pt,insetBlockStart:pt,insetInline:pt,insetInlineEnd:pt,insetInlineStart:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockEnd:pt,marginBlockStart:pt,marginInline:pt,marginInlineEnd:pt,marginInlineStart:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockEnd:pt,paddingBlockStart:pt,paddingInline:pt,paddingInlineEnd:pt,paddingInlineStart:pt,top:pt,right:pt,bottom:pt,left:pt,scrollMargin:pt,scrollMarginTop:pt,scrollMarginRight:pt,scrollMarginBottom:pt,scrollMarginLeft:pt,scrollMarginX:pt,scrollMarginY:pt,scrollMarginBlock:pt,scrollMarginBlockEnd:pt,scrollMarginBlockStart:pt,scrollMarginInline:pt,scrollMarginInlineEnd:pt,scrollMarginInlineStart:pt,scrollPadding:pt,scrollPaddingTop:pt,scrollPaddingRight:pt,scrollPaddingBottom:pt,scrollPaddingLeft:pt,scrollPaddingX:pt,scrollPaddingY:pt,scrollPaddingBlock:pt,scrollPaddingBlockEnd:pt,scrollPaddingBlockStart:pt,scrollPaddingInline:pt,scrollPaddingInlineEnd:pt,scrollPaddingInlineStart:pt,fontSize:"fontSizes",background:Cn,backgroundColor:Cn,backgroundImage:Cn,borderImage:Cn,border:Cn,borderBlock:Cn,borderBlockEnd:Cn,borderBlockStart:Cn,borderBottom:Cn,borderBottomColor:Cn,borderColor:Cn,borderInline:Cn,borderInlineEnd:Cn,borderInlineStart:Cn,borderLeft:Cn,borderLeftColor:Cn,borderRight:Cn,borderRightColor:Cn,borderTop:Cn,borderTopColor:Cn,caretColor:Cn,color:Cn,columnRuleColor:Cn,fill:Cn,outline:Cn,outlineColor:Cn,stroke:Cn,textDecorationColor:Cn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:zi,minBlockSize:zi,maxBlockSize:zi,inlineSize:zi,minInlineSize:zi,maxInlineSize:zi,width:zi,minWidth:zi,maxWidth:zi,height:zi,minHeight:zi,maxHeight:zi,flexBasis:zi,gridTemplateColumns:zi,gridTemplateRows:zi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},tR=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,ch=()=>{const e=Object.create(null);return(t,n,...o)=>{const l=(h=>JSON.stringify(h,tR))(t);return l in e?e[l]:e[l]=n(t,...o)}},Ql=Symbol.for("sxs.internal"),_w=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),mE=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:nR}=Object.prototype,I1=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),rR=/\s+(?![^()]*\))/,sc=e=>t=>e(...typeof t=="string"?String(t).split(rR):[t]),gE={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:sc((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:sc((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:sc((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:sc((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:sc((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:sc((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},Q_=/([\d.]+)([^]*)/,iR=(e,t)=>e.length?e.reduce((n,o)=>(n.push(...t.map(l=>l.includes("&")?l.replace(/&/g,/[ +>|~]/.test(o)&&/&.*&/.test(l)?`:is(${o})`:o):o+" "+l)),n),[]):t,oR=(e,t)=>e in aR&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,o,l,h)=>o+(l==="stretch"?`-moz-available${h};${I1(e)}:${o}-webkit-fill-available`:`-moz-fit-content${h};${I1(e)}:${o}fit-content`)+h):String(t),aR={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},hs=e=>e?e+"-":"",fI=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(o,l,h,y,u)=>y=="$"==!!h?o:(l||y=="--"?"calc(":"")+"var(--"+(y==="$"?hs(t)+(u.includes("$")?"":hs(n))+u.replace(/\$/g,"-"):u)+")"+(l||y=="--"?"*"+(l||"")+(h||"1")+")":"")),sR=/\s*,\s*(?![^()]*\))/,lR=Object.prototype.toString,Lc=(e,t,n,o,l)=>{let h,y,u;const S=(w,C,A)=>{let z,G;const Z=H=>{for(z in H){const V=z.charCodeAt(0)===64,K=V&&Array.isArray(H[z])?H[z]:[H[z]];for(G of K){const le=/[A-Z]/.test(B=z)?B:B.replace(/-[^]/g,ge=>ge[1].toUpperCase()),ue=typeof G=="object"&&G&&G.toString===lR&&(!o.utils[le]||!C.length);if(le in o.utils&&!ue){const ge=o.utils[le];if(ge!==y){y=ge,Z(ge(G)),y=null;continue}}else if(le in gE){const ge=gE[le];if(ge!==u){u=ge,Z(ge(G)),u=null;continue}}if(V&&(fe=z.slice(1)in o.media?"@media "+o.media[z.slice(1)]:z,z=fe.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(ge,ye,Ee,je,ke,Ve)=>{const $t=Q_.test(ye),Tt=.0625*($t?-1:1),[Ct,Nt]=$t?[je,ye]:[ye,je];return"("+(Ee[0]==="="?"":Ee[0]===">"===$t?"max-":"min-")+Ct+":"+(Ee[0]!=="="&&Ee.length===1?Nt.replace(Q_,(xn,dn,Ne)=>Number(dn)+Tt*(Ee===">"?1:-1)+Ne):Nt)+(ke?") and ("+(ke[0]===">"?"min-":"max-")+Ct+":"+(ke.length===1?Ve.replace(Q_,(xn,dn,Ne)=>Number(dn)+Tt*(ke===">"?-1:1)+Ne):Ve):"")+")"})),ue){const ge=V?A.concat(z):[...A],ye=V?[...C]:iR(C,z.split(sR));h!==void 0&&l(yE(...h)),h=void 0,S(G,ye,ge)}else h===void 0&&(h=[[],C,A]),z=V||z.charCodeAt(0)!==36?z:`--${hs(o.prefix)}${z.slice(1).replace(/\$/g,"-")}`,G=ue?G:typeof G=="number"?G&&le in uR?String(G)+"px":String(G):fI(oR(le,G==null?"":G),o.prefix,o.themeMap[le]),h[0].push(`${V?`${z} `:`${I1(z)}:`}${G}`)}}var fe,B};Z(w),h!==void 0&&l(yE(...h)),h=void 0};S(e,t,n)},yE=(e,t,n)=>`${n.map(o=>`${o}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,uR={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},_E=e=>String.fromCharCode(e+(e>25?39:97)),eu=e=>(t=>{let n,o="";for(n=Math.abs(t);n>52;n=n/52|0)o=_E(n%52)+o;return _E(n%52)+o})(((t,n)=>{let o=n.length;for(;o;)t=33*t^n.charCodeAt(--o);return t})(5381,JSON.stringify(e))>>>0),Nd=["themed","global","styled","onevar","resonevar","allvar","inline"],cR=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},hR=e=>{let t;const n=()=>{const{cssRules:l}=t.sheet;return[].map.call(l,(h,y)=>{const{cssText:u}=h;let S="";if(u.startsWith("--sxs"))return"";if(l[y-1]&&(S=l[y-1].cssText).startsWith("--sxs")){if(!h.cssRules.length)return"";for(const w in t.rules)if(t.rules[w].group===h)return`--sxs{--sxs:${[...t.rules[w].cache].join(" ")}}${u}`;return h.cssRules.length?`${S}${u}`:""}return u}).join("")},o=()=>{if(t){const{rules:u,sheet:S}=t;if(!S.deleteRule){for(;Object(Object(S.cssRules)[0]).type===3;)S.cssRules.splice(0,1);S.cssRules=[]}for(const w in u)delete u[w]}const l=Object(e).styleSheets||[];for(const u of l)if(cR(u)){for(let S=0,w=u.cssRules;w[S];++S){const C=Object(w[S]);if(C.type!==1)continue;const A=Object(w[S+1]);if(A.type!==4)continue;++S;const{cssText:z}=C;if(!z.startsWith("--sxs"))continue;const G=z.slice(14,-3).trim().split(/\s+/),Z=Nd[G[0]];Z&&(t||(t={sheet:u,reset:o,rules:{},toString:n}),t.rules[Z]={group:A,index:S,cache:new Set(G)})}if(t)break}if(!t){const u=(S,w)=>({type:w,cssRules:[],insertRule(C,A){this.cssRules.splice(A,0,u(C,{import:3,undefined:1}[(C.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return S==="@media{}"?`@media{${[].map.call(this.cssRules,C=>C.cssText).join("")}}`:S}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:o,toString:n}}const{sheet:h,rules:y}=t;for(let u=Nd.length-1;u>=0;--u){const S=Nd[u];if(!y[S]){const w=Nd[u+1],C=y[w]?y[w].index:h.cssRules.length;h.insertRule("@media{}",C),h.insertRule(`--sxs{--sxs:${u}}`,C),y[S]={group:h.cssRules[C+1],index:C,cache:new Set([u])}}dR(y[S])}};return o(),t},dR=e=>{const t=e.group;let n=t.cssRules.length;e.apply=o=>{try{t.insertRule(o,n),++n}catch{}}},Ad=Symbol(),fR=ch(),vE=(e,t)=>fR(e,()=>(...n)=>{let o={type:null,composers:new Set};for(const l of n)if(l!=null)if(l[Ql]){o.type==null&&(o.type=l[Ql].type);for(const h of l[Ql].composers)o.composers.add(h)}else l.constructor!==Object||l.$$typeof?o.type==null&&(o.type=l):o.composers.add(pR(l,e));return o.type==null&&(o.type="span"),o.composers.size||o.composers.add(["PJLV",{},[],[],{},[]]),mR(e,o,t)}),pR=({variants:e,compoundVariants:t,defaultVariants:n,...o},l)=>{const h=`${hs(l.prefix)}c-${eu(o)}`,y=[],u=[],S=Object.create(null),w=[];for(const z in n)S[z]=String(n[z]);if(typeof e=="object"&&e)for(const z in e){C=S,A=z,nR.call(C,A)||(S[z]="undefined");const G=e[z];for(const Z in G){const H={[z]:String(Z)};String(Z)==="undefined"&&w.push(z);const fe=G[Z],B=[H,fe,!mE(fe)];y.push(B)}}var C,A;if(typeof t=="object"&&t)for(const z of t){let{css:G,...Z}=z;G=typeof G=="object"&&G||{};for(const fe in Z)Z[fe]=String(Z[fe]);const H=[Z,G,!mE(G)];u.push(H)}return[h,o,y,u,S,w]},mR=(e,t,n)=>{const[o,l,h,y]=gR(t.composers),u=typeof t.type=="function"||t.type.$$typeof?(A=>{function z(){for(let G=0;G<z[Ad].length;G++){const[Z,H]=z[Ad][G];A.rules[Z].apply(H)}return z[Ad]=[],null}return z[Ad]=[],z.rules={},Nd.forEach(G=>z.rules[G]={apply:Z=>z[Ad].push([G,Z])}),z})(n):null,S=(u||n).rules,w=`.${o}${l.length>1?`:where(.${l.slice(1).join(".")})`:""}`,C=A=>{A=typeof A=="object"&&A||yR;const{css:z,...G}=A,Z={};for(const B in h)if(delete G[B],B in A){let V=A[B];typeof V=="object"&&V?Z[B]={"@initial":h[B],...V}:(V=String(V),Z[B]=V!=="undefined"||y.has(B)?V:h[B])}else Z[B]=h[B];const H=new Set([...l]);for(const[B,V,K,le]of t.composers){n.rules.styled.cache.has(B)||(n.rules.styled.cache.add(B),Lc(V,[`.${B}`],[],e,ye=>{S.styled.apply(ye)}));const ue=xE(K,Z,e.media),ge=xE(le,Z,e.media,!0);for(const ye of ue)if(ye!==void 0)for(const[Ee,je,ke]of ye){const Ve=`${B}-${eu(je)}-${Ee}`;H.add(Ve);const $t=(ke?n.rules.resonevar:n.rules.onevar).cache,Tt=ke?S.resonevar:S.onevar;$t.has(Ve)||($t.add(Ve),Lc(je,[`.${Ve}`],[],e,Ct=>{Tt.apply(Ct)}))}for(const ye of ge)if(ye!==void 0)for(const[Ee,je]of ye){const ke=`${B}-${eu(je)}-${Ee}`;H.add(ke),n.rules.allvar.cache.has(ke)||(n.rules.allvar.cache.add(ke),Lc(je,[`.${ke}`],[],e,Ve=>{S.allvar.apply(Ve)}))}}if(typeof z=="object"&&z){const B=`${o}-i${eu(z)}-css`;H.add(B),n.rules.inline.cache.has(B)||(n.rules.inline.cache.add(B),Lc(z,[`.${B}`],[],e,V=>{S.inline.apply(V)}))}for(const B of String(A.className||"").trim().split(/\s+/))B&&H.add(B);const fe=G.className=[...H].join(" ");return{type:t.type,className:fe,selector:w,props:G,toString:()=>fe,deferredInjector:u}};return _w(C,{className:o,selector:w,[Ql]:t,toString:()=>(n.rules.styled.cache.has(o)||C(),o)})},gR=e=>{let t="";const n=[],o={},l=[];for(const[h,,,,y,u]of e){t===""&&(t=h),n.push(h),l.push(...u);for(const S in y){const w=y[S];(o[S]===void 0||w!=="undefined"||u.includes(w))&&(o[S]=w)}}return[t,n,o,new Set(l)]},xE=(e,t,n,o)=>{const l=[];e:for(let[h,y,u]of e){if(u)continue;let S,w=0,C=!1;for(S in h){const A=h[S];let z=t[S];if(z!==A){if(typeof z!="object"||!z)continue e;{let G,Z,H=0;for(const fe in z){if(A===String(z[fe])){if(fe!=="@initial"){const B=fe.slice(1);(Z=Z||[]).push(B in n?n[B]:fe.replace(/^@media ?/,"")),C=!0}w+=H,G=!0}++H}if(Z&&Z.length&&(y={["@media "+Z.join(", ")]:y}),!G)continue e}}}(l[w]=l[w]||[]).push([o?"cv":`${S}-${h[S]}`,y,C])}return l},yR={},_R=ch(),vR=(e,t)=>_R(e,()=>(...n)=>{const o=()=>{for(let l of n){l=typeof l=="object"&&l||{};let h=eu(l);if(!t.rules.global.cache.has(h)){if(t.rules.global.cache.add(h),"@import"in l){let y=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let u of[].concat(l["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,t.sheet.insertRule(`@import ${u};`,y++);delete l["@import"]}Lc(l,[],[],e,y=>{t.rules.global.apply(y)})}}return""};return _w(o,{toString:o})}),xR=ch(),wR=(e,t)=>xR(e,()=>n=>{const o=`${hs(e.prefix)}k-${eu(n)}`,l=()=>{if(!t.rules.global.cache.has(o)){t.rules.global.cache.add(o);const h=[];Lc(n,[],[],e,u=>h.push(u));const y=`@keyframes ${o}{${h.join("")}}`;t.rules.global.apply(y)}return o};return _w(l,{get name(){return l()},toString:l})}),bR=class{constructor(e,t,n,o){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=n==null?"":String(n),this.prefix=o==null?"":String(o)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+hs(this.prefix)+hs(this.scale)+this.token}toString(){return this.computedValue}},SR=ch(),ER=(e,t)=>SR(e,()=>(n,o)=>{o=typeof n=="object"&&n||Object(o);const l=`.${n=(n=typeof n=="string"?n:"")||`${hs(e.prefix)}t-${eu(o)}`}`,h={},y=[];for(const S in o){h[S]={};for(const w in o[S]){const C=`--${hs(e.prefix)}${S}-${w}`,A=fI(String(o[S][w]),e.prefix,S);h[S][w]=new bR(w,A,S,e.prefix),y.push(`${C}:${A}`)}}const u=()=>{if(y.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const S=`${o===e.theme?":root,":""}.${n}{${y.join(";")}}`;t.rules.themed.apply(S)}return n};return{...h,get className(){return u()},selector:l,toString:u}}),kR=ch(),wE,TR=ch(),pI=e=>{const t=(n=>{let o=!1;const l=kR(n,h=>{o=!0;const y="prefix"in(h=typeof h=="object"&&h||{})?String(h.prefix):"",u=typeof h.media=="object"&&h.media||{},S=typeof h.root=="object"?h.root||null:globalThis.document||null,w=typeof h.theme=="object"&&h.theme||{},C={prefix:y,media:u,theme:w,themeMap:typeof h.themeMap=="object"&&h.themeMap||{...eR},utils:typeof h.utils=="object"&&h.utils||{}},A=hR(S),z={css:vE(C,A),globalCss:vR(C,A),keyframes:wR(C,A),createTheme:ER(C,A),reset(){A.reset(),z.theme.toString()},theme:{},sheet:A,config:C,prefix:y,getCssText:A.toString,toString:A.toString};return String(z.theme=z.createTheme(w)),z});return o||l.reset(),l})(e);return t.styled=(({config:n,sheet:o})=>TR(n,()=>{const l=vE(n,o);return(...h)=>{const y=l(...h),u=y[Ql].type,S=Re.forwardRef((w,C)=>{const A=w&&w.as||u,{props:z,deferredInjector:G}=y(w);return delete z.as,z.ref=C,G?Re.createElement(Re.Fragment,null,Re.createElement(A,z),Re.createElement(G,null)):Re.createElement(A,z)});return S.className=y.className,S.displayName=`Styled.${u.displayName||u.name||u}`,S.selector=y.selector,S.toString=()=>y.selector,S[Ql]=y[Ql],S}}))(t),t},CR=()=>wE||(wE=pI()),PR=(...e)=>CR().globalCss(...e);const{styled:hn}=pI({theme:{colors:{black:"rgba(0, 0, 0)",white:"rgba(236, 237, 238)",hover:"#7180B9",primary:"#3423A6",primaryText:"white"},fonts:{sans:"Inter, sans-serif"},fontSizes:{1:"12px",2:"14px",3:"16px",4:"20px",5:"24px",6:"32px"},space:{1:"10px",2:"20px",3:"40px"},sizes:{1:"4px",2:"8px",3:"16px",4:"32px",5:"64px",6:"128px"},radii:{1:"2px",2:"4px",3:"8px",round:"9999px"},fontWeights:{},lineHeights:{},letterSpacings:{},borderWidths:{},borderStyles:{},shadows:{},zIndices:{},transitions:{}}}),IR=PR({"*":{margin:0,padding:0,border:0},body:{backgroundColor:"$black",color:"$white",fontFamily:"sans-serif"}});var wo=Uint8Array,Fc=Uint16Array,MR=Int32Array,mI=new wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gI=new wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),AR=new wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yI=function(e,t){for(var n=new Fc(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];for(var l=new MR(n[30]),o=1;o<30;++o)for(var h=n[o];h<n[o+1];++h)l[h]=h-n[o]<<5|o;return{b:n,r:l}},_I=yI(mI,2),vI=_I.b,zR=_I.r;vI[28]=258,zR[258]=28;var DR=yI(gI,0),RR=DR.b,M1=new Fc(32768);for(var jn=0;jn<32768;++jn){var Ls=(jn&43690)>>1|(jn&21845)<<1;Ls=(Ls&52428)>>2|(Ls&13107)<<2,Ls=(Ls&61680)>>4|(Ls&3855)<<4,M1[jn]=((Ls&65280)>>8|(Ls&255)<<8)>>1}var rf=function(e,t,n){for(var o=e.length,l=0,h=new Fc(t);l<o;++l)e[l]&&++h[e[l]-1];var y=new Fc(t);for(l=1;l<t;++l)y[l]=y[l-1]+h[l-1]<<1;var u;if(n){u=new Fc(1<<t);var S=15-t;for(l=0;l<o;++l)if(e[l])for(var w=l<<4|e[l],C=t-e[l],A=y[e[l]-1]++<<C,z=A|(1<<C)-1;A<=z;++A)u[M1[A]>>S]=w}else for(u=new Fc(o),l=0;l<o;++l)e[l]&&(u[l]=M1[y[e[l]-1]++]>>15-e[l]);return u},Gf=new wo(288);for(var jn=0;jn<144;++jn)Gf[jn]=8;for(var jn=144;jn<256;++jn)Gf[jn]=9;for(var jn=256;jn<280;++jn)Gf[jn]=7;for(var jn=280;jn<288;++jn)Gf[jn]=8;var xI=new wo(32);for(var jn=0;jn<32;++jn)xI[jn]=5;var LR=rf(Gf,9,1),FR=rf(xI,5,1),ev=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},oa=function(e,t,n){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&n},tv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},OR=function(e){return(e+7)/8|0},$R=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var o=new wo(n-t);return o.set(e.subarray(t,n)),o},BR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fo=function(e,t,n){var o=new Error(t||BR[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,fo),!n)throw o;return o},vw=function(e,t,n,o){var l=e.length,h=o?o.length:0;if(!l||t.f&&!t.l)return n||new wo(0);var y=!n||t.i!=2,u=t.i;n||(n=new wo(l*3));var S=function(wr){var Gt=n.length;if(wr>Gt){var on=new wo(Math.max(Gt*2,wr));on.set(n),n=on}},w=t.f||0,C=t.p||0,A=t.b||0,z=t.l,G=t.d,Z=t.m,H=t.n,fe=l*8;do{if(!z){w=oa(e,C,1);var B=oa(e,C+1,3);if(C+=3,B)if(B==1)z=LR,G=FR,Z=9,H=5;else if(B==2){var ue=oa(e,C,31)+257,ge=oa(e,C+10,15)+4,ye=ue+oa(e,C+5,31)+1;C+=14;for(var Ee=new wo(ye),je=new wo(19),ke=0;ke<ge;++ke)je[AR[ke]]=oa(e,C+ke*3,7);C+=ge*3;for(var Ve=ev(je),$t=(1<<Ve)-1,Tt=rf(je,Ve,1),ke=0;ke<ye;){var Ct=Tt[oa(e,C,$t)];C+=Ct&15;var V=Ct>>4;if(V<16)Ee[ke++]=V;else{var Nt=0,xn=0;for(V==16?(xn=3+oa(e,C,3),C+=2,Nt=Ee[ke-1]):V==17?(xn=3+oa(e,C,7),C+=3):V==18&&(xn=11+oa(e,C,127),C+=7);xn--;)Ee[ke++]=Nt}}var dn=Ee.subarray(0,ue),Ne=Ee.subarray(ue);Z=ev(dn),H=ev(Ne),z=rf(dn,Z,1),G=rf(Ne,H,1)}else fo(1);else{var V=OR(C)+4,K=e[V-4]|e[V-3]<<8,le=V+K;if(le>l){u&&fo(0);break}y&&S(A+K),n.set(e.subarray(V,le),A),t.b=A+=K,t.p=C=le*8,t.f=w;continue}if(C>fe){u&&fo(0);break}}y&&S(A+131072);for(var at=(1<<Z)-1,bt=(1<<H)-1,Bt=C;;Bt=C){var Nt=z[tv(e,C)&at],lt=Nt>>4;if(C+=Nt&15,C>fe){u&&fo(0);break}if(Nt||fo(2),lt<256)n[A++]=lt;else if(lt==256){Bt=C,z=null;break}else{var zn=lt-254;if(lt>264){var ke=lt-257,Jt=mI[ke];zn=oa(e,C,(1<<Jt)-1)+vI[ke],C+=Jt}var Jn=G[tv(e,C)&bt],Ot=Jn>>4;Jn||fo(3),C+=Jn&15;var Ne=RR[Ot];if(Ot>3){var Jt=gI[Ot];Ne+=tv(e,C)&(1<<Jt)-1,C+=Jt}if(C>fe){u&&fo(0);break}y&&S(A+131072);var Wn=A+zn;if(A<Ne){var wi=h-Ne,Ir=Math.min(Ne,Wn);for(wi+A<0&&fo(3);A<Ir;++A)n[A]=o[wi+A]}for(;A<Wn;A+=4)n[A]=n[A-Ne],n[A+1]=n[A+1-Ne],n[A+2]=n[A+2-Ne],n[A+3]=n[A+3-Ne];A=Wn}}t.l=z,t.p=Bt,t.b=A,t.f=w,z&&(w=1,t.m=Z,t.d=G,t.n=H)}while(!w);return A==n.length?n:$R(n,0,A)},VR=new wo(0),NR=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&fo(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[n++]);return n+(t&2)},UR=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},jR=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&fo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&fo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function GR(e,t){return vw(e,{i:2},t&&t.out,t&&t.dictionary)}function WR(e,t){var n=NR(e);return n+8>e.length&&fo(6,"invalid gzip data"),vw(e.subarray(n,-8),{i:2},t&&t.out||new wo(UR(e)),t&&t.dictionary)}function qR(e,t){return vw(e.subarray(jR(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function A1(e,t){return e[0]==31&&e[1]==139&&e[2]==8?WR(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?GR(e,t):qR(e,t)}var ZR=typeof TextDecoder!="undefined"&&new TextDecoder,HR=0;try{ZR.decode(VR,{stream:!0}),HR=1}catch{}const wI=(e,t)=>e*Math.pow(2,t),zd=(e,t)=>Math.floor(e/Math.pow(2,t)),Ug=(e,t)=>wI(e.getUint16(t+1,!0),8)+e.getUint8(t),bI=(e,t)=>wI(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),XR=(e,t,n,o,l)=>{if(e!=o.getUint8(l))return e-o.getUint8(l);const h=Ug(o,l+1);if(t!=h)return t-h;const y=Ug(o,l+4);return n!=y?n-y:0},KR=(e,t,n,o)=>{const l=SI(e,t|128,n,o);return l?{z:t,x:n,y:o,offset:l[0],length:l[1],is_dir:!0}:null},bE=(e,t,n,o)=>{const l=SI(e,t,n,o);return l?{z:t,x:n,y:o,offset:l[0],length:l[1],is_dir:!1}:null},SI=(e,t,n,o)=>{let l=0,h=e.byteLength/17-1;for(;l<=h;){const y=h+l>>1,u=XR(t,n,o,e,y*17);if(u>0)l=y+1;else if(u<0)h=y-1;else return[bI(e,y*17+7),e.getUint32(y*17+13,!0)]}return null},YR=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,EI=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:Ug(e,t*17+1),y:Ug(e,t*17+4),offset:bI(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:n>>7===1}},SE=e=>{const t=[],n=new DataView(e);for(let o=0;o<n.byteLength/17;o++)t.push(EI(n,o));return JR(t)},JR=e=>{e.sort(YR);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let h=l.z;l.is_dir&&(h=h|128),n[o*17]=h,n[o*17+1]=l.x&255,n[o*17+2]=l.x>>8&255,n[o*17+3]=l.x>>16&255,n[o*17+4]=l.y&255,n[o*17+5]=l.y>>8&255,n[o*17+6]=l.y>>16&255,n[o*17+7]=l.offset&255,n[o*17+8]=zd(l.offset,8)&255,n[o*17+9]=zd(l.offset,16)&255,n[o*17+10]=zd(l.offset,24)&255,n[o*17+11]=zd(l.offset,32)&255,n[o*17+12]=zd(l.offset,48)&255,n[o*17+13]=l.length&255,n[o*17+14]=l.length>>8&255,n[o*17+15]=l.length>>16&255,n[o*17+16]=l.length>>24&255}return t},QR=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,o=EI(e,n-1);if(o.is_dir){const l=o.z,h=t.z-l,y=Math.trunc(t.x/(1<<h)),u=Math.trunc(t.y/(1<<h));return{z:l,x:y,y:u}}return null};async function eL(e){const t=await e.getBytes(0,512e3),n=new DataView(t.data),o=n.getUint32(4,!0),l=n.getUint16(8,!0),h=new TextDecoder("utf-8"),y=JSON.parse(h.decode(new DataView(t.data,10,o)));let u=Jm.Unknown;y.compression==="gzip"&&(u=Jm.Gzip);let S=0;"minzoom"in y&&(S=+y.minzoom);let w=0;"maxzoom"in y&&(w=+y.maxzoom);let C=0,A=0,z=0,G=-180,Z=-85,H=180,fe=85;if(y.bounds){const V=y.bounds.split(",");G=+V[0],Z=+V[1],H=+V[2],fe=+V[3]}if(y.center){const V=y.center.split(",");C=+V[0],A=+V[1],z=+V[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:Jm.None,tileCompression:u,tileType:tu.Mvt,minZoom:S,maxZoom:w,minLon:G,minLat:Z,maxLon:H,maxLat:fe,centerZoom:z,centerLon:C,centerLat:A,etag:t.etag}}async function tL(e,t,n,o,l,h,y){let u=await n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(u=SE(u));const S=bE(new DataView(u),o,l,h);if(S){let A=(await t.getBytes(S.offset,S.length,y)).data;const z=new DataView(A);return z.getUint8(0)==31&&z.getUint8(1)==139&&(A=A1(new Uint8Array(A))),{data:A}}const w=QR(new DataView(u),{z:o,x:l,y:h});if(w){const C=KR(new DataView(u),w.z,w.x,w.y);if(C){let A=await n.getArrayBuffer(t,C.offset,C.length,e);e.specVersion===1&&(A=SE(A));const z=bE(new DataView(A),o,l,h);if(z){let Z=(await t.getBytes(z.offset,z.length,y)).data;const H=new DataView(Z);return H.getUint8(0)==31&&H.getUint8(1)==139&&(Z=A1(new Uint8Array(Z))),{data:Z}}}}}var kI={getHeader:eL,getZxy:tL};class nL{constructor(){this.tile=(t,n)=>{if(t.type=="json"){const o=t.url.substr(10);let l=this.tiles.get(o);return l||(l=new Gc(o),this.tiles.set(o,l)),l.getHeader().then(h=>{const y={tiles:[t.url+"/{z}/{x}/{y}"],minzoom:h.minZoom,maxzoom:h.maxZoom,bounds:[h.minLon,h.minLat,h.maxLon,h.maxLat]};n(null,y,null,null)}).catch(h=>{n(h,null,null,null)}),{cancel:()=>{}}}else{const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),l=t.url.match(o);if(!l)throw new Error("Invalid PMTiles protocol URL");const h=l[1];let y=this.tiles.get(h);y||(y=new Gc(h),this.tiles.set(h,y));const u=l[2],S=l[3],w=l[4],C=new AbortController,A=C.signal;let z=()=>{C.abort()};return y.getHeader().then(G=>{y.getZxy(+u,+S,+w,A).then(Z=>{Z?n(null,new Uint8Array(Z.data),Z.cacheControl,Z.expires):G.tileType==tu.Mvt?n(null,new Uint8Array,null,null):n(null,null,null,null)}).catch(Z=>{Z.name!=="AbortError"&&n(Z,null,null,null)})}),{cancel:z}}},this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}}function lc(e,t){return(t>>>0)*4294967296+(e>>>0)}function rL(e,t){const n=t.buf;let o,l;if(l=n[t.pos++],o=(l&112)>>4,l<128||(l=n[t.pos++],o|=(l&127)<<3,l<128)||(l=n[t.pos++],o|=(l&127)<<10,l<128)||(l=n[t.pos++],o|=(l&127)<<17,l<128)||(l=n[t.pos++],o|=(l&127)<<24,l<128)||(l=n[t.pos++],o|=(l&1)<<31,l<128))return lc(e,o);throw new Error("Expected varint not more than 10 bytes")}function Dd(e){const t=e.buf;let n,o;return o=t[e.pos++],n=o&127,o<128||(o=t[e.pos++],n|=(o&127)<<7,o<128)||(o=t[e.pos++],n|=(o&127)<<14,o<128)||(o=t[e.pos++],n|=(o&127)<<21,o<128)?n:(o=t[e.pos],n|=(o&15)<<28,rL(n,e))}function TI(e,t,n,o){if(o==0){n==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}function iL(e,t){const n=Math.pow(2,e);let o=t,l=t,h=t;const y=[0,0];let u=1;for(;u<n;)o=1&h/2,l=1&(h^o),TI(u,y,o,l),y[0]+=u*o,y[1]+=u*l,h=h/4,u*=2;return[e,y[0],y[1]]}const oL=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function aL(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||n>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=oL[e],l=Math.pow(2,e);let h=0,y=0,u=0;const S=[t,n];let w=l/2;for(;w>0;)h=(S[0]&w)>0?1:0,y=(S[1]&w)>0?1:0,u+=w*w*(3*h^y),TI(w,S,h,y),w=w/2;return o+u}function Ay(e){let t=0;for(let n=0;n<27;n++){const o=(1<<n)*(1<<n);if(t+o>e)return iL(n,e-t);t+=o}throw Error("Tile zoom level exceeds max safe number limit (26)")}var Jm=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(Jm||{});async function CI(e,t){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream=="undefined")return A1(new Uint8Array(e));{let o=new Response(e).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}}else throw Error("Compression method not supported")}var tu=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(tu||{});const sL=127;function lL(e,t){let n=0,o=e.length-1;for(;n<=o;){const l=o+n>>1,h=t-e[l].tileId;if(h>0)n=l+1;else if(h<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}class uL{constructor(t){this.file=t}getKey(){return this.file.name}async getBytes(t,n){return{data:await this.file.slice(t,t+n).arrayBuffer()}}}class cL{constructor(t){this.url=t}getKey(){return this.url}async getBytes(t,n,o){let l;o||(l=new AbortController,o=l.signal);let h=await fetch(this.url,{signal:o,headers:{Range:"bytes="+t+"-"+(t+n-1)}});if(h.status===416&&t===0){const S=h.headers.get("Content-Range");if(!S||!S.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const w=+S.substr(8);h=await fetch(this.url,{signal:o,headers:{Range:"bytes=0-"+(w-1)}})}if(h.status>=300)throw Error("Bad response code: "+h.status);const y=h.headers.get("Content-Length");if(h.status===200&&(!y||+y>n))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:await h.arrayBuffer(),etag:h.headers.get("ETag")||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}}}function aa(e,t){const n=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return n*Math.pow(2,32)+o}function hL(e,t){const n=new DataView(e),o=n.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:aa(n,8),rootDirectoryLength:aa(n,16),jsonMetadataOffset:aa(n,24),jsonMetadataLength:aa(n,32),leafDirectoryOffset:aa(n,40),leafDirectoryLength:aa(n,48),tileDataOffset:aa(n,56),tileDataLength:aa(n,64),numAddressedTiles:aa(n,72),numTileEntries:aa(n,80),numTileContents:aa(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function PI(e){const t={buf:new Uint8Array(e),pos:0},n=Dd(t),o=[];let l=0;for(let h=0;h<n;h++){const y=Dd(t);o.push({tileId:l+y,offset:0,length:0,runLength:1}),l+=y}for(let h=0;h<n;h++)o[h].runLength=Dd(t);for(let h=0;h<n;h++)o[h].length=Dd(t);for(let h=0;h<n;h++){const y=Dd(t);y===0&&h>0?o[h].offset=o[h-1].offset+o[h-1].length:o[h].offset=y-1}return o}function dL(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}class Oc extends Error{}async function fL(e,t,n,o){const l=await e.getBytes(0,16384);if(new DataView(l.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(dL(l.data)<3)return[await kI.getHeader(e)];const y=l.data.slice(0,sL);let u=l.etag;o&&l.etag!=o&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),u=void 0);const S=hL(y,u);if(n){const w=l.data.slice(S.rootDirectoryOffset,S.rootDirectoryOffset+S.rootDirectoryLength),C=e.getKey()+"|"+(S.etag||"")+"|"+S.rootDirectoryOffset+"|"+S.rootDirectoryLength,A=PI(await t(w,S.internalCompression));return[S,[C,A.length,A]]}return[S,void 0]}async function pL(e,t,n,o,l){const h=await e.getBytes(n,o);if(l.etag&&l.etag!==h.etag)throw new Oc(h.etag);const y=await t(h.data,l.internalCompression),u=PI(y);if(u.length===0)throw new Error("Empty directory is invalid");return u}class mL{constructor(t=100,n=!0,o=CI){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=n,this.decompress=o}async getHeader(t,n){const o=t.getKey();if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,await this.cache.get(o).data;const l=new Promise((h,y)=>{fL(t,this.decompress,this.prefetch,n).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),h(u[0]),this.prune()}).catch(u=>{y(u)})});return this.cache.set(o,{lastUsed:this.counter++,data:l}),l}async getDirectory(t,n,o,l){const h=t.getKey()+"|"+(l.etag||"")+"|"+n+"|"+o;if(this.cache.has(h))return this.cache.get(h).lastUsed=this.counter++,await this.cache.get(h).data;const y=new Promise((u,S)=>{pL(t,this.decompress,n,o,l).then(w=>{u(w),this.prune()}).catch(w=>{S(w)})});return this.cache.set(h,{lastUsed:this.counter++,data:y}),y}async getArrayBuffer(t,n,o,l){const h=t.getKey()+"|"+(l.etag||"")+"|"+n+"|"+o;if(this.cache.has(h))return this.cache.get(h).lastUsed=this.counter++,await this.cache.get(h).data;const y=new Promise((u,S)=>{t.getBytes(n,o).then(w=>{if(l.etag&&l.etag!==w.etag)throw new Oc(w.etag);u(w.data),this.cache.has(h),this.prune()}).catch(w=>{S(w)})});return this.cache.set(h,{lastUsed:this.counter++,data:y}),y}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,n;this.cache.forEach((o,l)=>{o.lastUsed<t&&(t=o.lastUsed,n=l)}),n&&this.cache.delete(n)}}async invalidate(t,n){this.cache.delete(t.getKey()),await this.getHeader(t,n)}}class Gc{constructor(t,n,o){typeof t=="string"?this.source=new cL(t):this.source=t,o?this.decompress=o:this.decompress=CI,n?this.cache=n:this.cache=new mL}async getHeader(){return await this.cache.getHeader(this.source)}async getZxyAttempt(t,n,o,l){const h=aL(t,n,o),y=await this.cache.getHeader(this.source);if(y.specVersion<3)return kI.getZxy(y,this.source,this.cache,t,n,o,l);if(t<y.minZoom||t>y.maxZoom)return;let u=y.rootDirectoryOffset,S=y.rootDirectoryLength;for(let w=0;w<=3;w++){const C=await this.cache.getDirectory(this.source,u,S,y),A=lL(C,h);if(A)if(A.runLength>0){const z=await this.source.getBytes(y.tileDataOffset+A.offset,A.length,l);if(y.etag&&y.etag!==z.etag)throw new Oc(z.etag);return{data:await this.decompress(z.data,y.tileCompression),cacheControl:z.cacheControl,expires:z.expires}}else u=y.leafDirectoryOffset+A.offset,S=A.length;else return}throw Error("Maximum directory depth exceeded")}async getZxy(t,n,o,l){try{return await this.getZxyAttempt(t,n,o,l)}catch(h){if(h instanceof Oc)return this.cache.invalidate(this.source,h.message),await this.getZxyAttempt(t,n,o,l);throw h}}async getMetadataAttempt(){const t=await this.cache.getHeader(this.source),n=await this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==n.etag)throw new Oc(n.etag);const o=await this.decompress(n.data,t.internalCompression),l=new TextDecoder("utf-8");return JSON.parse(l.decode(o))}async getMetadata(){try{return await this.getMetadataAttempt()}catch(t){if(t instanceof Oc)return this.cache.invalidate(this.source,t.message),await this.getMetadataAttempt();throw t}}}function II(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var gL=["color"],yL=W.exports.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,l=II(e,gL);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),_L=["color"],vL=W.exports.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,l=II(e,_L);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))});function MI(...e){return t=>e.forEach(n=>function(o,l){typeof o=="function"?o(l):o!=null&&(o.current=l)}(n,t))}function ds(...e){return W.exports.useCallback(MI(...e),e)}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ze.apply(this,arguments)}const Cf=W.exports.forwardRef((e,t)=>{const{children:n,...o}=e;return W.exports.Children.toArray(n).some(EE)?W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(n,l=>EE(l)?W.exports.createElement(z1,Ze({},o,{ref:t}),l.props.children):l)):W.exports.createElement(z1,Ze({},o,{ref:t}),n)});Cf.displayName="Slot";const z1=W.exports.forwardRef((e,t)=>{const{children:n,...o}=e;return W.exports.isValidElement(n)?W.exports.cloneElement(n,{...wL(o,n.props),ref:MI(t,n.ref)}):W.exports.Children.count(n)>1?W.exports.Children.only(null):null});z1.displayName="SlotClone";const xL=({children:e})=>W.exports.createElement(W.exports.Fragment,null,e);function EE(e){return W.exports.isValidElement(e)&&e.type===xL}function wL(e,t){const n={...t};for(const o in t){const l=e[o],h=t[o];/^on[A-Z]/.test(o)?n[o]=(...y)=>{h==null||h(...y),l==null||l(...y)}:o==="style"?n[o]={...l,...h}:o==="className"&&(n[o]=[l,h].filter(Boolean).join(" "))}return{...e,...n}}var bL=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},uc=new WeakMap,bm=new WeakMap,Sm={},nv=0,SL=function(e,t,n){t===void 0&&(t=bL(e)),n===void 0&&(n="data-aria-hidden");var o=Array.isArray(e)?e:[e];Sm[n]||(Sm[n]=new WeakMap);var l=Sm[n],h=[],y=new Set,u=function(w){!w||y.has(w)||(y.add(w),u(w.parentNode))};o.forEach(u);var S=function(w){!w||o.indexOf(w)>=0||Array.prototype.forEach.call(w.children,function(C){if(y.has(C))S(C);else{var A=C.getAttribute("aria-hidden"),z=A!==null&&A!=="false",G=(uc.get(C)||0)+1,Z=(l.get(C)||0)+1;uc.set(C,G),l.set(C,Z),h.push(C),G===1&&z&&bm.set(C,!0),Z===1&&C.setAttribute(n,"true"),z||C.setAttribute("aria-hidden","true")}})};return S(t),y.clear(),nv++,function(){h.forEach(function(w){var C=uc.get(w)-1,A=l.get(w)-1;uc.set(w,C),l.set(w,A),C||(bm.has(w)||w.removeAttribute("aria-hidden"),bm.delete(w)),A||w.removeAttribute(n)}),nv--,nv||(uc=new WeakMap,uc=new WeakMap,bm=new WeakMap,Sm={})}},Ns=function(){return Ns=Object.assign||function(t){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(t[h]=n[h])}return t},Ns.apply(this,arguments)};function EL(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n}function kL(e,t,n){if(n||arguments.length===2)for(var o=0,l=t.length,h;o<l;o++)(h||!(o in t))&&(h||(h=Array.prototype.slice.call(t,0,o)),h[o]=t[o]);return e.concat(h||Array.prototype.slice.call(t))}var Qm="right-scroll-bar-position",eg="width-before-scroll-bar",TL="with-scroll-bars-hidden",CL="--removed-body-scroll-bar-size";function PL(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function IL(e,t){var n=W.exports.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(o){var l=n.value;l!==o&&(n.value=o,n.callback(o,l))}}}})[0];return n.callback=t,n.facade}function ML(e,t){return IL(t||null,function(n){return e.forEach(function(o){return PL(o,n)})})}var jg=function(){return jg=Object.assign||function(t){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(t[h]=n[h])}return t},jg.apply(this,arguments)};function AL(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n}function zL(e){return e}function DL(e,t){t===void 0&&(t=zL);var n=[],o=!1,l={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(h){var y=t(h,o);return n.push(y),function(){n=n.filter(function(u){return u!==y})}},assignSyncMedium:function(h){for(o=!0;n.length;){var y=n;n=[],y.forEach(h)}n={push:function(u){return h(u)},filter:function(){return n}}},assignMedium:function(h){o=!0;var y=[];if(n.length){var u=n;n=[],u.forEach(h),y=n}var S=function(){var C=y;y=[],C.forEach(h)},w=function(){return Promise.resolve().then(S)};w(),n={push:function(C){y.push(C),w()},filter:function(C){return y=y.filter(C),n}}}};return l}function RL(e){e===void 0&&(e={});var t=DL(null);return t.options=jg({async:!0,ssr:!1},e),t}var AI=function(e){var t=e.sideCar,n=AL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return W.exports.createElement(o,jg({},n))};AI.isSideCarExport=!0;function LL(e,t){return e.useMedium(t),AI}var zI=RL(),rv=function(){},zy=W.exports.forwardRef(function(e,t){var n=W.exports.useRef(null),o=W.exports.useState({onScrollCapture:rv,onWheelCapture:rv,onTouchMoveCapture:rv}),l=o[0],h=o[1],y=e.forwardProps,u=e.children,S=e.className,w=e.removeScrollBar,C=e.enabled,A=e.shards,z=e.sideCar,G=e.noIsolation,Z=e.inert,H=e.allowPinchZoom,fe=e.as,B=fe===void 0?"div":fe,V=EL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),K=z,le=ML([n,t]),ue=Ns(Ns({},V),l);return W.exports.createElement(W.exports.Fragment,null,C&&W.exports.createElement(K,{sideCar:zI,removeScrollBar:w,shards:A,noIsolation:G,inert:Z,setCallbacks:h,allowPinchZoom:!!H,lockRef:n}),y?W.exports.cloneElement(W.exports.Children.only(u),Ns(Ns({},ue),{ref:le})):W.exports.createElement(B,Ns({},ue,{className:S,ref:le}),u))});zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zy.classNames={fullWidth:eg,zeroRight:Qm};var FL=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function OL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=FL();return t&&e.setAttribute("nonce",t),e}function $L(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function BL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var VL=function(){var e=0,t=null;return{add:function(n){e==0&&(t=OL())&&($L(t,n),BL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},NL=function(){var e=VL();return function(t){W.exports.useEffect(function(){return e.add(t),function(){e.remove()}},[t])}},DI=function(){var e=NL(),t=function(n){var o=n.styles;return e(o),null};return t},UL={left:0,top:0,right:0,gap:0},iv=function(e){return parseInt(e||"",10)||0},jL=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[iv(n),iv(o),iv(l)]},kE=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return UL;var t=jL(e),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-n+t[2]-t[0])}},GL=DI(),WL=function(e,t,n,o){var l=e.left,h=e.top,y=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(TL,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(u,"px ").concat(o,`;
  }
  body {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(y,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qm,` {
    right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(eg,` {
    margin-right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(Qm," .").concat(Qm,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(eg," .").concat(eg,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body {
    `).concat(CL,": ").concat(u,`px;
  }
`)},qL=function(e){var t=W.exports.useState(kE(e.gapMode)),n=t[0],o=t[1];W.exports.useEffect(function(){o(kE(e.gapMode))},[e.gapMode]);var l=e.noRelative,h=e.noImportant,y=e.gapMode,u=y===void 0?"margin":y;return W.exports.createElement(GL,{styles:WL(n,!l,u,h?"":"!important")})},D1=!1;if(typeof window!="undefined")try{var Em=Object.defineProperty({},"passive",{get:function(){return D1=!0,!0}});window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{D1=!1}var cc=D1?{passive:!1}:!1,ZL=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},HL=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},TE=function(e,t){var n=t;do{typeof ShadowRoot!="undefined"&&n instanceof ShadowRoot&&(n=n.host);var o=RI(e,n);if(o){var l=LI(e,n),h=l[1],y=l[2];if(h>y)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},XL=function(e){var t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;return[t,n,o]},KL=function(e){var t=e.scrollLeft,n=e.scrollWidth,o=e.clientWidth;return[t,n,o]},RI=function(e,t){return e==="v"?ZL(t):HL(t)},LI=function(e,t){return e==="v"?XL(t):KL(t)},YL=function(e,t){return e==="h"&&t==="rtl"?-1:1},JL=function(e,t,n,o,l){var h=YL(e,window.getComputedStyle(t).direction),y=h*o,u=n.target,S=t.contains(u),w=!1,C=y>0,A=0,z=0;do{var G=LI(e,u),Z=G[0],H=G[1],fe=G[2],B=H-fe-h*Z;(Z||B)&&RI(e,u)&&(A+=B,z+=Z),u=u.parentNode}while(!S&&u!==document.body||S&&(t.contains(u)||t===u));return(C&&(l&&A===0||!l&&y>A)||!C&&(l&&z===0||!l&&-y>z))&&(w=!0),w},km=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CE=function(e){return[e.deltaX,e.deltaY]},PE=function(e){return e&&"current"in e?e.current:e},QL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},eF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tF=0,hc=[];function nF(e){var t=W.exports.useRef([]),n=W.exports.useRef([0,0]),o=W.exports.useRef(),l=W.exports.useState(tF++)[0],h=W.exports.useState(function(){return DI()})[0],y=W.exports.useRef(e);W.exports.useEffect(function(){y.current=e},[e]),W.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var H=kL([e.lockRef.current],(e.shards||[]).map(PE),!0).filter(Boolean);return H.forEach(function(fe){return fe.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),H.forEach(function(fe){return fe.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var u=W.exports.useCallback(function(H,fe){if("touches"in H&&H.touches.length===2)return!y.current.allowPinchZoom;var B=km(H),V=n.current,K="deltaX"in H?H.deltaX:V[0]-B[0],le="deltaY"in H?H.deltaY:V[1]-B[1],ue,ge=H.target,ye=Math.abs(K)>Math.abs(le)?"h":"v";if("touches"in H&&ye==="h"&&ge.type==="range")return!1;var Ee=TE(ye,ge);if(!Ee)return!0;if(Ee?ue=ye:(ue=ye==="v"?"h":"v",Ee=TE(ye,ge)),!Ee)return!1;if(!o.current&&"changedTouches"in H&&(K||le)&&(o.current=ue),!ue)return!0;var je=o.current||ue;return JL(je,fe,H,je==="h"?K:le,!0)},[]),S=W.exports.useCallback(function(H){var fe=H;if(!(!hc.length||hc[hc.length-1]!==h)){var B="deltaY"in fe?CE(fe):km(fe),V=t.current.filter(function(ue){return ue.name===fe.type&&ue.target===fe.target&&QL(ue.delta,B)})[0];if(V&&V.should){fe.preventDefault();return}if(!V){var K=(y.current.shards||[]).map(PE).filter(Boolean).filter(function(ue){return ue.contains(fe.target)}),le=K.length>0?u(fe,K[0]):!y.current.noIsolation;le&&fe.preventDefault()}}},[]),w=W.exports.useCallback(function(H,fe,B,V){var K={name:H,delta:fe,target:B,should:V};t.current.push(K),setTimeout(function(){t.current=t.current.filter(function(le){return le!==K})},1)},[]),C=W.exports.useCallback(function(H){n.current=km(H),o.current=void 0},[]),A=W.exports.useCallback(function(H){w(H.type,CE(H),H.target,u(H,e.lockRef.current))},[]),z=W.exports.useCallback(function(H){w(H.type,km(H),H.target,u(H,e.lockRef.current))},[]);W.exports.useEffect(function(){return hc.push(h),e.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:z}),document.addEventListener("wheel",S,cc),document.addEventListener("touchmove",S,cc),document.addEventListener("touchstart",C,cc),function(){hc=hc.filter(function(H){return H!==h}),document.removeEventListener("wheel",S,cc),document.removeEventListener("touchmove",S,cc),document.removeEventListener("touchstart",C,cc)}},[]);var G=e.removeScrollBar,Z=e.inert;return W.exports.createElement(W.exports.Fragment,null,Z?W.exports.createElement(h,{styles:eF(l)}):null,G?W.exports.createElement(qL,{gapMode:"margin"}):null)}var rF=LL(zI,nF),FI=W.exports.forwardRef(function(e,t){return W.exports.createElement(zy,Ns({},e,{ref:t,sideCar:rF}))});FI.classNames=zy.classNames;var iF=FI;let ov=0;function oF(){W.exports.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:IE()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:IE()),ov++,()=>{ov===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),ov--}},[])}function IE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const no=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>({...e,[t]:W.exports.forwardRef((n,o)=>{const{asChild:l,...h}=n,y=l?Cf:t;return W.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),W.exports.createElement(y,Ze({},h,{ref:o}))})}),{}),Gg=Boolean(globalThis==null?void 0:globalThis.document)?W.exports.useLayoutEffect:()=>{},Dy=e=>{const{present:t,children:n}=e,o=function(y){const[u,S]=W.exports.useState(),w=W.exports.useRef({}),C=W.exports.useRef(y),A=W.exports.useRef("none"),z=y?"mounted":"unmounted",[G,Z]=function(H,fe){return W.exports.useReducer((B,V)=>{const K=fe[B][V];return K!=null?K:B},H)}(z,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.exports.useEffect(()=>{const H=Tm(w.current);A.current=G==="mounted"?H:"none"},[G]),Gg(()=>{const H=w.current,fe=C.current;if(fe!==y){const B=A.current,V=Tm(H);y?Z("MOUNT"):V==="none"||(H==null?void 0:H.display)==="none"?Z("UNMOUNT"):Z(fe&&B!==V?"ANIMATION_OUT":"UNMOUNT"),C.current=y}},[y,Z]),Gg(()=>{if(u){const H=B=>{const V=Tm(w.current).includes(B.animationName);B.target===u&&V&&Z("ANIMATION_END")},fe=B=>{B.target===u&&(A.current=Tm(w.current))};return u.addEventListener("animationstart",fe),u.addEventListener("animationcancel",H),u.addEventListener("animationend",H),()=>{u.removeEventListener("animationstart",fe),u.removeEventListener("animationcancel",H),u.removeEventListener("animationend",H)}}Z("ANIMATION_END")},[u,Z]),{isPresent:["mounted","unmountSuspended"].includes(G),ref:W.exports.useCallback(H=>{H&&(w.current=getComputedStyle(H)),S(H)},[])}}(t),l=typeof n=="function"?n({present:o.isPresent}):W.exports.Children.only(n),h=ds(o.ref,l.ref);return typeof n=="function"||o.isPresent?W.exports.cloneElement(l,{ref:h}):null};function Tm(e){return(e==null?void 0:e.animationName)||"none"}Dy.displayName="Presence";const aF=W.exports.forwardRef((e,t)=>{var n;const{container:o=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...l}=e;return o?Q4.createPortal(W.exports.createElement(no.div,Ze({},l,{ref:t})),o):null});function rl(e){const t=W.exports.useRef(e);return W.exports.useEffect(()=>{t.current=e}),W.exports.useMemo(()=>(...n)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...n)},[])}const ME={bubbles:!1,cancelable:!0},sF=W.exports.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:l,onUnmountAutoFocus:h,...y}=e,[u,S]=W.exports.useState(null),w=rl(l),C=rl(h),A=W.exports.useRef(null),z=ds(t,H=>S(H)),G=W.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.exports.useEffect(()=>{if(o){let B=function(K){if(G.paused||!u)return;const le=K.target;u.contains(le)?A.current=le:$l(A.current,{select:!0})},V=function(K){!G.paused&&u&&(u.contains(K.relatedTarget)||$l(A.current,{select:!0}))};var H=B,fe=V;return document.addEventListener("focusin",B),document.addEventListener("focusout",V),()=>{document.removeEventListener("focusin",B),document.removeEventListener("focusout",V)}}},[o,u,G.paused]),W.exports.useEffect(()=>{if(u){DE.add(G);const fe=document.activeElement;if(!u.contains(fe)){const B=new Event("focusScope.autoFocusOnMount",ME);u.addEventListener("focusScope.autoFocusOnMount",w),u.dispatchEvent(B),B.defaultPrevented||(function(V,{select:K=!1}={}){const le=document.activeElement;for(const ue of V)if($l(ue,{select:K}),document.activeElement!==le)return}((H=AE(u),H.filter(V=>V.tagName!=="A")),{select:!0}),document.activeElement===fe&&$l(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",w),setTimeout(()=>{const B=new Event("focusScope.autoFocusOnUnmount",ME);u.addEventListener("focusScope.autoFocusOnUnmount",C),u.dispatchEvent(B),B.defaultPrevented||$l(fe!=null?fe:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",C),DE.remove(G)},0)}}var H},[u,w,C,G]);const Z=W.exports.useCallback(H=>{if(!n&&!o||G.paused)return;const fe=H.key==="Tab"&&!H.altKey&&!H.ctrlKey&&!H.metaKey,B=document.activeElement;if(fe&&B){const V=H.currentTarget,[K,le]=function(ue){const ge=AE(ue),ye=zE(ge,ue),Ee=zE(ge.reverse(),ue);return[ye,Ee]}(V);K&&le?H.shiftKey||B!==le?H.shiftKey&&B===K&&(H.preventDefault(),n&&$l(le,{select:!0})):(H.preventDefault(),n&&$l(K,{select:!0})):B===V&&H.preventDefault()}},[n,o,G.paused]);return W.exports.createElement(no.div,Ze({tabIndex:-1},y,{ref:z,onKeyDown:Z}))});function AE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const l=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||l?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function zE(e,t){for(const n of e)if(!lF(n,{upTo:t}))return n}function lF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function $l(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(o){return o instanceof HTMLInputElement&&"select"in o}(e)&&t&&e.select()}}const DE=function(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=RE(e,t),e.unshift(t)},remove(t){var n;e=RE(e,t),(n=e[0])===null||n===void 0||n.resume()}}}();function RE(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function uF(e){const t=rl(e);W.exports.useEffect(()=>{const n=o=>{o.key==="Escape"&&t(o)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t])}let LE,Cm=0;function cF({disabled:e}){const t=W.exports.useRef(!1);Gg(()=>{if(e){let l=function(){Cm--,Cm===0&&(document.body.style.pointerEvents=LE)},h=function(y){t.current=y.pointerType!=="mouse"};var n=l,o=h;return Cm===0&&(LE=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Cm++,document.addEventListener("pointerup",h),()=>{t.current?document.addEventListener("click",l,{once:!0}):l(),document.removeEventListener("pointerup",h)}}},[e])}function Oi(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}const hF=W.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dF=W.exports.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:h,onInteractOutside:y,onDismiss:u,...S}=e,w=W.exports.useContext(hF),[C,A]=W.exports.useState(null),[,z]=W.exports.useState({}),G=ds(t,ge=>A(ge)),Z=Array.from(w.layers),[H]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),fe=Z.indexOf(H),B=C?Z.indexOf(C):-1,V=w.layersWithOutsidePointerEventsDisabled.size>0,K=B>=fe,le=function(ge){const ye=rl(ge),Ee=W.exports.useRef(!1);return W.exports.useEffect(()=>{const je=Ve=>{Ve.target&&!Ee.current&&OE("dismissableLayer.pointerDownOutside",ye,{originalEvent:Ve}),Ee.current=!1},ke=window.setTimeout(()=>{document.addEventListener("pointerdown",je)},0);return()=>{window.clearTimeout(ke),document.removeEventListener("pointerdown",je)}},[ye]),{onPointerDownCapture:()=>Ee.current=!0}}(ge=>{const ye=ge.target,Ee=[...w.branches].some(je=>je.contains(ye));K&&!Ee&&(l==null||l(ge),y==null||y(ge),ge.defaultPrevented||u==null||u())}),ue=function(ge){const ye=rl(ge),Ee=W.exports.useRef(!1);return W.exports.useEffect(()=>{const je=ke=>{ke.target&&!Ee.current&&OE("dismissableLayer.focusOutside",ye,{originalEvent:ke})};return document.addEventListener("focusin",je),()=>document.removeEventListener("focusin",je)},[ye]),{onFocusCapture:()=>Ee.current=!0,onBlurCapture:()=>Ee.current=!1}}(ge=>{const ye=ge.target;[...w.branches].some(Ee=>Ee.contains(ye))||(h==null||h(ge),y==null||y(ge),ge.defaultPrevented||u==null||u())});return uF(ge=>{B===w.layers.size-1&&(o==null||o(ge),ge.defaultPrevented||u==null||u())}),cF({disabled:n}),W.exports.useEffect(()=>{C&&(n&&w.layersWithOutsidePointerEventsDisabled.add(C),w.layers.add(C),FE())},[C,n,w]),W.exports.useEffect(()=>()=>{C&&(w.layers.delete(C),w.layersWithOutsidePointerEventsDisabled.delete(C),FE())},[C,w]),W.exports.useEffect(()=>{const ge=()=>z({});return document.addEventListener("dismissableLayer.update",ge),()=>document.removeEventListener("dismissableLayer.update",ge)},[]),W.exports.createElement(no.div,Ze({},S,{ref:G,style:{pointerEvents:V?K?"auto":"none":void 0,...e.style},onFocusCapture:Oi(e.onFocusCapture,ue.onFocusCapture),onBlurCapture:Oi(e.onBlurCapture,ue.onBlurCapture),onPointerDownCapture:Oi(e.onPointerDownCapture,le.onPointerDownCapture)}))});function FE(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function OE(e,t,n){const o=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});return t&&o.addEventListener(e,t,{once:!0}),!o.dispatchEvent(l)}function Wf({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,l]=function({defaultProp:S,onChange:w}){const C=W.exports.useState(S),[A]=C,z=W.exports.useRef(A),G=rl(w);return W.exports.useEffect(()=>{z.current!==A&&(G(A),z.current=A)},[A,z,G]),C}({defaultProp:t,onChange:n}),h=e!==void 0,y=h?e:o,u=rl(n);return[y,W.exports.useCallback(S=>{if(h){const w=S,C=typeof S=="function"?w(e):S;C!==e&&u(C)}else l(S)},[h,e,l,u])]}const fF=Fv["useId".toString()]||(()=>{});let pF=0;function of(e){const[t,n]=W.exports.useState(fF());return Gg(()=>{e||n(o=>o!=null?o:String(pF++))},[e]),e||(t?`radix-${t}`:"")}function OI(e,t){const n=W.exports.createContext(t);function o(l){const{children:h,...y}=l,u=W.exports.useMemo(()=>y,Object.values(y));return W.exports.createElement(n.Provider,{value:u},h)}return o.displayName=e+"Provider",[o,function(l){const h=W.exports.useContext(n);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}]}function qf(e,t=[]){let n=[];const o=()=>{const l=n.map(h=>W.exports.createContext(h));return function(h){const y=(h==null?void 0:h[e])||l;return W.exports.useMemo(()=>({[`__scope${e}`]:{...h,[e]:y}}),[h,y])}};return o.scopeName=e,[function(l,h){const y=W.exports.createContext(h),u=n.length;function S(w){const{scope:C,children:A,...z}=w,G=(C==null?void 0:C[e][u])||y,Z=W.exports.useMemo(()=>z,Object.values(z));return W.exports.createElement(G.Provider,{value:Z},A)}return n=[...n,h],S.displayName=l+"Provider",[S,function(w,C){const A=(C==null?void 0:C[e][u])||y,z=W.exports.useContext(A);if(z)return z;if(h!==void 0)return h;throw new Error(`\`${w}\` must be used within \`${l}\``)}]},mF(o,...t)]}function mF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(l){const h=o.reduce((y,{useScope:u,scopeName:S})=>({...y,...u(l)[`__scope${S}`]}),{});return W.exports.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return n.scopeName=t.scopeName,n}const[gF,Dq]=qf("Dialog"),[yF,ll]=gF("Dialog"),_F=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:l,onOpenChange:h,modal:y=!0,allowPinchZoom:u}=e,S=W.exports.useRef(null),w=W.exports.useRef(null),[C=!1,A]=Wf({prop:o,defaultProp:l,onChange:h});return W.exports.createElement(yF,{scope:t,triggerRef:S,contentRef:w,contentId:of(),titleId:of(),descriptionId:of(),open:C,onOpenChange:A,onOpenToggle:W.exports.useCallback(()=>A(z=>!z),[A]),modal:y,allowPinchZoom:u},n)},vF=e=>{const{__scopeDialog:t,forceMount:n,children:o,container:l}=e,h=ll("DialogPortal",t);return W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(o,y=>W.exports.createElement(Dy,{present:n||h.open},W.exports.createElement(aF,{asChild:!0,container:l},y))))},xF=W.exports.forwardRef((e,t)=>{const{forceMount:n,...o}=e,l=ll("DialogOverlay",e.__scopeDialog);return l.modal?W.exports.createElement(Dy,{present:n||l.open},W.exports.createElement(wF,Ze({},o,{ref:t}))):null}),wF=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,l=ll("DialogOverlay",n);return W.exports.createElement(iF,{as:Cf,allowPinchZoom:l.allowPinchZoom,shards:[l.contentRef]},W.exports.createElement(no.div,Ze({"data-state":BI(l.open)},o,{ref:t,style:{pointerEvents:"auto",...o.style}})))}),bF=W.exports.forwardRef((e,t)=>{const{forceMount:n,...o}=e,l=ll("DialogContent",e.__scopeDialog);return W.exports.createElement(Dy,{present:n||l.open},l.modal?W.exports.createElement(SF,Ze({},o,{ref:t})):W.exports.createElement(EF,Ze({},o,{ref:t})))}),SF=W.exports.forwardRef((e,t)=>{const n=ll("DialogContent",e.__scopeDialog),o=W.exports.useRef(null),l=ds(t,n.contentRef,o);return W.exports.useEffect(()=>{const h=o.current;if(h)return SL(h)},[]),W.exports.createElement($I,Ze({},e,{ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oi(e.onCloseAutoFocus,h=>{var y;h.preventDefault(),(y=n.triggerRef.current)===null||y===void 0||y.focus()}),onPointerDownOutside:Oi(e.onPointerDownOutside,h=>{const y=h.detail.originalEvent,u=y.button===0&&y.ctrlKey===!0;(y.button===2||u)&&h.preventDefault()}),onFocusOutside:Oi(e.onFocusOutside,h=>h.preventDefault())}))}),EF=W.exports.forwardRef((e,t)=>{const n=ll("DialogContent",e.__scopeDialog),o=W.exports.useRef(!1);return W.exports.createElement($I,Ze({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var h,y;(h=e.onCloseAutoFocus)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current||(y=n.triggerRef.current)===null||y===void 0||y.focus(),l.preventDefault()),o.current=!1},onInteractOutside:l=>{var h,y;(h=e.onInteractOutside)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current=!0);const u=l.target;!((y=n.triggerRef.current)===null||y===void 0)&&y.contains(u)&&l.preventDefault()}}))}),$I=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:h,...y}=e,u=ll("DialogContent",n),S=W.exports.useRef(null),w=ds(t,S);return oF(),W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(sF,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:h},W.exports.createElement(dF,Ze({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":BI(u.open)},y,{ref:w,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),kF=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,l=ll("DialogClose",n);return W.exports.createElement(no.button,Ze({type:"button"},o,{ref:t,onClick:Oi(e.onClick,()=>l.onOpenChange(!1))}))});function BI(e){return e?"open":"closed"}OI("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"});const TF=_F,CF=vF,PF=xF,IF=bF,MF=kF;var VI={exports:{}},AF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zF=AF,DF=zF;function NI(){}function UI(){}UI.resetWarningCache=NI;var RF=function(){function e(o,l,h,y,u,S){if(S!==DF){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:UI,resetWarningCache:NI};return n.PropTypes=n,n};VI.exports=RF();var Pe=VI.exports;function hh(e,t,n,o){function l(h){return h instanceof n?h:new n(function(y){y(h)})}return new(n||(n=Promise))(function(h,y){function u(C){try{w(o.next(C))}catch(A){y(A)}}function S(C){try{w(o.throw(C))}catch(A){y(A)}}function w(C){C.done?h(C.value):l(C.value).then(u,S)}w((o=o.apply(e,t||[])).next())})}function dh(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,l,h,y;return y={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function u(w){return function(C){return S([w,C])}}function S(w){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,l&&(h=w[0]&2?l.return:w[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,w[1])).done)return h;switch(l=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){n.label=w[1];break}if(w[0]===6&&n.label<h[1]){n.label=h[1],h=w;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(w);break}h[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(C){w=[6,C],l=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function LF(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),l,h=[],y;try{for(;(t===void 0||t-- >0)&&!(l=o.next()).done;)h.push(l.value)}catch(u){y={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(y)throw y.error}}return h}function FF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(LF(arguments[t]));return e}var OF=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Zf(e,t){var n=$F(e);if(typeof n.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function $F(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var o=t.split(".").pop().toLowerCase(),l=OF.get(o);l&&Object.defineProperty(e,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return e}var BF=[".DS_Store","Thumbs.db"];function VF(e){return hh(this,void 0,void 0,function(){return dh(this,function(t){return Wg(e)&&NF(e)?[2,WF(e.dataTransfer,e.type)]:UF(e)?[2,jF(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,GF(e)]:[2,[]]})})}function NF(e){return Wg(e.dataTransfer)}function UF(e){return Wg(e)&&Wg(e.target)}function Wg(e){return typeof e=="object"&&e!==null}function jF(e){return R1(e.target.files).map(function(t){return Zf(t)})}function GF(e){return hh(this,void 0,void 0,function(){var t;return dh(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(o){return o.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(o){return Zf(o)})]}})})}function WF(e,t){return hh(this,void 0,void 0,function(){var n,o;return dh(this,function(l){switch(l.label){case 0:return e===null?[2,[]]:e.items?(n=R1(e.items).filter(function(h){return h.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(qF))]):[3,2];case 1:return o=l.sent(),[2,$E(jI(o))];case 2:return[2,$E(R1(e.files).map(function(h){return Zf(h)}))]}})})}function $E(e){return e.filter(function(t){return BF.indexOf(t.name)===-1})}function R1(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(o)}return t}function qF(e){if(typeof e.webkitGetAsEntry!="function")return BE(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?GI(t):BE(e)}function jI(e){return e.reduce(function(t,n){return FF(t,Array.isArray(n)?jI(n):[n])},[])}function BE(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=Zf(t);return Promise.resolve(n)}function ZF(e){return hh(this,void 0,void 0,function(){return dh(this,function(t){return[2,e.isDirectory?GI(e):HF(e)]})})}function GI(e){var t=e.createReader();return new Promise(function(n,o){var l=[];function h(){var y=this;t.readEntries(function(u){return hh(y,void 0,void 0,function(){var S,w,C;return dh(this,function(A){switch(A.label){case 0:if(u.length)return[3,5];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,Promise.all(l)];case 2:return S=A.sent(),n(S),[3,4];case 3:return w=A.sent(),o(w),[3,4];case 4:return[3,6];case 5:C=Promise.all(u.map(ZF)),l.push(C),h(),A.label=6;case 6:return[2]}})})},function(u){o(u)})}h()})}function HF(e){return hh(this,void 0,void 0,function(){return dh(this,function(t){return[2,new Promise(function(n,o){e.file(function(l){var h=Zf(l,e.fullPath);n(h)},function(l){o(l)})})]})})}var XF=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),o=e.name||"",l=(e.type||"").toLowerCase(),h=l.replace(/\/.*$/,"");return n.some(function(y){var u=y.trim().toLowerCase();return u.charAt(0)==="."?o.toLowerCase().endsWith(u):u.endsWith("/*")?h===u.replace(/\/.*$/,""):l===u})}return!0};function VE(e){return JF(e)||YF(e)||WI(e)||KF()}function KF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JF(e){if(Array.isArray(e))return L1(e)}function QF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pf(e,t){return nO(e)||tO(e,t)||WI(e,t)||eO()}function eO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WI(e,t){if(!!e){if(typeof e=="string")return L1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L1(e,t)}}function L1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function tO(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,y,u;try{for(n=n.call(e);!(l=(y=n.next()).done)&&(o.push(y.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function nO(e){if(Array.isArray(e))return e}var rO="file-invalid-type",iO="file-too-large",oO="file-too-small",aO="too-many-files",sO=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:rO,message:"File type must be ".concat(n)}},NE=function(t){return{code:iO,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},UE=function(t){return{code:oO,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},lO={code:aO,message:"Too many files"};function qI(e,t){var n=e.type==="application/x-moz-file"||XF(e,t);return[n,n?null:sO(t)]}function ZI(e,t,n){if(jl(e.size))if(jl(t)&&jl(n)){if(e.size>n)return[!1,NE(n)];if(e.size<t)return[!1,UE(t)]}else{if(jl(t)&&e.size<t)return[!1,UE(t)];if(jl(n)&&e.size>n)return[!1,NE(n)]}return[!0,null]}function jl(e){return e!=null}function uO(e){var t=e.files,n=e.accept,o=e.minSize,l=e.maxSize,h=e.multiple,y=e.maxFiles,u=e.validator;return!h&&t.length>1||h&&y>=1&&t.length>y?!1:t.every(function(S){var w=qI(S,n),C=Pf(w,1),A=C[0],z=ZI(S,o,l),G=Pf(z,1),Z=G[0],H=u?u(S):null;return A&&Z&&!H})}function qg(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Pm(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function jE(e){e.preventDefault()}function cO(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function hO(e){return e.indexOf("Edge/")!==-1}function dO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return cO(e)||hO(e)}function Ea(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(o){for(var l=arguments.length,h=new Array(l>1?l-1:0),y=1;y<l;y++)h[y-1]=arguments[y];return t.some(function(u){return!qg(o)&&u&&u.apply(void 0,[o].concat(h)),qg(o)})}}function fO(){return"showOpenFilePicker"in window}function pO(e){return jl(e)?Object.entries(e).filter(function(t){var n=Pf(t,2),o=n[0],l=n[1],h=!0;return HI(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(l)||!l.every(XI))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),h=!1),h}).map(function(t){var n=Pf(t,2),o=n[0],l=n[1];return{accept:QF({},o,l)}}):e}function mO(e){if(jl(e))return Object.entries(e).reduce(function(t,n){var o=Pf(n,2),l=o[0],h=o[1];return[].concat(VE(t),[l],VE(h))},[]).filter(function(t){return HI(t)||XI(t)}).join(",")}function gO(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function yO(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function HI(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function XI(e){return/^.*\.[\w]+$/.test(e)}var Ry={exports:{}},Ly={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O=W.exports,vO=Symbol.for("react.element"),xO=Symbol.for("react.fragment"),wO=Object.prototype.hasOwnProperty,bO=_O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SO={key:!0,ref:!0,__self:!0,__source:!0};function KI(e,t,n){var o,l={},h=null,y=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(y=t.ref);for(o in t)wO.call(t,o)&&!SO.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:vO,type:e,key:h,ref:y,props:l,_owner:bO.current}}Ly.Fragment=xO;Ly.jsx=KI;Ly.jsxs=KI;Ry.exports=Ly;const Oe=Ry.exports.jsx,Pt=Ry.exports.jsxs,If=Ry.exports.Fragment;var EO=["children"],kO=["open"],TO=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],CO=["refKey","onChange","onClick"];function PO(e){return AO(e)||MO(e)||YI(e)||IO()}function IO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MO(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AO(e){if(Array.isArray(e))return F1(e)}function av(e,t){return RO(e)||DO(e,t)||YI(e,t)||zO()}function zO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YI(e,t){if(!!e){if(typeof e=="string")return F1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F1(e,t)}}function F1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function DO(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,y,u;try{for(n=n.call(e);!(l=(y=n.next()).done)&&(o.push(y.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function RO(e){if(Array.isArray(e))return e}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(o){O1(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function O1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zg(e,t){if(e==null)return{};var n=LO(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function LO(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var xw=W.exports.forwardRef(function(e,t){var n=e.children,o=Zg(e,EO),l=QI(o),h=l.open,y=Zg(l,kO);return W.exports.useImperativeHandle(t,function(){return{open:h}},[h]),Oe(If,{children:n(ir(ir({},y),{},{open:h}))})});xw.displayName="Dropzone";var JI={disabled:!1,getFilesFromEvent:VF,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};xw.defaultProps=JI;xw.propTypes={children:Pe.func,accept:Pe.objectOf(Pe.arrayOf(Pe.string)),multiple:Pe.bool,preventDropOnDocument:Pe.bool,noClick:Pe.bool,noKeyboard:Pe.bool,noDrag:Pe.bool,noDragEventsBubbling:Pe.bool,minSize:Pe.number,maxSize:Pe.number,maxFiles:Pe.number,disabled:Pe.bool,getFilesFromEvent:Pe.func,onFileDialogCancel:Pe.func,onFileDialogOpen:Pe.func,useFsAccessApi:Pe.bool,autoFocus:Pe.bool,onDragEnter:Pe.func,onDragLeave:Pe.func,onDragOver:Pe.func,onDrop:Pe.func,onDropAccepted:Pe.func,onDropRejected:Pe.func,onError:Pe.func,validator:Pe.func};var $1={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function QI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ir(ir({},JI),e),n=t.accept,o=t.disabled,l=t.getFilesFromEvent,h=t.maxSize,y=t.minSize,u=t.multiple,S=t.maxFiles,w=t.onDragEnter,C=t.onDragLeave,A=t.onDragOver,z=t.onDrop,G=t.onDropAccepted,Z=t.onDropRejected,H=t.onFileDialogCancel,fe=t.onFileDialogOpen,B=t.useFsAccessApi,V=t.autoFocus,K=t.preventDropOnDocument,le=t.noClick,ue=t.noKeyboard,ge=t.noDrag,ye=t.noDragEventsBubbling,Ee=t.onError,je=t.validator,ke=W.exports.useMemo(function(){return mO(n)},[n]),Ve=W.exports.useMemo(function(){return pO(n)},[n]),$t=W.exports.useMemo(function(){return typeof fe=="function"?fe:WE},[fe]),Tt=W.exports.useMemo(function(){return typeof H=="function"?H:WE},[H]),Ct=W.exports.useRef(null),Nt=W.exports.useRef(null),xn=W.exports.useReducer(FO,$1),dn=av(xn,2),Ne=dn[0],at=dn[1],bt=Ne.isFocused,Bt=Ne.isFileDialogActive,lt=W.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&B&&fO()),zn=function(){!lt.current&&Bt&&setTimeout(function(){if(Nt.current){var St=Nt.current.files;St.length||(at({type:"closeDialog"}),Tt())}},300)};W.exports.useEffect(function(){return window.addEventListener("focus",zn,!1),function(){window.removeEventListener("focus",zn,!1)}},[Nt,Bt,Tt,lt]);var Jt=W.exports.useRef([]),Jn=function(St){Ct.current&&Ct.current.contains(St.target)||(St.preventDefault(),Jt.current=[])};W.exports.useEffect(function(){return K&&(document.addEventListener("dragover",jE,!1),document.addEventListener("drop",Jn,!1)),function(){K&&(document.removeEventListener("dragover",jE),document.removeEventListener("drop",Jn))}},[Ct,K]),W.exports.useEffect(function(){return!o&&V&&Ct.current&&Ct.current.focus(),function(){}},[Ct,V,o]);var Ot=W.exports.useCallback(function(Qe){Ee?Ee(Qe):console.error(Qe)},[Ee]),Wn=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ai(Qe),Jt.current=[].concat(PO(Jt.current),[Qe.target]),Pm(Qe)&&Promise.resolve(l(Qe)).then(function(St){if(!(qg(Qe)&&!ye)){var Le=St.length,Kt=Le>0&&uO({files:St,accept:ke,minSize:y,maxSize:h,multiple:u,maxFiles:S,validator:je}),Mt=Le>0&&!Kt;at({isDragAccept:Kt,isDragReject:Mt,isDragActive:!0,type:"setDraggedFiles"}),w&&w(Qe)}}).catch(function(St){return Ot(St)})},[l,w,Ot,ye,ke,y,h,u,S,je]),wi=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ai(Qe);var St=Pm(Qe);if(St&&Qe.dataTransfer)try{Qe.dataTransfer.dropEffect="copy"}catch{}return St&&A&&A(Qe),!1},[A,ye]),Ir=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ai(Qe);var St=Jt.current.filter(function(Kt){return Ct.current&&Ct.current.contains(Kt)}),Le=St.indexOf(Qe.target);Le!==-1&&St.splice(Le,1),Jt.current=St,!(St.length>0)&&(at({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Pm(Qe)&&C&&C(Qe))},[Ct,C,ye]),wr=W.exports.useCallback(function(Qe,St){var Le=[],Kt=[];Qe.forEach(function(Mt){var mr=qI(Mt,ke),gr=av(mr,2),We=gr[0],At=gr[1],It=ZI(Mt,y,h),Nn=av(It,2),Zr=Nn[0],ft=Nn[1],bi=je?je(Mt):null;if(We&&Zr&&!bi)Le.push(Mt);else{var Gi=[At,ft];bi&&(Gi=Gi.concat(bi)),Kt.push({file:Mt,errors:Gi.filter(function(ya){return ya})})}}),(!u&&Le.length>1||u&&S>=1&&Le.length>S)&&(Le.forEach(function(Mt){Kt.push({file:Mt,errors:[lO]})}),Le.splice(0)),at({acceptedFiles:Le,fileRejections:Kt,type:"setFiles"}),z&&z(Le,Kt,St),Kt.length>0&&Z&&Z(Kt,St),Le.length>0&&G&&G(Le,St)},[at,u,ke,y,h,S,z,G,Z,je]),Gt=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ai(Qe),Jt.current=[],Pm(Qe)&&Promise.resolve(l(Qe)).then(function(St){qg(Qe)&&!ye||wr(St,Qe)}).catch(function(St){return Ot(St)}),at({type:"reset"})},[l,wr,Ot,ye]),on=W.exports.useCallback(function(){if(lt.current){at({type:"openDialog"}),$t();var Qe={multiple:u,types:Ve};window.showOpenFilePicker(Qe).then(function(St){return l(St)}).then(function(St){wr(St,null),at({type:"closeDialog"})}).catch(function(St){gO(St)?(Tt(St),at({type:"closeDialog"})):yO(St)?(lt.current=!1,Nt.current&&(Nt.current.value=null,Nt.current.click())):Ot(St)});return}Nt.current&&(at({type:"openDialog"}),$t(),Nt.current.value=null,Nt.current.click())},[at,$t,Tt,B,wr,Ot,Ve,u]),pr=W.exports.useCallback(function(Qe){!Ct.current||!Ct.current.isEqualNode(Qe.target)||(Qe.key===" "||Qe.key==="Enter"||Qe.keyCode===32||Qe.keyCode===13)&&(Qe.preventDefault(),on())},[Ct,on]),Ce=W.exports.useCallback(function(){at({type:"focus"})},[]),Fr=W.exports.useCallback(function(){at({type:"blur"})},[]),ji=W.exports.useCallback(function(){le||(dO()?setTimeout(on,0):on())},[le,on]),Ht=function(St){return o?null:St},qt=function(St){return ue?null:Ht(St)},lr=function(St){return ge?null:Ht(St)},ai=function(St){ye&&St.stopPropagation()},Or=W.exports.useMemo(function(){return function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=Qe.refKey,Le=St===void 0?"ref":St,Kt=Qe.role,Mt=Qe.onKeyDown,mr=Qe.onFocus,gr=Qe.onBlur,We=Qe.onClick,At=Qe.onDragEnter,It=Qe.onDragOver,Nn=Qe.onDragLeave,Zr=Qe.onDrop,ft=Zg(Qe,TO);return ir(ir(O1({onKeyDown:qt(Ea(Mt,pr)),onFocus:qt(Ea(mr,Ce)),onBlur:qt(Ea(gr,Fr)),onClick:Ht(Ea(We,ji)),onDragEnter:lr(Ea(At,Wn)),onDragOver:lr(Ea(It,wi)),onDragLeave:lr(Ea(Nn,Ir)),onDrop:lr(Ea(Zr,Gt)),role:typeof Kt=="string"&&Kt!==""?Kt:"presentation"},Le,Ct),!o&&!ue?{tabIndex:0}:{}),ft)}},[Ct,pr,Ce,Fr,ji,Wn,wi,Ir,Gt,ue,ge,o]),ga=W.exports.useCallback(function(Qe){Qe.stopPropagation()},[]),Dn=W.exports.useMemo(function(){return function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=Qe.refKey,Le=St===void 0?"ref":St,Kt=Qe.onChange,Mt=Qe.onClick,mr=Zg(Qe,CO),gr=O1({accept:ke,multiple:u,type:"file",style:{display:"none"},onChange:Ht(Ea(Kt,Gt)),onClick:Ht(Ea(Mt,ga)),tabIndex:-1},Le,Nt);return ir(ir({},gr),mr)}},[Nt,n,u,Gt,o]);return ir(ir({},Ne),{},{isFocused:bt&&!o,getRootProps:Or,getInputProps:Dn,rootRef:Ct,inputRef:Nt,open:Ht(on)})}function FO(e,t){switch(t.type){case"focus":return ir(ir({},e),{},{isFocused:!0});case"blur":return ir(ir({},e),{},{isFocused:!1});case"openDialog":return ir(ir({},$1),{},{isFileDialogActive:!0});case"closeDialog":return ir(ir({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ir(ir({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ir(ir({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return ir({},$1);default:return e}}function WE(){}const[OO,Rq]=OI("Label",{id:void 0,controlRef:{current:null}}),$O=W.exports.forwardRef((e,t)=>{const{htmlFor:n,id:o,...l}=e,h=W.exports.useRef(null),y=W.exports.useRef(null),u=ds(t,y),S=of(o);return W.exports.useEffect(()=>{if(n){const w=document.getElementById(n);if(y.current&&w){const C=()=>w.getAttribute("aria-labelledby"),A=[S,C()].filter(Boolean).join(" ");return w.setAttribute("aria-labelledby",A),h.current=w,()=>{var z;const G=(z=C())===null||z===void 0?void 0:z.replace(S,"");G===""?w.removeAttribute("aria-labelledby"):G&&w.setAttribute("aria-labelledby",G)}}}},[S,n]),W.exports.createElement(OO,{id:S,controlRef:h},W.exports.createElement(no.span,Ze({role:"label",id:S},l,{ref:u,onMouseDown:w=>{var C;(C=e.onMouseDown)===null||C===void 0||C.call(e,w),!w.defaultPrevented&&w.detail>1&&w.preventDefault()},onClick:w=>{var C;if((C=e.onClick)===null||C===void 0||C.call(e,w),!h.current||w.defaultPrevented)return;const A=h.current.contains(w.target),z=w.isTrusted===!0;!A&&z&&(h.current.click(),h.current.focus())}})))}),BO=$O,VO=hn("input",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"$3",fontFamily:"$sans","&:focus":{boxShadow:"0 0 0 1px black"},width:"100%",border:"1px solid $white",padding:"$1",boxSizing:"border-box",margin:"0 0 $2 0",borderRadius:"$2"}),sv=hn(BO,{display:"block",fontSize:"$3",fontWeight:300,userSelect:"none",padding:"0 0 $1 0"}),NO=hn("h1",{paddingBottom:"$1",fontWeight:500}),UO=hn("div",{maxWidth:780,marginLeft:"auto",marginRight:"auto",padding:"$3"}),jO=hn("button",{padding:"$1 $2",marginBottom:"$1",borderRadius:"$2",cursor:"pointer",variants:{color:{violet:{backgroundColor:"blueviolet",color:"white","&:hover":{backgroundColor:"darkviolet"}},gray:{backgroundColor:"gainsboro","&:hover":{backgroundColor:"lightgray"}}}}}),GO=hn("div",{padding:"$2",border:"1px dashed $white",textAlign:"center",margin:"0 0 $2 0"}),WO=hn("div",{padding:"$1","&:not(:last-child)":{borderBottom:"1px solid $white"},"&:hover":{backgroundColor:"$hover"},variants:{selected:{true:{backgroundColor:"red"}}}}),qO=hn("div",{borderRadius:"$1",border:"1px solid $white",margin:"0 0 $2 0"}),qE=["https://r2-public.protomaps.com/protomaps-sample-datasets/protomaps-basemap-opensource-20230408.pmtiles","https://protomaps.github.io/PMTiles/protomaps(vector)ODbL_firenze.pmtiles","https://protomaps.github.io/PMTiles/stamen_toner(raster)CC-BY+ODbL_z3.pmtiles","https://r2-public.protomaps.com/protomaps-sample-datasets/cb_2018_us_zcta510_500k.pmtiles","https://protomaps.github.io/PMTiles/usgs-mt-whitney-8-15-webp-512.pmtiles"];function ZO(e){const t=W.exports.useCallback(C=>{e.setFile(new Gc(new uL(C[0])))},[]),{acceptedFiles:n,getRootProps:o,getInputProps:l}=QI({onDrop:t});let[h,y]=W.exports.useState("");W.exports.useState(1);const u=C=>{y(C.target.value)},S=C=>()=>{e.setFile(new Gc(qE[C]))};return Pt(UO,{children:[Oe(NO,{children:"PMTiles Viewer"}),Oe(sv,{htmlFor:"remoteUrl",children:"Specify a remote URL"}),Oe(VO,{id:"remoteUrl",placeholder:"https://example.com/my_archive.pmtiles",onChange:u}),Oe(jO,{color:"gray",onClick:()=>{e.setFile(new Gc(h))},disabled:!h.trim(),children:"Load URL"}),Oe(sv,{htmlFor:"localFile",children:"Select a local file"}),Pt(GO,{...o(),children:[Oe("input",{...l()}),Oe("p",{children:"Drag + drop a file here, or click to select"})]}),Oe(sv,{children:"Load an example"}),Oe(qO,{children:qE.map((C,A)=>Oe(WO,{onClick:S(A),children:C},A))})]})}var ww={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ww.read=function(e,t,n,o,l){var h,y,u=l*8-o-1,S=(1<<u)-1,w=S>>1,C=-7,A=n?l-1:0,z=n?-1:1,G=e[t+A];for(A+=z,h=G&(1<<-C)-1,G>>=-C,C+=u;C>0;h=h*256+e[t+A],A+=z,C-=8);for(y=h&(1<<-C)-1,h>>=-C,C+=o;C>0;y=y*256+e[t+A],A+=z,C-=8);if(h===0)h=1-w;else{if(h===S)return y?NaN:(G?-1:1)*(1/0);y=y+Math.pow(2,o),h=h-w}return(G?-1:1)*y*Math.pow(2,h-o)};ww.write=function(e,t,n,o,l,h){var y,u,S,w=h*8-l-1,C=(1<<w)-1,A=C>>1,z=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=o?0:h-1,Z=o?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,y=C):(y=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-y))<1&&(y--,S*=2),y+A>=1?t+=z/S:t+=z*Math.pow(2,1-A),t*S>=2&&(y++,S/=2),y+A>=C?(u=0,y=C):y+A>=1?(u=(t*S-1)*Math.pow(2,l),y=y+A):(u=t*Math.pow(2,A-1)*Math.pow(2,l),y=0));l>=8;e[n+G]=u&255,G+=Z,u/=256,l-=8);for(y=y<<l|u,w+=l;w>0;e[n+G]=y&255,G+=Z,y/=256,w-=8);e[n+G-Z]|=H*128};var HO=vn,Im=ww;function vn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}vn.Varint=0;vn.Fixed64=1;vn.Bytes=2;vn.Fixed32=5;var B1=(1<<16)*(1<<16),ZE=1/B1,XO=12,eM=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");vn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var o=this.readVarint(),l=o>>3,h=this.pos;this.type=o&7,e(l,t,this),this.pos===h&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Mm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=XE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Mm(this.buf,this.pos)+Mm(this.buf,this.pos+4)*B1;return this.pos+=8,e},readSFixed64:function(){var e=Mm(this.buf,this.pos)+XE(this.buf,this.pos+4)*B1;return this.pos+=8,e},readFloat:function(){var e=Im.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Im.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,o;return o=t[this.pos++],n=o&127,o<128||(o=t[this.pos++],n|=(o&127)<<7,o<128)||(o=t[this.pos++],n|=(o&127)<<14,o<128)||(o=t[this.pos++],n|=(o&127)<<21,o<128)?n:(o=t[this.pos],n|=(o&15)<<28,KO(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=XO&&eM?c6(this.buf,t,e):u6(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==vn.Bytes)return e.push(this.readVarint(t));var n=Ka(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==vn.Bytes)return e.push(this.readSVarint());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==vn.Bytes)return e.push(this.readBoolean());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==vn.Bytes)return e.push(this.readFloat());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==vn.Bytes)return e.push(this.readDouble());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==vn.Bytes)return e.push(this.readFixed32());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==vn.Bytes)return e.push(this.readSFixed32());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==vn.Bytes)return e.push(this.readFixed64());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==vn.Bytes)return e.push(this.readSFixed64());var t=Ka(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===vn.Varint)for(;this.buf[this.pos++]>127;);else if(t===vn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===vn.Fixed32)this.pos+=4;else if(t===vn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fc(this.buf,e&-1,this.pos),fc(this.buf,Math.floor(e*ZE),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fc(this.buf,e&-1,this.pos),fc(this.buf,Math.floor(e*ZE),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){YO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=h6(this.buf,e,this.pos);var n=this.pos-t;n>=128&&HE(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Im.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Im.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var o=this.pos-n;o>=128&&HE(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,n){this.writeTag(e,vn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,e6,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,t6,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,i6,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,n6,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,r6,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,o6,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,a6,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,s6,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,l6,t)},writeBytesField:function(e,t){this.writeTag(e,vn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,vn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,vn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,vn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,vn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,vn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,vn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,vn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,vn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,vn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function KO(e,t,n){var o=n.buf,l,h;if(h=o[n.pos++],l=(h&112)>>4,h<128||(h=o[n.pos++],l|=(h&127)<<3,h<128)||(h=o[n.pos++],l|=(h&127)<<10,h<128)||(h=o[n.pos++],l|=(h&127)<<17,h<128)||(h=o[n.pos++],l|=(h&127)<<24,h<128)||(h=o[n.pos++],l|=(h&1)<<31,h<128))return dc(e,l,t);throw new Error("Expected varint not more than 10 bytes")}function Ka(e){return e.type===vn.Bytes?e.readVarint()+e.pos:e.pos+1}function dc(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function YO(e,t){var n,o;if(e>=0?(n=e%4294967296|0,o=e/4294967296|0):(n=~(-e%4294967296),o=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,o=o+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),JO(n,o,t),QO(o,t)}function JO(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function QO(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function HE(e,t,n){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(o);for(var l=n.pos-1;l>=e;l--)n.buf[l+o]=n.buf[l]}function e6(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function t6(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function n6(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function r6(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function i6(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function o6(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function a6(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function s6(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function l6(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Mm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function fc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function XE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function u6(e,t,n){for(var o="",l=t;l<n;){var h=e[l],y=null,u=h>239?4:h>223?3:h>191?2:1;if(l+u>n)break;var S,w,C;u===1?h<128&&(y=h):u===2?(S=e[l+1],(S&192)===128&&(y=(h&31)<<6|S&63,y<=127&&(y=null))):u===3?(S=e[l+1],w=e[l+2],(S&192)===128&&(w&192)===128&&(y=(h&15)<<12|(S&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):u===4&&(S=e[l+1],w=e[l+2],C=e[l+3],(S&192)===128&&(w&192)===128&&(C&192)===128&&(y=(h&15)<<18|(S&63)<<12|(w&63)<<6|C&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,u=1):y>65535&&(y-=65536,o+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),o+=String.fromCharCode(y),l+=u}return o}function c6(e,t,n){return eM.decode(e.subarray(t,n))}function h6(e,t,n){for(var o=0,l,h;o<t.length;o++){if(l=t.charCodeAt(o),l>55295&&l<57344)if(h)if(l<56320){e[n++]=239,e[n++]=191,e[n++]=189,h=l;continue}else l=h-55296<<10|l-56320|65536,h=null;else{l>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):h=l;continue}else h&&(e[n++]=239,e[n++]=191,e[n++]=189,h=null);l<128?e[n++]=l:(l<2048?e[n++]=l>>6|192:(l<65536?e[n++]=l>>12|224:(e[n++]=l>>18|240,e[n++]=l>>12&63|128),e[n++]=l>>6&63|128),e[n++]=l&63|128)}return n}var d6=Wc;function Wc(e,t){this.x=e,this.y=t}Wc.prototype={clone:function(){return new Wc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),o=t*this.x-n*this.y,l=n*this.x+t*this.y;return this.x=o,this.y=l,this},_rotateAround:function(e,t){var n=Math.cos(e),o=Math.sin(e),l=t.x+n*(this.x-t.x)-o*(this.y-t.y),h=t.y+o*(this.x-t.x)+n*(this.y-t.y);return this.x=l,this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Wc.convert=function(e){return e instanceof Wc?e:Array.isArray(e)?new Wc(e[0],e[1]):e};var f6=d6,p6=Qc;function Qc(e,t,n,o,l){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=l,e.readFields(m6,this,t)}function m6(e,t,n){e==1?t.id=n.readVarint():e==2?g6(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function g6(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var o=t._keys[e.readVarint()],l=t._values[e.readVarint()];t.properties[o]=l}}Qc.types=["Unknown","Point","LineString","Polygon"];Qc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,o=0,l=0,h=0,y=[],u;e.pos<t;){if(o<=0){var S=e.readVarint();n=S&7,o=S>>3}if(o--,n===1||n===2)l+=e.readSVarint(),h+=e.readSVarint(),n===1&&(u&&y.push(u),u=[]),u.push(new f6(l,h));else if(n===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+n)}return u&&y.push(u),y};Qc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,o=0,l=0,h=0,y=1/0,u=-1/0,S=1/0,w=-1/0;e.pos<t;){if(o<=0){var C=e.readVarint();n=C&7,o=C>>3}if(o--,n===1||n===2)l+=e.readSVarint(),h+=e.readSVarint(),l<y&&(y=l),l>u&&(u=l),h<S&&(S=h),h>w&&(w=h);else if(n!==7)throw new Error("unknown command "+n)}return[y,S,u,w]};Qc.prototype.toGeoJSON=function(e,t,n){var o=this.extent*Math.pow(2,n),l=this.extent*e,h=this.extent*t,y=this.loadGeometry(),u=Qc.types[this.type],S,w;function C(G){for(var Z=0;Z<G.length;Z++){var H=G[Z],fe=180-(H.y+h)*360/o;G[Z]=[(H.x+l)*360/o-180,360/Math.PI*Math.atan(Math.exp(fe*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(S=0;S<y.length;S++)A[S]=y[S][0];y=A,C(y);break;case 2:for(S=0;S<y.length;S++)C(y[S]);break;case 3:for(y=y6(y),S=0;S<y.length;S++)for(w=0;w<y[S].length;w++)C(y[S][w]);break}y.length===1?y=y[0]:u="Multi"+u;var z={type:"Feature",geometry:{type:u,coordinates:y},properties:this.properties};return"id"in this&&(z.id=this.id),z};function y6(e){var t=e.length;if(t<=1)return[e];for(var n=[],o,l,h=0;h<t;h++){var y=_6(e[h]);y!==0&&(l===void 0&&(l=y<0),l===y<0?(o&&n.push(o),o=[e[h]]):o.push(e[h]))}return o&&n.push(o),n}function _6(e){for(var t=0,n=0,o=e.length,l=o-1,h,y;n<o;l=n++)h=e[n],y=e[l],t+=(y.x-h.x)*(h.y+y.y);return t}var v6=p6,x6=tM;function tM(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(w6,this,t),this.length=this._features.length}function w6(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(b6(n))}function b6(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var o=e.readVarint()>>3;t=o===1?e.readString():o===2?e.readFloat():o===3?e.readDouble():o===4?e.readVarint64():o===5?e.readVarint():o===6?e.readSVarint():o===7?e.readBoolean():null}return t}tM.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new v6(this._pbf,t,this.extent,this._keys,this._values)};var S6=x6,E6=k6;function k6(e,t){this.layers=e.readFields(T6,{},t)}function T6(e,t,n){if(e===3){var o=new S6(n,n.readVarint()+n.pos);o.length&&(t[o.name]=o)}}var C6=E6;const V1=Math.PI,N1=2*V1,Nl=1e-6,P6=N1-Nl;function U1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function nM(){return new U1}U1.prototype=nM.prototype={constructor:U1,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,o){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(e,t,n,o,l,h){this._+="C"+ +e+","+ +t+","+ +n+","+ +o+","+(this._x1=+l)+","+(this._y1=+h)},arcTo:function(e,t,n,o,l){e=+e,t=+t,n=+n,o=+o,l=+l;var h=this._x1,y=this._y1,u=n-e,S=o-t,w=h-e,C=y-t,A=w*w+C*C;if(l<0)throw new Error("negative radius: "+l);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(A>Nl)if(!(Math.abs(C*u-S*w)>Nl)||!l)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var z=n-h,G=o-y,Z=u*u+S*S,H=z*z+G*G,fe=Math.sqrt(Z),B=Math.sqrt(A),V=l*Math.tan((V1-Math.acos((Z+A-H)/(2*fe*B)))/2),K=V/B,le=V/fe;Math.abs(K-1)>Nl&&(this._+="L"+(e+K*w)+","+(t+K*C)),this._+="A"+l+","+l+",0,0,"+ +(C*z>w*G)+","+(this._x1=e+le*u)+","+(this._y1=t+le*S)}},arc:function(e,t,n,o,l,h){e=+e,t=+t,n=+n,h=!!h;var y=n*Math.cos(o),u=n*Math.sin(o),S=e+y,w=t+u,C=1^h,A=h?o-l:l-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+S+","+w:(Math.abs(this._x1-S)>Nl||Math.abs(this._y1-w)>Nl)&&(this._+="L"+S+","+w),n&&(A<0&&(A=A%N1+N1),A>P6?this._+="A"+n+","+n+",0,1,"+C+","+(e-y)+","+(t-u)+"A"+n+","+n+",0,1,"+C+","+(this._x1=S)+","+(this._y1=w):A>Nl&&(this._+="A"+n+","+n+",0,"+ +(A>=V1)+","+C+","+(this._x1=e+n*Math.cos(l))+","+(this._y1=t+n*Math.sin(l))))},rect:function(e,t,n,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};function I6(e){for(var t=e.length/6|0,n=new Array(t),o=0;o<t;)n[o]="#"+e.slice(o*6,++o*6);return n}var tg=I6("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),M6=function(){},rM=typeof window!="undefined",A6=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(l){e.addRange(l)}),t&&t.focus()}},z6=A6,KE={"text/plain":"Text","text/html":"Url",default:"Text"},D6="Copy to clipboard: #{key}, Enter";function R6(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function L6(e,t){var n,o,l,h,y,u,S=!1;t||(t={}),n=t.debug||!1;try{l=z6(),h=document.createRange(),y=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(C){if(C.stopPropagation(),t.format)if(C.preventDefault(),typeof C.clipboardData=="undefined"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var A=KE[t.format]||KE.default;window.clipboardData.setData(A,e)}else C.clipboardData.clearData(),C.clipboardData.setData(t.format,e);t.onCopy&&(C.preventDefault(),t.onCopy(C.clipboardData))}),document.body.appendChild(u),h.selectNodeContents(u),y.addRange(h);var w=document.execCommand("copy");if(!w)throw new Error("copy command was unsuccessful");S=!0}catch(C){n&&console.error("unable to copy using execCommand: ",C),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),S=!0}catch(A){n&&console.error("unable to copy using clipboardData: ",A),n&&console.error("falling back to prompt"),o=R6("message"in t?t.message:D6),window.prompt(o,e)}}finally{y&&(typeof y.removeRange=="function"?y.removeRange(h):y.removeAllRanges()),u&&document.body.removeChild(u),l()}return S}var YE=L6,F6=rM?W.exports.useLayoutEffect:W.exports.useEffect,O6=F6,iM={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function $6(){var e=W.exports.useState(null),t=e[0],n=e[1],o=W.exports.useState(iM),l=o[0],h=o[1],y=W.exports.useMemo(function(){return new window.ResizeObserver(function(u){if(u[0]){var S=u[0].contentRect,w=S.x,C=S.y,A=S.width,z=S.height,G=S.top,Z=S.left,H=S.bottom,fe=S.right;h({x:w,y:C,width:A,height:z,top:G,left:Z,bottom:H,right:fe})}})},[]);return O6(function(){if(!!t)return y.observe(t),function(){y.disconnect()}},[t]),[n,l]}var B6=rM&&typeof window.ResizeObserver!="undefined"?$6:function(){return[M6,iM]};function oM(e,t){return Array.isArray(t)?[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]:{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}}function aM(e,t){return t.map(n=>oM(e,n))}function Hf(e){return{a:parseFloat(e.a),b:parseFloat(e.b),c:parseFloat(e.c),d:parseFloat(e.d),e:parseFloat(e.e),f:parseFloat(e.f)}}function sM(){return{a:1,c:0,e:0,b:0,d:1,f:0}}function lM(e){const{a:t,b:n,c:o,d:l,e:h,f:y}=e,u=t*l-n*o;return{a:l/u,b:n/-u,c:o/-u,d:t/u,e:(l*h-o*y)/-u,f:(n*h-t*y)/u}}function lv(e){return typeof e=="undefined"}function So(e,t=0){return{a:1,c:0,e,b:0,d:1,f:t}}function fs(...e){e=Array.isArray(e[0])?e[0]:e;const t=(n,o)=>({a:n.a*o.a+n.c*o.b,c:n.a*o.c+n.c*o.d,e:n.a*o.e+n.c*o.f+n.e,b:n.b*o.a+n.d*o.b,d:n.b*o.c+n.d*o.d,f:n.b*o.e+n.d*o.f+n.f});switch(e.length){case 0:throw new Error("no matrices provided");case 1:return e[0];case 2:return t(e[0],e[1]);default:{const[n,o,...l]=e,h=t(n,o);return fs(h,...l)}}}function nu(e,t=void 0,n=void 0,o=void 0){lv(t)&&(t=e);const l={a:e,c:0,e:0,b:0,d:t,f:0};return lv(n)||lv(o)?l:fs([So(n,o),l,So(-n,-o)])}function V6(e){return N6(e)}function N6(e){return`matrix(${e.a},${e.b},${e.c},${e.d},${e.e},${e.f})`}function U6(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Fy(e,t,n,o){var l=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(l,Fy.prototype),l.expected=t,l.found=n,l.location=o,l.name="SyntaxError",l}U6(Fy,Error);function uv(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Fy.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,o;for(o=0;o<e.length;o++)if(e[o].source===this.location.source){n=e[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,h=this.location.source+":"+l.line+":"+l.column;if(n){var y=this.location.end,u=uv("",l.line.toString().length," "),S=n[l.line-1],w=l.line===y.line?y.column:S.length+1,C=w-l.column||1;t+=`
 --> `+h+`
`+u+` |
`+l.line+" | "+S+`
`+u+" | "+uv("",l.column-1," ")+uv("",C,"^")}else t+=`
 at `+h}return t};Fy.buildMessage=function(e,t){var n={literal:function(w){return'"'+l(w.text)+'"'},class:function(w){var C=w.parts.map(function(A){return Array.isArray(A)?h(A[0])+"-"+h(A[1]):h(A)});return"["+(w.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};function o(w){return w.charCodeAt(0).toString(16).toUpperCase()}function l(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+o(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+o(C)})}function h(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+o(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+o(C)})}function y(w){return n[w.type](w)}function u(w){var C=w.map(y),A,z;if(C.sort(),C.length>0){for(A=1,z=1;A<C.length;A++)C[A-1]!==C[A]&&(C[z]=C[A],z++);C.length=z}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function S(w){return w?'"'+l(w)+'"':"end of input"}return"Expected "+u(e)+" but "+S(t)+" found."};var To="idle",pa="panning",ma="zooming",ha="auto",Js="none",Ra="pan",ps="zoom-in",il="zoom-out",Hg="none",Ma="top",Co="right",Aa="bottom",$i="left",Oy="zoom",Xf="pan",eh="center",th="left",bw="right",nh="top",Sw="bottom",JE="cover";function j1(e){return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j1(e)}function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function Xg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(o){j6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function j6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uM=3,cM=To;function ek(e,t,n,o,l,h){var y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;return Vn({},Xg(Xg({},sM()),{},{version:uM,mode:cM,focus:!1,pinchPointDistance:null,prePinchMode:null,viewerWidth:e,viewerHeight:t,SVGMinX:n,SVGMinY:o,SVGWidth:l,SVGHeight:h,scaleFactorMin:y,scaleFactorMax:u,startX:null,startY:null,endX:null,endY:null,miniatureOpen:!0,lastAction:null}))}function Vn(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return e=Object.assign({},e,t,{lastAction:n}),Object.freeze(e)}function G6(e){return e!==null&&j1(e)==="object"&&e.hasOwnProperty("version")&&e.version===uM}function Ho(e,t,n){var o=Hf(e),l=lM(o);return oM(l,{x:t,y:n})}function ng(e){var t=Hf(e);return{scaleFactor:t.a,translationX:t.e,translationY:t.f}}function W6(e,t){return Vn(e,{focus:t})}function q6(e,t,n){return Vn(e,{viewerWidth:t,viewerHeight:n})}function tk(e,t,n,o,l){return Vn(e,{SVGMinX:t,SVGMinY:n,SVGWidth:o,SVGHeight:l})}function Z6(e,t,n){return Vn(e,{scaleFactorMin:t,scaleFactorMax:n})}function H6(e,t,n,o){var l=e.viewerWidth,h=e.viewerHeight,y=fs(So(-t+l/2,-n+h/2),So(t,n),nu(o,o),So(-t,-n));return Vn(e,Xg({mode:To},y))}function X6(e){return Vn(e,Xg({mode:To},sM()))}function hM(e){return Vn(e,{mode:cM,startX:null,startY:null,endX:null,endY:null})}function K6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y6(e,t,n){return t&&nk(e.prototype,t),n&&nk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var dM=function(){function e(t,n,o){K6(this,e),this.originalEvent=t,this.value=n,this.SVGViewer=o}return Y6(e,[{key:"scaleFactor",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||ng(this.value),this._cacheDecomposedValue.scaleFactor}},{key:"translationX",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||ng(this.value),this._cacheDecomposedValue.translationX}},{key:"translationY",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||ng(this.value),this._cacheDecomposedValue.translationY}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}}]),e}();function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function J6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(n),!0).forEach(function(o){Q6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Q6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e$(e,t){return i$(e)||r$(e,t)||n$(e,t)||t$()}function t$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n$(e,t){if(!!e){if(typeof e=="string")return ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ik(e,t)}}function ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r$(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,y,u;try{for(n=n.call(e);!(l=(y=n.next()).done)&&(o.push(y.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function i$(e){if(Array.isArray(e))return e}function Ew(e,t,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,l=fs(Hf(e),So(t,n));if(o){var h=aM(l,[{x:e.SVGMinX+o,y:e.SVGMinY+o},{x:e.SVGMinX+e.SVGWidth-o,y:e.SVGMinY+e.SVGHeight-o}]),y=e$(h,2),u=y[0],S=u.x,w=u.y,C=y[1],A=C.x,z=C.y,G=0;e.viewerWidth-S<0?G=e.viewerWidth-S:A<0&&(G=-A);var Z=0;e.viewerHeight-w<0?Z=e.viewerHeight-w:z<0&&(Z=-z),l=fs(So(G,Z),l)}return Vn(e,J6({mode:To},l),Xf)}function o$(e,t,n){return Vn(e,{mode:pa,startX:t,startY:n,endX:t,endY:n},Xf)}function a$(e,t,n,o){if(e.mode!==pa)throw new Error("update pan not allowed in this mode "+e.mode);var l=e.endX,h=e.endY,y=Ho(e,l,h),u=Ho(e,t,n),S=u.x-y.x,w=u.y-y.y,C=Ew(e,S,w,o);return Vn(C,{mode:pa,endX:t,endY:n},Xf)}function fM(e){return Vn(e,{mode:To,startX:null,startY:null,endX:null,endY:null},Xf)}function s$(e,t,n){var o=0,l=0;return n<=20&&(l=2),e.viewerWidth-t<=20&&(o=-2),e.viewerHeight-n<=20&&(l=-2),t<=20&&(o=2),o=o/e.d,l=l/e.d,o===0&&l===0?e:Ew(e,o,l)}function pM(e,t){if(e.x<=t.x&&e.y<=t.y)return{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y};if(e.x>=t.x&&e.y<=t.y)return{x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y};if(e.x>=t.x&&e.y>=t.y)return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y};if(e.x<=t.x&&e.y>=t.y)return{x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}}function ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function rh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ok(Object(n),!0).forEach(function(o){l$(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function l$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $y(e,t){var n=ng(e),o=n.scaleFactor,l=e.scaleFactorMin&&o*t<e.scaleFactorMin,h=e.scaleFactorMax&&o*t>e.scaleFactorMax;return l&&t<1||h&&t>1}function kw(e,t){var n=t.a;return e.scaleFactorMin!=null&&(n=Math.max(n,e.scaleFactorMin)),e.scaleFactorMax!=null&&(n=Math.min(n,e.scaleFactorMax)),Vn(t,{a:n,d:n})}function fh(e,t,n,o){if($y(e,o))return e;var l=fs(Hf(e),So(t,n),nu(o,o),So(-t,-n));return Vn(e,rh(rh({mode:To},l),{},{startX:null,startY:null,endX:null,endY:null}),Oy)}function mM(e,t,n,o,l){var h=e.viewerWidth,y=e.viewerHeight,u=h/o,S=y/l,w=Math.min(u,S),C=fs(nu(w,w),So(-t,-n));return $y(e,w/e.d)?Vn(e,{mode:To,startX:null,startY:null,endX:null,endY:null}):Vn(e,rh(rh({mode:To},kw(e,C)),{},{startX:null,startY:null,endX:null,endY:null}),Oy)}function gM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nh,o=e.viewerWidth,l=e.viewerHeight,h=e.SVGMinX,y=e.SVGMinY,u=e.SVGWidth,S=e.SVGHeight,w=o/u,C=l/S,A=Math.min(w,C),z=nu(A,A),G=-h*w,Z=-y*C;if(w<C){var H=l-w*S;switch(n){case nh:Z=-y*A;break;case eh:Z=Math.round(H/2)-y*A;break;case Sw:Z=H-y*A;break;case JE:z=nu(C,C);var fe=o-C*u;G=h+Math.round(fe/2);break}}else{var B=o-C*u;switch(t){case th:G=-h*A;break;case eh:G=Math.round(B/2)-h*A;break;case bw:G=B-h*A;break;case JE:z=nu(w,w);var V=l-w*S;Z=y+Math.round(V/2);break}}var K=So(G,Z),le=fs(K,z);return $y(e,A/e.d)?Vn(e,{mode:To,startX:null,startY:null,endX:null,endY:null}):Vn(e,rh(rh({mode:To},kw(e,le)),{},{startX:null,startY:null,endX:null,endY:null}),Oy)}function u$(e,t){var n=e.viewerWidth,o=e.viewerHeight,l=Ho(e,n/2,o/2);return fh(e,l.x,l.y,t)}function c$(e,t,n){return Vn(e,{mode:ma,startX:t,startY:n,endX:t,endY:n})}function h$(e,t,n){if(e.mode!==ma)throw new Error("update selection not allowed in this mode "+e.mode);return Vn(e,{endX:t,endY:n})}function G1(e,t,n,o){var l=7,h=e.startX,y=e.startY,u=Ho(e,h,y),S=Ho(e,t,n);if(Math.abs(h-t)>l&&Math.abs(y-n)>l){var w=pM(u,S);return mM(e,w.x,w.y,w.width,w.height)}else{var C=Ho(e,t,n);return fh(e,C.x,C.y,o)}}function d$(e,t,n,o,l){return o+(l-o)*(e-t)/(n-t)}function ph(e,t){var n=t.getBoundingClientRect(),o=n.left,l=n.top,h=e.clientX-Math.round(o),y=e.clientY-Math.round(l);return{x:h,y}}function yM(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h||ph(e,t),u=y.x,S=y.y,w=o;switch(n){case il:var C=Ho(o,u,S);w=fh(o,C.x,C.y,1/l.scaleFactor);break;case ps:w=c$(o,u,S);break;case ha:case Ra:w=o$(o,u,S);break;default:return o}return e.preventDefault(),w}function _M(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h||ph(e,t),u=y.x,S=y.y,w=e.buttons===0,C=o;switch(n){case ps:o.mode===ma&&(C=w?G1(o,u,S,l.scaleFactor):h$(o,u,S));break;case ha:case Ra:o.mode===pa&&(C=w?fM(o):a$(o,u,S,l.preventPanOutside?20:void 0));break;default:return o}return e.preventDefault(),C}function vM(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h||ph(e,t),u=y.x,S=y.y,w=o;switch(n){case il:o.mode===ma&&(w=G1(o,u,S,1/l.scaleFactor));break;case ps:o.mode===ma&&(w=G1(o,u,S,l.scaleFactor));break;case ha:case Ra:o.mode===pa&&(w=fM(o));break;default:return o}return e.preventDefault(),w}function f$(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h||ph(e,t),u=y.x,S=y.y,w=o;if(n===ha&&!l.disableDoubleClickZoomWithToolAuto){var C=l.modifierKeys,A=C===void 0?[]:C,z=Ho(o,u,S),G=function(B,V){return B||e.getModifierState(V)},Z=A.reduce(G,!1),H=Z?1/l.scaleFactor:l.scaleFactor;w=fh(o,z.x,z.y,H)}return e.preventDefault(),w}function p$(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h||ph(e,t),u=y.x,S=y.y;if(!l.detectWheel)return o;var w=Math.max(-1,Math.min(1,e.deltaY)),C=d$(w,-1,1,l.scaleFactorOnWheel,1/l.scaleFactorOnWheel),A=Ho(o,u,S),z=fh(o,A.x,A.y,C);return e.preventDefault(),z}function ak(e,t,n,o,l){var h=W6(o,e.type==="mouseenter");return e.preventDefault(),h}function m$(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=h.x,u=h.y;return!([Js,ha].indexOf(n)>=0)||!l.detectAutoPan||!o.focus?o:s$(o,y,u)}function W1(e){return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W1(e)}function g$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y$(e,t,n){return t&&sk(e.prototype,t),n&&sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q1(e,t)}function q1(e,t){return q1=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},q1(e,t)}function v$(e){var t=b$();return function(){var o=Kg(e),l;if(t){var h=Kg(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return x$(this,l)}}function x$(e,t){if(t&&(W1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w$(e)}function w$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kg(e){return Kg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Kg(e)}var S$=function(e){_$(n,e);var t=v$(n);function n(){return g$(this,n),t.apply(this,arguments)}return y$(n,[{key:"point",get:function(){if(!this._cachePoint){var l=this.originalEvent,h=this.SVGViewer,y=this.value,u=ph(l,h);this._cachePoint=Ho(y,u.x,u.y)}return this._cachePoint}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}}]),n}(dM);function Z1(e){return Z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z1(e)}function lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function uk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(n),!0).forEach(function(o){E$(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function E$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ck(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T$(e,t,n){return t&&ck(e.prototype,t),n&&ck(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H1(e,t)}function H1(e,t){return H1=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},H1(e,t)}function P$(e){var t=A$();return function(){var o=Yg(e),l;if(t){var h=Yg(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return I$(this,l)}}function I$(e,t){if(t&&(Z1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M$(e)}function M$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yg(e){return Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Yg(e)}var z$=function(e){C$(n,e);var t=P$(n);function n(){return k$(this,n),t.apply(this,arguments)}return T$(n,[{key:"points",get:function(){return this._cachePoints||(this._cachePoints=n.touchesToPoints(this.originalEvent.touches,this.SVGViewer,this.value)),this._cachePoints}},{key:"changedPoints",get:function(){return this._cacheChangedPoints||(this._cacheChangedPoints=n.touchesToPoints(this.originalEvent.changedTouches,this.SVGViewer,this.value)),this._cacheChangedPoints}}],[{key:"touchesToPoints",value:function(l,h,y){for(var u=[],S=0;S<l.length;S++){var w=l[S],C=h.getBoundingClientRect(),A=w.clientX-Math.round(C.left),z=w.clientY-Math.round(C.top),G=Ho(y,A,z);u.push(uk(uk({},G),{},{identifier:w.identifier}))}return u}}]),n}(dM);function D$(e,t,n){var o=e.type;switch(o){case"mousemove":case"mouseup":case"mousedown":case"click":case"dblclick":return new S$(e,t,n);case"touchstart":case"touchmove":case"touchend":case"touchcancel":return new z$(e,t,n);default:throw new Error("".concat(o," not supported"))}}function hk(e){return e.split(/[ ,]/).filter(Boolean).map(Number)}function dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function fk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(n),!0).forEach(function(o){R$(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function R$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L$(e,t){var n=t.getBoundingClientRect(),o=n.left,l=n.top,h=e.clientX-Math.round(o),y=e.clientY-Math.round(l);return{x:h,y}}function F$(e,t,n,o,l){if(wM(e,l))return bM(e,t,n,o);if(e.touches.length!==1){if([pa,ma].indexOf(o.mode)>=0)return hM(o);if([To].indexOf(o.mode)>=0)return o}return Tw(e,t,n,o,l,yM)}function O$(e,t,n,o,l){return wM(e,l)?bM(e,t,n,o):[pa,ma].indexOf(o.mode)>=0?Tw(e,t,n,o,l,_M):o}function $$(e,t,n,o,l){if(!([pa,ma].indexOf(o.mode)>=0))return o;var h=V$(e,o,l)?Vn(o,{pinchPointDistance:null}):o;return e.touches.length>0?h:Tw(e,t,n,h,l,vM)}function B$(e,t,n,o,l){return e.stopPropagation(),e.preventDefault(),hM(o)}function xM(e){return typeof e.pinchPointDistance=="number"}function V$(e,t,n){return n.detectPinchGesture&&xM(t)&&e.touches.length<2}function wM(e,t){return t.detectPinchGesture&&e.touches.length>1}function Tw(e,t,n,o,l,h){var y=e.touches.length===0?Vn(o,{mode:o.prePinchMode?To:o.mode,prePinchMode:null}):o,u=e.touches.length>0?e.touches[0]:e.changedTouches[0],S=L$(u,t);switch(n){case il:case ps:case ha:case Ra:return e.stopPropagation(),e.preventDefault(),h(e,t,n,y,l,S);default:return y}}function bM(e,t,n,o,l){var h=t.getBoundingClientRect(),y=h.left,u=h.top,S=e.touches[0].clientX-Math.round(y),w=e.touches[0].clientY-Math.round(u),C=e.touches[1].clientX-Math.round(y),A=e.touches[1].clientY-Math.round(u),z=Math.sqrt(Math.pow(C-S,2)+Math.pow(A-w,2)),G=xM(o)?o.pinchPointDistance:z,Z=Ho(o,(S+C)/2,(w+A)/2),H=z/G;if($y(o,H))return o;e.cancelable&&e.preventDefault();var fe=fs(Hf(o),So(Z.x,Z.y),nu(H,H),So(-Z.x,-Z.y));return Vn(o,Vn(fk(fk({mode:ma},kw(o,fe)),{},{startX:null,startY:null,endX:null,endY:null,prePinchMode:o.prePinchMode?o.prePinchMode:o.mode,pinchPointDistance:z})))}function SM(e){return Vn(e,{miniatureOpen:!0})}function EM(e){return Vn(e,{miniatureOpen:!1})}var N$=function(t){return["zoom-in","zoom-out","grab","grabbing"].indexOf(t)>-1},kM=function(){return navigator.userAgent.toLowerCase()},U$=function(){return kM().indexOf("firefox")>-1},j$=function(){return kM().indexOf("webkit")>-1};function Am(e){if(!N$(e))return e;if(U$())return"-moz-".concat(e);if(j$())return"-webkit-".concat(e)}function G$(e){return e.displayName||e.name||"Component"}function X1(e){return X1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X1(e)}function K1(){return K1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K1.apply(this,arguments)}function W$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q$(e,t,n){return t&&pk(e.prototype,t),n&&pk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y1(e,t)}function Y1(e,t){return Y1=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},Y1(e,t)}function H$(e){var t=Y$();return function(){var o=Jg(e),l;if(t){var h=Jg(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return X$(this,l)}}function X$(e,t){if(t&&(X1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K$(e)}function K$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jg(e){return Jg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(e)}var J$=1,Q$=function(){return"uid".concat(J$++)};function TM(e){var t=function(n){Z$(l,n);var o=H$(l);function l(h){var y;return W$(this,l),y=o.call(this,h),y.state={uid:Q$()},y}return q$(l,[{key:"render",value:function(){return Re.createElement(e,K1({_uid:this.state.uid},this.props))}}]),l}(Re.Component);return t.displayName="RandomUID(".concat(G$(e),")"),t}var mk="react-svg-pan-zoom_border_gradient";function CM(e){var t=e.direction,n=e.width,o=e.height,l=e._uid,h;switch(t){case Ma:h="translate(".concat(n,", 0) rotate(90)");break;case Co:h="translate(".concat(n,", ").concat(o,") rotate(180)");break;case Aa:h="translate(0, ".concat(o,") rotate(270)");break;case $i:default:h=" ";break}var y="".concat(mk,"_gradient_").concat(l),u="".concat(mk,"_mask_").concat(l);return Re.createElement("g",null,Re.createElement("defs",null,Re.createElement("linearGradient",{id:y,x1:"0%",y1:"0%",x2:"100%",y2:"0%",spreadMethod:"pad"},Re.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"0.8"}),Re.createElement("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.5"})),Re.createElement("mask",{id:u,x:"0",y:"0",width:"20",height:Math.max(n,o)},Re.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,o),style:{stroke:"none",fill:"url(#".concat(y,")")}}))),Re.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,o),style:{stroke:"none",fill:"#000",mask:"url(#".concat(u,")")},transform:h}))}CM.propTypes={direction:Pe.oneOf([Ma,Co,Aa,$i]).isRequired,width:Pe.number.isRequired,height:Pe.number.isRequired};var zm=TM(CM);function PM(e){var t=e.startX,n=e.startY,o=e.endX,l=e.endY;if(!t||!n||!o||!l)return null;var h=pM({x:t,y:n},{x:o,y:l});return Re.createElement("rect",{stroke:"#969FFF",strokeOpacity:.7,fill:"#F3F4FF",fillOpacity:.7,x:h.x,y:h.y,width:h.width,height:h.height,style:{pointerEvents:"none"}})}PM.propTypes={startX:Pe.number,startY:Pe.number,endX:Pe.number,endY:Pe.number};function eB(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"}))}function tB(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}function nB(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("g",null,Re.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Re.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}function rB(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}function iB(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}))}function J1(e){return J1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J1(e)}function oB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function aB(e,t,n){return t&&gk(e.prototype,t),n&&gk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q1(e,t)}function Q1(e,t){return Q1=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},Q1(e,t)}function lB(e){var t=hB();return function(){var o=Qg(e),l;if(t){var h=Qg(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return uB(this,l)}}function uB(e,t){if(t&&(J1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cB(e)}function cB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(e)}var xc=function(e){sB(n,e);var t=lB(n);function n(o){var l;return oB(this,n),l=t.call(this,o),l.state={hover:!1},l}return aB(n,[{key:"change",value:function(l){switch(l.preventDefault(),l.stopPropagation(),l.type){case"mouseenter":case"touchstart":this.setState({hover:!0});break;case"mouseleave":case"touchend":case"touchcancel":this.setState({hover:!1});break}}},{key:"render",value:function(){var l=this,h={display:"block",width:"24px",height:"24px",margin:[Ma,Aa].indexOf(this.props.toolbarPosition)>=0?"2px 1px":"1px 2px",color:this.props.active||this.state.hover?this.props.activeColor:"#FFF",transition:"color 200ms ease",background:"none",padding:"0px",border:"0px",outline:"0px",cursor:"pointer"};return Re.createElement("button",{onMouseEnter:function(u){return l.change(u)},onMouseLeave:function(u){return l.change(u)},onTouchStart:function(u){l.change(u),l.props.onClick(u)},onTouchEnd:function(u){return l.change(u)},onTouchCancel:function(u){return l.change(u)},onClick:this.props.onClick,style:h,title:this.props.title,name:this.props.name,type:"button"},this.props.children)}}]),n}(Re.Component);xc.propTypes={title:Pe.string.isRequired,name:Pe.string.isRequired,toolbarPosition:Pe.string.isRequired,activeColor:Pe.string.isRequired,onClick:Pe.func.isRequired,active:Pe.bool.isRequired};function Cw(e){var t=e.tool,n=e.value,o=e.onChangeValue,l=e.onChangeTool,h=e.activeToolColor,y=e.position,u=e.SVGAlignX,S=e.SVGAlignY,w=function(Z,H){l(H),Z.stopPropagation(),Z.preventDefault()},C=function(Z){o(gM(n,u,S)),Z.stopPropagation(),Z.preventDefault()},A=[Ma,Aa].indexOf(y)>=0,z={position:"absolute",transform:[Ma,Aa].indexOf(y)>=0?"translate(-50%, 0px)":"none",top:[$i,Co,Ma].indexOf(y)>=0?"5px":"unset",left:[Ma,Aa].indexOf(y)>=0?"50%":$i===y?"5px":"unset",right:[Co].indexOf(y)>=0?"5px":"unset",bottom:[Aa].indexOf(y)>=0?"5px":"unset",backgroundColor:"rgba(19, 20, 22, 0.90)",borderRadius:"2px",display:"flex",flexDirection:A?"row":"column",padding:A?"1px 2px":"2px 1px"};return Re.createElement("div",{style:z,role:"toolbar"},Re.createElement(xc,{toolbarPosition:y,active:t===Js,activeColor:h,name:"unselect-tools",title:"Selection",onClick:function(Z){return w(Z,Js)}},Re.createElement(eB,null)),Re.createElement(xc,{toolbarPosition:y,active:t===Ra,activeColor:h,name:"select-tool-pan",title:"Pan",onClick:function(Z){return w(Z,Ra)}},Re.createElement(tB,null)),Re.createElement(xc,{toolbarPosition:y,active:t===ps,activeColor:h,name:"select-tool-zoom-in",title:"Zoom in",onClick:function(Z){return w(Z,ps)}},Re.createElement(nB,null)),Re.createElement(xc,{toolbarPosition:y,active:t===il,activeColor:h,name:"select-tool-zoom-out",title:"Zoom out",onClick:function(Z){return w(Z,il)}},Re.createElement(rB,null)),Re.createElement(xc,{toolbarPosition:y,active:!1,activeColor:h,name:"fit-to-viewer",title:"Fit to viewer",onClick:function(Z){return C(Z)}},Re.createElement(iB,null)))}Cw.propTypes={tool:Pe.string.isRequired,onChangeTool:Pe.func.isRequired,value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,position:Pe.oneOf([Ma,Co,Aa,$i]),SVGAlignX:Pe.oneOf([eh,th,bw]),SVGAlignY:Pe.oneOf([eh,nh,Sw]),activeToolColor:Pe.string};Cw.defaultProps={position:Co,SVGAlignX:th,SVGAlignY:nh,activeToolColor:"#1CA6FC"};function dB(){return"ontouchstart"in window||navigator.maxTouchPoints}function IM(e){var t=e.open,n=e.position,o=0;switch(n){case $i:o=t?"rotate(225, 12, 13)":"rotate(45, 12, 13)";break;case Co:o=o=t?"rotate(135, 12, 13)":"rotate(-45, 12, 13)";break}return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("g",{transform:o},Re.createElement("path",{fill:"#000000",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})))}IM.propTypes={open:Pe.bool.isRequired,position:Pe.oneOf([Co,$i]).isRequired};function pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MM(e){var t,n=e.value,o=e.onChangeValue,l=e.position,h=(t={width:"24px",height:"24px",display:"block",position:"absolute",bottom:0},pc(t,l===$i?"left":"right","0px"),pc(t,"background","rgba(19, 20, 22, 0.901961)"),pc(t,"border",0),pc(t,"padding",0),pc(t,"outline",0),pc(t,"color","#fff"),t),y=n.miniatureOpen?EM:SM;return Re.createElement("button",{type:"button",style:h,onClick:function(){return o(y(n))}},Re.createElement(IM,{open:n.miniatureOpen,position:l}))}MM.propTypes={value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,position:Pe.oneOf([Co,$i]).isRequired};var fB="react-svg-pan-zoom_miniature";function AM(e){var t=e.SVGMinX,n=e.SVGMinY,o=e.SVGWidth,l=e.SVGHeight,h=e.x1,y=e.y1,u=e.x2,S=e.y2;e.zoomToFit;var w=e._uid,C="".concat(fB,"_mask_").concat(w);return Re.createElement("g",null,Re.createElement("defs",null,Re.createElement("mask",{id:C},Re.createElement("rect",{x:t,y:n,width:o,height:l,fill:"#ffffff"}),Re.createElement("rect",{x:h,y,width:u-h,height:S-y}))),Re.createElement("rect",{x:t,y:n,width:o,height:l,style:{stroke:"none",fill:"#000",mask:"url(#".concat(C,")"),opacity:.4}}))}AM.propTypes={SVGWidth:Pe.number.isRequired,SVGHeight:Pe.number.isRequired,SVGMinX:Pe.number.isRequired,SVGMinY:Pe.number.isRequired,x1:Pe.number.isRequired,y1:Pe.number.isRequired,x2:Pe.number.isRequired,y2:Pe.number.isRequired,zoomToFit:Pe.number.isRequired};var pB=TM(AM);function yk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mB(e,t){return vB(e)||_B(e,t)||yB(e,t)||gB()}function gB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yB(e,t){if(!!e){if(typeof e=="string")return _k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _k(e,t)}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _B(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,y,u;try{for(n=n.call(e);!(l=(y=n.next()).done)&&(o.push(y.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function vB(e){if(Array.isArray(e))return e}function Pw(e){var t,n=e.value,o=e.onChangeValue,l=e.children,h=e.position,y=e.background,u=e.SVGBackground,S=e.width,w=e.height,C=n.SVGMinX,A=n.SVGMinY,z=n.SVGWidth,G=n.SVGHeight,Z=n.viewerWidth,H=n.viewerHeight,fe=G/z,B=fe>=1?w/G:S/z,V=aM(lM(n),[{x:0,y:0},{x:Z,y:H}]),K=mB(V,2),le=K[0],ue=le.x,ge=le.y,ye=K[1],Ee=ye.x,je=ye.y,ke,Ve;n.miniatureOpen?(ke=S,Ve=w):(ke=24,Ve=24);var $t=(t={position:"absolute",overflow:"hidden",outline:"1px solid rgba(19, 20, 22, 0.90)",transition:"width 200ms ease, height 200ms ease, bottom 200ms ease",width:ke+"px",height:Ve+"px",bottom:"6px"},yk(t,h===$i?"left":"right","6px"),yk(t,"background",y),t),Tt=fe>=1?"translate(".concat((S-z*B)/2-C*B,", ").concat(-A*B,")"):"translate(".concat(-C*B,", ").concat((w-G*B)/2-A*B,")");return Re.createElement("div",{role:"navigation",style:$t},Re.createElement("svg",{width:S,height:w,style:{pointerEvents:"none"}},Re.createElement("g",{transform:Tt},Re.createElement("g",{transform:"scale(".concat(B,", ").concat(B,")")},Re.createElement("rect",{fill:u,x:C,y:A,width:z,height:G}),l,Re.createElement(pB,{SVGWidth:z,SVGHeight:G,SVGMinX:C,SVGMinY:A,x1:ue,y1:ge,x2:Ee,y2:je,zoomToFit:B})))),Re.createElement(MM,{value:n,onChangeValue:o,position:h}))}Pw.propTypes={value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,SVGBackground:Pe.string.isRequired,position:Pe.oneOf([Co,$i]),background:Pe.string.isRequired,width:Pe.number.isRequired,height:Pe.number.isRequired};Pw.defaultProps={position:$i,background:"#616264",width:100,height:80};function ex(e){return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ex(e)}function ey(){return ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ey.apply(this,arguments)}function vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function xB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(n),!0).forEach(function(o){wB(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function wB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xk(e,t){return kB(e)||EB(e,t)||SB(e,t)||bB()}function bB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SB(e,t){if(!!e){if(typeof e=="string")return wk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wk(e,t)}}function wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function EB(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,y,u;try{for(n=n.call(e);!(l=(y=n.next()).done)&&(o.push(y.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function kB(e){if(Array.isArray(e))return e}function TB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CB(e,t,n){return t&&bk(e.prototype,t),n&&bk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function PB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tx(e,t)}function tx(e,t){return tx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},tx(e,t)}function IB(e){var t=AB();return function(){var o=ty(e),l;if(t){var h=ty(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return MB(this,l)}}function MB(e,t){if(t&&(ex(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nx(e)}function nx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}var Iw=function(e){PB(n,e);var t=IB(n);function n(o,l){var h;TB(this,n);var y=o.width,u=o.height,S=o.scaleFactorMin,w=o.scaleFactorMax,C=o.children,A=C.props.viewBox,z;if(A){var G=hk(A),Z=xk(G,4),H=Z[0],fe=Z[1],B=Z[2],V=Z[3];z=ek(y,u,H,fe,B,V,S,w)}else{var K=C.props,le=K.width,ue=K.height;z=ek(y,u,0,0,le,ue,S,w)}return h=t.call(this,o,l),h.ViewerDOM=null,h.state={pointerX:null,pointerY:null,defaultValue:z},h.autoPanLoop=h.autoPanLoop.bind(nx(h)),h.onWheel=h.onWheel.bind(nx(h)),h}return CB(n,[{key:"componentDidUpdate",value:function(l){var h=this.getValue(),y=this.props,u=h,S=!1,w=y.children.props.viewBox;if(w){var C=hk(w),A=xk(C,4),z=A[0],G=A[1],Z=A[2],H=A[3];(h.SVGMinX!==z||h.SVGMinY!==G||h.SVGWidth!==Z||h.SVGHeight!==H)&&(u=tk(u,z,G,Z,H),S=!0)}else{var fe=y.children.props,B=fe.width,V=fe.height;(h.SVGWidth!==B||h.SVGHeight!==V)&&(u=tk(u,0,0,B,V),S=!0)}(l.width!==y.width||l.height!==y.height)&&(u=q6(u,y.width,y.height),S=!0),(l.scaleFactorMin!==y.scaleFactorMin||l.scaleFactorMax!==y.scaleFactorMax)&&(u=Z6(u,y.scaleFactorMin,y.scaleFactorMax),S=!0),S&&this.setValue(u)}},{key:"componentDidMount",value:function(){this.autoPanIsRunning=!0,requestAnimationFrame(this.autoPanLoop),this.ViewerDOM.addEventListener("wheel",this.onWheel,!1)}},{key:"componentWillUnmount",value:function(){this.autoPanIsRunning=!1,this.ViewerDOM.removeEventListener("wheel",this.onWheel)}},{key:"getValue",value:function(){return G6(this.props.value)?this.props.value:this.state.defaultValue}},{key:"getTool",value:function(){return this.props.tool?this.props.tool:Js}},{key:"setValue",value:function(l){var h=this.props,y=h.onChangeValue,u=h.onZoom,S=h.onPan;y&&y(l),l.lastAction&&(u&&l.lastAction===Oy&&u(l),S&&l.lastAction===Xf&&S(l))}},{key:"pan",value:function(l,h){var y=Ew(this.getValue(),l,h);this.setValue(y)}},{key:"zoom",value:function(l,h,y){var u=fh(this.getValue(),l,h,y);this.setValue(u)}},{key:"fitSelection",value:function(l,h,y,u){var S=mM(this.getValue(),l,h,y,u);this.setValue(S)}},{key:"fitToViewer",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:th,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nh,y=gM(this.getValue(),l,h);this.setValue(y)}},{key:"zoomOnViewerCenter",value:function(l){var h=u$(this.getValue(),l);this.setValue(h)}},{key:"setPointOnViewerCenter",value:function(l,h,y){var u=H6(this.getValue(),l,h,y);this.setValue(u)}},{key:"reset",value:function(){var l=X6(this.getValue());this.setValue(l)}},{key:"openMiniature",value:function(){var l=SM(this.getValue());this.setValue(l)}},{key:"closeMiniature",value:function(){var l=EM(this.getValue());this.setValue(l)}},{key:"handleViewerEvent",value:function(l){var h=this.props,y=this.ViewerDOM;if([Js,ha].indexOf(this.getTool())>=0&&l.target!==y){var u={click:h.onClick,dblclick:h.onDoubleClick,mousemove:h.onMouseMove,mouseup:h.onMouseUp,mousedown:h.onMouseDown,touchstart:h.onTouchStart,touchmove:h.onTouchMove,touchend:h.onTouchEnd,touchcancel:h.onTouchCancel},S=u[l.type];!S||S(D$(l,h.value,y))}}},{key:"autoPanLoop",value:function(){var l={x:this.state.pointerX,y:this.state.pointerY},h=m$(null,this.ViewerDOM,this.getTool(),this.getValue(),this.props,l);this.getValue()!==h&&this.setValue(h),this.autoPanIsRunning&&requestAnimationFrame(this.autoPanLoop)}},{key:"onWheel",value:function(l){var h=p$(l,this.ViewerDOM,this.getTool(),this.getValue(),this.props);this.getValue()!==h&&this.setValue(h)}},{key:"render",value:function(){var l=this,h=this.props,y=this.state,u=y.pointerX,S=y.pointerY,w=this.getTool(),C=this.getValue(),A=h.customToolbar,z=A===void 0?Cw:A,G=h.customMiniature,Z=G===void 0?Pw:G,H=w===ha&&C.mode===pa&&C.startX!==C.endX&&C.startY!==C.endY,fe;w===Ra&&(fe=Am(C.mode===pa?"grabbing":"grab")),w===ps&&(fe=Am("zoom-in")),w===il&&(fe=Am("zoom-out")),H&&(fe=Am("grabbing"));var B=[Ra,ps,il].indexOf(w)>=0;B=B||H;var V=this.props.detectPinchGesture||[Ra,ha].indexOf(this.getTool())!==-1?"none":void 0,K={display:"block",cursor:fe,touchAction:V};return Re.createElement("div",{style:xB({position:"relative",width:C.viewerWidth,height:C.viewerHeight},h.style),className:this.props.className},Re.createElement("svg",{ref:function(ue){return l.ViewerDOM=ue},width:C.viewerWidth,height:C.viewerHeight,style:K,onMouseDown:function(ue){var ge=yM(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onMouseMove:function(ue){var ge=l.ViewerDOM.getBoundingClientRect(),ye=ge.left,Ee=ge.top,je=ue.clientX-Math.round(ye),ke=ue.clientY-Math.round(Ee),Ve=_M(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props,{x:je,y:ke});l.getValue()!==Ve&&l.setValue(Ve),l.setState({pointerX:je,pointerY:ke}),l.handleViewerEvent(ue)},onMouseUp:function(ue){var ge=vM(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onClick:function(ue){l.handleViewerEvent(ue)},onDoubleClick:function(ue){var ge=f$(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onMouseEnter:function(ue){if(!dB()){var ge=ak(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge)}},onMouseLeave:function(ue){var ge=ak(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge)},onTouchStart:function(ue){var ge=F$(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onTouchMove:function(ue){var ge=O$(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onTouchEnd:function(ue){var ge=$$(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)},onTouchCancel:function(ue){var ge=B$(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ge&&l.setValue(ge),l.handleViewerEvent(ue)}},Re.createElement("rect",{fill:h.background,x:0,y:0,width:C.viewerWidth,height:C.viewerHeight,style:{pointerEvents:"none"}}),Re.createElement("g",{transform:V6(C),style:B?{pointerEvents:"none"}:{}},Re.createElement("rect",{fill:this.props.SVGBackground,style:this.props.SVGStyle,x:C.SVGMinX||0,y:C.SVGMinY||0,width:C.SVGWidth,height:C.SVGHeight}),Re.createElement("g",null,h.children.props.children)),[Js,ha].indexOf(w)>=0&&h.detectAutoPan&&C.focus?Re.createElement("g",{style:{pointerEvents:"none"}},S<=20?Re.createElement(zm,{direction:Ma,width:C.viewerWidth,height:C.viewerHeight}):null,C.viewerWidth-u<=20?Re.createElement(zm,{direction:Co,width:C.viewerWidth,height:C.viewerHeight}):null,C.viewerHeight-S<=20?Re.createElement(zm,{direction:Aa,width:C.viewerWidth,height:C.viewerHeight}):null,C.focus&&u<=20?Re.createElement(zm,{direction:$i,width:C.viewerWidth,height:C.viewerHeight}):null):null,C.mode!==ma?null:Re.createElement(PM,{startX:C.startX,startY:C.startY,endX:C.endX,endY:C.endY})),h.toolbarProps.position===Hg?null:Re.createElement(z,ey({},this.props.toolbarProps,{value:C,onChangeValue:function(ue){return l.setValue(ue)},tool:w,onChangeTool:function(ue){return l.props.onChangeTool(ue)}})),h.miniatureProps.position===Hg?null:Re.createElement(Z,ey({},this.props.miniatureProps,{value:C,onChangeValue:function(ue){return l.setValue(ue)},SVGBackground:this.props.SVGBackground}),h.children.props.children))}}]),n}(Re.Component);Iw.propTypes={width:Pe.number.isRequired,height:Pe.number.isRequired,value:Pe.oneOfType([Pe.object,Pe.shape({version:Pe.oneOf([2]).isRequired,mode:Pe.oneOf([To,pa,ma]).isRequired,focus:Pe.bool.isRequired,a:Pe.number.isRequired,b:Pe.number.isRequired,c:Pe.number.isRequired,d:Pe.number.isRequired,e:Pe.number.isRequired,f:Pe.number.isRequired,viewerWidth:Pe.number.isRequired,viewerHeight:Pe.number.isRequired,SVGMinX:Pe.number.isRequired,SVGMinY:Pe.number.isRequired,SVGWidth:Pe.number.isRequired,SVGHeight:Pe.number.isRequired,startX:Pe.number,startY:Pe.number,endX:Pe.number,endY:Pe.number,miniatureOpen:Pe.bool.isRequired})]).isRequired,onChangeValue:Pe.func.isRequired,tool:Pe.oneOf([ha,Js,Ra,ps,il]).isRequired,onChangeTool:Pe.func.isRequired,background:Pe.string,SVGBackground:Pe.string,SVGStyle:Pe.object,style:Pe.object,className:Pe.string,detectWheel:Pe.bool,detectAutoPan:Pe.bool,detectPinchGesture:Pe.bool,onZoom:Pe.func,onPan:Pe.func,onClick:Pe.func,onDoubleClick:Pe.func,onMouseUp:Pe.func,onMouseMove:Pe.func,onMouseDown:Pe.func,preventPanOutside:Pe.bool,scaleFactor:Pe.number,scaleFactorOnWheel:Pe.number,scaleFactorMax:Pe.number,scaleFactorMin:Pe.number,modifierKeys:Pe.array,disableDoubleClickZoomWithToolAuto:Pe.bool,customMiniature:Pe.oneOfType([Pe.element,Pe.func]),miniatureProps:Pe.shape({position:Pe.oneOf([Hg,Co,$i]),background:Pe.string,width:Pe.number,height:Pe.number}),customToolbar:Pe.oneOfType([Pe.element,Pe.func]),toolbarProps:Pe.shape({position:Pe.oneOf([Hg,Ma,Co,Aa,$i]),SVGAlignX:Pe.oneOf([eh,th,bw]),SVGAlignY:Pe.oneOf([eh,nh,Sw]),activeToolColor:Pe.string}),children:function(t,n,o){var l=t[n],h=["svg"];if(Re.Children.count(l)!==1||h.indexOf(l.type)===-1)return new Error("`"+o+"` should have a single child of the following types:  `"+h.join("`, `")+"`.");if((!l.props.hasOwnProperty("width")||!l.props.hasOwnProperty("height"))&&!l.props.hasOwnProperty("viewBox"))return new Error("SVG should have props `width` and `height` or `viewBox`")}};Iw.defaultProps={style:{},background:"#616264",SVGBackground:"#fff",SVGStyle:{},detectWheel:!0,detectAutoPan:!0,detectPinchGesture:!0,modifierKeys:["Alt","Shift","Control"],preventPanOutside:!0,scaleFactor:1.1,scaleFactorOnWheel:1.06,disableZoomWithToolAuto:!1,onZoom:null,onPan:null,toolbarProps:{},miniatureProps:{}};function rx(e){return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rx(e)}var zB=["width","height","onChangeTool","onChangeValue"];function ix(){return ix=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ix.apply(this,arguments)}function DB(e,t){if(e==null)return{};var n=RB(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function RB(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function LB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function FB(e,t,n){return t&&Sk(e.prototype,t),n&&Sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function OB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}function ox(e,t){return ox=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},ox(e,t)}function $B(e){var t=VB();return function(){var o=ny(e),l;if(t){var h=ny(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return BB(this,l)}}function BB(e,t){if(t&&(rx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ax(e)}function ax(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(e)}var zM=function(e){OB(n,e);var t=$B(n);function n(o){var l;return LB(this,n),l=t.call(this,o),l.state={value:o.defaultValue||{},tool:o.defaultTool||Js},l.Viewer=null,l.changeTool=l.changeTool.bind(ax(l)),l.changeValue=l.changeValue.bind(ax(l)),l}return FB(n,[{key:"changeTool",value:function(l){this.setState({tool:l})}},{key:"changeValue",value:function(l){this.setState({value:l})}},{key:"pan",value:function(l,h){this.Viewer.pan(l,h)}},{key:"zoom",value:function(l,h,y){this.Viewer.zoom(l,h,y)}},{key:"fitSelection",value:function(l,h,y,u){this.Viewer.fitSelection(l,h,y,u)}},{key:"fitToViewer",value:function(l,h){this.Viewer.fitToViewer(l,h)}},{key:"zoomOnViewerCenter",value:function(l){this.Viewer.zoomOnViewerCenter(l)}},{key:"setPointOnViewerCenter",value:function(l,h,y){this.Viewer.setPointOnViewerCenter(l,h,y)}},{key:"reset",value:function(){this.Viewer.reset()}},{key:"openMiniature",value:function(){this.Viewer.openMiniature()}},{key:"closeMiniature",value:function(){this.Viewer.closeMiniature()}},{key:"render",value:function(){var l=this,h=this.props,y=h.width,u=h.height;h.onChangeTool,h.onChangeValue;var S=DB(h,zB),w=this.state,C=w.tool,A=w.value;return Re.createElement(Iw,ix({width:y,height:u,tool:C,onChangeTool:this.changeTool,value:A,onChangeValue:this.changeValue,ref:function(G){return l.Viewer=G}},S))}}]),n}(Re.Component);zM.propTypes={width:Pe.number.isRequired,height:Pe.number.isRequired,defaultValue:Pe.object,defaultTool:Pe.string};const NB=hn("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"calc(100%/3)"}),UB=hn("div",{width:"100%",height:"calc(100vh - $4 - $4)"}),jB=hn("table",{padding:"$2"}),GB=hn("div",{width:"calc(100%/3*2)"}),WB=hn("tr",{cursor:"pointer",fontFamily:"monospace"},{"&:hover":{color:"red"}}),qB=hn("div",{display:"flex"}),ZB=e=>{let[t,n,o]=Ay(e.entry.tileId);return Pt(WB,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[Oe("td",{children:e.entry.tileId}),Oe("td",{children:t}),Oe("td",{children:n}),Oe("td",{children:o}),Oe("td",{children:e.entry.offset}),Oe("td",{children:e.entry.length}),Oe("td",{children:e.entry.runLength==0?"directory":`tile(${e.entry.runLength})`})]})};let HB=(e,t)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0;const XB=e=>{let[t,n]=W.exports.useState(!1),o="none",l="";e.feature.type===3?o=t?"white":"currentColor":l=t?"white":"currentColor";let h=()=>{n(!0)},y=()=>{n(!1)},u=()=>{e.setSelectedFeature(e.feature)};return Oe("path",{d:e.feature.path,stroke:l,strokeWidth:10,fill:o,fillOpacity:.5,onMouseOver:h,onMouseOut:y,onMouseDown:u})},KB=e=>{let t=e.layer.features.map((n,o)=>Oe(XB,{feature:n,setSelectedFeature:e.setSelectedFeature},o));return Oe("g",{color:e.color,children:t})},YB=hn("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),JB=e=>{let t=[];for(var n in e.feature.properties)t.push([n,e.feature.properties[n]]);const o=t.map((l,h)=>Pt("tr",{children:[Oe("td",{children:l[0]}),Oe("td",{children:l[1]})]},h));return Pt(YB,{children:[e.feature.layerName,Oe("table",{children:Oe("tbody",{children:o})})]})},QB=e=>{let[t,n]=W.exports.useState([]),[o,l]=W.exports.useState(0),[h,y]=W.exports.useState(null);const u=W.exports.useRef(null),[S,{width:w,height:C}]=B6();W.exports.useEffect(()=>{u.current.zoomOnViewerCenter(.1)},[]),W.exports.useEffect(()=>{let z=async G=>{let[Z,H,fe]=Ay(G.tileId),B=await e.file.getZxy(Z,H,fe),V=new C6(new HO(new Uint8Array(B.data))),K=[],le=0;for(let[ye,Ee]of Object.entries(V.layers)){Ee.extent>le&&(le=Ee.extent);let je=[];for(var ue=0;ue<Ee.length;ue++){let ke=Ee.feature(ue),Ve=nM(),$t=ke.loadGeometry();if(ke.type===1)for(let Tt of $t)for(let Ct of Tt)Ve.arc(Ct.x,Ct.y,20,0,2*Math.PI);else for(let Tt of $t){Ve.moveTo(Tt[0].x,Tt[0].y);for(var ge=1;ge<Tt.length;ge++)Ve.lineTo(Tt[ge].x,Tt[ge].y);ke.type===3&&Ve.closePath()}je.push({path:Ve.toString(),type:ke.type,id:ke.id,properties:ke.properties,layerName:ye})}K.push({features:je,name:ye})}l(le),K.sort(HB),n(K)};e.entry&&z(e.entry)},[e.entry]);let A=t.map((z,G)=>Oe(KB,{layer:z,color:tg[G%12],setSelectedFeature:y},G));return Pt(UB,{ref:S,children:[Oe(zM,{ref:u,width:w,height:C,detectAutoPan:!1,onClick:z=>console.log("click",z.x,z.y,z.originalEvent),children:Oe("svg",{viewBox:"0 0 4096 4096",children:A})}),h?Oe(JB,{feature:h}):null]})},e8=e=>{let[t,n]=W.exports.useState("");return W.exports.useEffect(()=>{let o=async l=>{let[h,y,u]=Ay(l.tileId),S=await e.file.getZxy(h,y,u),w=new Blob([S.data]);var C=window.URL.createObjectURL(w);n(C)};e.entry&&o(e.entry)},[e.entry]),Oe("img",{src:t})};function t8(e){const[t,n,o]=Ay(e.tileId);let l=`${t}/${n}/${o}`;const h="inspector";let y=!1;const u=window.location.hash.slice(1).split("&").map(S=>{const w=S.split("=")[0];return w===h?(y=!0,`${w}=${l}`):S}).filter(S=>S);return y||u.push(`${h}=${l}`),`#${u.join("&")}`}function n8(e){let[t,n]=W.exports.useState([]),[o,l]=W.exports.useState(null),[h,y]=W.exports.useState(null);function u(A){A&&A.runLength>0&&window.history.replaceState(window.history.state,"",t8(A)),l(A)}W.exports.useEffect(()=>{(async()=>{let z=await e.file.getHeader();if(y(z),z.specVersion<3)n([]);else if(o!==null&&o.runLength===0){let G=await e.file.cache.getDirectory(e.file.source,z.leafDirectoryOffset+o.offset,o.length,z);n(G)}else if(o===null){let G=await e.file.cache.getDirectory(e.file.source,z.rootDirectoryOffset,z.rootDirectoryLength,z);n(G)}})()},[e.file,o]);let S=t.map((A,z)=>Oe(ZB,{entry:A,setSelectedEntry:u},z)),w=Oe("div",{});o&&(h==null?void 0:h.tileType)&&(o.runLength===0||(h.tileType===tu.Mvt?w=Oe(QB,{file:e.file,entry:o,tileType:h.tileType}):w=Oe(e8,{file:e.file,entry:o})));let C="";return h&&h.specVersion<3&&(C="Directory listing supported only for PMTiles v3 archives."),Pt(qB,{children:[Pt(NB,{children:[C,Pt(jB,{children:[Oe("thead",{children:Pt("tr",{children:[Oe("th",{children:"tileid"}),Oe("th",{children:"z"}),Oe("th",{children:"x"}),Oe("th",{children:"y"}),Oe("th",{children:"offset"}),Oe("th",{children:"length"}),Oe("th",{children:"type"})]})}),Oe("tbody",{children:S})]})]}),Oe(GB,{children:w})]})}var mh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DM=W.exports;function Zt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cv=!1;function ot(e,t){return cv&&(cv=!1,t[0]!=="<"&&e.push("<!-- -->")),t==="<!-- -->"?cv=!0:e.push(t)}var po=Object.prototype.hasOwnProperty,r8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ek={},kk={};function RM(e){return po.call(kk,e)?!0:po.call(Ek,e)?!1:r8.test(e)?kk[e]=!0:(Ek[e]=!0,!1)}function Ni(e,t,n,o,l,h,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=y}var ii={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ii[e]=new Ni(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ii[t]=new Ni(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ii[e]=new Ni(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ii[e]=new Ni(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ii[e]=new Ni(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ii[e]=new Ni(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ii[e]=new Ni(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ii[e]=new Ni(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ii[e]=new Ni(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mw=/[\-:]([a-z])/g;function Aw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mw,Aw);ii[t]=new Ni(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mw,Aw);ii[t]=new Ni(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mw,Aw);ii[t]=new Ni(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ii[e]=new Ni(e,1,!1,e.toLowerCase(),null,!1,!1)});ii.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ii[e]=new Ni(e,1,!1,e.toLowerCase(),null,!0,!0)});var rg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i8=["Webkit","ms","Moz","O"];Object.keys(rg).forEach(function(e){i8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rg[t]=rg[e]})});var o8=/["'&<>]/;function Li(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=o8.exec(e);if(t){var n="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(n+=e.substring(l,o)),l=o+1,n+=t}e=l!==o?n+e.substring(l,o):n}return e}var a8=/([A-Z])/g,s8=/^ms-/,sx=Array.isArray;function Ya(e,t){return{insertionMode:e,selectedValue:t}}function l8(e,t,n){switch(t){case"select":return Ya(1,n.value!=null?n.value:n.defaultValue);case"svg":return Ya(2,null);case"math":return Ya(3,null);case"foreignObject":return Ya(1,null);case"table":return Ya(4,null);case"thead":case"tbody":case"tfoot":return Ya(5,null);case"colgroup":return Ya(7,null);case"tr":return Ya(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Ya(1,null):e}function Tk(e,t){t!==""&&e.push(Li(t),"<!-- -->")}var Ck=new Map;function LM(e,t,n){if(typeof n!="object")throw Error(Zt(62));t=!0;for(var o in n)if(po.call(n,o)){var l=n[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=Li(o);l=Li((""+l).trim())}else{h=o;var y=Ck.get(h);y!==void 0||(y=Li(h.replace(a8,"-$1").toLowerCase().replace(s8,"-ms-")),Ck.set(h,y)),h=y,l=typeof l=="number"?l===0||po.call(rg,o)?""+l:l+"px":Li((""+l).trim())}t?(t=!1,e.push(' style="',h,":",l)):e.push(";",h,":",l)}}t||e.push('"')}function No(e,t,n,o){switch(n){case"style":LM(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=ii.hasOwnProperty(n)?ii[n]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:o&&e.push(" ",n,'=""');break;case 4:o===!0?e.push(" ",n,'=""'):o!==!1&&e.push(" ",n,'="',Li(o),'"');break;case 5:isNaN(o)||e.push(" ",n,'="',Li(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",n,'="',Li(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",n,'="',Li(o),'"')}}else if(RM(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",n,'="',Li(o),'"')}}}function ig(e,t,n){if(t!=null){if(n!=null)throw Error(Zt(60));if(typeof t!="object"||!("__html"in t))throw Error(Zt(61));t=t.__html,t!=null&&e.push(""+t)}}function u8(e){var t="";return DM.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function hv(e,t,n,o){e.push(Qa(n));var l=n=null,h;for(h in t)if(po.call(t,h)){var y=t[h];if(y!=null)switch(h){case"children":n=y;break;case"dangerouslySetInnerHTML":l=y;break;default:No(e,o,h,y)}}return e.push(">"),ig(e,l,n),typeof n=="string"?(e.push(Li(n)),null):n}var c8=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Pk=new Map;function Qa(e){var t=Pk.get(e);if(t===void 0){if(!c8.test(e))throw Error(Zt(65,e));t="<"+e,Pk.set(e,t)}return t}function h8(e,t,n,o,l){switch(t){case"select":e.push(Qa("select"));var h=null,y=null;for(C in n)if(po.call(n,C)){var u=n[C];if(u!=null)switch(C){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;case"defaultValue":case"value":break;default:No(e,o,C,u)}}return e.push(">"),ig(e,y,h),h;case"option":y=l.selectedValue,e.push(Qa("option"));var S=u=null,w=null,C=null;for(h in n)if(po.call(n,h)&&(t=n[h],t!=null))switch(h){case"children":u=t;break;case"selected":w=t;break;case"dangerouslySetInnerHTML":C=t;break;case"value":S=t;default:No(e,o,h,t)}if(y!=null)if(n=S!==null?""+S:u8(u),sx(y)){for(o=0;o<y.length;o++)if(""+y[o]===n){e.push(' selected=""');break}}else""+y===n&&e.push(' selected=""');else w&&e.push(' selected=""');return e.push(">"),ig(e,C,u),u;case"textarea":e.push(Qa("textarea")),C=y=h=null;for(u in n)if(po.call(n,u)&&(S=n[u],S!=null))switch(u){case"children":C=S;break;case"value":h=S;break;case"defaultValue":y=S;break;case"dangerouslySetInnerHTML":throw Error(Zt(91));default:No(e,o,u,S)}if(h===null&&y!==null&&(h=y),e.push(">"),C!=null){if(h!=null)throw Error(Zt(92));if(sx(C)&&1<C.length)throw Error(Zt(93));h=""+C}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h!==null&&e.push(Li(""+h)),null;case"input":e.push(Qa("input")),S=C=u=h=null;for(y in n)if(po.call(n,y)&&(w=n[y],w!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(Zt(399,"input"));case"defaultChecked":S=w;break;case"defaultValue":u=w;break;case"checked":C=w;break;case"value":h=w;break;default:No(e,o,y,w)}return C!==null?No(e,o,"checked",C):S!==null&&No(e,o,"checked",S),h!==null?No(e,o,"value",h):u!==null&&No(e,o,"value",u),e.push("/>"),null;case"menuitem":e.push(Qa("menuitem"));for(var A in n)if(po.call(n,A)&&(h=n[A],h!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(Zt(400));default:No(e,o,A,h)}return e.push(">"),null;case"listing":case"pre":e.push(Qa(t)),y=h=null;for(S in n)if(po.call(n,S)&&(u=n[S],u!=null))switch(S){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;default:No(e,o,S,u)}if(e.push(">"),y!=null){if(h!=null)throw Error(Zt(60));if(typeof y!="object"||!("__html"in y))throw Error(Zt(61));n=y.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(`
`,n):e.push(""+n))}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(Qa(t));for(var z in n)if(po.call(n,z)&&(h=n[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(Zt(399,t));default:No(e,o,z,h)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return hv(e,n,t,o);case"html":return l.insertionMode===0&&e.push("<!DOCTYPE html>"),hv(e,n,t,o);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return hv(e,n,t,o);e.push(Qa(t)),y=h=null;for(w in n)if(po.call(n,w)&&(u=n[w],u!=null))switch(w){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;case"style":LM(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:RM(w)&&typeof u!="function"&&typeof u!="symbol"&&e.push(" ",w,'="',Li(u),'"')}return e.push(">"),ig(e,y,h),h}}function Ik(e,t,n){if(ot(e,'<!--$?--><template id="'),n===null)throw Error(Zt(395));return ot(e,n),ot(e,'"></template>')}function d8(e,t,n,o){switch(n.insertionMode){case 0:case 1:return ot(e,'<div hidden id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 2:return ot(e,'<svg aria-hidden="true" style="display:none" id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 3:return ot(e,'<math aria-hidden="true" style="display:none" id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 4:return ot(e,'<table hidden id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 5:return ot(e,'<table hidden><tbody id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 6:return ot(e,'<table hidden><tr id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');case 7:return ot(e,'<table hidden><colgroup id="'),ot(e,t.segmentPrefix),t=o.toString(16),ot(e,t),ot(e,'">');default:throw Error(Zt(397))}}function f8(e,t){switch(t.insertionMode){case 0:case 1:return ot(e,"</div>");case 2:return ot(e,"</svg>");case 3:return ot(e,"</math>");case 4:return ot(e,"</table>");case 5:return ot(e,"</tbody></table>");case 6:return ot(e,"</tr></table>");case 7:return ot(e,"</colgroup></table>");default:throw Error(Zt(397))}}function p8(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}var af=Object.assign,m8=Symbol.for("react.element"),FM=Symbol.for("react.portal"),OM=Symbol.for("react.fragment"),$M=Symbol.for("react.strict_mode"),BM=Symbol.for("react.profiler"),VM=Symbol.for("react.provider"),NM=Symbol.for("react.context"),UM=Symbol.for("react.forward_ref"),jM=Symbol.for("react.suspense"),GM=Symbol.for("react.suspense_list"),WM=Symbol.for("react.memo"),zw=Symbol.for("react.lazy"),g8=Symbol.for("react.scope"),y8=Symbol.for("react.debug_trace_mode"),_8=Symbol.for("react.legacy_hidden"),v8=Symbol.for("react.default_value"),Mk=Symbol.iterator;function lx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case OM:return"Fragment";case FM:return"Portal";case BM:return"Profiler";case $M:return"StrictMode";case jM:return"Suspense";case GM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NM:return(e.displayName||"Context")+".Consumer";case VM:return(e._context.displayName||"Context")+".Provider";case UM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case WM:return t=e.displayName||null,t!==null?t:lx(e.type)||"Memo";case zw:t=e._payload,e=e._init;try{return lx(e(t))}catch{}}return null}var qM={};function Ak(e,t){if(e=e.contextTypes,!e)return qM;var n={},o;for(o in e)n[o]=t[o];return n}var Xl=null;function By(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(Zt(401))}else{if(n===null)throw Error(Zt(401));By(e,n)}t.context._currentValue2=t.value}}function ZM(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&ZM(e)}function HM(e){var t=e.parent;t!==null&&HM(t),e.context._currentValue2=e.value}function XM(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Zt(402));e.depth===t.depth?By(e,t):XM(e,t)}function KM(e,t){var n=t.parent;if(n===null)throw Error(Zt(402));e.depth===n.depth?By(e,n):KM(e,n),t.context._currentValue2=t.value}function ry(e){var t=Xl;t!==e&&(t===null?HM(e):e===null?ZM(t):t.depth===e.depth?By(t,e):t.depth>e.depth?XM(t,e):KM(t,e),Xl=e)}var zk={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Dk(e,t,n,o){var l=e.state!==void 0?e.state:null;e.updater=zk,e.props=n,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var y=t.contextType;if(e.context=typeof y=="object"&&y!==null?y._currentValue2:o,y=t.getDerivedStateFromProps,typeof y=="function"&&(y=y(n,l),l=y==null?l:af({},l,y),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&zk.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,y=h.replace,h.queue=null,h.replace=!1,y&&t.length===1)e.state=t[0];else{for(h=y?t[0]:e.state,l=!0,y=y?1:0;y<t.length;y++){var u=t[y];u=typeof u=="function"?u.call(e,h,n,o):u,u!=null&&(l?(l=!1,h=af({},h,u)):af(h,u))}e.state=h}else h.queue=null}var x8={id:1,overflow:""};function ux(e,t,n){var o=e.id;e=e.overflow;var l=32-og(o)-1;o&=~(1<<l),n+=1;var h=32-og(t)+l;if(30<h){var y=l-l%5;return h=(o&(1<<y)-1).toString(32),o>>=y,l-=y,{id:1<<32-og(t)+l|n<<l|o,overflow:h+e}}return{id:1<<h|n<<l|o,overflow:e}}var og=Math.clz32?Math.clz32:S8,w8=Math.log,b8=Math.LN2;function S8(e){return e>>>=0,e===0?32:31-(w8(e)/b8|0)|0}function E8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var k8=typeof Object.is=="function"?Object.is:E8,ms=null,Dw=null,ag=null,On=null,Ud=!1,iy=!1,Mf=0,Gs=null,Vy=0;function Gl(){if(ms===null)throw Error(Zt(321));return ms}function Rk(){if(0<Vy)throw Error(Zt(312));return{memoizedState:null,queue:null,next:null}}function Rw(){return On===null?ag===null?(Ud=!1,ag=On=Rk()):(Ud=!0,On=ag):On.next===null?(Ud=!1,On=On.next=Rk()):(Ud=!0,On=On.next),On}function Lw(){Dw=ms=null,iy=!1,ag=null,Vy=0,On=Gs=null}function YM(e,t){return typeof t=="function"?t(e):t}function Lk(e,t,n){if(ms=Gl(),On=Rw(),Ud){var o=On.queue;if(t=o.dispatch,Gs!==null&&(n=Gs.get(o),n!==void 0)){Gs.delete(o),o=On.memoizedState;do o=e(o,n.action),n=n.next;while(n!==null);return On.memoizedState=o,[o,t]}return[On.memoizedState,t]}return e=e===YM?typeof t=="function"?t():t:n!==void 0?n(t):t,On.memoizedState=e,e=On.queue={last:null,dispatch:null},e=e.dispatch=T8.bind(null,ms,e),[On.memoizedState,e]}function Fk(e,t){if(ms=Gl(),On=Rw(),t=t===void 0?null:t,On!==null){var n=On.memoizedState;if(n!==null&&t!==null){var o=n[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!k8(t[l],o[l])){o=!1;break e}o=!0}if(o)return n[0]}}return e=e(),On.memoizedState=[e,t],e}function T8(e,t,n){if(25<=Vy)throw Error(Zt(301));if(e===ms)if(iy=!0,e={action:n,next:null},Gs===null&&(Gs=new Map),n=Gs.get(t),n===void 0)Gs.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function C8(){throw Error(Zt(394))}function Dm(){}var Ok={readContext:function(e){return e._currentValue2},useContext:function(e){return Gl(),e._currentValue2},useMemo:Fk,useReducer:Lk,useRef:function(e){ms=Gl(),On=Rw();var t=On.memoizedState;return t===null?(e={current:e},On.memoizedState=e):t},useState:function(e){return Lk(YM,e)},useInsertionEffect:Dm,useLayoutEffect:function(){},useCallback:function(e,t){return Fk(function(){return e},t)},useImperativeHandle:Dm,useEffect:Dm,useDebugValue:Dm,useDeferredValue:function(e){return Gl(),e},useTransition:function(){return Gl(),[!1,C8]},useId:function(){var e=Dw.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-og(e)-1)).toString(32)+t;var n=sg;if(n===null)throw Error(Zt(404));return t=Mf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Gl(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(Zt(407));return n()}},sg=null,dv=DM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function P8(e){console.error(e)}function jd(){}function I8(e,t,n,o,l,h,y,u,S){var w=[],C=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:C,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?P8:l,onAllReady:h===void 0?jd:h,onShellReady:y===void 0?jd:y,onShellError:u===void 0?jd:u,onFatalError:S===void 0?jd:S},n=oy(t,0,null,n),n.parentFlushed=!0,e=Fw(t,e,null,n,C,qM,null,x8),w.push(e),t}function Fw(e,t,n,o,l,h,y,u){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var S={node:t,ping:function(){var w=e.pingedTasks;w.push(S),w.length===1&&eA(e)},blockedBoundary:n,blockedSegment:o,abortSet:l,legacyContext:h,context:y,treeContext:u};return l.add(S),S}function oy(e,t,n,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n}}function Af(e,t){e=e.onError,e(t)}function ay(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function $k(e,t,n,o,l){for(ms={},Dw=t,Mf=0,e=n(o,l);iy;)iy=!1,Mf=0,Vy+=1,On=null,e=n(o,l);return Lw(),e}function Bk(e,t,n,o){var l=n.render(),h=o.childContextTypes;if(h!=null){var y=t.legacyContext;if(typeof n.getChildContext!="function")o=y;else{n=n.getChildContext();for(var u in n)if(!(u in h))throw Error(Zt(108,lx(o)||"Unknown",u));o=af({},y,n)}t.legacyContext=o,mo(e,t,l),t.legacyContext=y}else mo(e,t,l)}function Vk(e,t){if(e&&e.defaultProps){t=af({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cx(e,t,n,o,l){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){l=Ak(n,t.legacyContext);var h=n.contextType;h=new n(o,typeof h=="object"&&h!==null?h._currentValue2:l),Dk(h,n,o,l),Bk(e,t,h,n)}else{h=Ak(n,t.legacyContext),l=$k(e,t,n,o,h);var y=Mf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)Dk(l,n,o,h),Bk(e,t,l,n);else if(y){o=t.treeContext,t.treeContext=ux(o,1,0);try{mo(e,t,l)}finally{t.treeContext=o}}else mo(e,t,l)}else if(typeof n=="string")switch(l=t.blockedSegment,h=h8(l.chunks,n,o,e.responseState,l.formatContext),y=l.formatContext,l.formatContext=l8(y,n,o),hx(e,t,h),l.formatContext=y,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push("</",n,">")}else{switch(n){case _8:case y8:case $M:case BM:case OM:mo(e,t,o.children);return;case GM:mo(e,t,o.children);return;case g8:throw Error(Zt(343));case jM:e:{n=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,y=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:y},S=oy(e,l.chunks.length,u,l.formatContext);l.children.push(S);var w=oy(e,0,null,l.formatContext);w.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=w;try{if(hx(e,t,o),w.status=1,sy(u,w),u.pendingTasks===0)break e}catch(C){w.status=4,Af(e,C),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=l}t=Fw(e,h,n,S,y,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case UM:if(o=$k(e,t,n.render,o,l),Mf!==0){n=t.treeContext,t.treeContext=ux(n,1,0);try{mo(e,t,o)}finally{t.treeContext=n}}else mo(e,t,o);return;case WM:n=n.type,o=Vk(n,o),cx(e,t,n,o,l);return;case VM:if(l=o.children,n=n._context,o=o.value,h=n._currentValue2,n._currentValue2=o,y=Xl,Xl=o={parent:y,depth:y===null?0:y.depth+1,context:n,parentValue:h,value:o},t.context=o,mo(e,t,l),e=Xl,e===null)throw Error(Zt(403));o=e.parentValue,e.context._currentValue2=o===v8?e.context._defaultValue:o,e=Xl=e.parent,t.context=e;return;case NM:o=o.children,o=o(n._currentValue2),mo(e,t,o);return;case zw:l=n._init,n=l(n._payload),o=Vk(n,o),cx(e,t,n,o,void 0);return}throw Error(Zt(130,n==null?n:typeof n,""))}}function mo(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case m8:cx(e,t,n.type,n.props,n.ref);return;case FM:throw Error(Zt(257));case zw:var o=n._init;n=o(n._payload),mo(e,t,n);return}if(sx(n)){Nk(e,t,n);return}if(n===null||typeof n!="object"?o=null:(o=Mk&&n[Mk]||n["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(n))){if(n=o.next(),!n.done){var l=[];do l.push(n.value),n=o.next();while(!n.done);Nk(e,t,l)}return}throw e=Object.prototype.toString.call(n),Error(Zt(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(t=t.blockedSegment.chunks,e.responseState.generateStaticMarkup?t.push(Li(n)):Tk(t,n)):typeof n=="number"&&(t=t.blockedSegment.chunks,n=""+n,e.responseState.generateStaticMarkup?t.push(Li(n)):Tk(t,n))}function Nk(e,t,n){for(var o=n.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=ux(h,o,l);try{hx(e,t,n[l])}finally{t.treeContext=h}}}function hx(e,t,n){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return mo(e,t,n)}catch(S){if(Lw(),typeof S=="object"&&S!==null&&typeof S.then=="function"){n=S;var y=t.blockedSegment,u=oy(e,y.chunks.length,null,y.formatContext);y.children.push(u),e=Fw(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ry(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ry(h),S}}function M8(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,QM(this,t,e)}function JM(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.push(null))):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(JM,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function sy(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&sy(e,n)}else e.completedSegments.push(t)}function QM(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(Zt(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=jd,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&sy(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(M8,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(sy(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function eA(e){if(e.status!==2){var t=Xl,n=dv.current;dv.current=Ok;var o=sg;sg=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var y=l[h],u=e,S=y.blockedSegment;if(S.status===0){ry(y.context);try{mo(u,y,y.node),y.abortSet.delete(y),S.status=1,QM(u,y.blockedBoundary,S)}catch(G){if(Lw(),typeof G=="object"&&G!==null&&typeof G.then=="function"){var w=y.ping;G.then(w,w)}else{y.abortSet.delete(y),S.status=4;var C=y.blockedBoundary,A=G;if(Af(u,A),C===null?ay(u,A):(C.pendingTasks--,C.forceClientRender||(C.forceClientRender=!0,C.parentFlushed&&u.clientRenderedBoundaries.push(C))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&Ow(e,e.destination)}catch(G){Af(e,G),ay(e,G)}finally{sg=o,dv.current=n,n===Ok&&ry(t)}}}function Rm(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var o=n.id=e.nextSegmentId++;return e=e.responseState,ot(t,'<template id="'),ot(t,e.placeholderPrefix),e=o.toString(16),ot(t,e),ot(t,'"></template>');case 1:n.status=2;var l=!0;o=n.chunks;var h=0;n=n.children;for(var y=0;y<n.length;y++){for(l=n[y];h<l.index;h++)ot(t,o[h]);l=Ny(e,t,l)}for(;h<o.length-1;h++)ot(t,o[h]);return h<o.length&&(l=ot(t,o[h])),l;default:throw Error(Zt(390))}}function Ny(e,t,n){var o=n.boundary;if(o===null)return Rm(e,t,n);if(o.parentFlushed=!0,o.forceClientRender)return e.responseState.generateStaticMarkup||ot(t,"<!--$!-->"),Rm(e,t,n),e=e.responseState.generateStaticMarkup?!0:ot(t,"<!--/$-->"),e;if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;return l=l.boundaryPrefix+h.toString(16),o=o.id=l,Ik(t,e.responseState,o),Rm(e,t,n),ot(t,"<!--/$-->")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),Ik(t,e.responseState,o.id),Rm(e,t,n),ot(t,"<!--/$-->");if(e.responseState.generateStaticMarkup||ot(t,"<!--$-->"),n=o.completedSegments,n.length!==1)throw Error(Zt(391));return Ny(e,t,n[0]),e=e.responseState.generateStaticMarkup?!0:ot(t,"<!--/$-->"),e}function Uk(e,t,n){return d8(t,e.responseState,n.formatContext,n.id),Ny(e,t,n),f8(t,n.formatContext)}function jk(e,t,n){for(var o=n.completedSegments,l=0;l<o.length;l++)tA(e,t,n,o[l]);if(o.length=0,e=e.responseState,o=n.id,n=n.rootSegmentID,ot(t,e.startInlineScript),e.sentCompleteBoundaryFunction?ot(t,'$RC("'):(e.sentCompleteBoundaryFunction=!0,ot(t,'function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),o===null)throw Error(Zt(395));return n=n.toString(16),ot(t,o),ot(t,'","'),ot(t,e.segmentPrefix),ot(t,n),ot(t,'")<\/script>')}function tA(e,t,n,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=n.rootSegmentID)===-1)throw Error(Zt(392));return Uk(e,t,o)}return Uk(e,t,o),e=e.responseState,ot(t,e.startInlineScript),e.sentCompleteSegmentFunction?ot(t,'$RS("'):(e.sentCompleteSegmentFunction=!0,ot(t,'function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),ot(t,e.segmentPrefix),l=l.toString(16),ot(t,l),ot(t,'","'),ot(t,e.placeholderPrefix),ot(t,l),ot(t,'")<\/script>')}function Ow(e,t){try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Ny(e,t,n),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)ot(t,o[n]);n<o.length&&ot(t,o[n])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var y=e.responseState,u=l[h].id;if(ot(o,y.startInlineScript),y.sentClientRenderFunction?ot(o,'$RX("'):(y.sentClientRenderFunction=!0,ot(o,'function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("')),u===null)throw Error(Zt(395));if(ot(o,u),!ot(o,'")<\/script>')){e.destination=null,h++,l.splice(0,h);return}}l.splice(0,h);var S=e.completedBoundaries;for(h=0;h<S.length;h++)if(!jk(e,t,S[h])){e.destination=null,h++,S.splice(0,h);return}S.splice(0,h);var w=e.partialBoundaries;for(h=0;h<w.length;h++){var C=w[h];e:{l=e,y=t;var A=C.completedSegments;for(u=0;u<A.length;u++)if(!tA(l,y,C,A[u])){u++,A.splice(0,u);var z=!1;break e}A.splice(0,u),z=!0}if(!z){e.destination=null,h++,w.splice(0,h);return}}w.splice(0,h);var G=e.completedBoundaries;for(h=0;h<G.length;h++)if(!jk(e,t,G[h])){e.destination=null,h++,G.splice(0,h);return}G.splice(0,h)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function A8(e){try{var t=e.abortableTasks;t.forEach(JM,e),t.clear(),e.destination!==null&&Ow(e,e.destination)}catch(n){Af(e,n),ay(e,n)}}function z8(){}function nA(e,t,n){var o=!1,l=null,h="",y={push:function(S){return S!==null&&(h+=S),!0},destroy:function(S){o=!0,l=S}},u=!1;if(e=I8(e,p8(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,z8,void 0,function(){u=!0},void 0,void 0),eA(e),A8(e),e.status===1)e.status=2,y.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=y;try{Ow(e,y)}catch(S){Af(e,S),ay(e,S)}}if(o)throw l;if(!u)throw Error(Zt(426));return h}mh.renderToNodeStream=function(){throw Error(Zt(207))};mh.renderToStaticMarkup=function(e,t){return nA(e,t,!0)};mh.renderToStaticNodeStream=function(){throw Error(Zt(208))};mh.renderToString=function(e,t){return nA(e,t,!1)};mh.version="18.1.0";var $w={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA=W.exports;function Yt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var go=null,yo=0;function Ft(e,t){if(t.length!==0)if(512<t.length)0<yo&&(e.enqueue(new Uint8Array(go.buffer,0,yo)),go=new Uint8Array(512),yo=0),e.enqueue(t);else{var n=go.length-yo;n<t.length&&(n===0?e.enqueue(go):(go.set(t.subarray(0,n),yo),e.enqueue(go),t=t.subarray(n)),go=new Uint8Array(512),yo=0),go.set(t,yo),yo+=t.length}}function Kn(e,t){return Ft(e,t),!0}function Gk(e){go&&0<yo&&(e.enqueue(new Uint8Array(go.buffer,0,yo)),go=null,yo=0)}var iA=new TextEncoder;function ln(e){return iA.encode(e)}function mt(e){return iA.encode(e)}function oA(e,t){typeof e.error=="function"?e.error(t):e.close()}var _o=Object.prototype.hasOwnProperty,D8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wk={},qk={};function aA(e){return _o.call(qk,e)?!0:_o.call(Wk,e)?!1:D8.test(e)?qk[e]=!0:(Wk[e]=!0,!1)}function Ui(e,t,n,o,l,h,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=y}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oi[e]=new Ui(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oi[t]=new Ui(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oi[e]=new Ui(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oi[e]=new Ui(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oi[e]=new Ui(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oi[e]=new Ui(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oi[e]=new Ui(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oi[e]=new Ui(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oi[e]=new Ui(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bw=/[\-:]([a-z])/g;function Vw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bw,Vw);oi[t]=new Ui(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bw,Vw);oi[t]=new Ui(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bw,Vw);oi[t]=new Ui(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oi[e]=new Ui(e,1,!1,e.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oi[e]=new Ui(e,1,!1,e.toLowerCase(),null,!0,!0)});var lg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R8=["Webkit","ms","Moz","O"];Object.keys(lg).forEach(function(e){R8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lg[t]=lg[e]})});var L8=/["'&<>]/;function ti(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=L8.exec(e);if(t){var n="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(n+=e.substring(l,o)),l=o+1,n+=t}e=l!==o?n+e.substring(l,o):n}return e}var F8=/([A-Z])/g,O8=/^ms-/,dx=Array.isArray,$8=mt("<script>"),B8=mt("<\/script>"),V8=mt('<script src="'),N8=mt('<script type="module" src="'),Zk=mt('" async=""><\/script>'),U8=/(<\/|<)(s)(cript)/gi;function j8(e,t,n,o){return""+t+(n==="s"?"\\u0073":"\\u0053")+o}function G8(e,t,n,o,l){e=e===void 0?"":e,t=t===void 0?$8:mt('<script nonce="'+ti(t)+'">');var h=[];if(n!==void 0&&h.push(t,ln((""+n).replace(U8,j8)),B8),o!==void 0)for(n=0;n<o.length;n++)h.push(V8,ln(ti(o[n])),Zk);if(l!==void 0)for(o=0;o<l.length;o++)h.push(N8,ln(ti(l[o])),Zk);return{bootstrapChunks:h,startInlineScript:t,placeholderPrefix:mt(e+"P:"),segmentPrefix:mt(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function ka(e,t){return{insertionMode:e,selectedValue:t}}function W8(e){return ka(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function q8(e,t,n){switch(t){case"select":return ka(1,n.value!=null?n.value:n.defaultValue);case"svg":return ka(2,null);case"math":return ka(3,null);case"foreignObject":return ka(1,null);case"table":return ka(4,null);case"thead":case"tbody":case"tfoot":return ka(5,null);case"colgroup":return ka(7,null);case"tr":return ka(6,null)}return 4<=e.insertionMode||e.insertionMode===0?ka(1,null):e}var Hk=mt("<!-- -->"),Xk=new Map,Z8=mt(' style="'),Kk=mt(":"),H8=mt(";");function sA(e,t,n){if(typeof n!="object")throw Error(Yt(62));t=!0;for(var o in n)if(_o.call(n,o)){var l=n[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=ln(ti(o));l=ln(ti((""+l).trim()))}else{h=o;var y=Xk.get(h);y!==void 0||(y=mt(ti(h.replace(F8,"-$1").toLowerCase().replace(O8,"-ms-"))),Xk.set(h,y)),h=y,l=typeof l=="number"?l===0||_o.call(lg,o)?ln(""+l):ln(l+"px"):ln(ti((""+l).trim()))}t?(t=!1,e.push(Z8,h,Kk,l)):e.push(H8,h,Kk,l)}}t||e.push(Wl)}var Fs=mt(" "),wc=mt('="'),Wl=mt('"'),Yk=mt('=""');function Uo(e,t,n,o){switch(n){case"style":sA(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=oi.hasOwnProperty(n)?oi[n]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=ln(t.attributeName),t.type){case 3:o&&e.push(Fs,n,Yk);break;case 4:o===!0?e.push(Fs,n,Yk):o!==!1&&e.push(Fs,n,wc,ln(ti(o)),Wl);break;case 5:isNaN(o)||e.push(Fs,n,wc,ln(ti(o)),Wl);break;case 6:!isNaN(o)&&1<=o&&e.push(Fs,n,wc,ln(ti(o)),Wl);break;default:t.sanitizeURL&&(o=""+o),e.push(Fs,n,wc,ln(ti(o)),Wl)}}else if(aA(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(Fs,ln(n),wc,ln(ti(o)),Wl)}}}var Ul=mt(">"),Jk=mt("/>");function ug(e,t,n){if(t!=null){if(n!=null)throw Error(Yt(60));if(typeof t!="object"||!("__html"in t))throw Error(Yt(61));t=t.__html,t!=null&&e.push(ln(""+t))}}function X8(e){var t="";return rA.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}var fv=mt(' selected=""');function pv(e,t,n,o){e.push(es(n));var l=n=null,h;for(h in t)if(_o.call(t,h)){var y=t[h];if(y!=null)switch(h){case"children":n=y;break;case"dangerouslySetInnerHTML":l=y;break;default:Uo(e,o,h,y)}}return e.push(Ul),ug(e,l,n),typeof n=="string"?(e.push(ln(ti(n))),null):n}var mv=mt(`
`),K8=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Qk=new Map;function es(e){var t=Qk.get(e);if(t===void 0){if(!K8.test(e))throw Error(Yt(65,e));t=mt("<"+e),Qk.set(e,t)}return t}var Y8=mt("<!DOCTYPE html>");function J8(e,t,n,o,l){switch(t){case"select":e.push(es("select"));var h=null,y=null;for(C in n)if(_o.call(n,C)){var u=n[C];if(u!=null)switch(C){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;case"defaultValue":case"value":break;default:Uo(e,o,C,u)}}return e.push(Ul),ug(e,y,h),h;case"option":y=l.selectedValue,e.push(es("option"));var S=u=null,w=null,C=null;for(h in n)if(_o.call(n,h)&&(t=n[h],t!=null))switch(h){case"children":u=t;break;case"selected":w=t;break;case"dangerouslySetInnerHTML":C=t;break;case"value":S=t;default:Uo(e,o,h,t)}if(y!=null)if(n=S!==null?""+S:X8(u),dx(y)){for(o=0;o<y.length;o++)if(""+y[o]===n){e.push(fv);break}}else""+y===n&&e.push(fv);else w&&e.push(fv);return e.push(Ul),ug(e,C,u),u;case"textarea":e.push(es("textarea")),C=y=h=null;for(u in n)if(_o.call(n,u)&&(S=n[u],S!=null))switch(u){case"children":C=S;break;case"value":h=S;break;case"defaultValue":y=S;break;case"dangerouslySetInnerHTML":throw Error(Yt(91));default:Uo(e,o,u,S)}if(h===null&&y!==null&&(h=y),e.push(Ul),C!=null){if(h!=null)throw Error(Yt(92));if(dx(C)&&1<C.length)throw Error(Yt(93));h=""+C}return typeof h=="string"&&h[0]===`
`&&e.push(mv),h!==null&&e.push(ln(ti(""+h))),null;case"input":e.push(es("input")),S=C=u=h=null;for(y in n)if(_o.call(n,y)&&(w=n[y],w!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(Yt(399,"input"));case"defaultChecked":S=w;break;case"defaultValue":u=w;break;case"checked":C=w;break;case"value":h=w;break;default:Uo(e,o,y,w)}return C!==null?Uo(e,o,"checked",C):S!==null&&Uo(e,o,"checked",S),h!==null?Uo(e,o,"value",h):u!==null&&Uo(e,o,"value",u),e.push(Jk),null;case"menuitem":e.push(es("menuitem"));for(var A in n)if(_o.call(n,A)&&(h=n[A],h!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(Yt(400));default:Uo(e,o,A,h)}return e.push(Ul),null;case"listing":case"pre":e.push(es(t)),y=h=null;for(S in n)if(_o.call(n,S)&&(u=n[S],u!=null))switch(S){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;default:Uo(e,o,S,u)}if(e.push(Ul),y!=null){if(h!=null)throw Error(Yt(60));if(typeof y!="object"||!("__html"in y))throw Error(Yt(61));n=y.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(mv,ln(n)):e.push(ln(""+n)))}return typeof h=="string"&&h[0]===`
`&&e.push(mv),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(es(t));for(var z in n)if(_o.call(n,z)&&(h=n[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(Yt(399,t));default:Uo(e,o,z,h)}return e.push(Jk),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return pv(e,n,t,o);case"html":return l.insertionMode===0&&e.push(Y8),pv(e,n,t,o);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return pv(e,n,t,o);e.push(es(t)),y=h=null;for(w in n)if(_o.call(n,w)&&(u=n[w],u!=null))switch(w){case"children":h=u;break;case"dangerouslySetInnerHTML":y=u;break;case"style":sA(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:aA(w)&&typeof u!="function"&&typeof u!="symbol"&&e.push(Fs,ln(w),wc,ln(ti(u)),Wl)}return e.push(Ul),ug(e,y,h),h}}var Q8=mt("</"),eV=mt(">"),tV=mt('<template id="'),nV=mt('"></template>'),rV=mt("<!--$-->"),iV=mt('<!--$?--><template id="'),oV=mt('"></template>'),aV=mt("<!--$!-->"),sV=mt("<!--/$-->");function eT(e,t,n){if(Ft(e,iV),n===null)throw Error(Yt(395));return Ft(e,n),Kn(e,oV)}var lV=mt('<div hidden id="'),uV=mt('">'),cV=mt("</div>"),hV=mt('<svg aria-hidden="true" style="display:none" id="'),dV=mt('">'),fV=mt("</svg>"),pV=mt('<math aria-hidden="true" style="display:none" id="'),mV=mt('">'),gV=mt("</math>"),yV=mt('<table hidden id="'),_V=mt('">'),vV=mt("</table>"),xV=mt('<table hidden><tbody id="'),wV=mt('">'),bV=mt("</tbody></table>"),SV=mt('<table hidden><tr id="'),EV=mt('">'),kV=mt("</tr></table>"),TV=mt('<table hidden><colgroup id="'),CV=mt('">'),PV=mt("</colgroup></table>");function IV(e,t,n,o){switch(n.insertionMode){case 0:case 1:return Ft(e,lV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,uV);case 2:return Ft(e,hV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,dV);case 3:return Ft(e,pV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,mV);case 4:return Ft(e,yV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,_V);case 5:return Ft(e,xV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,wV);case 6:return Ft(e,SV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,EV);case 7:return Ft(e,TV),Ft(e,t.segmentPrefix),Ft(e,ln(o.toString(16))),Kn(e,CV);default:throw Error(Yt(397))}}function MV(e,t){switch(t.insertionMode){case 0:case 1:return Kn(e,cV);case 2:return Kn(e,fV);case 3:return Kn(e,gV);case 4:return Kn(e,vV);case 5:return Kn(e,bV);case 6:return Kn(e,kV);case 7:return Kn(e,PV);default:throw Error(Yt(397))}}var AV=mt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),zV=mt('$RS("'),DV=mt('","'),RV=mt('")<\/script>'),LV=mt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),FV=mt('$RC("'),OV=mt('","'),$V=mt('")<\/script>'),BV=mt('function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("'),VV=mt('$RX("'),NV=mt('")<\/script>'),sf=Object.assign,UV=Symbol.for("react.element"),lA=Symbol.for("react.portal"),uA=Symbol.for("react.fragment"),cA=Symbol.for("react.strict_mode"),hA=Symbol.for("react.profiler"),dA=Symbol.for("react.provider"),fA=Symbol.for("react.context"),pA=Symbol.for("react.forward_ref"),mA=Symbol.for("react.suspense"),gA=Symbol.for("react.suspense_list"),yA=Symbol.for("react.memo"),Nw=Symbol.for("react.lazy"),jV=Symbol.for("react.scope"),GV=Symbol.for("react.debug_trace_mode"),WV=Symbol.for("react.legacy_hidden"),qV=Symbol.for("react.default_value"),tT=Symbol.iterator;function fx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uA:return"Fragment";case lA:return"Portal";case hA:return"Profiler";case cA:return"StrictMode";case mA:return"Suspense";case gA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fA:return(e.displayName||"Context")+".Consumer";case dA:return(e._context.displayName||"Context")+".Provider";case pA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yA:return t=e.displayName||null,t!==null?t:fx(e.type)||"Memo";case Nw:t=e._payload,e=e._init;try{return fx(e(t))}catch{}}return null}var _A={};function nT(e,t){if(e=e.contextTypes,!e)return _A;var n={},o;for(o in e)n[o]=t[o];return n}var Kl=null;function Uy(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(Yt(401))}else{if(n===null)throw Error(Yt(401));Uy(e,n)}t.context._currentValue=t.value}}function vA(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&vA(e)}function xA(e){var t=e.parent;t!==null&&xA(t),e.context._currentValue=e.value}function wA(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(Yt(402));e.depth===t.depth?Uy(e,t):wA(e,t)}function bA(e,t){var n=t.parent;if(n===null)throw Error(Yt(402));e.depth===n.depth?Uy(e,n):bA(e,n),t.context._currentValue=t.value}function ly(e){var t=Kl;t!==e&&(t===null?xA(e):e===null?vA(t):t.depth===e.depth?Uy(t,e):t.depth>e.depth?wA(t,e):bA(t,e),Kl=e)}var rT={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function iT(e,t,n,o){var l=e.state!==void 0?e.state:null;e.updater=rT,e.props=n,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var y=t.contextType;if(e.context=typeof y=="object"&&y!==null?y._currentValue:o,y=t.getDerivedStateFromProps,typeof y=="function"&&(y=y(n,l),l=y==null?l:sf({},l,y),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&rT.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,y=h.replace,h.queue=null,h.replace=!1,y&&t.length===1)e.state=t[0];else{for(h=y?t[0]:e.state,l=!0,y=y?1:0;y<t.length;y++){var u=t[y];u=typeof u=="function"?u.call(e,h,n,o):u,u!=null&&(l?(l=!1,h=sf({},h,u)):sf(h,u))}e.state=h}else h.queue=null}var ZV={id:1,overflow:""};function px(e,t,n){var o=e.id;e=e.overflow;var l=32-cg(o)-1;o&=~(1<<l),n+=1;var h=32-cg(t)+l;if(30<h){var y=l-l%5;return h=(o&(1<<y)-1).toString(32),o>>=y,l-=y,{id:1<<32-cg(t)+l|n<<l|o,overflow:h+e}}return{id:1<<h|n<<l|o,overflow:e}}var cg=Math.clz32?Math.clz32:KV,HV=Math.log,XV=Math.LN2;function KV(e){return e>>>=0,e===0?32:31-(HV(e)/XV|0)|0}function YV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var JV=typeof Object.is=="function"?Object.is:YV,gs=null,Uw=null,hg=null,$n=null,Gd=!1,uy=!1,zf=0,Ws=null,jy=0;function ql(){if(gs===null)throw Error(Yt(321));return gs}function oT(){if(0<jy)throw Error(Yt(312));return{memoizedState:null,queue:null,next:null}}function jw(){return $n===null?hg===null?(Gd=!1,hg=$n=oT()):(Gd=!0,$n=hg):$n.next===null?(Gd=!1,$n=$n.next=oT()):(Gd=!0,$n=$n.next),$n}function Gw(){Uw=gs=null,uy=!1,hg=null,jy=0,$n=Ws=null}function SA(e,t){return typeof t=="function"?t(e):t}function aT(e,t,n){if(gs=ql(),$n=jw(),Gd){var o=$n.queue;if(t=o.dispatch,Ws!==null&&(n=Ws.get(o),n!==void 0)){Ws.delete(o),o=$n.memoizedState;do o=e(o,n.action),n=n.next;while(n!==null);return $n.memoizedState=o,[o,t]}return[$n.memoizedState,t]}return e=e===SA?typeof t=="function"?t():t:n!==void 0?n(t):t,$n.memoizedState=e,e=$n.queue={last:null,dispatch:null},e=e.dispatch=QV.bind(null,gs,e),[$n.memoizedState,e]}function sT(e,t){if(gs=ql(),$n=jw(),t=t===void 0?null:t,$n!==null){var n=$n.memoizedState;if(n!==null&&t!==null){var o=n[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!JV(t[l],o[l])){o=!1;break e}o=!0}if(o)return n[0]}}return e=e(),$n.memoizedState=[e,t],e}function QV(e,t,n){if(25<=jy)throw Error(Yt(301));if(e===gs)if(uy=!0,e={action:n,next:null},Ws===null&&(Ws=new Map),n=Ws.get(t),n===void 0)Ws.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function eN(){throw Error(Yt(394))}function Lm(){}var lT={readContext:function(e){return e._currentValue},useContext:function(e){return ql(),e._currentValue},useMemo:sT,useReducer:aT,useRef:function(e){gs=ql(),$n=jw();var t=$n.memoizedState;return t===null?(e={current:e},$n.memoizedState=e):t},useState:function(e){return aT(SA,e)},useInsertionEffect:Lm,useLayoutEffect:function(){},useCallback:function(e,t){return sT(function(){return e},t)},useImperativeHandle:Lm,useEffect:Lm,useDebugValue:Lm,useDeferredValue:function(e){return ql(),e},useTransition:function(){return ql(),[!1,eN]},useId:function(){var e=Uw.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-cg(e)-1)).toString(32)+t;var n=dg;if(n===null)throw Error(Yt(404));return t=zf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return ql(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(Yt(407));return n()}},dg=null,gv=rA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function tN(e){console.error(e)}function Wd(){}function nN(e,t,n,o,l,h,y,u,S){var w=[],C=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:C,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?tN:l,onAllReady:h===void 0?Wd:h,onShellReady:y===void 0?Wd:y,onShellError:u===void 0?Wd:u,onFatalError:S===void 0?Wd:S},n=cy(t,0,null,n),n.parentFlushed=!0,e=Ww(t,e,null,n,C,_A,null,ZV),w.push(e),t}function Ww(e,t,n,o,l,h,y,u){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var S={node:t,ping:function(){var w=e.pingedTasks;w.push(S),w.length===1&&TA(e)},blockedBoundary:n,blockedSegment:o,abortSet:l,legacyContext:h,context:y,treeContext:u};return l.add(S),S}function cy(e,t,n,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n}}function Df(e,t){e=e.onError,e(t)}function hy(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,oA(e.destination,t)):(e.status=1,e.fatalError=t)}function uT(e,t,n,o,l){for(gs={},Uw=t,zf=0,e=n(o,l);uy;)uy=!1,zf=0,jy+=1,$n=null,e=n(o,l);return Gw(),e}function cT(e,t,n,o){var l=n.render(),h=o.childContextTypes;if(h!=null){var y=t.legacyContext;if(typeof n.getChildContext!="function")o=y;else{n=n.getChildContext();for(var u in n)if(!(u in h))throw Error(Yt(108,fx(o)||"Unknown",u));o=sf({},y,n)}t.legacyContext=o,vo(e,t,l),t.legacyContext=y}else vo(e,t,l)}function hT(e,t){if(e&&e.defaultProps){t=sf({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function mx(e,t,n,o,l){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){l=nT(n,t.legacyContext);var h=n.contextType;h=new n(o,typeof h=="object"&&h!==null?h._currentValue:l),iT(h,n,o,l),cT(e,t,h,n)}else{h=nT(n,t.legacyContext),l=uT(e,t,n,o,h);var y=zf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)iT(l,n,o,h),cT(e,t,l,n);else if(y){o=t.treeContext,t.treeContext=px(o,1,0);try{vo(e,t,l)}finally{t.treeContext=o}}else vo(e,t,l)}else if(typeof n=="string")switch(l=t.blockedSegment,h=J8(l.chunks,n,o,e.responseState,l.formatContext),y=l.formatContext,l.formatContext=q8(y,n,o),gx(e,t,h),l.formatContext=y,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push(Q8,ln(n),eV)}else{switch(n){case WV:case GV:case cA:case hA:case uA:vo(e,t,o.children);return;case gA:vo(e,t,o.children);return;case jV:throw Error(Yt(343));case mA:e:{n=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,y=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:y},S=cy(e,l.chunks.length,u,l.formatContext);l.children.push(S);var w=cy(e,0,null,l.formatContext);w.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=w;try{if(gx(e,t,o),w.status=1,dy(u,w),u.pendingTasks===0)break e}catch(C){w.status=4,Df(e,C),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=l}t=Ww(e,h,n,S,y,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pA:if(o=uT(e,t,n.render,o,l),zf!==0){n=t.treeContext,t.treeContext=px(n,1,0);try{vo(e,t,o)}finally{t.treeContext=n}}else vo(e,t,o);return;case yA:n=n.type,o=hT(n,o),mx(e,t,n,o,l);return;case dA:if(l=o.children,n=n._context,o=o.value,h=n._currentValue,n._currentValue=o,y=Kl,Kl=o={parent:y,depth:y===null?0:y.depth+1,context:n,parentValue:h,value:o},t.context=o,vo(e,t,l),e=Kl,e===null)throw Error(Yt(403));o=e.parentValue,e.context._currentValue=o===qV?e.context._defaultValue:o,e=Kl=e.parent,t.context=e;return;case fA:o=o.children,o=o(n._currentValue),vo(e,t,o);return;case Nw:l=n._init,n=l(n._payload),o=hT(n,o),mx(e,t,n,o,void 0);return}throw Error(Yt(130,n==null?n:typeof n,""))}}function vo(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case UV:mx(e,t,n.type,n.props,n.ref);return;case lA:throw Error(Yt(257));case Nw:var o=n._init;n=o(n._payload),vo(e,t,n);return}if(dx(n)){dT(e,t,n);return}if(n===null||typeof n!="object"?o=null:(o=tT&&n[tT]||n["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(n))){if(n=o.next(),!n.done){var l=[];do l.push(n.value),n=o.next();while(!n.done);dT(e,t,l)}return}throw t=Object.prototype.toString.call(n),Error(Yt(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?n!==""&&t.blockedSegment.chunks.push(ln(ti(n)),Hk):typeof n=="number"&&(e=""+n,e!==""&&t.blockedSegment.chunks.push(ln(ti(e)),Hk))}function dT(e,t,n){for(var o=n.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=px(h,o,l);try{gx(e,t,n[l])}finally{t.treeContext=h}}}function gx(e,t,n){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return vo(e,t,n)}catch(S){if(Gw(),typeof S=="object"&&S!==null&&typeof S.then=="function"){n=S;var y=t.blockedSegment,u=cy(e,y.chunks.length,null,y.formatContext);y.children.push(u),e=Ww(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ly(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ly(h),S}}function rN(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,kA(this,t,e)}function EA(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.close())):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(EA,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function dy(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&dy(e,n)}else e.completedSegments.push(t)}function kA(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(Yt(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Wd,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&dy(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(rN,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(dy(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function TA(e){if(e.status!==2){var t=Kl,n=gv.current;gv.current=lT;var o=dg;dg=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var y=l[h],u=e,S=y.blockedSegment;if(S.status===0){ly(y.context);try{vo(u,y,y.node),y.abortSet.delete(y),S.status=1,kA(u,y.blockedBoundary,S)}catch(G){if(Gw(),typeof G=="object"&&G!==null&&typeof G.then=="function"){var w=y.ping;G.then(w,w)}else{y.abortSet.delete(y),S.status=4;var C=y.blockedBoundary,A=G;if(Df(u,A),C===null?hy(u,A):(C.pendingTasks--,C.forceClientRender||(C.forceClientRender=!0,C.parentFlushed&&u.clientRenderedBoundaries.push(C))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&qw(e,e.destination)}catch(G){Df(e,G),hy(e,G)}finally{dg=o,gv.current=n,n===lT&&ly(t)}}}function Fm(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var o=n.id=e.nextSegmentId++;return e=e.responseState,Ft(t,tV),Ft(t,e.placeholderPrefix),e=ln(o.toString(16)),Ft(t,e),Kn(t,nV);case 1:n.status=2;var l=!0;o=n.chunks;var h=0;n=n.children;for(var y=0;y<n.length;y++){for(l=n[y];h<l.index;h++)Ft(t,o[h]);l=Gy(e,t,l)}for(;h<o.length-1;h++)Ft(t,o[h]);return h<o.length&&(l=Kn(t,o[h])),l;default:throw Error(Yt(390))}}function Gy(e,t,n){var o=n.boundary;if(o===null)return Fm(e,t,n);if(o.parentFlushed=!0,o.forceClientRender)Kn(t,aV),Fm(e,t,n);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;l=mt(l.boundaryPrefix+h.toString(16)),o=o.id=l,eT(t,e.responseState,o),Fm(e,t,n)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),eT(t,e.responseState,o.id),Fm(e,t,n);else{if(Kn(t,rV),n=o.completedSegments,n.length!==1)throw Error(Yt(391));Gy(e,t,n[0])}return Kn(t,sV)}function fT(e,t,n){return IV(t,e.responseState,n.formatContext,n.id),Gy(e,t,n),MV(t,n.formatContext)}function pT(e,t,n){for(var o=n.completedSegments,l=0;l<o.length;l++)CA(e,t,n,o[l]);if(o.length=0,e=e.responseState,o=n.id,n=n.rootSegmentID,Ft(t,e.startInlineScript),e.sentCompleteBoundaryFunction?Ft(t,FV):(e.sentCompleteBoundaryFunction=!0,Ft(t,LV)),o===null)throw Error(Yt(395));return n=ln(n.toString(16)),Ft(t,o),Ft(t,OV),Ft(t,e.segmentPrefix),Ft(t,n),Kn(t,$V)}function CA(e,t,n,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=n.rootSegmentID)===-1)throw Error(Yt(392));return fT(e,t,o)}return fT(e,t,o),e=e.responseState,Ft(t,e.startInlineScript),e.sentCompleteSegmentFunction?Ft(t,zV):(e.sentCompleteSegmentFunction=!0,Ft(t,AV)),Ft(t,e.segmentPrefix),l=ln(l.toString(16)),Ft(t,l),Ft(t,DV),Ft(t,e.placeholderPrefix),Ft(t,l),Kn(t,RV)}function qw(e,t){go=new Uint8Array(512),yo=0;try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Gy(e,t,n),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)Ft(t,o[n]);n<o.length&&Kn(t,o[n])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var y=e.responseState,u=l[h].id;if(Ft(o,y.startInlineScript),y.sentClientRenderFunction?Ft(o,VV):(y.sentClientRenderFunction=!0,Ft(o,BV)),u===null)throw Error(Yt(395));Ft(o,u),Kn(o,NV)}l.splice(0,h);var S=e.completedBoundaries;for(h=0;h<S.length;h++)pT(e,t,S[h]);S.splice(0,h),Gk(t),go=new Uint8Array(512),yo=0;var w=e.partialBoundaries;for(h=0;h<w.length;h++){var C=w[h];e:{l=e,y=t;var A=C.completedSegments;for(u=0;u<A.length;u++)if(!CA(l,y,C,A[u])){u++,A.splice(0,u);var z=!1;break e}A.splice(0,u),z=!0}if(!z){e.destination=null,h++,w.splice(0,h);return}}w.splice(0,h);var G=e.completedBoundaries;for(h=0;h<G.length;h++)pT(e,t,G[h]);G.splice(0,h)}finally{Gk(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function mT(e){try{var t=e.abortableTasks;t.forEach(EA,e),t.clear(),e.destination!==null&&qw(e,e.destination)}catch(n){Df(e,n),hy(e,n)}}$w.renderToReadableStream=function(e,t){return new Promise(function(n,o){var l,h,y=new Promise(function(C,A){h=C,l=A}),u=nN(e,G8(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),W8(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,h,function(){var C=new ReadableStream({type:"bytes",pull:function(A){if(u.status===1)u.status=2,oA(A,u.fatalError);else if(u.status!==2&&u.destination===null){u.destination=A;try{qw(u,A)}catch(z){Df(u,z),hy(u,z)}}},cancel:function(){mT(u)}});C.allReady=y,n(C)},function(C){y.catch(function(){}),o(C)},l);if(t&&t.signal){var S=t.signal,w=function(){mT(u),S.removeEventListener("abort",w)};S.addEventListener("abort",w)}TA(u)})};$w.version="18.1.0";var gh,PA;gh=mh,PA=$w;gh.version;var iN=gh.renderToString;gh.renderToStaticMarkup;gh.renderToNodeStream;gh.renderToStaticNodeStream;PA.renderToReadableStream;var IA={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(uf,function(){var n,o,l;function h(u,S){if(!n)n=S;else if(!o)o=S;else{var w="var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk);",C={};n(C),l=S(C),typeof window!="undefined"&&(l.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}h(["exports"],function(u){function S(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var w=C;function C(a,r){this.x=a,this.y=r}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,s=a.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),s=Math.sin(a),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(a,r){var s=Math.cos(a),d=Math.sin(a),m=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(a){return a instanceof C?a:Array.isArray(a)?new C(a[0],a[1]):a};var A=S(w),z=G;function G(a,r,s,d){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=s,this.p2y=d}G.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,d=0;d<8;d++){var m=this.sampleCurveX(s)-a;if(Math.abs(m)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var v=0,b=1;for(s=a,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-a)<r));d++)a>m?v=s:b=s,s=.5*(b-v)+v;return s},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var Z=S(z);function H(a,r,s,d){const m=new Z(a,r,s,d);return function(_){return m.solve(_)}}const fe=H(.25,.1,.25,1);function B(a,r,s){return Math.min(s,Math.max(r,a))}function V(a,r,s){const d=s-r,m=((a-r)%d+d)%d+r;return m===r?s:m}function K(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}let le=1;function ue(a,r){a.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function ge(a,r,s){const d={};for(const m in a)d[m]=r.call(s||this,a[m],m,a);return d}function ye(a,r,s){const d={};for(const m in a)r.call(s||this,a[m],m,a)&&(d[m]=a[m]);return d}function Ee(a){return Array.isArray(a)?a.map(Ee):typeof a=="object"&&a?ge(a,Ee):a}const je={};function ke(a){je[a]||(typeof console!="undefined"&&console.warn(a),je[a]=!0)}function Ve(a,r,s){return(s.y-a.y)*(r.x-a.x)>(r.y-a.y)*(s.x-a.x)}function $t(a){let r=0;for(let s,d,m=0,_=a.length,v=_-1;m<_;v=m++)s=a[m],d=a[v],r+=(d.x-s.x)*(s.y+d.y);return r}function Tt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}let Ct=null;function Nt(a){if(Ct==null){const r=a.navigator?a.navigator.userAgent:null;Ct=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ct}function xn(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}const dn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ne,at;const bt={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const r=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(a,r=0){return this.getImageCanvasContext(a).getImageData(-r,-r,a.width+2*r,a.height+2*r)},getImageCanvasContext(a){const r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=a.width,r.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(Ne||(Ne=document.createElement("a")),Ne.href=a,Ne.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(at==null&&(at=matchMedia("(prefers-reduced-motion: reduce)")),at.matches)}},Bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class lt extends Error{constructor(r,s,d,m){super(`AJAXError: ${s} (${r}): ${d}`),this.status=r,this.statusText=s,this.url=d,this.body=m}}const zn=Tt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Jt=a=>Bt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function Jn(a,r){const s=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:zn(),signal:s.signal});let m=!1,_=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),_||fetch(d).then(v=>v.ok?(b=>{(a.type==="arrayBuffer"||a.type==="image"?b.arrayBuffer():a.type==="json"?b.json():b.text()).then(k=>{_||(m=!0,r(null,k,b.headers.get("Cache-Control"),b.headers.get("Expires")))}).catch(k=>{_||r(new Error(k.message))})})(v):v.blob().then(b=>r(new lt(v.status,v.statusText,a.url,b)))).catch(v=>{v.code!==20&&r(new Error(v.message))}),{cancel:()=>{_=!0,m||s.abort()}}}const Ot=function(a,r){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Tt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r);if(!Tt())return(Jt(a.url)||Jn)(a,r)}if(!(/^file:/.test(s=a.url)||/^file:/.test(zn())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Jn(a,r);if(Tt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var s;return function(d,m){const _=new XMLHttpRequest;_.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(_.responseType="arraybuffer");for(const v in d.headers)_.setRequestHeader(v,d.headers[v]);return d.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=d.credentials==="include",_.onerror=()=>{m(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let v=_.response;if(d.type==="json")try{v=JSON.parse(_.response)}catch(b){return m(b)}m(null,v,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const v=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});m(new lt(_.status,_.statusText,d.url,v))}},_.send(d.body),{cancel:()=>_.abort()}}(a,r)},Wn=function(a,r){return Ot(K(a,{type:"arrayBuffer"}),r)};function wi(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const r=new URL(a),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function Ir(a,r,s){s[a]&&s[a].indexOf(r)!==-1||(s[a]=s[a]||[],s[a].push(r))}function wr(a,r,s){if(s&&s[a]){const d=s[a].indexOf(r);d!==-1&&s[a].splice(d,1)}}class Gt{constructor(r,s={}){K(this,s),this.type=r}}class on extends Gt{constructor(r,s={}){super("error",K({error:r},s))}}class pr{on(r,s){return this._listeners=this._listeners||{},Ir(r,s,this._listeners),this}off(r,s){return wr(r,s,this._listeners),wr(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Ir(r,s,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,s){typeof r=="string"&&(r=new Gt(r,s||{}));const d=r.type;if(this.listens(d)){r.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of m)b.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of _)wr(d,b,this._oneTimeListeners),b.call(this,r);const v=this._eventedParent;v&&(K(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(r))}else r instanceof on&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Fr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ji(a,r){const s={};for(const d in a)d!=="ref"&&(s[d]=a[d]);return Fr.forEach(d=>{d in r&&(s[d]=r[d])}),s}function Ht(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let s=0;s<a.length;s++)if(!Ht(a[s],r[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const s in a)if(!Ht(a[s],r[s]))return!1;return!0}return a===r}const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function lr(a,r,s){s.push({command:qt.addSource,args:[a,r[a]]})}function ai(a,r,s){r.push({command:qt.removeSource,args:[a]}),s[a]=!0}function Or(a,r,s,d){ai(a,s,d),lr(a,r,s)}function ga(a,r,s){let d;for(d in a[s])if(Object.prototype.hasOwnProperty.call(a[s],d)&&d!=="data"&&!Ht(a[s][d],r[s][d]))return!1;for(d in r[s])if(Object.prototype.hasOwnProperty.call(r[s],d)&&d!=="data"&&!Ht(a[s][d],r[s][d]))return!1;return!0}function Dn(a,r,s,d,m,_){let v;for(v in r=r||{},a=a||{})Object.prototype.hasOwnProperty.call(a,v)&&(Ht(a[v],r[v])||s.push({command:_,args:[d,v,r[v],m]}));for(v in r)Object.prototype.hasOwnProperty.call(r,v)&&!Object.prototype.hasOwnProperty.call(a,v)&&(Ht(a[v],r[v])||s.push({command:_,args:[d,v,r[v],m]}))}function Qe(a){return a.id}function St(a,r){return a[r.id]=r,a}class Le{constructor(r,s,d,m){this.message=(r?`${r}: `:"")+d,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Kt(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}class Mt extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class mr{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[d,m]of s)this.bindings[d]=m}concat(r){return new mr(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const gr={kind:"null"},We={kind:"number"},At={kind:"string"},It={kind:"boolean"},Nn={kind:"color"},Zr={kind:"object"},ft={kind:"value"},bi={kind:"collator"},Gi={kind:"formatted"},ya={kind:"padding"},_a={kind:"resolvedImage"};function Mr(a,r){return{kind:"array",itemType:a,N:r}}function J(a){if(a.kind==="array"){const r=J(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const O=[gr,We,At,It,Nn,Gi,Zr,Mr(ft),ya,_a];function N(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!N(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const s of O)if(!N(s,r))return null}}return`Expected ${J(a)} but found ${J(r)} instead.`}function X(a,r){return r.some(s=>s.kind===a.kind)}function ie(a,r){return r.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function se(a,r){return a.kind==="array"&&r.kind==="array"?a.itemType.kind===r.itemType.kind&&typeof a.N=="number":a.kind===r.kind}const me=.96422,pe=.82521,ae=4/29,_e=6/29,Ae=3*_e*_e,Ie=Math.PI/180,ze=180/Math.PI;function yt(a){return(a%=360)<0&&(a+=360),a}function zt([a,r,s,d]){let m,_;const v=_t((.2225045*(a=ut(a))+.7168786*(r=ut(r))+.0606169*(s=ut(s)))/1);a===r&&r===s?m=_=v:(m=_t((.4360747*a+.3850649*r+.1430804*s)/me),_=_t((.0139322*a+.0971045*r+.7141733*s)/pe));const b=116*v-16;return[b<0?0:b,500*(m-v),200*(v-_),d]}function ut(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function _t(a){return a>.008856451679035631?Math.pow(a,1/3):a/Ae+ae}function Rt([a,r,s,d]){let m=(a+16)/116,_=isNaN(r)?m:m+r/500,v=isNaN(s)?m:m-s/200;return m=1*Vt(m),_=me*Vt(_),v=pe*Vt(v),[Xt(3.1338561*_-1.6168667*m-.4906146*v),Xt(-.9787684*_+1.9161415*m+.033454*v),Xt(.0719453*_-.2289914*m+1.4052427*v),d]}function Xt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Vt(a){return a>_e?a*a*a:Ae*(a-ae)}function un(a){return parseInt(a.padEnd(2,a),16)/255}function fn(a,r){return Pn(r?a/100:a,0,1)}function Pn(a,r,s){return Math.min(Math.max(r,a),s)}function Rn(a){return!a.some(Number.isNaN)}const Qn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Qt{constructor(r,s,d,m=1,_=!0){this.r=r,this.g=s,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,d,m]))}static parse(r){if(r instanceof Qt)return r;if(typeof r!="string")return;const s=function(d){if((d=d.toLowerCase())==="transparent")return[0,0,0,0];const m=Qn[d];if(m){const[b,k,I]=m;return[b/255,k/255,I/255,1]}if(/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const b=d.length<6?1:2;let k=1;return[un(d.slice(k,k+=b)),un(d.slice(k,k+=b)),un(d.slice(k,k+=b)),un(d.slice(k,k+b)||"ff")]}const _=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,k,I,D,F,$,U,q,ne,Q,de,ve]=_,ce=[D||" ",U||" ",Q].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const xe=[I,$,ne].join(""),Se=xe==="%%%"?100:xe===""?255:0;if(Se){const Me=[Pn(+k/Se,0,1),Pn(+F/Se,0,1),Pn(+q/Se,0,1),de?fn(+de,ve):1];if(Rn(Me))return Me}}return}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[b,k,I,D,F,$,U,q,ne]=v,Q=[I||" ",F||" ",U].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const de=[+k,Pn(+D,0,100),Pn(+$,0,100),q?fn(+q,ne):1];if(Rn(de))return function([ve,ce,xe,Se]){function Me(rt){const st=(rt+ve/30)%12,Je=ce*Math.min(xe,1-xe);return xe-Je*Math.max(-1,Math.min(st-3,9-st,1))}return ve=yt(ve),ce/=100,xe/=100,[Me(0),Me(8),Me(4),Se]}(de)}}}(r);return s?new Qt(...s,!1):void 0}get rgb(){const{r,g:s,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[r/_,s/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,d,m,_]=zt(r),v=Math.sqrt(d*d+m*m);return[Math.round(1e4*v)?yt(Math.atan2(m,d)*ze):NaN,v,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",zt(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,d,m]=this.rgb;return`rgba(${[r,s,d].map(_=>Math.round(255*_)).join(",")},${m})`}}Qt.black=new Qt(0,0,0,1),Qt.white=new Qt(1,1,1,1),Qt.transparent=new Qt(0,0,0,0),Qt.red=new Qt(1,0,0,1);class xh{constructor(r,s,d){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class wh{constructor(r,s,d,m,_){this.text=r,this.image=s,this.scale=d,this.fontStack=m,this.textColor=_}}class Si{constructor(r){this.sections=r}static fromString(r){return new Si([new wh(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Si?r:Si.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class si{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof si)return r;if(typeof r=="number")return new si([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new si(r)}}toString(){return JSON.stringify(this.values)}}class $r{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new $r({name:r,available:!1}):null}}function ep(a,r,s,d){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,r,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,r,s,d]:[a,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fu(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Qt||a instanceof xh||a instanceof Si||a instanceof si||a instanceof $r)return!0;if(Array.isArray(a)){for(const r of a)if(!fu(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!fu(a[r]))return!1;return!0}return!1}function Ln(a){if(a===null)return gr;if(typeof a=="string")return At;if(typeof a=="boolean")return It;if(typeof a=="number")return We;if(a instanceof Qt)return Nn;if(a instanceof xh)return bi;if(a instanceof Si)return Gi;if(a instanceof si)return ya;if(a instanceof $r)return _a;if(Array.isArray(a)){const r=a.length;let s;for(const d of a){const m=Ln(d);if(s){if(s===m)continue;s=ft;break}s=m}return Mr(s||ft,r)}return Zr}function dl(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof Qt||a instanceof Si||a instanceof si||a instanceof $r?a.toString():JSON.stringify(a)}class Oa{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!fu(r[1]))return s.error("invalid value");const d=r[1];let m=Ln(d);const _=s.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Oa(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class br{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const fl={string:At,number:We,boolean:It,object:Zr};class li{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d,m=1;const _=r[0];if(_==="array"){let b,k;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in fl)||I==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=fl[I],m++}else b=ft;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);k=r[2],m++}d=Mr(b,k)}else{if(!fl[_])throw new Error(`Types doesn't contain name = ${_}`);d=fl[_]}const v=[];for(;m<r.length;m++){const b=s.parse(r[m],m,ft);if(!b)return null;v.push(b)}return new li(d,v)}evaluate(r){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(r);if(!N(this.type,Ln(d)))return d;if(s===this.args.length-1)throw new br(`Expected value to be of type ${J(this.type)}, but found ${J(Ln(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const tp={"to-boolean":It,"to-color":Nn,"to-number":We,"to-string":At};class va{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[0];if(!tp[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=tp[d],_=[];for(let v=1;v<r.length;v++){const b=s.parse(r[v],v,ft);if(!b)return null;_.push(b)}return new va(m,_)}evaluate(r){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(r));if(this.type.kind==="color"){let s,d;for(const m of this.args){if(s=m.evaluate(r),d=null,s instanceof Qt)return s;if(typeof s=="string"){const _=r.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ep(s[0],s[1],s[2],s[3]),!d))return new Qt(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new br(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const d of this.args){s=d.evaluate(r);const m=si.parse(s);if(m)return m}throw new br(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const d of this.args){if(s=d.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new br(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Si.fromString(dl(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?$r.fromString(dl(this.args[0].evaluate(r))):dl(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const x0=["Unknown","Point","LineString","Polygon"];class io{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?x0[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Qt.parse(r)),s}}class _s{constructor(r,s,d=[],m,_=new mr,v=[]){this.registry=r,this.path=d,this.key=d.map(b=>`[${b}]`).join(""),this.scope=_,this.errors=v,this.expectedType=m,this._isConstant=s}parse(r,s,d,m,_={}){return s?this.concat(s,d,m)._parse(r,_):this._parse(r,_)}_parse(r,s){function d(m,_,v){return v==="assert"?new li(_,[m]):v==="coerce"?new va(_,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let v=_.parse(r,this);if(!v)return null;if(this.expectedType){const b=this.expectedType,k=v.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||k.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(b.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array"){if(this.checkSubtype(b,k))return null}else v=d(v,b,s.typeAnnotation||"coerce");else v=d(v,b,s.typeAnnotation||"coerce");else v=d(v,b,s.typeAnnotation||"assert")}if(!(v instanceof Oa)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const b=new io;try{v=new Oa(v.type,v.evaluate(b))}catch(k){return this.error(k.message),null}}return v}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,d){const m=typeof r=="number"?this.path.concat(r):this.path,_=d?this.scope.concat(d):this.scope;return new _s(this.registry,this._isConstant,m,s||null,_,this.errors)}error(r,...s){const d=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Mt(d,r))}checkSubtype(r,s){const d=N(r,s);return d&&this.error(d),d}}class vs{constructor(r,s,d){this.type=bi,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const m=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,It);if(!m)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,It);if(!_)return null;let v=null;return d.locale&&(v=s.parse(d.locale,1,At),!v)?null:new vs(m,_,v)}evaluate(r){return new xh(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Wi=8192;function pn(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function pu(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function bh(a,r){const s=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*Wi),Math.round(d*m*Wi)]}function w0(a,r,s){const d=a[0]-r[0],m=a[1]-r[1],_=a[0]-s[0],v=a[1]-s[1];return d*v-_*m==0&&d*_<=0&&m*v<=0}function mu(a,r){let s=!1;for(let v=0,b=r.length;v<b;v++){const k=r[v];for(let I=0,D=k.length;I<D-1;I++){if(w0(a,k[I],k[I+1]))return!1;(m=k[I])[1]>(d=a)[1]!=(_=k[I+1])[1]>d[1]&&d[0]<(_[0]-m[0])*(d[1]-m[1])/(_[1]-m[1])+m[0]&&(s=!s)}}var d,m,_;return s}function np(a,r){for(let s=0;s<r.length;s++)if(mu(a,r[s]))return!0;return!1}function rp(a,r,s,d){const m=d[0]-s[0],_=d[1]-s[1],v=(a[0]-s[0])*_-m*(a[1]-s[1]),b=(r[0]-s[0])*_-m*(r[1]-s[1]);return v>0&&b<0||v<0&&b>0}function ip(a,r,s){for(const I of s)for(let D=0;D<I.length-1;++D)if((b=[(v=I[D+1])[0]-(_=I[D])[0],v[1]-_[1]])[0]*(k=[(m=r)[0]-(d=a)[0],m[1]-d[1]])[1]-b[1]*k[0]!=0&&rp(d,m,_,v)&&rp(_,v,d,m))return!0;var d,m,_,v,b,k;return!1}function Sh(a,r){for(let s=0;s<a.length;++s)if(!mu(a[s],r))return!1;for(let s=0;s<a.length-1;++s)if(ip(a[s],a[s+1],r))return!1;return!0}function b0(a,r){for(let s=0;s<r.length;s++)if(Sh(a,r[s]))return!0;return!1}function Eh(a,r,s){const d=[];for(let m=0;m<a.length;m++){const _=[];for(let v=0;v<a[m].length;v++){const b=bh(a[m][v],s);pn(r,b),_.push(b)}d.push(_)}return d}function op(a,r,s){const d=[];for(let m=0;m<a.length;m++){const _=Eh(a[m],r,s);d.push(_)}return d}function ap(a,r,s,d){if(a[0]<s[0]||a[0]>s[2]){const m=.5*d;let _=a[0]-s[0]>m?-d:s[0]-a[0]>m?d:0;_===0&&(_=a[0]-s[2]>m?-d:s[2]-a[0]>m?d:0),a[0]+=_}pn(r,a)}function kh(a,r,s,d){const m=Math.pow(2,d.z)*Wi,_=[d.x*Wi,d.y*Wi],v=[];for(const b of a)for(const k of b){const I=[k.x+_[0],k.y+_[1]];ap(I,r,s,m),v.push(I)}return v}function Th(a,r,s,d){const m=Math.pow(2,d.z)*Wi,_=[d.x*Wi,d.y*Wi],v=[];for(const k of a){const I=[];for(const D of k){const F=[D.x+_[0],D.y+_[1]];pn(r,F),I.push(F)}v.push(I)}if(r[2]-r[0]<=m/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const k of v)for(const I of k)ap(I,r,s,m)}var b;return v}class $a{constructor(r,s){this.type=It,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(fu(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let m=0;m<d.features.length;++m){const _=d.features[m].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new $a(d,d.features[m].geometry)}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new $a(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new $a(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(d.type==="Polygon"){const b=Eh(d.coordinates,_,v),k=kh(s.geometry(),m,_,v);if(!pu(m,_))return!1;for(const I of k)if(!mu(I,b))return!1}if(d.type==="MultiPolygon"){const b=op(d.coordinates,_,v),k=kh(s.geometry(),m,_,v);if(!pu(m,_))return!1;for(const I of k)if(!np(I,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(d.type==="Polygon"){const b=Eh(d.coordinates,_,v),k=Th(s.geometry(),m,_,v);if(!pu(m,_))return!1;for(const I of k)if(!Sh(I,b))return!1}if(d.type==="MultiPolygon"){const b=op(d.coordinates,_,v),k=Th(s.geometry(),m,_,v);if(!pu(m,_))return!1;for(const I of k)if(!b0(I,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class gu{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=r[1];return s.scope.has(d)?new gu(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class ui{constructor(r,s,d,m){this.name=r,this.type=s,this._evaluate=d,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const d=r[0],m=ui.definitions[d];if(!m)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,v=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=v.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let k=null;for(const[I,D]of b){k=new _s(s.registry,yu,s.path,null,s.scope);const F=[];let $=!1;for(let U=1;U<r.length;U++){const q=r[U],ne=Array.isArray(I)?I[U-1]:I.type,Q=k.parse(q,1+F.length,ne);if(!Q){$=!0;break}F.push(Q)}if(!$)if(Array.isArray(I)&&I.length!==F.length)k.error(`Expected ${I.length} arguments, but found ${F.length} instead.`);else{for(let U=0;U<F.length;U++){const q=Array.isArray(I)?I[U]:I.type,ne=F[U];k.concat(U+1).checkSubtype(q,ne.type)}if(k.errors.length===0)return new ui(d,_,D,F)}}if(b.length===1)s.errors.push(...k.errors);else{const I=(b.length?b:v).map(([F])=>{return $=F,Array.isArray($)?`(${$.map(J).join(", ")})`:`(${J($.type)}...)`;var $}).join(" | "),D=[];for(let F=1;F<r.length;F++){const $=s.parse(r[F],1+D.length);if(!$)return null;D.push(J($.type))}s.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(r,s){ui.definitions=s;for(const d in s)r[d]=ui}}function yu(a){if(a instanceof gu)return yu(a.boundExpression);if(a instanceof ui&&a.name==="error"||a instanceof vs||a instanceof $a)return!1;const r=a instanceof va||a instanceof li;let s=!0;return a.eachChild(d=>{s=r?s&&yu(d):s&&d instanceof Oa}),!!s&&_u(a)&&ml(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _u(a){if(a instanceof ui&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof $a)return!1;let r=!0;return a.eachChild(s=>{r&&!_u(s)&&(r=!1)}),r}function pl(a){if(a instanceof ui&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(s=>{r&&!pl(s)&&(r=!1)}),r}function ml(a,r){if(a instanceof ui&&r.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(d=>{s&&!ml(d,r)&&(s=!1)}),s}function gl(a,r){const s=a.length-1;let d,m,_=0,v=s,b=0;for(;_<=v;)if(b=Math.floor((_+v)/2),d=a[b],m=a[b+1],d<=r){if(b===s||r<m)return b;_=b+1}else{if(!(d>r))throw new br("Input is not a number.");v=b-1}return 0}class yl{constructor(r,s,d){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(r[1],1,We);if(!d)return null;const m=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let v=1;v<r.length;v+=2){const b=v===1?-1/0:r[v],k=r[v+1],I=v,D=v+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(m.length&&m[m.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const F=s.parse(k,D,_);if(!F)return null;_=_||F.type,m.push([b,F])}return new yl(_,d,m)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return d[0].evaluate(r);const _=s.length;return m>=s[_-1]?d[_-1].evaluate(r):d[gl(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function _l(a,r,s){return a+s*(r-a)}function vl(a,r,s){return a.map((d,m)=>_l(d,r[m],s))}const ci={number:_l,color:function(a,r,s,d="rgb"){switch(d){case"rgb":{const[m,_,v,b]=vl(a.rgb,r.rgb,s);return new Qt(m,_,v,b,!1)}case"hcl":{const[m,_,v,b]=a.hcl,[k,I,D,F]=r.hcl;let $,U;if(isNaN(m)||isNaN(k))isNaN(m)?isNaN(k)?$=NaN:($=k,v!==1&&v!==0||(U=I)):($=m,D!==1&&D!==0||(U=_));else{let ve=k-m;k>m&&ve>180?ve-=360:k<m&&m-k>180&&(ve+=360),$=m+s*ve}const[q,ne,Q,de]=function([ve,ce,xe,Se]){return ve=isNaN(ve)?0:ve*Ie,Rt([xe,Math.cos(ve)*ce,Math.sin(ve)*ce,Se])}([$,U!=null?U:_l(_,I,s),_l(v,D,s),_l(b,F,s)]);return new Qt(q,ne,Q,de,!1)}case"lab":{const[m,_,v,b]=Rt(vl(a.lab,r.lab,s));return new Qt(m,_,v,b,!1)}}},array:vl,padding:function(a,r,s){return new si(vl(a.values,r.values,s))}};class Ei{constructor(r,s,d,m,_){this.type=r,this.operator=s,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[v,b]of _)this.labels.push(v),this.outputs.push(b)}static interpolationFactor(r,s,d,m){let _=0;if(r.name==="exponential")_=Ch(s,r.base,d,m);else if(r.name==="linear")_=Ch(s,1,d,m);else if(r.name==="cubic-bezier"){const v=r.controlPoints;_=new Z(v[0],v[1],v[2],v[3]).solve(Ch(s,1,d,m))}return _}static parse(r,s){let[d,m,_,...v]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const I=m[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const I=m.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,We),!_)return null;const b=[];let k=null;d==="interpolate-hcl"||d==="interpolate-lab"?k=Nn:s.expectedType&&s.expectedType.kind!=="value"&&(k=s.expectedType);for(let I=0;I<v.length;I+=2){const D=v[I],F=v[I+1],$=I+3,U=I+4;if(typeof D!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(b.length&&b[b.length-1][0]>=D)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const q=s.parse(F,U,k);if(!q)return null;k=k||q.type,b.push([D,q])}return se(k,We)||se(k,Nn)||se(k,ya)||se(k,Mr(We))?new Ei(k,d,m,_,b):s.error(`Type ${J(k)} is not interpolatable.`)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return d[0].evaluate(r);const _=s.length;if(m>=s[_-1])return d[_-1].evaluate(r);const v=gl(s,m),b=Ei.interpolationFactor(this.interpolation,m,s[v],s[v+1]),k=d[v].evaluate(r),I=d[v+1].evaluate(r);switch(this.operator){case"interpolate":return ci[this.type.kind](k,I,b);case"interpolate-hcl":return ci.color(k,I,b,"hcl");case"interpolate-lab":return ci.color(k,I,b,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ch(a,r,s,d){const m=d-s,_=a-s;return m===0?0:r===1?_/m:(Math.pow(r,_)-1)/(Math.pow(r,m)-1)}class vu{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let d=null;const m=s.expectedType;m&&m.kind!=="value"&&(d=m);const _=[];for(const b of r.slice(1)){const k=s.parse(b,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!k)return null;d=d||k.type,_.push(k)}if(!d)throw new Error("No output type");const v=m&&_.some(b=>N(m,b.type));return new vu(v?ft:d,_)}evaluate(r){let s,d=null,m=0;for(const _ of this.args)if(m++,d=_.evaluate(r),d&&d instanceof $r&&!d.available&&(s||(s=d.name),d=null,m===this.args.length&&(d=s)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class xu{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let _=1;_<r.length-1;_+=2){const v=r[_];if(typeof v!="string")return s.error(`Expected string, but found ${typeof v} instead.`,_);if(/[^a-zA-Z0-9_]/.test(v))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const b=s.parse(r[_+1],_+1);if(!b)return null;d.push([v,b])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,d);return m?new xu(d,m):null}outputDefined(){return this.result.outputDefined()}}class Ph{constructor(r,s,d){this.type=r,this.index=s,this.input=d}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,We),m=s.parse(r[2],2,Mr(s.expectedType||ft));return d&&m?new Ph(m.type.itemType,d,m):null}evaluate(r){const s=this.index.evaluate(r),d=this.input.evaluate(r);if(s<0)throw new br(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new br(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new br(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Ih{constructor(r,s){this.type=It,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,ft),m=s.parse(r[2],2,ft);return d&&m?X(d.type,[It,At,We,gr,ft])?new Ih(d,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${J(d.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!ie(s,["boolean","string","number","null"]))throw new br(`Expected first argument to be of type boolean, string, number or null, but found ${J(Ln(s))} instead.`);if(!ie(d,["string","array"]))throw new br(`Expected second argument to be of type array or string, but found ${J(Ln(d))} instead.`);return d.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class wu{constructor(r,s,d){this.type=We,this.needle=r,this.haystack=s,this.fromIndex=d}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,ft),m=s.parse(r[2],2,ft);if(!d||!m)return null;if(!X(d.type,[It,At,We,gr,ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${J(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,We);return _?new wu(d,m,_):null}return new wu(d,m)}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!ie(s,["boolean","string","number","null"]))throw new br(`Expected first argument to be of type boolean, string, number or null, but found ${J(Ln(s))} instead.`);if(!ie(d,["string","array"]))throw new br(`Expected second argument to be of type array or string, but found ${J(Ln(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return d.indexOf(s,m)}return d.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class en{constructor(r,s,d,m,_,v){this.inputType=r,this.type=s,this.input=d,this.cases=m,this.outputs=_,this.otherwise=v}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let d,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const _={},v=[];for(let I=2;I<r.length-1;I+=2){let D=r[I];const F=r[I+1];Array.isArray(D)||(D=[D]);const $=s.concat(I);if(D.length===0)return $.error("Expected at least one branch label.");for(const q of D){if(typeof q!="number"&&typeof q!="string")return $.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return $.error("Numeric branch labels must be integer values.");if(d){if($.checkSubtype(d,Ln(q)))return null}else d=Ln(q);if(_[String(q)]!==void 0)return $.error("Branch labels must be unique.");_[String(q)]=v.length}const U=s.parse(F,I,m);if(!U)return null;m=m||U.type,v.push(U)}const b=s.parse(r[1],1,ft);if(!b)return null;const k=s.parse(r[r.length-1],r.length-1,m);return k?b.type.kind!=="value"&&s.concat(1).checkSubtype(d,b.type)?null:new en(d,m,b,_,v,k):null}evaluate(r){const s=this.input.evaluate(r);return(Ln(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Mh{constructor(r,s,d){this.type=r,this.branches=s,this.otherwise=d}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const m=[];for(let v=1;v<r.length-1;v+=2){const b=s.parse(r[v],v,It);if(!b)return null;const k=s.parse(r[v+1],v+1,d);if(!k)return null;m.push([b,k]),d=d||k.type}const _=s.parse(r[r.length-1],r.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new Mh(d,m,_)}evaluate(r){for(const[s,d]of this.branches)if(s.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,d]of this.branches)r(s),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class bu{constructor(r,s,d,m){this.type=r,this.input=s,this.beginIndex=d,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,ft),m=s.parse(r[2],2,We);if(!d||!m)return null;if(!X(d.type,[Mr(ft),At,ft]))return s.error(`Expected first argument to be of type array or string, but found ${J(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,We);return _?new bu(d.type,d,m,_):null}return new bu(d.type,d,m)}evaluate(r){const s=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!ie(s,["string","array"]))throw new br(`Expected first argument to be of type array or string, but found ${J(Ln(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(d,m)}return s.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function sp(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function lp(a,r,s,d){return d.compare(r,s)===0}function xs(a,r,s){const d=a!=="=="&&a!=="!=";return class MA{constructor(_,v,b){this.type=It,this.lhs=_,this.rhs=v,this.collator=b,this.hasUntypedArgument=_.type.kind==="value"||v.type.kind==="value"}static parse(_,v){if(_.length!==3&&_.length!==4)return v.error("Expected two or three arguments.");const b=_[0];let k=v.parse(_[1],1,ft);if(!k)return null;if(!sp(b,k.type))return v.concat(1).error(`"${b}" comparisons are not supported for type '${J(k.type)}'.`);let I=v.parse(_[2],2,ft);if(!I)return null;if(!sp(b,I.type))return v.concat(2).error(`"${b}" comparisons are not supported for type '${J(I.type)}'.`);if(k.type.kind!==I.type.kind&&k.type.kind!=="value"&&I.type.kind!=="value")return v.error(`Cannot compare types '${J(k.type)}' and '${J(I.type)}'.`);d&&(k.type.kind==="value"&&I.type.kind!=="value"?k=new li(I.type,[k]):k.type.kind!=="value"&&I.type.kind==="value"&&(I=new li(k.type,[I])));let D=null;if(_.length===4){if(k.type.kind!=="string"&&I.type.kind!=="string"&&k.type.kind!=="value"&&I.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(D=v.parse(_[3],3,bi),!D)return null}return new MA(k,I,D)}evaluate(_){const v=this.lhs.evaluate(_),b=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const k=Ln(v),I=Ln(b);if(k.kind!==I.kind||k.kind!=="string"&&k.kind!=="number")throw new br(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${k.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const k=Ln(v),I=Ln(b);if(k.kind!=="string"||I.kind!=="string")return r(_,v,b)}return this.collator?s(_,v,b,this.collator.evaluate(_)):r(_,v,b)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const S0=xs("==",function(a,r,s){return r===s},lp),E0=xs("!=",function(a,r,s){return r!==s},function(a,r,s,d){return!lp(0,r,s,d)}),k0=xs("<",function(a,r,s){return r<s},function(a,r,s,d){return d.compare(r,s)<0}),T0=xs(">",function(a,r,s){return r>s},function(a,r,s,d){return d.compare(r,s)>0}),C0=xs("<=",function(a,r,s){return r<=s},function(a,r,s,d){return d.compare(r,s)<=0}),P0=xs(">=",function(a,r,s){return r>=s},function(a,r,s,d){return d.compare(r,s)>=0});class Ah{constructor(r,s,d,m,_){this.type=At,this.number=r,this.locale=s,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const d=s.parse(r[1],1,We);if(!d)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=s.parse(m.locale,1,At),!_))return null;let v=null;if(m.currency&&(v=s.parse(m.currency,1,At),!v))return null;let b=null;if(m["min-fraction-digits"]&&(b=s.parse(m["min-fraction-digits"],1,We),!b))return null;let k=null;return m["max-fraction-digits"]&&(k=s.parse(m["max-fraction-digits"],1,We),!k)?null:new Ah(d,_,v,b,k)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Su{constructor(r){this.type=Gi,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const m=[];let _=!1;for(let v=1;v<=r.length-1;++v){const b=r[v];if(_&&typeof b=="object"&&!Array.isArray(b)){_=!1;let k=null;if(b["font-scale"]&&(k=s.parse(b["font-scale"],1,We),!k))return null;let I=null;if(b["text-font"]&&(I=s.parse(b["text-font"],1,Mr(At)),!I))return null;let D=null;if(b["text-color"]&&(D=s.parse(b["text-color"],1,Nn),!D))return null;const F=m[m.length-1];F.scale=k,F.font=I,F.textColor=D}else{const k=s.parse(r[v],1,ft);if(!k)return null;const I=k.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:k,scale:null,font:null,textColor:null})}}return new Su(m)}evaluate(r){return new Si(this.sections.map(s=>{const d=s.content.evaluate(r);return Ln(d)===_a?new wh("",d,null,null,null):new wh(dl(d),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class zh{constructor(r){this.type=_a,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const d=s.parse(r[1],1,At);return d?new zh(d):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),d=$r.fromString(s);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(s)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class Dh{constructor(r){this.type=We,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=s.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${J(d.type)} instead.`):new Dh(d):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new br(`Expected value to be of type string or array, but found ${J(Ln(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const ws={"==":S0,"!=":E0,">":T0,"<":k0,">=":P0,"<=":C0,array:li,at:Ph,boolean:li,case:Mh,coalesce:vu,collator:vs,format:Su,image:zh,in:Ih,"index-of":wu,interpolate:Ei,"interpolate-hcl":Ei,"interpolate-lab":Ei,length:Dh,let:xu,literal:Oa,match:en,number:li,"number-format":Ah,object:li,slice:bu,step:yl,string:li,"to-boolean":va,"to-color":va,"to-number":va,"to-string":va,var:gu,within:$a};function up(a,[r,s,d,m]){r=r.evaluate(a),s=s.evaluate(a),d=d.evaluate(a);const _=m?m.evaluate(a):1,v=ep(r,s,d,_);if(v)throw new br(v);return new Qt(r/255,s/255,d/255,_,!1)}function cp(a,r){return a in r}function Rh(a,r){const s=r[a];return s===void 0?null:s}function Ba(a){return{type:a}}function hp(a){return{result:"success",value:a}}function bs(a){return{result:"error",value:a}}function Ss(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function dp(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Lh(a){return!!a.expression&&a.expression.interpolated}function mn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Eu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function I0(a){return a}function fp(a,r){const s=r.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),_=a.type||(Lh(r)?"exponential":"interval");if(s||r.type==="padding"){const D=s?Qt.parse:si.parse;(a=Kt({},a)).stops&&(a.stops=a.stops.map(F=>[F[0],D(F[1])])),a.default=D(a.default?a.default:r.default)}if(a.colorSpace&&(v=a.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var v;let b,k,I;if(_==="exponential")b=pp;else if(_==="interval")b=Fh;else if(_==="categorical"){b=M0,k=Object.create(null);for(const D of a.stops)k[D[0]]=D[1];I=typeof a.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);b=A0}if(d){const D={},F=[];for(let q=0;q<a.stops.length;q++){const ne=a.stops[q],Q=ne[0].zoom;D[Q]===void 0&&(D[Q]={zoom:Q,type:a.type,property:a.property,default:a.default,stops:[]},F.push(Q)),D[Q].stops.push([ne[0].value,ne[1]])}const $=[];for(const q of F)$.push([D[q].zoom,fp(D[q],r)]);const U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Ei.interpolationFactor.bind(void 0,U),zoomStops:$.map(q=>q[0]),evaluate:({zoom:q},ne)=>pp({stops:$,base:a.base},r,q).evaluate(q,ne)}}if(m){const D=_==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Ei.interpolationFactor.bind(void 0,D),zoomStops:a.stops.map(F=>F[0]),evaluate:({zoom:F})=>b(a,r,F,k,I)}}return{kind:"source",evaluate(D,F){const $=F&&F.properties?F.properties[a.property]:void 0;return $===void 0?xl(a.default,r.default):b(a,r,$,k,I)}}}function xl(a,r,s){return a!==void 0?a:r!==void 0?r:s!==void 0?s:void 0}function M0(a,r,s,d,m){return xl(typeof s===m?d[s]:void 0,a.default,r.default)}function Fh(a,r,s){if(mn(s)!=="number")return xl(a.default,r.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const m=gl(a.stops.map(_=>_[0]),s);return a.stops[m][1]}function pp(a,r,s){const d=a.base!==void 0?a.base:1;if(mn(s)!=="number")return xl(a.default,r.default);const m=a.stops.length;if(m===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[m-1][0])return a.stops[m-1][1];const _=gl(a.stops.map(D=>D[0]),s),v=function(D,F,$,U){const q=U-$,ne=D-$;return q===0?0:F===1?ne/q:(Math.pow(F,ne)-1)/(Math.pow(F,q)-1)}(s,d,a.stops[_][0],a.stops[_+1][0]),b=a.stops[_][1],k=a.stops[_+1][1],I=ci[r.type]||I0;return typeof b.evaluate=="function"?{evaluate(...D){const F=b.evaluate.apply(void 0,D),$=k.evaluate.apply(void 0,D);if(F!==void 0&&$!==void 0)return I(F,$,v,a.colorSpace)}}:I(b,k,v,a.colorSpace)}function A0(a,r,s){switch(r.type){case"color":s=Qt.parse(s);break;case"formatted":s=Si.fromString(s.toString());break;case"resolvedImage":s=$r.fromString(s.toString());break;case"padding":s=si.parse(s);break;default:mn(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return xl(s,a.default,r.default)}ui.register(ws,{error:[{kind:"error"},[At],(a,[r])=>{throw new br(r.evaluate(a))}],typeof:[At,[ft],(a,[r])=>J(Ln(r.evaluate(a)))],"to-rgba":[Mr(We,4),[Nn],(a,[r])=>{const[s,d,m,_]=r.evaluate(a).rgb;return[255*s,255*d,255*m,_]}],rgb:[Nn,[We,We,We],up],rgba:[Nn,[We,We,We,We],up],has:{type:It,overloads:[[[At],(a,[r])=>cp(r.evaluate(a),a.properties())],[[At,Zr],(a,[r,s])=>cp(r.evaluate(a),s.evaluate(a))]]},get:{type:ft,overloads:[[[At],(a,[r])=>Rh(r.evaluate(a),a.properties())],[[At,Zr],(a,[r,s])=>Rh(r.evaluate(a),s.evaluate(a))]]},"feature-state":[ft,[At],(a,[r])=>Rh(r.evaluate(a),a.featureState||{})],properties:[Zr,[],a=>a.properties()],"geometry-type":[At,[],a=>a.geometryType()],id:[ft,[],a=>a.id()],zoom:[We,[],a=>a.globals.zoom],"heatmap-density":[We,[],a=>a.globals.heatmapDensity||0],"line-progress":[We,[],a=>a.globals.lineProgress||0],accumulated:[ft,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[We,Ba(We),(a,r)=>{let s=0;for(const d of r)s+=d.evaluate(a);return s}],"*":[We,Ba(We),(a,r)=>{let s=1;for(const d of r)s*=d.evaluate(a);return s}],"-":{type:We,overloads:[[[We,We],(a,[r,s])=>r.evaluate(a)-s.evaluate(a)],[[We],(a,[r])=>-r.evaluate(a)]]},"/":[We,[We,We],(a,[r,s])=>r.evaluate(a)/s.evaluate(a)],"%":[We,[We,We],(a,[r,s])=>r.evaluate(a)%s.evaluate(a)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(a,[r,s])=>Math.pow(r.evaluate(a),s.evaluate(a))],sqrt:[We,[We],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[We,[We],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[We,[We],(a,[r])=>Math.log(r.evaluate(a))],log2:[We,[We],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[We,[We],(a,[r])=>Math.sin(r.evaluate(a))],cos:[We,[We],(a,[r])=>Math.cos(r.evaluate(a))],tan:[We,[We],(a,[r])=>Math.tan(r.evaluate(a))],asin:[We,[We],(a,[r])=>Math.asin(r.evaluate(a))],acos:[We,[We],(a,[r])=>Math.acos(r.evaluate(a))],atan:[We,[We],(a,[r])=>Math.atan(r.evaluate(a))],min:[We,Ba(We),(a,r)=>Math.min(...r.map(s=>s.evaluate(a)))],max:[We,Ba(We),(a,r)=>Math.max(...r.map(s=>s.evaluate(a)))],abs:[We,[We],(a,[r])=>Math.abs(r.evaluate(a))],round:[We,[We],(a,[r])=>{const s=r.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[We,[We],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[We,[We],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[It,[At,ft],(a,[r,s])=>a.properties()[r.value]===s.value],"filter-id-==":[It,[ft],(a,[r])=>a.id()===r.value],"filter-type-==":[It,[At],(a,[r])=>a.geometryType()===r.value],"filter-<":[It,[At,ft],(a,[r,s])=>{const d=a.properties()[r.value],m=s.value;return typeof d==typeof m&&d<m}],"filter-id-<":[It,[ft],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<d}],"filter->":[It,[At,ft],(a,[r,s])=>{const d=a.properties()[r.value],m=s.value;return typeof d==typeof m&&d>m}],"filter-id->":[It,[ft],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>d}],"filter-<=":[It,[At,ft],(a,[r,s])=>{const d=a.properties()[r.value],m=s.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[It,[ft],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<=d}],"filter->=":[It,[At,ft],(a,[r,s])=>{const d=a.properties()[r.value],m=s.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[It,[ft],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>=d}],"filter-has":[It,[ft],(a,[r])=>r.value in a.properties()],"filter-has-id":[It,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[It,[Mr(At)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[It,[Mr(ft)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[It,[At,Mr(ft)],(a,[r,s])=>s.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[It,[At,Mr(ft)],(a,[r,s])=>function(d,m,_,v){for(;_<=v;){const b=_+v>>1;if(m[b]===d)return!0;m[b]>d?v=b-1:_=b+1}return!1}(a.properties()[r.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(a,[r,s])=>r.evaluate(a)&&s.evaluate(a)],[Ba(It),(a,r)=>{for(const s of r)if(!s.evaluate(a))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(a,[r,s])=>r.evaluate(a)||s.evaluate(a)],[Ba(It),(a,r)=>{for(const s of r)if(s.evaluate(a))return!0;return!1}]]},"!":[It,[It],(a,[r])=>!r.evaluate(a)],"is-supported-script":[It,[At],(a,[r])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(r.evaluate(a))}],upcase:[At,[At],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[At,[At],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[At,Ba(ft),(a,r)=>r.map(s=>dl(s.evaluate(a))).join("")],"resolved-locale":[At,[bi],(a,[r])=>r.evaluate(a).resolvedLocale()]});class Oh{constructor(r,s){var d;this.expression=r,this._warningHistory={},this._evaluator=new io,this._defaultValue=s?(d=s).type==="color"&&Eu(d.default)?new Qt(0,0,0,0):d.type==="color"?Qt.parse(d.default)||null:d.type==="padding"?si.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,d,m,_,v){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(r,s,d,m,_,v){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=v||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new br(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function ku(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in ws}function Fn(a,r){const s=new _s(ws,yu,[],r?function(m){const _={color:Nn,string:At,number:We,enum:At,boolean:It,formatted:Gi,padding:ya,resolvedImage:_a};return m.type==="array"?Mr(_[m.value]||ft,m.length):_[m.type]}(r):void 0),d=s.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?hp(new Oh(d,r)):bs(s.errors)}class $h{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!pl(s.expression)}evaluateWithoutErrorHandling(r,s,d,m,_,v){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,m,_,v)}evaluate(r,s,d,m,_,v){return this._styleExpression.evaluate(r,s,d,m,_,v)}}class Wt{constructor(r,s,d,m){this.kind=r,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!pl(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,d,m,_,v){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,m,_,v)}evaluate(r,s,d,m,_,v){return this._styleExpression.evaluate(r,s,d,m,_,v)}interpolationFactor(r,s,d){return this.interpolationType?Ei.interpolationFactor(this.interpolationType,r,s,d):0}}function Tu(a,r){const s=Fn(a,r);if(s.result==="error")return s;const d=s.value.expression,m=_u(d);if(!m&&!Ss(r))return bs([new Mt("","data expressions not supported")]);const _=ml(d,["zoom"]);if(!_&&!dp(r))return bs([new Mt("","zoom expressions not supported")]);const v=wn(d);return v||_?v instanceof Mt?bs([v]):v instanceof Ei&&!Lh(r)?bs([new Mt("",'"interpolate" expressions cannot be used with this property')]):hp(v?new Wt(m?"camera":"composite",s.value,v.labels,v instanceof Ei?v.interpolation:void 0):new $h(m?"constant":"source",s.value)):bs([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sn{constructor(r,s){this._parameters=r,this._specification=s,Kt(this,fp(this._parameters,this._specification))}static deserialize(r){return new Sn(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function wn(a){let r=null;if(a instanceof xu)r=wn(a.result);else if(a instanceof vu){for(const s of a.args)if(r=wn(s),r)break}else(a instanceof yl||a instanceof Ei)&&a.input instanceof ui&&a.input.name==="zoom"&&(r=a);return r instanceof Mt||a.eachChild(s=>{const d=wn(s);d instanceof Mt?r=d:!r&&d?r=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Es(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!Es(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const mp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Es(a)||(a=Cu(a));const r=Fn(a,mp);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,m)=>r.value.evaluate(s,d,{},m),needGeometry:gp(a)}}function z0(a,r){return a<r?-1:a>r?1:0}function gp(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(gp(a[r]))return!0;return!1}function Cu(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?Pu(a[1],a[2],"=="):r==="!="?wl(Pu(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Pu(a[1],a[2],r):r==="any"?(s=a.slice(1),["any"].concat(s.map(Cu))):r==="all"?["all"].concat(a.slice(1).map(Cu)):r==="none"?["all"].concat(a.slice(1).map(Cu).map(wl)):r==="in"?Vh(a[1],a.slice(2)):r==="!in"?wl(Vh(a[1],a.slice(2))):r==="has"?Nh(a[1]):r==="!has"?wl(Nh(a[1])):r!=="within"||a;var s}function Pu(a,r,s){switch(a){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,a,r]}}function Vh(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",a,["literal",r.sort(z0)]]:["filter-in-small",a,["literal",r]]}}function Nh(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function wl(a){return["!",a]}function bl(a){const r=typeof a;if(r==="number"||r==="boolean"||r==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const _ of a)m+=`${bl(_)},`;return`${m}]`}const s=Object.keys(a).sort();let d="{";for(let m=0;m<s.length;m++)d+=`${JSON.stringify(s[m])}:${bl(a[s[m]])},`;return`${d}}`}function D0(a){let r="";for(const s of Fr)r+=`/${bl(a[s])}`;return r}function yp(a){const r=a.value;return r?[new Le(a.key,r,"constants have been deprecated as of v8")]:[]}function er(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Va(a){if(Array.isArray(a))return a.map(Va);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const s in a)r[s]=Va(a[s]);return r}return er(a)}function qi(a){const r=a.key,s=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},_=a.style,v=a.styleSpec,b=a.validateSpec;let k=[];const I=mn(s);if(I!=="object")return[new Le(r,s,`object expected, ${I} found`)];for(const D in s){const F=D.split(".")[0],$=d[F]||d["*"];let U;if(m[F])U=m[F];else if(d[F])U=b;else if(m["*"])U=m["*"];else{if(!d["*"]){k.push(new Le(r,s[D],`unknown property "${D}"`));continue}U=b}k=k.concat(U({key:(r&&`${r}.`)+D,value:s[D],valueSpec:$,style:_,styleSpec:v,object:s,objectKey:D,validateSpec:b},s))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&s[D]===void 0&&k.push(new Le(r,s,`missing required property "${D}"`));return k}function _p(a){const r=a.value,s=a.valueSpec,d=a.style,m=a.styleSpec,_=a.key,v=a.arrayElementValidator||a.validateSpec;if(mn(r)!=="array")return[new Le(_,r,`array expected, ${mn(r)} found`)];if(s.length&&r.length!==s.length)return[new Le(_,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new Le(_,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let b={type:s.value,values:s.values};m.$version<7&&(b.function=s.function),mn(s.value)==="object"&&(b=s.value);let k=[];for(let I=0;I<r.length;I++)k=k.concat(v({array:r,arrayIndex:I,value:r[I],valueSpec:b,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${_}[${I}]`}));return k}function Uh(a){const r=a.key,s=a.value,d=a.valueSpec;let m=mn(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Le(r,s,`number expected, ${m} found`)]:"minimum"in d&&s<d.minimum?[new Le(r,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Le(r,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function vp(a){const r=a.valueSpec,s=er(a.value.type);let d,m,_,v={};const b=s!=="categorical"&&a.value.property===void 0,k=!b,I=mn(a.value.stops)==="array"&&mn(a.value.stops[0])==="array"&&mn(a.value.stops[0][0])==="object",D=qi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(U){if(s==="identity")return[new Le(U.key,U.value,'identity function may not have a "stops" property')];let q=[];const ne=U.value;return q=q.concat(_p({key:U.key,value:ne,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:F})),mn(ne)==="array"&&ne.length===0&&q.push(new Le(U.key,ne,"array must have at least one stop")),q},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return s==="identity"&&b&&D.push(new Le(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||D.push(new Le(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Lh(a.valueSpec)&&D.push(new Le(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(k&&!Ss(a.valueSpec)?D.push(new Le(a.key,a.value,"property functions not supported")):b&&!dp(a.valueSpec)&&D.push(new Le(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!I||a.value.property!==void 0||D.push(new Le(a.key,a.value,'"property" property is required')),D;function F(U){let q=[];const ne=U.value,Q=U.key;if(mn(ne)!=="array")return[new Le(Q,ne,`array expected, ${mn(ne)} found`)];if(ne.length!==2)return[new Le(Q,ne,`array length 2 expected, length ${ne.length} found`)];if(I){if(mn(ne[0])!=="object")return[new Le(Q,ne,`object expected, ${mn(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Le(Q,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Le(Q,ne,"object stop key must have value")];if(_&&_>er(ne[0].zoom))return[new Le(Q,ne[0].zoom,"stop zoom values must appear in ascending order")];er(ne[0].zoom)!==_&&(_=er(ne[0].zoom),m=void 0,v={}),q=q.concat(qi({key:`${Q}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Uh,value:$}}))}else q=q.concat($({key:`${Q}[0]`,value:ne[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},ne));return ku(Va(ne[1]))?q.concat([new Le(`${Q}[1]`,ne[1],"expressions are not allowed in function stops.")]):q.concat(U.validateSpec({key:`${Q}[1]`,value:ne[1],valueSpec:r,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function $(U,q){const ne=mn(U.value),Q=er(U.value),de=U.value!==null?U.value:q;if(d){if(ne!==d)return[new Le(U.key,de,`${ne} stop domain type must match previous stop domain type ${d}`)]}else d=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new Le(U.key,de,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&s!=="categorical"){let ve=`number expected, ${ne} found`;return Ss(r)&&s===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Le(U.key,de,ve)]}return s!=="categorical"||ne!=="number"||isFinite(Q)&&Math.floor(Q)===Q?s!=="categorical"&&ne==="number"&&m!==void 0&&Q<m?[new Le(U.key,de,"stop domain values must appear in ascending order")]:(m=Q,s==="categorical"&&Q in v?[new Le(U.key,de,"stop domain values must be unique")]:(v[Q]=!0,[])):[new Le(U.key,de,`integer expected, found ${Q}`)]}}function Na(a){const r=(a.expressionContext==="property"?Tu:Fn)(Va(a.value),a.valueSpec);if(r.result==="error")return r.value.map(d=>new Le(`${a.key}${d.key}`,a.value,d.message));const s=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Le(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!pl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!pl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!ml(s,["zoom","feature-state"]))return[new Le(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!_u(s))return[new Le(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sl(a){const r=a.key,s=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(er(s))===-1&&m.push(new Le(r,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(er(s))===-1&&m.push(new Le(r,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function ks(a){return Es(Va(a.value))?Na(Kt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xp(a)}function xp(a){const r=a.value,s=a.key;if(mn(r)!=="array")return[new Le(s,r,`array expected, ${mn(r)} found`)];const d=a.styleSpec;let m,_=[];if(r.length<1)return[new Le(s,r,"filter array must have at least 1 element")];switch(_=_.concat(Sl({key:`${s}[0]`,value:r[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),er(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&er(r[1])==="$type"&&_.push(new Le(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new Le(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=mn(r[1]),m!=="string"&&_.push(new Le(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let v=2;v<r.length;v++)m=mn(r[v]),er(r[1])==="$type"?_=_.concat(Sl({key:`${s}[${v}]`,value:r[v],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new Le(`${s}[${v}]`,r[v],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let v=1;v<r.length;v++)_=_.concat(xp({key:`${s}[${v}]`,value:r[v],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=mn(r[1]),r.length!==2?_.push(new Le(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new Le(`${s}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=mn(r[1]),r.length!==2?_.push(new Le(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&_.push(new Le(`${s}[1]`,r[1],`object expected, ${m} found`))}return _}function jh(a,r){const s=a.key,d=a.validateSpec,m=a.style,_=a.styleSpec,v=a.value,b=a.objectKey,k=_[`${r}_${a.layerType}`];if(!k)return[];const I=b.match(/^(.*)-transition$/);if(r==="paint"&&I&&k[I[1]]&&k[I[1]].transition)return d({key:s,value:v,valueSpec:_.transition,style:m,styleSpec:_});const D=a.valueSpec||k[b];if(!D)return[new Le(s,v,`unknown property "${b}"`)];let F;if(mn(v)==="string"&&Ss(D)&&!D.tokens&&(F=/^{([^}]+)}$/.exec(v)))return[new Le(s,v,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const $=[];return a.layerType==="symbol"&&(b==="text-field"&&m&&!m.glyphs&&$.push(new Le(s,v,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Eu(Va(v))&&er(v.type)==="identity"&&$.push(new Le(s,v,'"text-font" does not support identity functions'))),$.concat(d({key:a.key,value:v,valueSpec:D,style:m,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:b}))}function Gh(a){return jh(a,"paint")}function wp(a){return jh(a,"layout")}function Iu(a){let r=[];const s=a.value,d=a.key,m=a.style,_=a.styleSpec;s.type||s.ref||r.push(new Le(d,s,'either "type" or "ref" is required'));let v=er(s.type);const b=er(s.ref);if(s.id){const k=er(s.id);for(let I=0;I<a.arrayIndex;I++){const D=m.layers[I];er(D.id)===k&&r.push(new Le(d,s.id,`duplicate layer id "${s.id}", previously used at line ${D.id.__line__}`))}}if("ref"in s){let k;["type","source","source-layer","filter","layout"].forEach(I=>{I in s&&r.push(new Le(d,s[I],`"${I}" is prohibited for ref layers`))}),m.layers.forEach(I=>{er(I.id)===b&&(k=I)}),k?k.ref?r.push(new Le(d,s.ref,"ref cannot reference another ref layer")):v=er(k.type):r.push(new Le(d,s.ref,`ref layer "${b}" not found`))}else if(v!=="background")if(s.source){const k=m.sources&&m.sources[s.source],I=k&&er(k.type);k?I==="vector"&&v==="raster"?r.push(new Le(d,s.source,`layer "${s.id}" requires a raster source`)):I==="raster"&&v!=="raster"?r.push(new Le(d,s.source,`layer "${s.id}" requires a vector source`)):I!=="vector"||s["source-layer"]?I==="raster-dem"&&v!=="hillshade"?r.push(new Le(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!s.paint||!s.paint["line-gradient"]||I==="geojson"&&k.lineMetrics||r.push(new Le(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Le(d,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new Le(d,s.source,`source "${s.source}" not found`))}else r.push(new Le(d,s,'missing required property "source"'));return r=r.concat(qi({key:d,value:s,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:ks,layout:k=>qi({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":I=>wp(Kt({layerType:v},I))}}),paint:k=>qi({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":I=>Gh(Kt({layerType:v},I))}})}})),r}function Ao(a){const r=a.value,s=a.key,d=mn(r);return d!=="string"?[new Le(s,r,`string expected, ${d} found`)]:[]}const Mu={promoteId:function({key:a,value:r}){if(mn(r)==="string")return Ao({key:a,value:r});{const s=[];for(const d in r)s.push(...Ao({key:`${a}.${d}`,value:r[d]}));return s}}};function Au(a){const r=a.value,s=a.key,d=a.styleSpec,m=a.style,_=a.validateSpec;if(!r.type)return[new Le(s,r,'"type" is required')];const v=er(r.type);let b;switch(v){case"vector":case"raster":case"raster-dem":return b=qi({key:s,value:r,valueSpec:d[`source_${v.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Mu,validateSpec:_}),b;case"geojson":if(b=qi({key:s,value:r,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:Mu}),r.cluster)for(const k in r.clusterProperties){const[I,D]=r.clusterProperties[k],F=typeof I=="string"?[I,["accumulated"],["get",k]]:I;b.push(...Na({key:`${s}.${k}.map`,value:D,validateSpec:_,expressionContext:"cluster-map"})),b.push(...Na({key:`${s}.${k}.reduce`,value:F,validateSpec:_,expressionContext:"cluster-reduce"}))}return b;case"video":return qi({key:s,value:r,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return qi({key:s,value:r,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Le(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sl({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:_,styleSpec:d})}}function bp(a){const r=a.value,s=a.styleSpec,d=s.light,m=a.style;let _=[];const v=mn(r);if(r===void 0)return _;if(v!=="object")return _=_.concat([new Le("light",r,`object expected, ${v} found`)]),_;for(const b in r){const k=b.match(/^(.*)-transition$/);_=_.concat(k&&d[k[1]]&&d[k[1]].transition?a.validateSpec({key:b,value:r[b],valueSpec:s.transition,validateSpec:a.validateSpec,style:m,styleSpec:s}):d[b]?a.validateSpec({key:b,value:r[b],valueSpec:d[b],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(b,r[b],`unknown property "${b}"`)])}return _}function El(a){const r=a.value,s=a.styleSpec,d=s.terrain,m=a.style;let _=[];const v=mn(r);if(r===void 0)return _;if(v!=="object")return _=_.concat([new Le("terrain",r,`object expected, ${v} found`)]),_;for(const b in r)_=_.concat(d[b]?a.validateSpec({key:b,value:r[b],valueSpec:d[b],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(b,r[b],`unknown property "${b}"`)]);return _}function Sp(a){let r=[];const s=a.value,d=a.key;if(Array.isArray(s)){const m=[],_=[];for(const v in s)s[v].id&&m.includes(s[v].id)&&r.push(new Le(d,s,`all the sprites' ids must be unique, but ${s[v].id} is duplicated`)),m.push(s[v].id),s[v].url&&_.includes(s[v].url)&&r.push(new Le(d,s,`all the sprites' URLs must be unique, but ${s[v].url} is duplicated`)),_.push(s[v].url),r=r.concat(qi({key:`${d}[${v}]`,value:s[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return r}return Ao({key:d,value:s})}const Ep={"*":()=>[],array:_p,boolean:function(a){const r=a.value,s=a.key,d=mn(r);return d!=="boolean"?[new Le(s,r,`boolean expected, ${d} found`)]:[]},number:Uh,color:function(a){const r=a.key,s=a.value,d=mn(s);return d!=="string"?[new Le(r,s,`color expected, ${d} found`)]:Qt.parse(String(s))?[]:[new Le(r,s,`color expected, "${s}" found`)]},constants:yp,enum:Sl,filter:ks,function:vp,layer:Iu,object:qi,source:Au,light:bp,terrain:El,string:Ao,formatted:function(a){return Ao(a).length===0?[]:Na(a)},resolvedImage:function(a){return Ao(a).length===0?[]:Na(a)},padding:function(a){const r=a.key,s=a.value;if(mn(s)==="array"){if(s.length<1||s.length>4)return[new Le(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let m=[];for(let _=0;_<s.length;_++)m=m.concat(a.validateSpec({key:`${r}[${_}]`,value:s[_],validateSpec:a.validateSpec,valueSpec:d}));return m}return Uh({key:r,value:s,valueSpec:{}})},sprite:Sp};function kl(a){const r=a.value,s=a.valueSpec,d=a.styleSpec;return a.validateSpec=kl,s.expression&&Eu(er(r))?vp(a):s.expression&&ku(Va(r))?Na(a):s.type&&Ep[s.type]?Ep[s.type](a):qi(Kt({},a,{valueSpec:s.type?d[s.type]:s}))}function kp(a){const r=a.value,s=a.key,d=Ao(a);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Le(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Le(s,r,'"glyphs" url must include a "{range}" token'))),d}function zo(a,r=Ce){let s=[];return s=s.concat(kl({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,validateSpec:kl,objectElementValidators:{glyphs:kp,"*":()=>[]}})),a.constants&&(s=s.concat(yp({key:"constants",value:a.constants,style:a,styleSpec:r,validateSpec:kl}))),Tl(s)}function Zi(a){return function(r){return a({...r,validateSpec:kl})}}function Tl(a){return[].concat(a).sort((r,s)=>r.line-s.line)}function ur(a){return function(...r){return Tl(a.apply(this,r))}}zo.source=ur(Zi(Au)),zo.sprite=ur(Zi(Sp)),zo.glyphs=ur(Zi(kp)),zo.light=ur(Zi(bp)),zo.terrain=ur(Zi(El)),zo.layer=ur(Zi(Iu)),zo.filter=ur(Zi(ks)),zo.paintProperty=ur(Zi(Gh)),zo.layoutProperty=ur(Zi(wp));const xa=zo,R0=xa.light,L0=xa.paintProperty,F0=xa.layoutProperty;function Ts(a,r){let s=!1;if(r&&r.length)for(const d of r)a.fire(new on(new Error(d.message))),s=!0;return s}class Cl{constructor(r,s,d){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const v=new Int32Array(this.arrayBuffer);r=v[0],this.d=(s=v[1])+2*(d=v[2]);for(let k=0;k<this.d*this.d;k++){const I=v[3+k],D=v[3+k+1];m.push(I===D?null:v.subarray(I,D))}const b=v[3+m.length+1];this.keys=v.subarray(v[3+m.length],b),this.bboxes=v.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let v=0;v<this.d*this.d;v++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=d,this.scale=s/r,this.uid=0;const _=d/s*r;this.min=-_,this.max=r+_}insert(r,s,d,m,_){this._forEachCell(s,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,d,m,_,v){this.cells[_].push(v)}query(r,s,d,m,_){const v=this.min,b=this.max;if(r<=v&&s<=v&&b<=d&&b<=m&&!_)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(r,s,d,m,this._queryCell,k,{},_),k}}_queryCell(r,s,d,m,_,v,b,k){const I=this.cells[_];if(I!==null){const D=this.keys,F=this.bboxes;for(let $=0;$<I.length;$++){const U=I[$];if(b[U]===void 0){const q=4*U;(k?k(F[q+0],F[q+1],F[q+2],F[q+3]):r<=F[q+2]&&s<=F[q+3]&&d>=F[q+0]&&m>=F[q+1])?(b[U]=!0,v.push(D[U])):b[U]=!1}}}}_forEachCell(r,s,d,m,_,v,b,k){const I=this._convertToCellCoord(r),D=this._convertToCellCoord(s),F=this._convertToCellCoord(d),$=this._convertToCellCoord(m);for(let U=I;U<=F;U++)for(let q=D;q<=$;q++){const ne=this.d*q+U;if((!k||k(this._convertFromCellCoord(U),this._convertFromCellCoord(q),this._convertFromCellCoord(U+1),this._convertFromCellCoord(q+1)))&&_.call(this,r,s,d,m,ne,v,b,k))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let d=0;for(let v=0;v<this.cells.length;v++)d+=this.cells[v].length;const m=new Int32Array(s+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=s;for(let v=0;v<r.length;v++){const b=r[v];m[3+v]=_,m.set(b,_),_+=b.length}return m[3+r.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+r.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(r,s){const d=r.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(r){return new Cl(r.buffer)}}const Do={};function it(a,r,s={}){if(Do[a])throw new Error(`${a} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:a,writeable:!1}),Do[a]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}it("Object",Object),it("TransferableGridIndex",Cl),it("Color",Qt),it("Error",Error),it("AJAXError",lt),it("ResolvedImage",$r),it("StylePropertyFunction",Sn),it("StyleExpression",Oh,{omit:["_evaluator"]}),it("ZoomDependentExpression",Wt),it("ZoomConstantExpression",$h),it("CompoundExpression",ui,{omit:["_evaluate"]});for(const a in ws)ws[a]._classRegistryKey||it(`Expression_${a}`,ws[a]);function zu(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Pl(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(zu(a)||xn(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return r&&r.push(s.buffer),s}if(a instanceof ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const d of a)s.push(Pl(d,r));return s}if(typeof a=="object"){const s=a.constructor,d=s._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!Do[d])throw new Error(`${d} is not registered.`);const m=s.serialize?s.serialize(a,r):{};if(s.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||Do[d].omit.indexOf(_)>=0)continue;const v=a[_];m[_]=Do[d].shallow.indexOf(_)>=0?v:Pl(v,r)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function Yo(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||zu(a)||xn(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Yo);if(typeof a=="object"){const r=a.$name||"Object";if(!Do[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=Do[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(a);const d=Object.create(s.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const _=a[m];d[m]=Do[r].shallow.indexOf(m)>=0?_:Yo(_)}return d}throw new Error("can't deserialize object of type "+typeof a)}class Tp{constructor(){this.first=!0}update(r,s){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Du(a){for(const r of a)if(Ru(r.charCodeAt(0)))return!0;return!1}function Wh(a){for(const r of a)if(!Cp(r.charCodeAt(0)))return!1;return!0}function Cp(a){return!(Ye.Arabic(a)||Ye["Arabic Supplement"](a)||Ye["Arabic Extended-A"](a)||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a))}function Ru(a){return!(a!==746&&a!==747&&(a<4352||!(Ye["Bopomofo Extended"](a)||Ye.Bopomofo(a)||Ye["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ye["CJK Compatibility Ideographs"](a)||Ye["CJK Compatibility"](a)||Ye["CJK Radicals Supplement"](a)||Ye["CJK Strokes"](a)||!(!Ye["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ye["CJK Unified Ideographs Extension A"](a)||Ye["CJK Unified Ideographs"](a)||Ye["Enclosed CJK Letters and Months"](a)||Ye["Hangul Compatibility Jamo"](a)||Ye["Hangul Jamo Extended-A"](a)||Ye["Hangul Jamo Extended-B"](a)||Ye["Hangul Jamo"](a)||Ye["Hangul Syllables"](a)||Ye.Hiragana(a)||Ye["Ideographic Description Characters"](a)||Ye.Kanbun(a)||Ye["Kangxi Radicals"](a)||Ye["Katakana Phonetic Extensions"](a)||Ye.Katakana(a)&&a!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ye["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](a)||Ye["Unified Canadian Aboriginal Syllabics Extended"](a)||Ye["Vertical Forms"](a)||Ye["Yijing Hexagram Symbols"](a)||Ye["Yi Syllables"](a)||Ye["Yi Radicals"](a))))}function Pp(a){return!(Ru(a)||function(r){return!!(Ye["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ye["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ye["Letterlike Symbols"](r)||Ye["Number Forms"](r)||Ye["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ye["Control Pictures"](r)&&r!==9251||Ye["Optical Character Recognition"](r)||Ye["Enclosed Alphanumerics"](r)||Ye["Geometric Shapes"](r)||Ye["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ye["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ye["CJK Symbols and Punctuation"](r)||Ye.Katakana(r)||Ye["Private Use Area"](r)||Ye["CJK Compatibility Forms"](r)||Ye["Small Form Variants"](r)||Ye["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function Lu(a){return a>=1424&&a<=2303||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a)}function Fu(a,r){return!(!r&&Lu(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ye.Khmer(a))}function Ip(a){for(const r of a)if(Lu(r.charCodeAt(0)))return!0;return!1}const qh="deferred",Ou="loading",Zh="loaded";let Il=null,hi="unavailable",wa=null;const Mp=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(hi="error"),Il&&Il(a)};function Hh(){$u.fire(new Gt("pluginStateChange",{pluginStatus:hi,pluginURL:wa}))}const $u=new pr,Xh=function(){return hi},Ap=function(){if(hi!==qh||!wa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hi=Ou,Hh(),wa&&Wn({url:wa},a=>{a?Mp(a):(hi=Zh,Hh())})},Hi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>hi===Zh||Hi.applyArabicShaping!=null,isLoading:()=>hi===Ou,setState(a){if(!Tt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");hi=a.pluginStatus,wa=a.pluginURL},isParsed(){if(!Tt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Hi.applyArabicShaping!=null&&Hi.processBidirectionalText!=null&&Hi.processStyledBidirectionalText!=null},getPluginURL(){if(!Tt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return wa}};class In{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Tp,this.transition={})}isSupportedScript(r){return function(s,d){for(const m of s)if(!Fu(m.charCodeAt(0),d))return!1;return!0}(r,Hi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class Bu{constructor(r,s){this.property=r,this.value=s,this.expression=function(d,m){if(Eu(d))return new Sn(d,m);if(ku(d)){const _=Tu(d,m);if(_.result==="error")throw new Error(_.value.map(v=>`${v.key}: ${v.message}`).join(", "));return _.value}{let _=d;return m.type==="color"&&typeof d=="string"?_=Qt.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)||(_=si.parse(d)),{kind:"constant",evaluate:()=>_}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,d){return this.property.possiblyEvaluate(this,r,s,d)}}class Kh{constructor(r){this.property=r,this.value=new Bu(r,void 0)}transitioned(r,s){return new Ml(this.property,this.value,s,K({},r.transition,this.transition),r.now)}untransitioned(){return new Ml(this.property,this.value,null,{},0)}}class zp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ee(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Kh(this._values[r].property)),this._values[r].value=new Bu(this._values[r].property,s===null?void 0:Ee(s))}getTransition(r){return Ee(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Kh(this._values[r].property)),this._values[r].transition=Ee(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const d=new Dp(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(r,s._values[m]);return d}untransitioned(){const r=new Dp(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Ml{constructor(r,s,d,m,_){this.property=r,this.value=s,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(r,s,d){const m=r.now||0,_=this.value.possiblyEvaluate(r,s,d),v=this.prior;if(v){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return v.possiblyEvaluate(r,s,d);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,s,d),_,function(k){if(k<=0)return 0;if(k>=1)return 1;const I=k*k,D=I*k;return 4*(k<.5?D:3*(k-I)+D-.75)}(b))}}return _}}class Dp{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,d){const m=new Vu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(r,s,d);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Yh{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Ee(this._values[r].value)}setValue(r,s){this._values[r]=new Bu(this._values[r].property,s===null?void 0:Ee(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d)}return r}possiblyEvaluate(r,s,d){const m=new Vu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(r,s,d);return m}}class Ro{constructor(r,s,d){this.property=r,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,d,m){return this.property.evaluate(this.value,this.parameters,r,s,d,m)}}class Vu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ht{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,d){const m=ci[this.specification.type];return m?m(r,s,d):r}}class Et{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,d,m){return new Ro(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},d,m)}:r.expression,s)}interpolate(r,s,d){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new Ro(this,{kind:"constant",value:void 0},r.parameters);const m=ci[this.specification.type];if(m){const _=m(r.value.value,s.value.value,d);return new Ro(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,s,d,m,_,v){return r.kind==="constant"?r.value:r.evaluate(s,d,m,_,v)}}class Al extends Et{possiblyEvaluate(r,s,d,m){if(r.value===void 0)return new Ro(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,m),v=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,b=this._calculate(v,v,v,s);return new Ro(this,{kind:"constant",value:b},s)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new Ro(this,{kind:"constant",value:_},s)}return new Ro(this,r.expression,s)}evaluate(r,s,d,m,_,v){if(r.kind==="source"){const b=r.evaluate(s,d,m,_,v);return this._calculate(b,b,b,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},d,m),r.evaluate({zoom:Math.floor(s.zoom)},d,m),r.evaluate({zoom:Math.floor(s.zoom)+1},d,m),s):r.value}_calculate(r,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class Jh{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,m);return this._calculate(_,_,_,s)}return this._calculate(r.expression.evaluate(new In(Math.floor(s.zoom-1),s)),r.expression.evaluate(new In(Math.floor(s.zoom),s)),r.expression.evaluate(new In(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class Qh{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,m){return!!r.expression.evaluate(s,null,{},d,m)}interpolate(){return!1}}class di{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const d=r[s];d.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Bu(d,void 0),_=this.defaultTransitionablePropertyValues[s]=new Kh(d);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}it("DataDrivenProperty",Et),it("DataConstantProperty",ht),it("CrossFadedDataDrivenProperty",Al),it("CrossFadedProperty",Jh),it("ColorRampProperty",Qh);const Nu="-transition";class Lo extends pr{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Yh(s.layout)),s.paint)){this._transitionablePaint=new zp(s.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Vu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,d={}){s!=null&&this._validate(F0,`layers.${this.id}.layout.${r}`,r,s,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(Nu)?this._transitionablePaint.getTransition(r.slice(0,-Nu.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,d={}){if(s!=null&&this._validate(L0,`layers.${this.id}.paint.${r}`,r,s,d))return!1;if(r.endsWith(Nu))return this._transitionablePaint.setTransition(r.slice(0,-Nu.length),s||void 0),!1;{const m=this._transitionablePaint._values[r],_=m.property.specification["property-type"]==="cross-faded-data-driven",v=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const k=this._transitionablePaint._values[r].value;return k.isDataDriven()||v||_||this._handleOverridablePaintPropertyUpdate(r,b,k)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ye(r,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(r,s,d,m,_={}){return(!_||_.validate!==!1)&&Ts(this,r.call(xa,{key:s,layerType:this.type,objectKey:d,value:m,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof Ro&&Ss(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const O0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jo{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function cr(a,r=1){let s=0,d=0;return{members:a.map(m=>{const _=O0[m.type].BYTES_PER_ELEMENT,v=s=Rp(s,Math.max(r,_)),b=m.components||1;return d=Math.max(d,_),s+=_*b,{name:m.name,type:m.type,components:b,offset:v}}),size:Rp(s,Math.max(d,r)),alignment:r}}function Rp(a,r){return Math.ceil(a/r)*r}class Cs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=d,r}}Cs.prototype.bytesPerElement=4,it("StructArrayLayout2i4",Cs);class Uu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,d)}emplace(r,s,d,m){const _=3*r;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=m,r}}Uu.prototype.bytesPerElement=6,it("StructArrayLayout3i6",Uu);class ed extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,m)}emplace(r,s,d,m,_){const v=4*r;return this.int16[v+0]=s,this.int16[v+1]=d,this.int16[v+2]=m,this.int16[v+3]=_,r}}ed.prototype.bytesPerElement=8,it("StructArrayLayout4i8",ed);class Fo extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,m,_,v)}emplace(r,s,d,m,_,v,b){const k=6*r;return this.int16[k+0]=s,this.int16[k+1]=d,this.int16[k+2]=m,this.int16[k+3]=_,this.int16[k+4]=v,this.int16[k+5]=b,r}}Fo.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",Fo);class ju extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,m,_,v)}emplace(r,s,d,m,_,v,b){const k=4*r,I=8*r;return this.int16[k+0]=s,this.int16[k+1]=d,this.uint8[I+4]=m,this.uint8[I+5]=_,this.uint8[I+6]=v,this.uint8[I+7]=b,r}}ju.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",ju);class Ua extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=d,r}}Ua.prototype.bytesPerElement=8,it("StructArrayLayout2f8",Ua);class Gu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v,b,k,I,D){const F=this.length;return this.resize(F+1),this.emplace(F,r,s,d,m,_,v,b,k,I,D)}emplace(r,s,d,m,_,v,b,k,I,D,F){const $=10*r;return this.uint16[$+0]=s,this.uint16[$+1]=d,this.uint16[$+2]=m,this.uint16[$+3]=_,this.uint16[$+4]=v,this.uint16[$+5]=b,this.uint16[$+6]=k,this.uint16[$+7]=I,this.uint16[$+8]=D,this.uint16[$+9]=F,r}}Gu.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",Gu);class zl extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v,b,k,I,D,F,$){const U=this.length;return this.resize(U+1),this.emplace(U,r,s,d,m,_,v,b,k,I,D,F,$)}emplace(r,s,d,m,_,v,b,k,I,D,F,$,U){const q=12*r;return this.int16[q+0]=s,this.int16[q+1]=d,this.int16[q+2]=m,this.int16[q+3]=_,this.uint16[q+4]=v,this.uint16[q+5]=b,this.uint16[q+6]=k,this.uint16[q+7]=I,this.int16[q+8]=D,this.int16[q+9]=F,this.int16[q+10]=$,this.int16[q+11]=U,r}}zl.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",zl);class td extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,d)}emplace(r,s,d,m){const _=3*r;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=m,r}}td.prototype.bytesPerElement=12,it("StructArrayLayout3f12",td);class Ps extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Ps.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",Ps);class ja extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v,b,k,I){const D=this.length;return this.resize(D+1),this.emplace(D,r,s,d,m,_,v,b,k,I)}emplace(r,s,d,m,_,v,b,k,I,D){const F=10*r,$=5*r;return this.int16[F+0]=s,this.int16[F+1]=d,this.int16[F+2]=m,this.int16[F+3]=_,this.int16[F+4]=v,this.int16[F+5]=b,this.uint32[$+3]=k,this.uint16[F+8]=I,this.uint16[F+9]=D,r}}ja.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",ja);class nd extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,m,_,v)}emplace(r,s,d,m,_,v,b){const k=6*r;return this.int16[k+0]=s,this.int16[k+1]=d,this.int16[k+2]=m,this.int16[k+3]=_,this.int16[k+4]=v,this.int16[k+5]=b,r}}nd.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",nd);class Wu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,m,_)}emplace(r,s,d,m,_,v){const b=4*r,k=8*r;return this.float32[b+0]=s,this.float32[b+1]=d,this.float32[b+2]=m,this.int16[k+6]=_,this.int16[k+7]=v,r}}Wu.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",Wu);class Ga extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,m)}emplace(r,s,d,m,_){const v=12*r,b=3*r;return this.uint8[v+0]=s,this.uint8[v+1]=d,this.float32[b+1]=m,this.float32[b+2]=_,r}}Ga.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",Ga);class qu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,d)}emplace(r,s,d,m){const _=3*r;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=m,r}}qu.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",qu);class rd extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de){const ve=this.length;return this.resize(ve+1),this.emplace(ve,r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de)}emplace(r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de,ve){const ce=24*r,xe=12*r,Se=48*r;return this.int16[ce+0]=s,this.int16[ce+1]=d,this.uint16[ce+2]=m,this.uint16[ce+3]=_,this.uint32[xe+2]=v,this.uint32[xe+3]=b,this.uint32[xe+4]=k,this.uint16[ce+10]=I,this.uint16[ce+11]=D,this.uint16[ce+12]=F,this.float32[xe+7]=$,this.float32[xe+8]=U,this.uint8[Se+36]=q,this.uint8[Se+37]=ne,this.uint8[Se+38]=Q,this.uint32[xe+10]=de,this.int16[ce+22]=ve,r}}rd.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",rd);class Zu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de,ve,ce,xe,Se,Me,rt,st,Je,Xe,qe,et){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de,ve,ce,xe,Se,Me,rt,st,Je,Xe,qe,et)}emplace(r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne,Q,de,ve,ce,xe,Se,Me,rt,st,Je,Xe,qe,et,Ke){const Be=34*r,xt=17*r;return this.int16[Be+0]=s,this.int16[Be+1]=d,this.int16[Be+2]=m,this.int16[Be+3]=_,this.int16[Be+4]=v,this.int16[Be+5]=b,this.int16[Be+6]=k,this.int16[Be+7]=I,this.uint16[Be+8]=D,this.uint16[Be+9]=F,this.uint16[Be+10]=$,this.uint16[Be+11]=U,this.uint16[Be+12]=q,this.uint16[Be+13]=ne,this.uint16[Be+14]=Q,this.uint16[Be+15]=de,this.uint16[Be+16]=ve,this.uint16[Be+17]=ce,this.uint16[Be+18]=xe,this.uint16[Be+19]=Se,this.uint16[Be+20]=Me,this.uint16[Be+21]=rt,this.uint16[Be+22]=st,this.uint32[xt+12]=Je,this.float32[xt+13]=Xe,this.float32[xt+14]=qe,this.float32[xt+15]=et,this.float32[xt+16]=Ke,r}}Zu.prototype.bytesPerElement=68,it("StructArrayLayout8i15ui1ul4f68",Zu);class Hu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Hu.prototype.bytesPerElement=4,it("StructArrayLayout1f4",Hu);class Xu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,d)}emplace(r,s,d,m){const _=4*r;return this.uint32[2*r+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=m,r}}Xu.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",Xu);class p extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=d,r}}p.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",p);class i extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}i.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",i);class c extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,m)}emplace(r,s,d,m,_){const v=4*r;return this.float32[v+0]=s,this.float32[v+1]=d,this.float32[v+2]=m,this.float32[v+3]=_,r}}c.prototype.bytesPerElement=16,it("StructArrayLayout4f16",c);class f extends Jo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class g extends ja{get(r){return new f(this,r)}}it("CollisionBoxArray",g);class x extends Jo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class E extends rd{get(r){return new x(this,r)}}it("PlacedSymbolArray",E);class P extends Jo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}P.prototype.size=68;class T extends Zu{get(r){return new P(this,r)}}it("SymbolInstanceArray",T);class M extends Hu{getoffsetX(r){return this.float32[1*r+0]}}it("GlyphOffsetArray",M);class L extends Uu{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}it("SymbolLineVertexArray",L);class R extends Jo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}R.prototype.size=8;class j extends Xu{get(r){return new R(this,r)}}it("FeatureIndexArray",j);class te extends Cs{}class Y extends Cs{}class ee extends Cs{}class oe extends Fo{}class he extends ju{}class be extends Ua{}class re extends Gu{}class we extends zl{}class Te extends td{}class De extends Ps{}class $e extends nd{}class Ue extends Ga{}class Fe extends qu{}class tt extends p{}const vt=cr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dt}=vt;class He{constructor(r=[]){this.segments=r}prepareSegment(r,s,d,m){let _=this.segments[this.segments.length-1];return r>He.MAX_VERTEX_ARRAY_LENGTH&&ke(`Max vertices per segment is ${He.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!_||_.vertexLength+r>He.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(_.sortKey=m),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,d,m){return new He([{vertexOffset:r,primitiveOffset:s,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function kt(a,r){return 256*(a=B(Math.floor(a),0,255))+B(Math.floor(r),0,255)}He.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",He);const nt=cr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var tn={exports:{}},tr={exports:{}};tr.exports=function(a,r){var s,d,m,_,v,b,k,I;for(d=a.length-(s=3&a.length),m=r,v=3432918353,b=461845907,I=0;I<d;)k=255&a.charCodeAt(I)|(255&a.charCodeAt(++I))<<8|(255&a.charCodeAt(++I))<<16|(255&a.charCodeAt(++I))<<24,++I,m=27492+(65535&(_=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*v+(((k>>>16)*v&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,s){case 3:k^=(255&a.charCodeAt(I+2))<<16;case 2:k^=(255&a.charCodeAt(I+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&a.charCodeAt(I)))*v+(((k>>>16)*v&65535)<<16)&4294967295)<<15|k>>>17))*b+(((k>>>16)*b&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var nn=tr.exports,Lt={exports:{}};Lt.exports=function(a,r){for(var s,d=a.length,m=r^d,_=0;d>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(_)|(255&a.charCodeAt(++_))<<8|(255&a.charCodeAt(++_))<<16|(255&a.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++_;switch(d){case 3:m^=(255&a.charCodeAt(_+2))<<16;case 2:m^=(255&a.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Zn=nn,Hr=Lt.exports;tn.exports=Zn,tn.exports.murmur3=Zn,tn.exports.murmur2=Hr;var nr=S(tn.exports);class Sr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,d,m){this.ids.push(ki(r)),this.positions.push(s,d,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=ki(r);let d=0,m=this.ids.length-1;for(;d<m;){const v=d+m>>1;this.ids[v]>=s?m=v:d=v+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(r,s){const d=new Float64Array(r.ids),m=new Uint32Array(r.positions);return oo(d,m,0,d.length-1),s&&s.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(r){const s=new Sr;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function ki(a){const r=+a;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:nr(String(a))}function oo(a,r,s,d){for(;s<d;){const m=a[s+d>>1];let _=s-1,v=d+1;for(;;){do _++;while(a[_]<m);do v--;while(a[v]>m);if(_>=v)break;ao(a,_,v),ao(r,3*_,3*v),ao(r,3*_+1,3*v+1),ao(r,3*_+2,3*v+2)}v-s<d-v?(oo(a,r,s,v),s=v+1):(oo(a,r,v+1,d),d=v)}}function ao(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}it("FeaturePositionMap",Sr);class Xr{constructor(r,s){this.gl=r.gl,this.location=s}}class Oo extends Xr{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Dl extends Xr{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Br extends Xr{constructor(r,s){super(r,s),this.current=Qt.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Er=new Float32Array(16);function an(a){return[kt(255*a.r,255*a.g),kt(255*a.b,255*a.a)]}class yr{constructor(r,s,d){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=d}setUniform(r,s,d){r.set(d.constantOr(this.value))}getBinding(r,s,d){return this.type==="color"?new Br(r,s):new Oo(r,s)}}class kr{constructor(r,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,d,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&r.set(_)}getBinding(r,s,d){return d.substr(0,9)==="u_pattern"?new Dl(r,s):new Oo(r,s)}}class cn{constructor(r,s,d,m){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,d,m,_){const v=this.paintVertexArray.length,b=this.expression.evaluate(new In(0),s,{},m,[],_);this.paintVertexArray.resize(r),this._setPaintValue(v,r,b)}updatePaintArray(r,s,d,m){const _=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(r,s,_)}_setPaintValue(r,s,d){if(this.type==="color"){const m=an(d);for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _r{constructor(r,s,d,m,_,v){this.expression=r,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,s,d,m,_){const v=this.expression.evaluate(new In(this.zoom),s,{},m,[],_),b=this.expression.evaluate(new In(this.zoom+1),s,{},m,[],_),k=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(k,r,v,b)}updatePaintArray(r,s,d,m){const _=this.expression.evaluate({zoom:this.zoom},d,m),v=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(r,s,_,v)}_setPaintValue(r,s,d,m){if(this.type==="color"){const _=an(d),v=an(m);for(let b=r;b<s;b++)this.paintVertexArray.emplace(b,_[0],_[1],v[0],v[1])}else{for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=B(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,d){return new Oo(r,s)}}class Ti{constructor(r,s,d,m,_,v){this.expression=r,this.type=s,this.useIntegerZoom=d,this.zoom=m,this.layerId=v,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,s,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(r,s,d,m,_){this._setPaintValues(r,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(r,s,d,m){if(!m||!d)return;const{min:_,mid:v,max:b}=d,k=m[_],I=m[v],D=m[b];if(k&&I&&D)for(let F=r;F<s;F++)this.zoomInPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],I.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],I.pixelRatio,D.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,nt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,nt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ku{constructor(r,s,d){this.binders={},this._buffers=[];const m=[];for(const _ in r.paint._values){if(!d(_))continue;const v=r.paint.get(_);if(!(v instanceof Ro&&Ss(v.property.specification)))continue;const b=$0(_,r.type),k=v.value,I=v.property.specification.type,D=v.property.useIntegerZoom,F=v.property.specification["property-type"],$=F==="cross-faded"||F==="cross-faded-data-driven";if(k.kind==="constant")this.binders[_]=$?new kr(k.value,b):new yr(k.value,b,I),m.push(`/u_${_}`);else if(k.kind==="source"||$){const U=Lp(_,I,"source");this.binders[_]=$?new Ti(k,I,D,s,U,r.id):new cn(k,b,I,U),m.push(`/a_${_}`)}else{const U=Lp(_,I,"composite");this.binders[_]=new _r(k,b,I,D,s,U),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof cn||s instanceof _r?s.maxValue:0}populatePaintArrays(r,s,d,m,_){for(const v in this.binders){const b=this.binders[v];(b instanceof cn||b instanceof _r||b instanceof Ti)&&b.populatePaintArray(r,s,d,m,_)}}setConstantPatternPositions(r,s){for(const d in this.binders){const m=this.binders[d];m instanceof kr&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,d,m,_){let v=!1;for(const b in r){const k=s.getPositions(b);for(const I of k){const D=d.feature(I.index);for(const F in this.binders){const $=this.binders[F];if(($ instanceof cn||$ instanceof _r||$ instanceof Ti)&&$.expression.isStateDependent===!0){const U=m.paint.get(F);$.expression=U.value,$.updatePaintArray(I.start,I.end,D,r[b],_),v=!0}}}}return v}defines(){const r=[];for(const s in this.binders){const d=this.binders[s];(d instanceof yr||d instanceof kr)&&r.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof cn||d instanceof _r)for(let m=0;m<d.paintVertexAttributes.length;m++)r.push(d.paintVertexAttributes[m].name);else if(d instanceof Ti)for(let m=0;m<nt.members.length;m++)r.push(nt.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof yr||d instanceof kr||d instanceof _r)for(const m of d.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const d=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof yr||_ instanceof kr||_ instanceof _r){for(const v of _.uniformNames)if(s[v]){const b=_.getBinding(r,s[v],v);d.push({name:v,property:m,binding:b})}}}return d}setUniforms(r,s,d,m){for(const{name:_,property:v,binding:b}of s)this.binders[v].setUniform(b,m,d.get(v),_)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(r&&d instanceof Ti){const m=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof cn||d instanceof _r)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const s in this.binders){const d=this.binders[s];(d instanceof cn||d instanceof _r||d instanceof Ti)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof cn||s instanceof _r||s instanceof Ti)&&s.destroy()}}}class Qo{constructor(r,s,d=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Ku(m,s,d);this.needsUpload=!1,this._featureMap=new Sr,this._bufferOffset=0}populatePaintArrays(r,s,d,m,_,v){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(r,s,m,_,v);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,s,_,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function $0(a,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}function Lp(a,r,s){const d={color:{source:Ua,composite:c},number:{source:Hu,composite:Ua}},m=function(_){return{"line-pattern":{source:re,composite:re},"fill-pattern":{source:re,composite:re},"fill-extrusion-pattern":{source:re,composite:re}}[_]}(a);return m&&m[s]||d[r][s]}it("ConstantBinder",yr),it("CrossFadedConstantBinder",kr),it("SourceExpressionBinder",cn),it("CrossFadedCompositeBinder",Ti),it("CompositeExpressionBinder",_r),it("ProgramConfiguration",Ku,{omit:["_buffers"]}),it("ProgramConfigurationSet",Qo);var Mn=8192;const id=Math.pow(2,14)-1,Rl=-id-1;function ea(a){const r=Mn/a.extent,s=a.loadGeometry();for(let d=0;d<s.length;d++){const m=s[d];for(let _=0;_<m.length;_++){const v=m[_],b=Math.round(v.x*r),k=Math.round(v.y*r);v.x=B(b,Rl,id),v.y=B(k,Rl,id),(b<v.x||b>v.x+1||k<v.y||k>v.y+1)&&ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ll(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?ea(a):[]}}function Fp(a,r,s,d,m){a.emplaceBack(2*r+(d+1)/2,2*s+(m+1)/2)}class B0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Y,this.indexArray=new Fe,this.segments=new He,this.programConfigurations=new Qo(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){const m=this.layers[0],_=[];let v=null,b=!1;m.type==="circle"&&(v=m.layout.get("circle-sort-key"),b=!v.isConstant());for(const{feature:k,id:I,index:D,sourceLayerIndex:F}of r){const $=this.layers[0]._featureFilter.needGeometry,U=Ll(k,$);if(!this.layers[0]._featureFilter.filter(new In(this.zoom),U,d))continue;const q=b?v.evaluate(U,{},d):void 0,ne={id:I,properties:k.properties,type:k.type,sourceLayerIndex:F,index:D,geometry:$?U.geometry:ea(k),patterns:{},sortKey:q};_.push(ne)}b&&_.sort((k,I)=>k.sortKey-I.sortKey);for(const k of _){const{geometry:I,index:D,sourceLayerIndex:F}=k,$=r[D].feature;this.addFeature(k,I,D,d),s.featureIndex.insert($,I,D,F,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Dt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,d,m){for(const _ of s)for(const v of _){const b=v.x,k=v.y;if(b<0||b>=Mn||k<0||k>=Mn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),D=I.vertexLength;Fp(this.layoutVertexArray,b,k,-1,-1),Fp(this.layoutVertexArray,b,k,1,-1),Fp(this.layoutVertexArray,b,k,1,1),Fp(this.layoutVertexArray,b,k,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},m)}}function Cb(a,r){for(let s=0;s<a.length;s++)if(Yu(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(Yu(a,r[s]))return!0;return!!V0(a,r)}function Y3(a,r,s){return!!Yu(a,r)||!!N0(r,a,s)}function Pb(a,r){if(a.length===1)return Mb(r,a[0]);for(let s=0;s<r.length;s++){const d=r[s];for(let m=0;m<d.length;m++)if(Yu(a,d[m]))return!0}for(let s=0;s<a.length;s++)if(Mb(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(V0(a,r[s]))return!0;return!1}function J3(a,r,s){if(a.length>1){if(V0(a,r))return!0;for(let d=0;d<r.length;d++)if(N0(r[d],a,s))return!0}for(let d=0;d<a.length;d++)if(N0(a[d],r,s))return!0;return!1}function V0(a,r){if(a.length===0||r.length===0)return!1;for(let s=0;s<a.length-1;s++){const d=a[s],m=a[s+1];for(let _=0;_<r.length-1;_++)if(Q3(d,m,r[_],r[_+1]))return!0}return!1}function Q3(a,r,s,d){return Ve(a,s,d)!==Ve(r,s,d)&&Ve(a,r,s)!==Ve(a,r,d)}function N0(a,r,s){const d=s*s;if(r.length===1)return a.distSqr(r[0])<d;for(let m=1;m<r.length;m++)if(Ib(a,r[m-1],r[m])<d)return!0;return!1}function Ib(a,r,s){const d=r.distSqr(s);if(d===0)return a.distSqr(r);const m=((a.x-r.x)*(s.x-r.x)+(a.y-r.y)*(s.y-r.y))/d;return a.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function Mb(a,r){let s,d,m,_=!1;for(let v=0;v<a.length;v++){s=a[v];for(let b=0,k=s.length-1;b<s.length;k=b++)d=s[b],m=s[k],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(_=!_)}return _}function Yu(a,r){let s=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const _=a[d],v=a[m];_.y>r.y!=v.y>r.y&&r.x<(v.x-_.x)*(r.y-_.y)/(v.y-_.y)+_.x&&(s=!s)}return s}function ez(a,r,s){const d=s[0],m=s[2];if(a.x<d.x&&r.x<d.x||a.x>m.x&&r.x>m.x||a.y<d.y&&r.y<d.y||a.y>m.y&&r.y>m.y)return!1;const _=Ve(a,r,s[0]);return _!==Ve(a,r,s[1])||_!==Ve(a,r,s[2])||_!==Ve(a,r,s[3])}function od(a,r,s){const d=r.paint.get(a).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(a)}function Op(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function $p(a,r,s,d,m){if(!r[0]&&!r[1])return a;const _=A.convert(r)._mult(m);s==="viewport"&&_._rotate(-d);const v=[];for(let b=0;b<a.length;b++)v.push(a[b].sub(_));return v}let Ab,zb;it("CircleBucket",B0,{omit:["layers"]});var tz={get paint(){return zb=zb||new di({"circle-radius":new Et(Ce.paint_circle["circle-radius"]),"circle-color":new Et(Ce.paint_circle["circle-color"]),"circle-blur":new Et(Ce.paint_circle["circle-blur"]),"circle-opacity":new Et(Ce.paint_circle["circle-opacity"]),"circle-translate":new ht(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new ht(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ht(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ht(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Et(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Et(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Et(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return Ab=Ab||new di({"circle-sort-key":new Et(Ce.layout_circle["circle-sort-key"])})}},fi=1e-6,Ju=typeof Float32Array!="undefined"?Float32Array:Array;function U0(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Db(a,r,s){var d=r[0],m=r[1],_=r[2],v=r[3],b=r[4],k=r[5],I=r[6],D=r[7],F=r[8],$=r[9],U=r[10],q=r[11],ne=r[12],Q=r[13],de=r[14],ve=r[15],ce=s[0],xe=s[1],Se=s[2],Me=s[3];return a[0]=ce*d+xe*b+Se*F+Me*ne,a[1]=ce*m+xe*k+Se*$+Me*Q,a[2]=ce*_+xe*I+Se*U+Me*de,a[3]=ce*v+xe*D+Se*q+Me*ve,a[4]=(ce=s[4])*d+(xe=s[5])*b+(Se=s[6])*F+(Me=s[7])*ne,a[5]=ce*m+xe*k+Se*$+Me*Q,a[6]=ce*_+xe*I+Se*U+Me*de,a[7]=ce*v+xe*D+Se*q+Me*ve,a[8]=(ce=s[8])*d+(xe=s[9])*b+(Se=s[10])*F+(Me=s[11])*ne,a[9]=ce*m+xe*k+Se*$+Me*Q,a[10]=ce*_+xe*I+Se*U+Me*de,a[11]=ce*v+xe*D+Se*q+Me*ve,a[12]=(ce=s[12])*d+(xe=s[13])*b+(Se=s[14])*F+(Me=s[15])*ne,a[13]=ce*m+xe*k+Se*$+Me*Q,a[14]=ce*_+xe*I+Se*U+Me*de,a[15]=ce*v+xe*D+Se*q+Me*ve,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var ad,nz=Db;function Bp(a,r,s){var d=r[0],m=r[1],_=r[2],v=r[3];return a[0]=s[0]*d+s[4]*m+s[8]*_+s[12]*v,a[1]=s[1]*d+s[5]*m+s[9]*_+s[13]*v,a[2]=s[2]*d+s[6]*m+s[10]*_+s[14]*v,a[3]=s[3]*d+s[7]*m+s[11]*_+s[15]*v,a}function Rb(a,r){const s=Bp([],[a.x,a.y,0,1],r);return new A(s[0]/s[3],s[1]/s[3])}ad=new Ju(4),Ju!=Float32Array&&(ad[0]=0,ad[1]=0,ad[2]=0,ad[3]=0);class Lb extends B0{}let Fb;it("HeatmapBucket",Lb,{omit:["layers"]});var rz={get paint(){return Fb=Fb||new di({"heatmap-radius":new Et(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Et(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ht(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qh(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ht(Ce.paint_heatmap["heatmap-opacity"])})}};function j0(a,{width:r,height:s},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*d}`)}else m=new Uint8Array(r*s*d);return a.width=r,a.height=s,a.data=m,a}function Ob(a,{width:r,height:s},d){if(r===a.width&&s===a.height)return;const m=j0({},{width:r,height:s},d);G0(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,r),height:Math.min(a.height,s)},d),a.width=r,a.height=s,a.data=m.data}function G0(a,r,s,d,m,_){if(m.width===0||m.height===0)return r;if(m.width>a.width||m.height>a.height||s.x>a.width-m.width||s.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||d.x>r.width-m.width||d.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const v=a.data,b=r.data;if(v===b)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<m.height;k++){const I=((s.y+k)*a.width+s.x)*_,D=((d.y+k)*r.width+d.x)*_;for(let F=0;F<m.width*_;F++)b[D+F]=v[I+F]}return r}class sd{constructor(r,s){j0(this,r,1,s)}resize(r){Ob(this,r,1)}clone(){return new sd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,m,_){G0(r,s,d,m,_,1)}}class so{constructor(r,s){j0(this,r,4,s)}resize(r){Ob(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,m,_){G0(r,s,d,m,_,4)}}function $b(a){const r={},s=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new so({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(v,b,k)=>{r[a.evaluationKey]=k;const I=a.expression.evaluate(r);m.data[v+b+0]=Math.floor(255*I.r/I.a),m.data[v+b+1]=Math.floor(255*I.g/I.a),m.data[v+b+2]=Math.floor(255*I.b/I.a),m.data[v+b+3]=Math.floor(255*I.a)};if(a.clips)for(let v=0,b=0;v<d;++v,b+=4*s)for(let k=0,I=0;k<s;k++,I+=4){const D=k/(s-1),{start:F,end:$}=a.clips[v];_(b,I,F*(1-D)+$*D)}else for(let v=0,b=0;v<s;v++,b+=4)_(0,b,v/(s-1));return m}let Bb;it("AlphaImage",sd),it("RGBAImage",so);var iz={get paint(){return Bb=Bb||new di({"hillshade-illumination-direction":new ht(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ht(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ht(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ht(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ht(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ht(Ce.paint_hillshade["hillshade-accent-color"])})}};const oz=cr([{name:"a_pos",components:2,type:"Int16"}],4),{members:az}=oz;var W0={exports:{}};function Vp(a,r,s){s=s||2;var d,m,_,v,b,k,I,D=r&&r.length,F=D?r[0]*s:a.length,$=Vb(a,0,F,s,!0),U=[];if(!$||$.next===$.prev)return U;if(D&&($=function(ne,Q,de,ve){var ce,xe,Se,Me=[];for(ce=0,xe=Q.length;ce<xe;ce++)(Se=Vb(ne,Q[ce]*ve,ce<xe-1?Q[ce+1]*ve:ne.length,ve,!1))===Se.next&&(Se.steiner=!0),Me.push(pz(Se));for(Me.sort(hz),ce=0;ce<Me.length;ce++)de=dz(Me[ce],de);return de}(a,r,$,s)),a.length>80*s){d=_=a[0],m=v=a[1];for(var q=s;q<F;q+=s)(b=a[q])<d&&(d=b),(k=a[q+1])<m&&(m=k),b>_&&(_=b),k>v&&(v=k);I=(I=Math.max(_-d,v-m))!==0?32767/I:0}return ld($,U,s,d,m,I,0),U}function Vb(a,r,s,d,m){var _,v;if(m===H0(a,r,s,d)>0)for(_=r;_<s;_+=d)v=jb(_,a[_],a[_+1],v);else for(_=s-d;_>=r;_-=d)v=jb(_,a[_],a[_+1],v);return v&&Np(v,v.next)&&(cd(v),v=v.next),v}function Fl(a,r){if(!a)return a;r||(r=a);var s,d=a;do if(s=!1,d.steiner||!Np(d,d.next)&&rr(d.prev,d,d.next)!==0)d=d.next;else{if(cd(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function ld(a,r,s,d,m,_,v){if(a){!v&&_&&function(D,F,$,U){var q=D;do q.z===0&&(q.z=q0(q.x,q.y,F,$,U)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==D);q.prevZ.nextZ=null,q.prevZ=null,function(ne){var Q,de,ve,ce,xe,Se,Me,rt,st=1;do{for(de=ne,ne=null,xe=null,Se=0;de;){for(Se++,ve=de,Me=0,Q=0;Q<st&&(Me++,ve=ve.nextZ);Q++);for(rt=st;Me>0||rt>0&&ve;)Me!==0&&(rt===0||!ve||de.z<=ve.z)?(ce=de,de=de.nextZ,Me--):(ce=ve,ve=ve.nextZ,rt--),xe?xe.nextZ=ce:ne=ce,ce.prevZ=xe,xe=ce;de=ve}xe.nextZ=null,st*=2}while(Se>1)}(q)}(a,d,m,_);for(var b,k,I=a;a.prev!==a.next;)if(b=a.prev,k=a.next,_?lz(a,d,m,_):sz(a))r.push(b.i/s|0),r.push(a.i/s|0),r.push(k.i/s|0),cd(a),a=k.next,I=k.next;else if((a=k)===I){v?v===1?ld(a=uz(Fl(a),r,s),r,s,d,m,_,2):v===2&&cz(a,r,s,d,m,_):ld(Fl(a),r,s,d,m,_,1);break}}}function sz(a){var r=a.prev,s=a,d=a.next;if(rr(r,s,d)>=0)return!1;for(var m=r.x,_=s.x,v=d.x,b=r.y,k=s.y,I=d.y,D=m<_?m<v?m:v:_<v?_:v,F=b<k?b<I?b:I:k<I?k:I,$=m>_?m>v?m:v:_>v?_:v,U=b>k?b>I?b:I:k>I?k:I,q=d.next;q!==r;){if(q.x>=D&&q.x<=$&&q.y>=F&&q.y<=U&&Qu(m,b,_,k,v,I,q.x,q.y)&&rr(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function lz(a,r,s,d){var m=a.prev,_=a,v=a.next;if(rr(m,_,v)>=0)return!1;for(var b=m.x,k=_.x,I=v.x,D=m.y,F=_.y,$=v.y,U=b<k?b<I?b:I:k<I?k:I,q=D<F?D<$?D:$:F<$?F:$,ne=b>k?b>I?b:I:k>I?k:I,Q=D>F?D>$?D:$:F>$?F:$,de=q0(U,q,r,s,d),ve=q0(ne,Q,r,s,d),ce=a.prevZ,xe=a.nextZ;ce&&ce.z>=de&&xe&&xe.z<=ve;){if(ce.x>=U&&ce.x<=ne&&ce.y>=q&&ce.y<=Q&&ce!==m&&ce!==v&&Qu(b,D,k,F,I,$,ce.x,ce.y)&&rr(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,xe.x>=U&&xe.x<=ne&&xe.y>=q&&xe.y<=Q&&xe!==m&&xe!==v&&Qu(b,D,k,F,I,$,xe.x,xe.y)&&rr(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;ce&&ce.z>=de;){if(ce.x>=U&&ce.x<=ne&&ce.y>=q&&ce.y<=Q&&ce!==m&&ce!==v&&Qu(b,D,k,F,I,$,ce.x,ce.y)&&rr(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;xe&&xe.z<=ve;){if(xe.x>=U&&xe.x<=ne&&xe.y>=q&&xe.y<=Q&&xe!==m&&xe!==v&&Qu(b,D,k,F,I,$,xe.x,xe.y)&&rr(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function uz(a,r,s){var d=a;do{var m=d.prev,_=d.next.next;!Np(m,_)&&Nb(m,d,d.next,_)&&ud(m,_)&&ud(_,m)&&(r.push(m.i/s|0),r.push(d.i/s|0),r.push(_.i/s|0),cd(d),cd(d.next),d=a=_),d=d.next}while(d!==a);return Fl(d)}function cz(a,r,s,d,m,_){var v=a;do{for(var b=v.next.next;b!==v.prev;){if(v.i!==b.i&&mz(v,b)){var k=Ub(v,b);return v=Fl(v,v.next),k=Fl(k,k.next),ld(v,r,s,d,m,_,0),void ld(k,r,s,d,m,_,0)}b=b.next}v=v.next}while(v!==a)}function hz(a,r){return a.x-r.x}function dz(a,r){var s=function(m,_){var v,b=_,k=m.x,I=m.y,D=-1/0;do{if(I<=b.y&&I>=b.next.y&&b.next.y!==b.y){var F=b.x+(I-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(F<=k&&F>D&&(D=F,v=b.x<b.next.x?b:b.next,F===k))return v}b=b.next}while(b!==_);if(!v)return null;var $,U=v,q=v.x,ne=v.y,Q=1/0;b=v;do k>=b.x&&b.x>=q&&k!==b.x&&Qu(I<ne?k:D,I,q,ne,I<ne?D:k,I,b.x,b.y)&&($=Math.abs(I-b.y)/(k-b.x),ud(b,m)&&($<Q||$===Q&&(b.x>v.x||b.x===v.x&&fz(v,b)))&&(v=b,Q=$)),b=b.next;while(b!==U);return v}(a,r);if(!s)return r;var d=Ub(s,a);return Fl(d,d.next),Fl(s,s.next)}function fz(a,r){return rr(a.prev,a,r.prev)<0&&rr(r.next,a,a.next)<0}function q0(a,r,s,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function pz(a){var r=a,s=a;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==a);return s}function Qu(a,r,s,d,m,_,v,b){return(m-v)*(r-b)>=(a-v)*(_-b)&&(a-v)*(d-b)>=(s-v)*(r-b)&&(s-v)*(_-b)>=(m-v)*(d-b)}function mz(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(s,d){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==d.i&&m.next.i!==d.i&&Nb(m,m.next,s,d))return!0;m=m.next}while(m!==s);return!1}(a,r)&&(ud(a,r)&&ud(r,a)&&function(s,d){var m=s,_=!1,v=(s.x+d.x)/2,b=(s.y+d.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&v<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==s);return _}(a,r)&&(rr(a.prev,a,r.prev)||rr(a,r.prev,r))||Np(a,r)&&rr(a.prev,a,a.next)>0&&rr(r.prev,r,r.next)>0)}function rr(a,r,s){return(r.y-a.y)*(s.x-r.x)-(r.x-a.x)*(s.y-r.y)}function Np(a,r){return a.x===r.x&&a.y===r.y}function Nb(a,r,s,d){var m=jp(rr(a,r,s)),_=jp(rr(a,r,d)),v=jp(rr(s,d,a)),b=jp(rr(s,d,r));return m!==_&&v!==b||!(m!==0||!Up(a,s,r))||!(_!==0||!Up(a,d,r))||!(v!==0||!Up(s,a,d))||!(b!==0||!Up(s,r,d))}function Up(a,r,s){return r.x<=Math.max(a.x,s.x)&&r.x>=Math.min(a.x,s.x)&&r.y<=Math.max(a.y,s.y)&&r.y>=Math.min(a.y,s.y)}function jp(a){return a>0?1:a<0?-1:0}function ud(a,r){return rr(a.prev,a,a.next)<0?rr(a,r,a.next)>=0&&rr(a,a.prev,r)>=0:rr(a,r,a.prev)<0||rr(a,a.next,r)<0}function Ub(a,r){var s=new Z0(a.i,a.x,a.y),d=new Z0(r.i,r.x,r.y),m=a.next,_=r.prev;return a.next=r,r.prev=a,s.next=m,m.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function jb(a,r,s,d){var m=new Z0(a,r,s);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function cd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Z0(a,r,s){this.i=a,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function H0(a,r,s,d){for(var m=0,_=r,v=s-d;_<s;_+=d)m+=(a[v]-a[_])*(a[_+1]+a[v+1]),v=_;return m}W0.exports=Vp,W0.exports.default=Vp,Vp.deviation=function(a,r,s,d){var m=r&&r.length,_=Math.abs(H0(a,0,m?r[0]*s:a.length,s));if(m)for(var v=0,b=r.length;v<b;v++)_-=Math.abs(H0(a,r[v]*s,v<b-1?r[v+1]*s:a.length,s));var k=0;for(v=0;v<d.length;v+=3){var I=d[v]*s,D=d[v+1]*s,F=d[v+2]*s;k+=Math.abs((a[I]-a[F])*(a[D+1]-a[I+1])-(a[I]-a[D])*(a[F+1]-a[I+1]))}return _===0&&k===0?0:Math.abs((k-_)/_)},Vp.flatten=function(a){for(var r=a[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,m=0;m<a.length;m++){for(var _=0;_<a[m].length;_++)for(var v=0;v<r;v++)s.vertices.push(a[m][_][v]);m>0&&s.holes.push(d+=a[m-1].length)}return s};var Gb=S(W0.exports);function gz(a,r,s,d,m){Wb(a,r,s||0,d||a.length-1,m||yz)}function Wb(a,r,s,d,m){for(;d>s;){if(d-s>600){var _=d-s+1,v=r-s+1,b=Math.log(_),k=.5*Math.exp(2*b/3),I=.5*Math.sqrt(b*k*(_-k)/_)*(v-_/2<0?-1:1);Wb(a,r,Math.max(s,Math.floor(r-v*k/_+I)),Math.min(d,Math.floor(r+(_-v)*k/_+I)),m)}var D=a[r],F=s,$=d;for(hd(a,s,r),m(a[d],D)>0&&hd(a,s,d);F<$;){for(hd(a,F,$),F++,$--;m(a[F],D)<0;)F++;for(;m(a[$],D)>0;)$--}m(a[s],D)===0?hd(a,s,$):hd(a,++$,d),$<=r&&(s=$+1),r<=$&&(d=$-1)}}function hd(a,r,s){var d=a[r];a[r]=a[s],a[s]=d}function yz(a,r){return a<r?-1:a>r?1:0}function X0(a,r){const s=a.length;if(s<=1)return[a];const d=[];let m,_;for(let v=0;v<s;v++){const b=$t(a[v]);b!==0&&(a[v].area=Math.abs(b),_===void 0&&(_=b<0),_===b<0?(m&&d.push(m),m=[a[v]]):m.push(a[v]))}if(m&&d.push(m),r>1)for(let v=0;v<d.length;v++)d[v].length<=r||(gz(d[v],r,1,d[v].length-1,_z),d[v]=d[v].slice(0,r));return d}function _z(a,r){return r.area-a.area}function K0(a,r,s){const d=s.patternDependencies;let m=!1;for(const _ of r){const v=_.paint.get(`${a}-pattern`);v.isConstant()||(m=!0);const b=v.constantOr(null);b&&(m=!0,d[b.to]=!0,d[b.from]=!0)}return m}function Y0(a,r,s,d,m){const _=m.patternDependencies;for(const v of r){const b=v.paint.get(`${a}-pattern`).value;if(b.kind!=="constant"){let k=b.evaluate({zoom:d-1},s,{},m.availableImages),I=b.evaluate({zoom:d},s,{},m.availableImages),D=b.evaluate({zoom:d+1},s,{},m.availableImages);k=k&&k.name?k.name:k,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,_[k]=!0,_[I]=!0,_[D]=!0,s.patterns[v.id]={min:k,mid:I,max:D}}}return s}class J0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ee,this.indexArray=new Fe,this.indexArray2=new tt,this.programConfigurations=new Qo(r.layers,r.zoom),this.segments=new He,this.segments2=new He,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=K0("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),v=[];for(const{feature:b,id:k,index:I,sourceLayerIndex:D}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Ll(b,F);if(!this.layers[0]._featureFilter.filter(new In(this.zoom),$,d))continue;const U=_?m.evaluate($,{},d,s.availableImages):void 0,q={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:I,geometry:F?$.geometry:ea(b),patterns:{},sortKey:U};v.push(q)}_&&v.sort((b,k)=>b.sortKey-k.sortKey);for(const b of v){const{geometry:k,index:I,sourceLayerIndex:D}=b;if(this.hasPattern){const F=Y0("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(b,k,I,d,{});s.featureIndex.insert(r[I].feature,k,I,D,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,az),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,d,m,_){for(const v of X0(s,500)){let b=0;for(const U of v)b+=U.length;const k=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),I=k.vertexLength,D=[],F=[];for(const U of v){if(U.length===0)continue;U!==v[0]&&F.push(D.length/2);const q=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),ne=q.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(ne+U.length-1,ne),D.push(U[0].x),D.push(U[0].y);for(let Q=1;Q<U.length;Q++)this.layoutVertexArray.emplaceBack(U[Q].x,U[Q].y),this.indexArray2.emplaceBack(ne+Q-1,ne+Q),D.push(U[Q].x),D.push(U[Q].y);q.vertexLength+=U.length,q.primitiveLength+=U.length}const $=Gb(D,F);for(let U=0;U<$.length;U+=3)this.indexArray.emplaceBack(I+$[U],I+$[U+1],I+$[U+2]);k.vertexLength+=b,k.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,m)}}let qb,Zb;it("FillBucket",J0,{omit:["layers","patternFeatures"]});var vz={get paint(){return Zb=Zb||new di({"fill-antialias":new ht(Ce.paint_fill["fill-antialias"]),"fill-opacity":new Et(Ce.paint_fill["fill-opacity"]),"fill-color":new Et(Ce.paint_fill["fill-color"]),"fill-outline-color":new Et(Ce.paint_fill["fill-outline-color"]),"fill-translate":new ht(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new ht(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Al(Ce.paint_fill["fill-pattern"])})},get layout(){return qb=qb||new di({"fill-sort-key":new Et(Ce.layout_fill["fill-sort-key"])})}};const xz=cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wz=cr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:bz}=xz;var Is={},Sz=w,Hb=ec;function ec(a,r,s,d,m){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(Ez,this,r)}function Ez(a,r,s){a==1?r.id=s.readVarint():a==2?function(d,m){for(var _=d.readVarint()+d.pos;d.pos<_;){var v=m._keys[d.readVarint()],b=m._values[d.readVarint()];m.properties[v]=b}}(s,r):a==3?r.type=s.readVarint():a==4&&(r._geometry=s.pos)}function kz(a){for(var r,s,d=0,m=0,_=a.length,v=_-1;m<_;v=m++)d+=((s=a[v]).x-(r=a[m]).x)*(r.y+s.y);return d}ec.types=["Unknown","Point","LineString","Polygon"],ec.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,s=a.readVarint()+a.pos,d=1,m=0,_=0,v=0,b=[];a.pos<s;){if(m<=0){var k=a.readVarint();d=7&k,m=k>>3}if(m--,d===1||d===2)_+=a.readSVarint(),v+=a.readSVarint(),d===1&&(r&&b.push(r),r=[]),r.push(new Sz(_,v));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&b.push(r),b},ec.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,s=1,d=0,m=0,_=0,v=1/0,b=-1/0,k=1/0,I=-1/0;a.pos<r;){if(d<=0){var D=a.readVarint();s=7&D,d=D>>3}if(d--,s===1||s===2)(m+=a.readSVarint())<v&&(v=m),m>b&&(b=m),(_+=a.readSVarint())<k&&(k=_),_>I&&(I=_);else if(s!==7)throw new Error("unknown command "+s)}return[v,k,b,I]},ec.prototype.toGeoJSON=function(a,r,s){var d,m,_=this.extent*Math.pow(2,s),v=this.extent*a,b=this.extent*r,k=this.loadGeometry(),I=ec.types[this.type];function D(U){for(var q=0;q<U.length;q++){var ne=U[q];U[q]=[360*(ne.x+v)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+b)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(d=0;d<k.length;d++)F[d]=k[d][0];D(k=F);break;case 2:for(d=0;d<k.length;d++)D(k[d]);break;case 3:for(k=function(U){var q=U.length;if(q<=1)return[U];for(var ne,Q,de=[],ve=0;ve<q;ve++){var ce=kz(U[ve]);ce!==0&&(Q===void 0&&(Q=ce<0),Q===ce<0?(ne&&de.push(ne),ne=[U[ve]]):ne.push(U[ve]))}return ne&&de.push(ne),de}(k),d=0;d<k.length;d++)for(m=0;m<k[d].length;m++)D(k[d][m])}k.length===1?k=k[0]:I="Multi"+I;var $={type:"Feature",geometry:{type:I,coordinates:k},properties:this.properties};return"id"in this&&($.id=this.id),$};var Tz=Hb,Xb=Kb;function Kb(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Cz,this,r),this.length=this._features.length}function Cz(a,r,s){a===15?r.version=s.readVarint():a===1?r.name=s.readString():a===5?r.extent=s.readVarint():a===2?r._features.push(s.pos):a===3?r._keys.push(s.readString()):a===4&&r._values.push(function(d){for(var m=null,_=d.readVarint()+d.pos;d.pos<_;){var v=d.readVarint()>>3;m=v===1?d.readString():v===2?d.readFloat():v===3?d.readDouble():v===4?d.readVarint64():v===5?d.readVarint():v===6?d.readSVarint():v===7?d.readBoolean():null}return m}(s))}Kb.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new Tz(this._pbf,r,this.extent,this._keys,this._values)};var Pz=Xb;function Iz(a,r,s){if(a===3){var d=new Pz(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}Is.VectorTile=function(a,r){this.layers=a.readFields(Iz,{},r)},Is.VectorTileFeature=Hb,Is.VectorTileLayer=Xb;const Mz=Is.VectorTileFeature.types,Q0=Math.pow(2,13);function dd(a,r,s,d,m,_,v,b){a.emplaceBack(r,s,2*Math.floor(d*Q0)+v,m*Q0*2,_*Q0*2,Math.round(b))}class e_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.centroidVertexArray=new te,this.indexArray=new Fe,this.programConfigurations=new Qo(r.layers,r.zoom),this.segments=new He,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.features=[],this.hasPattern=K0("fill-extrusion",this.layers,s);for(const{feature:m,id:_,index:v,sourceLayerIndex:b}of r){const k=this.layers[0]._featureFilter.needGeometry,I=Ll(m,k);if(!this.layers[0]._featureFilter.filter(new In(this.zoom),I,d))continue;const D={id:_,sourceLayerIndex:b,index:v,geometry:k?I.geometry:ea(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Y0("fill-extrusion",this.layers,D,this.zoom,s)):this.addFeature(D,D.geometry,v,d,{}),s.featureIndex.insert(m,D.geometry,v,b,this.index,!0)}}addFeatures(r,s,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,s,d)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bz),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,wz.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,d,m,_){const v={x:0,y:0,vertexCount:0};for(const b of X0(s,500)){let k=0;for(const q of b)k+=q.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of b){if(q.length===0||zz(q))continue;let ne=0;for(let Q=0;Q<q.length;Q++){const de=q[Q];if(Q>=1){const ve=q[Q-1];if(!Az(de,ve)){I.vertexLength+4>He.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ce=de.sub(ve)._perp()._unit(),xe=ve.dist(de);ne+xe>32768&&(ne=0),dd(this.layoutVertexArray,de.x,de.y,ce.x,ce.y,0,0,ne),dd(this.layoutVertexArray,de.x,de.y,ce.x,ce.y,0,1,ne),v.x+=2*de.x,v.y+=2*de.y,v.vertexCount+=2,ne+=xe,dd(this.layoutVertexArray,ve.x,ve.y,ce.x,ce.y,0,0,ne),dd(this.layoutVertexArray,ve.x,ve.y,ce.x,ce.y,0,1,ne),v.x+=2*ve.x,v.y+=2*ve.y,v.vertexCount+=2;const Se=I.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+k>He.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),Mz[r.type]!=="Polygon")continue;const D=[],F=[],$=I.vertexLength;for(const q of b)if(q.length!==0){q!==b[0]&&F.push(D.length/2);for(let ne=0;ne<q.length;ne++){const Q=q[ne];dd(this.layoutVertexArray,Q.x,Q.y,0,0,1,1,0),v.x+=Q.x,v.y+=Q.y,v.vertexCount+=1,D.push(Q.x),D.push(Q.y)}}const U=Gb(D,F);for(let q=0;q<U.length;q+=3)this.indexArray.emplaceBack($+U[q],$+U[q+2],$+U[q+1]);I.primitiveLength+=U.length/3,I.vertexLength+=k}for(let b=0;b<v.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(v.x/v.vertexCount),Math.floor(v.y/v.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,m)}}function Az(a,r){return a.x===r.x&&(a.x<0||a.x>Mn)||a.y===r.y&&(a.y<0||a.y>Mn)}function zz(a){return a.every(r=>r.x<0)||a.every(r=>r.x>Mn)||a.every(r=>r.y<0)||a.every(r=>r.y>Mn)}let Yb;it("FillExtrusionBucket",e_,{omit:["layers","features"]});var Dz={get paint(){return Yb=Yb||new di({"fill-extrusion-opacity":new ht(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Et(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ht(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ht(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Al(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Et(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Et(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ht(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function fd(a,r){return a.x*r.x+a.y*r.y}function Jb(a,r){if(a.length===1){let s=0;const d=r[s++];let m;for(;!m||d.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const _=r[s],v=a[0],b=m.sub(d),k=_.sub(d),I=v.sub(d),D=fd(b,b),F=fd(b,k),$=fd(k,k),U=fd(I,b),q=fd(I,k),ne=D*$-F*F,Q=($*U-F*q)/ne,de=(D*q-F*U)/ne,ve=d.z*(1-Q-de)+m.z*Q+_.z*de;if(isFinite(ve))return ve}return 1/0}{let s=1/0;for(const d of r)s=Math.min(s,d.z);return s}}const Rz=cr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Lz}=Rz,Fz=cr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Oz}=Fz,$z=Is.VectorTileFeature.types,Bz=Math.cos(Math.PI/180*37.5),Qb=Math.pow(2,14)/.5;class t_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new he,this.layoutVertexArray2=new be,this.indexArray=new Fe,this.programConfigurations=new Qo(r.layers,r.zoom),this.segments=new He,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=K0("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),v=[];for(const{feature:b,id:k,index:I,sourceLayerIndex:D}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Ll(b,F);if(!this.layers[0]._featureFilter.filter(new In(this.zoom),$,d))continue;const U=_?m.evaluate($,{},d):void 0,q={id:k,properties:b.properties,type:b.type,sourceLayerIndex:D,index:I,geometry:F?$.geometry:ea(b),patterns:{},sortKey:U};v.push(q)}_&&v.sort((b,k)=>b.sortKey-k.sortKey);for(const b of v){const{geometry:k,index:I,sourceLayerIndex:D}=b;if(this.hasPattern){const F=Y0("line",this.layers,b,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(b,k,I,d,{});s.featureIndex.insert(r[I].feature,k,I,D,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Oz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Lz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,d,m,_){const v=this.layers[0].layout,b=v.get("line-join").evaluate(r,{}),k=v.get("line-cap"),I=v.get("line-miter-limit"),D=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const F of s)this.addLine(F,r,b,k,I,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,m)}addLine(r,s,d,m,_,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<r.length-1;de++)this.totalDistance+=r[de].dist(r[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=$z[s.type]==="Polygon";let k=r.length;for(;k>=2&&r[k-1].equals(r[k-2]);)k--;let I=0;for(;I<k-1&&r[I].equals(r[I+1]);)I++;if(k<(b?3:2))return;d==="bevel"&&(_=1.05);const D=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let $,U,q,ne,Q;this.e1=this.e2=-1,b&&($=r[k-2],Q=r[I].sub($)._unit()._perp());for(let de=I;de<k;de++){if(q=de===k-1?b?r[I+1]:void 0:r[de+1],q&&r[de].equals(q))continue;Q&&(ne=Q),$&&(U=$),$=r[de],Q=q?q.sub($)._unit()._perp():ne,ne=ne||Q;let ve=ne.add(Q);ve.x===0&&ve.y===0||ve._unit();const ce=ne.x*Q.x+ne.y*Q.y,xe=ve.x*Q.x+ve.y*Q.y,Se=xe!==0?1/xe:1/0,Me=2*Math.sqrt(2-2*xe),rt=xe<Bz&&U&&q,st=ne.x*Q.y-ne.y*Q.x>0;if(rt&&de>I){const qe=$.dist(U);if(qe>2*D){const et=$.sub($.sub(U)._mult(D/qe)._round());this.updateDistance(U,et),this.addCurrentVertex(et,ne,0,0,F),U=et}}const Je=U&&q;let Xe=Je?d:b?"butt":m;if(Je&&Xe==="round"&&(Se<v?Xe="miter":Se<=2&&(Xe="fakeround")),Xe==="miter"&&Se>_&&(Xe="bevel"),Xe==="bevel"&&(Se>2&&(Xe="flipbevel"),Se<_&&(Xe="miter")),U&&this.updateDistance(U,$),Xe==="miter")ve._mult(Se),this.addCurrentVertex($,ve,0,0,F);else if(Xe==="flipbevel"){if(Se>100)ve=Q.mult(-1);else{const qe=Se*ne.add(Q).mag()/ne.sub(Q).mag();ve._perp()._mult(qe*(st?-1:1))}this.addCurrentVertex($,ve,0,0,F),this.addCurrentVertex($,ve.mult(-1),0,0,F)}else if(Xe==="bevel"||Xe==="fakeround"){const qe=-Math.sqrt(Se*Se-1),et=st?qe:0,Ke=st?0:qe;if(U&&this.addCurrentVertex($,ne,et,Ke,F),Xe==="fakeround"){const Be=Math.round(180*Me/Math.PI/20);for(let xt=1;xt<Be;xt++){let ct=xt/Be;if(ct!==.5){const Tn=ct-.5;ct+=ct*Tn*(ct-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*Tn*Tn+(.848013+ce*(.215638*ce-1.06021)))}const Ut=Q.sub(ne)._mult(ct)._add(ne)._unit()._mult(st?-1:1);this.addHalfVertex($,Ut.x,Ut.y,!1,st,0,F)}}q&&this.addCurrentVertex($,Q,-et,-Ke,F)}else if(Xe==="butt")this.addCurrentVertex($,ve,0,0,F);else if(Xe==="square"){const qe=U?1:-1;this.addCurrentVertex($,ve,qe,qe,F)}else Xe==="round"&&(U&&(this.addCurrentVertex($,ne,0,0,F),this.addCurrentVertex($,ne,1,1,F,!0)),q&&(this.addCurrentVertex($,Q,-1,-1,F,!0),this.addCurrentVertex($,Q,0,0,F)));if(rt&&de<k-1){const qe=$.dist(q);if(qe>2*D){const et=$.add(q.sub($)._mult(D/qe)._round());this.updateDistance($,et),this.addCurrentVertex(et,Q,0,0,F),$=et}}}}addCurrentVertex(r,s,d,m,_,v=!1){const b=s.y*m-s.x,k=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*d,s.y-s.x*d,v,!1,d,_),this.addHalfVertex(r,b,k,v,!0,-m,_),this.distance>Qb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,d,m,_,v))}addHalfVertex({x:r,y:s},d,m,_,v,b,k){const I=.5*(this.lineClips?this.scaledDistance*(Qb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(_?1:0),(s<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),k.primitiveLength++),v?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let e2,t2;it("LineBucket",t_,{omit:["layers","patternFeatures"]});var n2={get paint(){return t2=t2||new di({"line-opacity":new Et(Ce.paint_line["line-opacity"]),"line-color":new Et(Ce.paint_line["line-color"]),"line-translate":new ht(Ce.paint_line["line-translate"]),"line-translate-anchor":new ht(Ce.paint_line["line-translate-anchor"]),"line-width":new Et(Ce.paint_line["line-width"]),"line-gap-width":new Et(Ce.paint_line["line-gap-width"]),"line-offset":new Et(Ce.paint_line["line-offset"]),"line-blur":new Et(Ce.paint_line["line-blur"]),"line-dasharray":new Jh(Ce.paint_line["line-dasharray"]),"line-pattern":new Al(Ce.paint_line["line-pattern"]),"line-gradient":new Qh(Ce.paint_line["line-gradient"])})},get layout(){return e2=e2||new di({"line-cap":new ht(Ce.layout_line["line-cap"]),"line-join":new Et(Ce.layout_line["line-join"]),"line-miter-limit":new ht(Ce.layout_line["line-miter-limit"]),"line-round-limit":new ht(Ce.layout_line["line-round-limit"]),"line-sort-key":new Et(Ce.layout_line["line-sort-key"])})}};class Vz extends Et{possiblyEvaluate(r,s){return s=new In(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,d,m){return s=K({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,d,m)}}let Gp;function r2(a,r){return r>0?r+2*a:a}const Nz=cr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Uz=cr([{name:"a_projected_pos",components:3,type:"Float32"}],4);cr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jz=cr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);cr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const i2=cr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gz=cr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wz(a,r,s){return a.sections.forEach(d=>{d.text=function(m,_,v){const b=_.layout.get("text-transform").evaluate(v,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),Hi.applyArabicShaping&&(m=Hi.applyArabicShaping(m)),m}(d.text,r,s)}),a}cr([{name:"triangle",components:3,type:"Uint16"}]),cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),cr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),cr([{type:"Float32",name:"offsetX"}]),cr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const pd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ar=24,o2=yn,a2=function(a,r,s,d,m){var _,v,b=8*m-d-1,k=(1<<b)-1,I=k>>1,D=-7,F=s?m-1:0,$=s?-1:1,U=a[r+F];for(F+=$,_=U&(1<<-D)-1,U>>=-D,D+=b;D>0;_=256*_+a[r+F],F+=$,D-=8);for(v=_&(1<<-D)-1,_>>=-D,D+=d;D>0;v=256*v+a[r+F],F+=$,D-=8);if(_===0)_=1-I;else{if(_===k)return v?NaN:1/0*(U?-1:1);v+=Math.pow(2,d),_-=I}return(U?-1:1)*v*Math.pow(2,_-d)},s2=function(a,r,s,d,m,_){var v,b,k,I=8*_-m-1,D=(1<<I)-1,F=D>>1,$=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=d?0:_-1,q=d?1:-1,ne=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,v=D):(v=Math.floor(Math.log(r)/Math.LN2),r*(k=Math.pow(2,-v))<1&&(v--,k*=2),(r+=v+F>=1?$/k:$*Math.pow(2,1-F))*k>=2&&(v++,k/=2),v+F>=D?(b=0,v=D):v+F>=1?(b=(r*k-1)*Math.pow(2,m),v+=F):(b=r*Math.pow(2,F-1)*Math.pow(2,m),v=0));m>=8;a[s+U]=255&b,U+=q,b/=256,m-=8);for(v=v<<m|b,I+=m;I>0;a[s+U]=255&v,U+=q,v/=256,I-=8);a[s+U-q]|=128*ne};function yn(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}yn.Varint=0,yn.Fixed64=1,yn.Bytes=2,yn.Fixed32=5;var n_=4294967296,l2=1/n_,u2=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Wa(a){return a.type===yn.Bytes?a.readVarint()+a.pos:a.pos+1}function tc(a,r,s){return s?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function c2(a,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var m=s.pos-1;m>=a;m--)s.buf[m+d]=s.buf[m]}function qz(a,r){for(var s=0;s<a.length;s++)r.writeVarint(a[s])}function Zz(a,r){for(var s=0;s<a.length;s++)r.writeSVarint(a[s])}function Hz(a,r){for(var s=0;s<a.length;s++)r.writeFloat(a[s])}function Xz(a,r){for(var s=0;s<a.length;s++)r.writeDouble(a[s])}function Kz(a,r){for(var s=0;s<a.length;s++)r.writeBoolean(a[s])}function Yz(a,r){for(var s=0;s<a.length;s++)r.writeFixed32(a[s])}function Jz(a,r){for(var s=0;s<a.length;s++)r.writeSFixed32(a[s])}function Qz(a,r){for(var s=0;s<a.length;s++)r.writeFixed64(a[s])}function e5(a,r){for(var s=0;s<a.length;s++)r.writeSFixed64(a[s])}function Wp(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function nc(a,r,s){a[s]=r,a[s+1]=r>>>8,a[s+2]=r>>>16,a[s+3]=r>>>24}function h2(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}yn.prototype={destroy:function(){this.buf=null},readFields:function(a,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),m=d>>3,_=this.pos;this.type=7&d,a(m,r,this),this.pos===_&&this.skip(d)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=Wp(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=h2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Wp(this.buf,this.pos)+Wp(this.buf,this.pos+4)*n_;return this.pos+=8,a},readSFixed64:function(){var a=Wp(this.buf,this.pos)+h2(this.buf,this.pos+4)*n_;return this.pos+=8,a},readFloat:function(){var a=a2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=a2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(m,_,v){var b,k,I=v.buf;if(b=(112&(k=I[v.pos++]))>>4,k<128||(b|=(127&(k=I[v.pos++]))<<3,k<128)||(b|=(127&(k=I[v.pos++]))<<10,k<128)||(b|=(127&(k=I[v.pos++]))<<17,k<128)||(b|=(127&(k=I[v.pos++]))<<24,k<128)||(b|=(1&(k=I[v.pos++]))<<31,k<128))return tc(m,b,_);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&u2?function(s,d,m){return u2.decode(s.subarray(d,m))}(this.buf,r,a):function(s,d,m){for(var _="",v=d;v<m;){var b,k,I,D=s[v],F=null,$=D>239?4:D>223?3:D>191?2:1;if(v+$>m)break;$===1?D<128&&(F=D):$===2?(192&(b=s[v+1]))==128&&(F=(31&D)<<6|63&b)<=127&&(F=null):$===3?(k=s[v+2],(192&(b=s[v+1]))==128&&(192&k)==128&&((F=(15&D)<<12|(63&b)<<6|63&k)<=2047||F>=55296&&F<=57343)&&(F=null)):$===4&&(k=s[v+2],I=s[v+3],(192&(b=s[v+1]))==128&&(192&k)==128&&(192&I)==128&&((F=(15&D)<<18|(63&b)<<12|(63&k)<<6|63&I)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,$=1):F>65535&&(F-=65536,_+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),_+=String.fromCharCode(F),v+=$}return _}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==yn.Bytes)return a.push(this.readVarint(r));var s=Wa(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==yn.Bytes)return a.push(this.readSVarint());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==yn.Bytes)return a.push(this.readBoolean());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==yn.Bytes)return a.push(this.readFloat());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==yn.Bytes)return a.push(this.readDouble());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==yn.Bytes)return a.push(this.readFixed32());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==yn.Bytes)return a.push(this.readSFixed32());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==yn.Bytes)return a.push(this.readFixed64());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==yn.Bytes)return a.push(this.readSFixed64());var r=Wa(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===yn.Varint)for(;this.buf[this.pos++]>127;);else if(r===yn.Bytes)this.pos=this.readVarint()+this.pos;else if(r===yn.Fixed32)this.pos+=4;else{if(r!==yn.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),nc(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),nc(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),nc(this.buf,-1&a,this.pos),nc(this.buf,Math.floor(a*l2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),nc(this.buf,-1&a,this.pos),nc(this.buf,Math.floor(a*l2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,s){var d,m;if(r>=0?(d=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,v,b){b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,b.buf[b.pos]=127&(_>>>=7)}(d,0,s),function(_,v){var b=(7&_)<<4;v.buf[v.pos++]|=b|((_>>>=3)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_)))))}(m,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(d,m,_){for(var v,b,k=0;k<m.length;k++){if((v=m.charCodeAt(k))>55295&&v<57344){if(!b){v>56319||k+1===m.length?(d[_++]=239,d[_++]=191,d[_++]=189):b=v;continue}if(v<56320){d[_++]=239,d[_++]=191,d[_++]=189,b=v;continue}v=b-55296<<10|v-56320|65536,b=null}else b&&(d[_++]=239,d[_++]=191,d[_++]=189,b=null);v<128?d[_++]=v:(v<2048?d[_++]=v>>6|192:(v<65536?d[_++]=v>>12|224:(d[_++]=v>>18|240,d[_++]=v>>12&63|128),d[_++]=v>>6&63|128),d[_++]=63&v|128)}return _}(this.buf,a,this.pos);var s=this.pos-r;s>=128&&c2(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),s2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),s2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,r){this.pos++;var s=this.pos;a(r,this);var d=this.pos-s;d>=128&&c2(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,r,s){this.writeTag(a,yn.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,qz,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,Zz,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,Kz,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,Hz,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,Xz,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,Yz,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,Jz,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,Qz,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,e5,r)},writeBytesField:function(a,r){this.writeTag(a,yn.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,yn.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,yn.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,yn.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,yn.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,yn.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,yn.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,yn.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,yn.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,yn.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,Boolean(r))}};var Ms,r_=S(o2);function t5(a,r,s){a===1&&s.readMessage(n5,r)}function n5(a,r,s){if(a===3){const{id:d,bitmap:m,width:_,height:v,left:b,top:k,advance:I}=s.readMessage(r5,{});r.push({id:d,bitmap:new sd({width:_+6,height:v+6},m),metrics:{width:_,height:v,left:b,top:k,advance:I}})}}function r5(a,r,s){a===1?r.id=s.readVarint():a===2?r.bitmap=s.readBytes():a===3?r.width=s.readVarint():a===4?r.height=s.readVarint():a===5?r.left=s.readSVarint():a===6?r.top=s.readSVarint():a===7&&(r.advance=s.readVarint())}function d2(a){let r=0,s=0;for(const v of a)r+=v.w*v.h,s=Math.max(s,v.w);a.sort((v,b)=>b.h-v.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,_=0;for(const v of a)for(let b=d.length-1;b>=0;b--){const k=d[b];if(!(v.w>k.w||v.h>k.h)){if(v.x=k.x,v.y=k.y,_=Math.max(_,v.y+v.h),m=Math.max(m,v.x+v.w),v.w===k.w&&v.h===k.h){const I=d.pop();b<d.length&&(d[b]=I)}else v.h===k.h?(k.x+=v.w,k.w-=v.w):v.w===k.w?(k.y+=v.h,k.h-=v.h):(d.push({x:k.x+v.w,y:k.y,w:k.w-v.w,h:v.h}),k.y+=v.h,k.h-=v.h);break}}return{w:m,h:_,fill:r/(m*_)||0}}class i_{constructor(r,{pixelRatio:s,version:d,stretchX:m,stretchY:_,content:v}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=_,this.content=v,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class f2{constructor(r,s){const d={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,d,_),this.addImages(s,m,_);const{w:v,h:b}=d2(_),k=new so({width:v||1,height:b||1});for(const I in r){const D=r[I],F=d[I].paddedRect;so.copy(D.data,k,{x:0,y:0},{x:F.x+1,y:F.y+1},D.data)}for(const I in s){const D=s[I],F=m[I].paddedRect,$=F.x+1,U=F.y+1,q=D.data.width,ne=D.data.height;so.copy(D.data,k,{x:0,y:0},{x:$,y:U},D.data),so.copy(D.data,k,{x:0,y:ne-1},{x:$,y:U-1},{width:q,height:1}),so.copy(D.data,k,{x:0,y:0},{x:$,y:U+ne},{width:q,height:1}),so.copy(D.data,k,{x:q-1,y:0},{x:$-1,y:U},{width:1,height:ne}),so.copy(D.data,k,{x:0,y:0},{x:$+q,y:U},{width:1,height:ne})}this.image=k,this.iconPositions=d,this.patternPositions=m}addImages(r,s,d){for(const m in r){const _=r[m],v={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(v),s[m]=new i_(v,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),s)}patchUpdatedImage(r,s,d){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,_]=r.tl;d.update(s.data,void 0,{x:m,y:_})}}it("ImagePosition",i_),it("ImageAtlas",f2),u.WritingMode=void 0,(Ms=u.WritingMode||(u.WritingMode={}))[Ms.none=0]="none",Ms[Ms.horizontal=1]="horizontal",Ms[Ms.vertical=2]="vertical",Ms[Ms.horizontalOnly=3]="horizontalOnly";const qp=-17;class md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const d=new md;return d.scale=r||1,d.fontStack=s,d}static forImage(r){const s=new md;return s.imageName=r,s}}class rc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const d=new rc;for(let m=0;m<r.sections.length;m++){const _=r.sections[m];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,_=r.charCodeAt(d-1)||null;s+=m&&Pp(m)&&!pd[r[d+1]]||_&&Pp(_)&&!pd[r[d-1]]||!pd[r[d]]?r[d]:pd[r[d]]}return s}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&Hp[this.text.charCodeAt(d)];d++)r++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Hp[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const d=new rc;return d.text=this.text.substring(r,s),d.sectionIndex=this.sectionIndex.slice(r,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(md.forText(r.scale,r.fontStack||s));const d=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(d)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void ke("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(md.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ke("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zp(a,r,s,d,m,_,v,b,k,I,D,F,$,U,q,ne){const Q=rc.fromFeature(a,m);let de;F===u.WritingMode.vertical&&Q.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:ce}=Hi;if(ve&&Q.sections.length===1){de=[];const Me=ve(Q.toString(),o_(Q,I,_,r,d,U,q));for(const rt of Me){const st=new rc;st.text=rt,st.sections=Q.sections;for(let Je=0;Je<rt.length;Je++)st.sectionIndex.push(0);de.push(st)}}else if(ce){de=[];const Me=ce(Q.text,Q.sectionIndex,o_(Q,I,_,r,d,U,q));for(const rt of Me){const st=new rc;st.text=rt[0],st.sectionIndex=rt[1],st.sections=Q.sections,de.push(st)}}else de=function(Me,rt){const st=[],Je=Me.text;let Xe=0;for(const qe of rt)st.push(Me.substring(Xe,qe)),Xe=qe;return Xe<Je.length&&st.push(Me.substring(Xe,Je.length)),st}(Q,o_(Q,I,_,r,d,U,q));const xe=[],Se={positionedLines:xe,text:Q.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Me,rt,st,Je,Xe,qe,et,Ke,Be,xt,ct,Ut){let Tn=0,An=qp,vr=0,uo=0;const Vr=Ke==="right"?1:Ke==="left"?0:.5;let hr=0;for(const dr of Xe){dr.trim();const Ur=dr.getMaxScale(),Yr=(Ur-1)*Ar,pi={positionedGlyphs:[],lineOffset:0};Me.positionedLines[hr]=pi;const Pi=pi.positionedGlyphs;let Ii=0;if(!dr.length()){An+=qe,++hr;continue}for(let jr=0;jr<dr.length();jr++){const jt=dr.getSection(jr),Xi=dr.getSectionIndex(jr),Gr=dr.getCharCode(jr);let Jr=0,$o=null,ta=null,na=null,Za=Ar;const Bo=!(Be===u.WritingMode.horizontal||!ct&&!Ru(Gr)||ct&&(Hp[Gr]||(Tr=Gr,Ye.Arabic(Tr)||Ye["Arabic Supplement"](Tr)||Ye["Arabic Extended-A"](Tr)||Ye["Arabic Presentation Forms-A"](Tr)||Ye["Arabic Presentation Forms-B"](Tr))));if(jt.imageName){const co=Je[jt.imageName];if(!co)continue;na=jt.imageName,Me.iconsInText=Me.iconsInText||!0,ta=co.paddedRect;const Mi=co.displaySize;jt.scale=jt.scale*Ar/Ut,$o={width:Mi[0],height:Mi[1],left:1,top:-3,advance:Bo?Mi[1]:Mi[0]},Jr=Yr+(Ar-Mi[1]*jt.scale),Za=$o.advance;const Ha=Bo?Mi[0]*jt.scale-Ar*Ur:Mi[1]*jt.scale-Ar*Ur;Ha>0&&Ha>Ii&&(Ii=Ha)}else{const co=st[jt.fontStack],Mi=co&&co[Gr];if(Mi&&Mi.rect)ta=Mi.rect,$o=Mi.metrics;else{const Ha=rt[jt.fontStack],vd=Ha&&Ha[Gr];if(!vd)continue;$o=vd.metrics}Jr=(Ur-jt.scale)*Ar}Bo?(Me.verticalizable=!0,Pi.push({glyph:Gr,imageName:na,x:Tn,y:An+Jr,vertical:Bo,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Xi,metrics:$o,rect:ta}),Tn+=Za*jt.scale+xt):(Pi.push({glyph:Gr,imageName:na,x:Tn,y:An+Jr,vertical:Bo,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Xi,metrics:$o,rect:ta}),Tn+=$o.advance*jt.scale+xt)}Pi.length!==0&&(vr=Math.max(Tn-xt,vr),a5(Pi,0,Pi.length-1,Vr,Ii)),Tn=0;const Hn=qe*Ur+Ii;pi.lineOffset=Math.max(Ii,Yr),An+=Hn,uo=Math.max(Hn,uo),++hr}var Tr;const Nr=An-qp,{horizontalAlign:Kr,verticalAlign:Ci}=a_(et);(function(dr,Ur,Yr,pi,Pi,Ii,Hn,jr,jt){const Xi=(Ur-Yr)*Pi;let Gr=0;Gr=Ii!==Hn?-jr*pi-qp:(-pi*jt+.5)*Hn;for(const Jr of dr)for(const $o of Jr.positionedGlyphs)$o.x+=Xi,$o.y+=Gr})(Me.positionedLines,Vr,Kr,Ci,vr,uo,qe,Nr,Xe.length),Me.top+=-Ci*Nr,Me.bottom=Me.top+Nr,Me.left+=-Kr*vr,Me.right=Me.left+vr}(Se,r,s,d,de,v,b,k,F,I,$,ne),!function(Me){for(const rt of Me)if(rt.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Se}const Hp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},i5={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function p2(a,r,s,d,m,_){if(r.imageName){const v=d[r.imageName];return v?v.displaySize[0]*r.scale*Ar/_+m:0}{const v=s[r.fontStack],b=v&&v[a];return b?b.metrics.advance*r.scale+m:0}}function m2(a,r,s,d){const m=Math.pow(a-r,2);return d?a<r?m/2:2*m:m+Math.abs(s)*s}function o5(a,r,s){let d=0;return a===10&&(d-=1e4),s&&(d+=150),a!==40&&a!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function g2(a,r,s,d,m,_){let v=null,b=m2(r,s,m,_);for(const k of d){const I=m2(r-k.x,s,m,_)+k.badness;I<=b&&(v=k,b=I)}return{index:a,x:r,priorBreak:v,badness:b}}function y2(a){return a?y2(a.priorBreak).concat(a.index):[]}function o_(a,r,s,d,m,_,v){if(_!=="point")return[];if(!a)return[];const b=[],k=function($,U,q,ne,Q,de){let ve=0;for(let ce=0;ce<$.length();ce++){const xe=$.getSection(ce);ve+=p2($.getCharCode(ce),xe,ne,Q,U,de)}return ve/Math.max(1,Math.ceil(ve/q))}(a,r,s,d,m,v),I=a.text.indexOf("\u200B")>=0;let D=0;for(let $=0;$<a.length();$++){const U=a.getSection($),q=a.getCharCode($);if(Hp[q]||(D+=p2(q,U,d,m,r,v)),$<a.length()-1){const ne=!((F=q)<11904||!(Ye["Bopomofo Extended"](F)||Ye.Bopomofo(F)||Ye["CJK Compatibility Forms"](F)||Ye["CJK Compatibility Ideographs"](F)||Ye["CJK Compatibility"](F)||Ye["CJK Radicals Supplement"](F)||Ye["CJK Strokes"](F)||Ye["CJK Symbols and Punctuation"](F)||Ye["CJK Unified Ideographs Extension A"](F)||Ye["CJK Unified Ideographs"](F)||Ye["Enclosed CJK Letters and Months"](F)||Ye["Halfwidth and Fullwidth Forms"](F)||Ye.Hiragana(F)||Ye["Ideographic Description Characters"](F)||Ye["Kangxi Radicals"](F)||Ye["Katakana Phonetic Extensions"](F)||Ye.Katakana(F)||Ye["Vertical Forms"](F)||Ye["Yi Radicals"](F)||Ye["Yi Syllables"](F)));(i5[q]||ne||U.imageName)&&b.push(g2($+1,D,k,b,o5(q,a.getCharCode($+1),ne&&I),!1))}}var F;return y2(g2(a.length(),D,k,b,0,!0))}function a_(a){let r=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function a5(a,r,s,d,m){if(!d&&!m)return;const _=a[s],v=(a[s].x+_.metrics.advance*_.scale)*d;for(let b=r;b<=s;b++)a[b].x-=v,a[b].y+=m}function s5(a,r,s){const{horizontalAlign:d,verticalAlign:m}=a_(s),_=r[0]-a.displaySize[0]*d,v=r[1]-a.displaySize[1]*m;return{image:a,top:v,bottom:v+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function _2(a,r,s,d,m,_){const v=a.image;let b;if(v.content){const Q=v.content,de=v.pixelRatio||1;b=[Q[0]/de,Q[1]/de,v.displaySize[0]-Q[2]/de,v.displaySize[1]-Q[3]/de]}const k=r.left*_,I=r.right*_;let D,F,$,U;s==="width"||s==="both"?(U=m[0]+k-d[3],F=m[0]+I+d[1]):(U=m[0]+(k+I-v.displaySize[0])/2,F=U+v.displaySize[0]);const q=r.top*_,ne=r.bottom*_;return s==="height"||s==="both"?(D=m[1]+q-d[0],$=m[1]+ne+d[2]):(D=m[1]+(q+ne-v.displaySize[1])/2,$=D+v.displaySize[1]),{image:v,top:D,right:F,bottom:$,left:U,collisionPadding:b}}const qa=128,As=32640;function v2(a,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new In(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=s;let _=0;for(;_<d.length&&d[_]<=a;)_++;_=Math.max(0,_-1);let v=_;for(;v<d.length&&d[v]<a+1;)v++;v=Math.min(d.length-1,v);const b=d[_],k=d[v];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:k,minSize:s.evaluate(new In(b)),maxSize:s.evaluate(new In(k)),interpolationType:m}}}function s_(a,r,s){let d="never";const m=a.get(r);return m?d=m:a.get(s)&&(d="always"),d}const l5=Is.VectorTileFeature.types,u5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xp(a,r,s,d,m,_,v,b,k,I,D,F,$){const U=b?Math.min(As,Math.round(b[0])):0,q=b?Math.min(As,Math.round(b[1])):0;a.emplaceBack(r,s,Math.round(32*d),Math.round(32*m),_,v,(U<<1)+(k?1:0),q,16*I,16*D,256*F,256*$)}function l_(a,r,s){a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s)}function c5(a){for(const r of a.sections)if(Ip(r.text))return!0;return!1}class u_{constructor(r){this.layoutVertexArray=new we,this.indexArray=new Fe,this.programConfigurations=r,this.segments=new He,this.dynamicLayoutVertexArray=new Te,this.opacityVertexArray=new De,this.hasVisibleVertices=!1,this.placedSymbolArray=new E}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Nz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Uz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,u5,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}it("SymbolBuffers",u_);class c_{constructor(r,s,d){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new d,this.segments=new He,this.collisionVertexArray=new Ue}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,jz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}it("CollisionBuffers",c_);class ic{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(v=>v.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=U0([]),this.placementViewportMatrix=U0([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=v2(this.zoom,s["text-size"]),this.iconSizeData=v2(this.zoom,s["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=s_(d,"text-overlap","text-allow-overlap")!=="never"||s_(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(v=>u.WritingMode[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=r.sourceID}createArrays(){this.text=new u_(new Qo(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new u_(new Qo(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new M,this.lineVertexArray=new L,this.symbolInstances=new T}calculateGlyphDependencies(r,s,d,m,_){for(let v=0;v<r.length;v++)if(s[r.charCodeAt(v)]=!0,(d||m)&&_){const b=pd[r.charAt(v)];b&&(s[b.charCodeAt(0)]=!0)}}populate(r,s,d){const m=this.layers[0],_=m.layout,v=_.get("text-font"),b=_.get("text-field"),k=_.get("icon-image"),I=(b.value.kind!=="constant"||b.value.value instanceof Si&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),D=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,F=_.get("symbol-sort-key");if(this.features=[],!I&&!D)return;const $=s.iconDependencies,U=s.glyphDependencies,q=s.availableImages,ne=new In(this.zoom);for(const{feature:Q,id:de,index:ve,sourceLayerIndex:ce}of r){const xe=m._featureFilter.needGeometry,Se=Ll(Q,xe);if(!m._featureFilter.filter(ne,Se,d))continue;let Me,rt;if(xe||(Se.geometry=ea(Q)),I){const Je=m.getValueAndResolveTokens("text-field",Se,d,q),Xe=Si.factory(Je);c5(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||Xh()==="unavailable"||this.hasRTLText&&Hi.isParsed())&&(Me=Wz(Xe,m,Se))}if(D){const Je=m.getValueAndResolveTokens("icon-image",Se,d,q);rt=Je instanceof $r?Je:$r.fromString(Je)}if(!Me&&!rt)continue;const st=this.sortFeaturesByKey?F.evaluate(Se,{},d):void 0;if(this.features.push({id:de,text:Me,icon:rt,index:ve,sourceLayerIndex:ce,geometry:Se.geometry,properties:Q.properties,type:l5[Q.type],sortKey:st}),rt&&($[rt.name]=!0),Me){const Je=v.evaluate(Se,{},d).join(","),Xe=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const qe of Me.sections)if(qe.image)$[qe.image.name]=!0;else{const et=Du(Me.toString()),Ke=qe.fontStack||Je,Be=U[Ke]=U[Ke]||{};this.calculateGlyphDependencies(qe.text,Be,Xe,this.allowVerticalPlacement,et)}}}_.get("symbol-placement")==="line"&&(this.features=function(Q){const de={},ve={},ce=[];let xe=0;function Se(Je){ce.push(Q[Je]),xe++}function Me(Je,Xe,qe){const et=ve[Je];return delete ve[Je],ve[Xe]=et,ce[et].geometry[0].pop(),ce[et].geometry[0]=ce[et].geometry[0].concat(qe[0]),et}function rt(Je,Xe,qe){const et=de[Xe];return delete de[Xe],de[Je]=et,ce[et].geometry[0].shift(),ce[et].geometry[0]=qe[0].concat(ce[et].geometry[0]),et}function st(Je,Xe,qe){const et=qe?Xe[0][Xe[0].length-1]:Xe[0][0];return`${Je}:${et.x}:${et.y}`}for(let Je=0;Je<Q.length;Je++){const Xe=Q[Je],qe=Xe.geometry,et=Xe.text?Xe.text.toString():null;if(!et){Se(Je);continue}const Ke=st(et,qe),Be=st(et,qe,!0);if(Ke in ve&&Be in de&&ve[Ke]!==de[Be]){const xt=rt(Ke,Be,qe),ct=Me(Ke,Be,ce[xt].geometry);delete de[Ke],delete ve[Be],ve[st(et,ce[ct].geometry,!0)]=ct,ce[xt].geometry=null}else Ke in ve?Me(Ke,Be,qe):Be in de?rt(Ke,Be,qe):(Se(Je),de[Ke]=xe-1,ve[Be]=xe-1)}return ce.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,de)=>Q.sortKey-de.sortKey)}update(r,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const d=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),_=r.dist(s[r.segment]);const v={};for(let b=r.segment+1;b<s.length;b++)v[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:m},b<s.length-1&&(m+=s[b+1].dist(s[b]));for(let b=r.segment||0;b>=0;b--)v[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:_},b>0&&(_+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const k=v[b];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,s,d,m,_,v,b,k,I,D,F,$){const U=r.indexArray,q=r.layoutVertexArray,ne=r.segments.prepareSegment(4*s.length,q,U,this.canOverlap?v.sortKey:void 0),Q=this.glyphOffsetArray.length,de=ne.vertexLength,ve=this.allowVerticalPlacement&&b===u.WritingMode.vertical?Math.PI/2:0,ce=v.text&&v.text.sections;for(let xe=0;xe<s.length;xe++){const{tl:Se,tr:Me,bl:rt,br:st,tex:Je,pixelOffsetTL:Xe,pixelOffsetBR:qe,minFontScaleX:et,minFontScaleY:Ke,glyphOffset:Be,isSDF:xt,sectionIndex:ct}=s[xe],Ut=ne.vertexLength,Tn=Be[1];Xp(q,k.x,k.y,Se.x,Tn+Se.y,Je.x,Je.y,d,xt,Xe.x,Xe.y,et,Ke),Xp(q,k.x,k.y,Me.x,Tn+Me.y,Je.x+Je.w,Je.y,d,xt,qe.x,Xe.y,et,Ke),Xp(q,k.x,k.y,rt.x,Tn+rt.y,Je.x,Je.y+Je.h,d,xt,Xe.x,qe.y,et,Ke),Xp(q,k.x,k.y,st.x,Tn+st.y,Je.x+Je.w,Je.y+Je.h,d,xt,qe.x,qe.y,et,Ke),l_(r.dynamicLayoutVertexArray,k,ve),U.emplaceBack(Ut,Ut+1,Ut+2),U.emplaceBack(Ut+1,Ut+2,Ut+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Be[0]),xe!==s.length-1&&ct===s[xe+1].sectionIndex||r.programConfigurations.populatePaintArrays(q.length,v,v.index,{},$,ce&&ce[ct])}r.placedSymbolArray.emplaceBack(k.x,k.y,Q,this.glyphOffsetArray.length-Q,de,I,D,k.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],b,0,!1,0,F)}_addCollisionDebugVertex(r,s,d,m,_,v){return s.emplaceBack(0,0),r.emplaceBack(d.x,d.y,m,_,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(r,s,d,m,_,v,b){const k=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),I=k.vertexLength,D=_.layoutVertexArray,F=_.collisionVertexArray,$=b.anchorX,U=b.anchorY;this._addCollisionDebugVertex(D,F,v,$,U,new A(r,s)),this._addCollisionDebugVertex(D,F,v,$,U,new A(d,s)),this._addCollisionDebugVertex(D,F,v,$,U,new A(d,m)),this._addCollisionDebugVertex(D,F,v,$,U,new A(r,m)),k.vertexLength+=4;const q=_.indexArray;q.emplaceBack(I,I+1),q.emplaceBack(I+1,I+2),q.emplaceBack(I+2,I+3),q.emplaceBack(I+3,I),k.primitiveLength+=4}addDebugCollisionBoxes(r,s,d,m){for(let _=r;_<s;_++){const v=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,m?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new c_($e,i2.members,tt),this.iconCollisionBox=new c_($e,i2.members,tt);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,d,m,_,v,b,k,I){const D={};for(let F=s;F<d;F++){const $=r.get(F);D.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},D.textFeatureIndex=$.featureIndex;break}for(let F=m;F<_;F++){const $=r.get(F);D.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},D.verticalTextFeatureIndex=$.featureIndex;break}for(let F=v;F<b;F++){const $=r.get(F);D.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},D.iconFeatureIndex=$.featureIndex;break}for(let F=k;F<I;F++){const $=r.get(F);D.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},D.verticalIconFeatureIndex=$.featureIndex;break}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const d=r.placedSymbolArray.get(s),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)r.indexArray.emplaceBack(_,_+1,_+2),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),d=Math.cos(r),m=[],_=[],v=[];for(let b=0;b<this.symbolInstances.length;++b){v.push(b);const k=this.symbolInstances.get(b);m.push(0|Math.round(s*k.anchorX+d*k.anchorY)),_.push(k.featureIndex)}return v.sort((b,k)=>m[b]-m[k]||_[k]-_[b]),v}addToSortKeyRanges(r,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,_,v)=>{m>=0&&v.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let x2,w2;it("SymbolBucket",ic,{omit:["layers","collisionBoxArray","features","compareText"]}),ic.MAX_GLYPHS=65535,ic.addDynamicAttributes=l_;var h_={get paint(){return w2=w2||new di({"icon-opacity":new Et(Ce.paint_symbol["icon-opacity"]),"icon-color":new Et(Ce.paint_symbol["icon-color"]),"icon-halo-color":new Et(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Et(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Et(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new ht(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new ht(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Et(Ce.paint_symbol["text-opacity"]),"text-color":new Et(Ce.paint_symbol["text-color"],{runtimeType:Nn,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Et(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new Et(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Et(Ce.paint_symbol["text-halo-blur"]),"text-translate":new ht(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new ht(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return x2=x2||new di({"symbol-placement":new ht(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new ht(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ht(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Et(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ht(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ht(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ht(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ht(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new ht(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ht(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Et(Ce.layout_symbol["icon-size"]),"icon-text-fit":new ht(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ht(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Et(Ce.layout_symbol["icon-image"]),"icon-rotate":new Et(Ce.layout_symbol["icon-rotate"]),"icon-padding":new Et(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new ht(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Et(Ce.layout_symbol["icon-offset"]),"icon-anchor":new Et(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ht(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ht(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ht(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new Et(Ce.layout_symbol["text-field"]),"text-font":new Et(Ce.layout_symbol["text-font"]),"text-size":new Et(Ce.layout_symbol["text-size"]),"text-max-width":new Et(Ce.layout_symbol["text-max-width"]),"text-line-height":new ht(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Et(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new Et(Ce.layout_symbol["text-justify"]),"text-radial-offset":new Et(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ht(Ce.layout_symbol["text-variable-anchor"]),"text-anchor":new Et(Ce.layout_symbol["text-anchor"]),"text-max-angle":new ht(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new ht(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new Et(Ce.layout_symbol["text-rotate"]),"text-padding":new ht(Ce.layout_symbol["text-padding"]),"text-keep-upright":new ht(Ce.layout_symbol["text-keep-upright"]),"text-transform":new Et(Ce.layout_symbol["text-transform"]),"text-offset":new Et(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new ht(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new ht(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new ht(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new ht(Ce.layout_symbol["text-optional"])})}};class b2{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:gr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}it("FormatSectionOverride",b2,{omit:["defaultValue"]});class Kp extends Lo{constructor(r){super(r,h_)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const _ of d)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,d,m){const _=this.layout.get(r).evaluate(s,{},d,m),v=this._unevaluatedLayout._values[r];return v.isDataDriven()||ku(v.value)||!_?_:function(b,k){return k.replace(/{([^{}]+)}/g,(I,D)=>D in b?String(b[D]):"")}(s.properties,_)}createBucket(r){return new ic(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of h_.paint.overridableProperties){if(!Kp.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),d=new b2(s),m=new Oh(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new $h("source",m):new Wt("composite",m,s.value.zoomStops),this.paint._values[r]=new Ro(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&Kp.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const d=r.get("text-field"),m=h_.paint.properties[s];let _=!1;const v=b=>{for(const k of b)if(m.overrides&&m.overrides.hasOverride(k))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Si)v(d.value.value.sections);else if(d.value.kind==="source"){const b=I=>{_||(I instanceof Oa&&Ln(I.value)===Gi?v(I.value.sections):I instanceof Su?v(I.sections):I.eachChild(b))},k=d.value;k._styleExpression&&b(k._styleExpression.expression)}return _}}let S2;var h5={get paint(){return S2=S2||new di({"background-color":new ht(Ce.paint_background["background-color"]),"background-pattern":new Jh(Ce.paint_background["background-pattern"]),"background-opacity":new ht(Ce.paint_background["background-opacity"])})}};let E2;var d5={get paint(){return E2=E2||new di({"raster-opacity":new ht(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new ht(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ht(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ht(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new ht(Ce.paint_raster["raster-saturation"]),"raster-contrast":new ht(Ce.paint_raster["raster-contrast"]),"raster-resampling":new ht(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new ht(Ce.paint_raster["raster-fade-duration"])})}};class f5 extends Lo{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const p5={circle:class extends Lo{constructor(a){super(a,tz)}createBucket(a){return new B0(a)}queryRadius(a){const r=a;return od("circle-radius",this,r)+od("circle-stroke-width",this,r)+Op(this.paint.get("circle-translate"))}queryIntersectsFeature(a,r,s,d,m,_,v,b){const k=$p(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,v),I=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s),D=this.paint.get("circle-pitch-alignment")==="map",F=D?k:function(U,q){return U.map(ne=>Rb(ne,q))}(k,b),$=D?I*v:I;for(const U of d)for(const q of U){const ne=D?q:Rb(q,b);let Q=$;const de=Bp([],[q.x,q.y,0,1],b);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Q*=de[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Q*=_.cameraToCenterDistance/de[3]),Y3(F,ne,Q))return!0}return!1}},heatmap:class extends Lo{createBucket(a){return new Lb(a)}constructor(a){super(a,rz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$b({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Lo{constructor(a){super(a,iz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Lo{constructor(a){super(a,vz)}recalculate(a,r){super.recalculate(a,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new J0(a)}queryRadius(){return Op(this.paint.get("fill-translate"))}queryIntersectsFeature(a,r,s,d,m,_,v){return Pb($p(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,v),d)}isTileClipped(){return!0}},"fill-extrusion":class extends Lo{constructor(a){super(a,Dz)}createBucket(a){return new e_(a)}queryRadius(){return Op(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,r,s,d,m,_,v,b){const k=$p(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,v),I=this.paint.get("fill-extrusion-height").evaluate(r,s),D=this.paint.get("fill-extrusion-base").evaluate(r,s),F=function(U,q,ne,Q){const de=[];for(const ve of U){const ce=[ve.x,ve.y,0,1];Bp(ce,ce,q),de.push(new A(ce[0]/ce[3],ce[1]/ce[3]))}return de}(k,b),$=function(U,q,ne,Q){const de=[],ve=[],ce=Q[8]*q,xe=Q[9]*q,Se=Q[10]*q,Me=Q[11]*q,rt=Q[8]*ne,st=Q[9]*ne,Je=Q[10]*ne,Xe=Q[11]*ne;for(const qe of U){const et=[],Ke=[];for(const Be of qe){const xt=Be.x,ct=Be.y,Ut=Q[0]*xt+Q[4]*ct+Q[12],Tn=Q[1]*xt+Q[5]*ct+Q[13],An=Q[2]*xt+Q[6]*ct+Q[14],vr=Q[3]*xt+Q[7]*ct+Q[15],uo=An+Se,Vr=vr+Me,hr=Ut+rt,Tr=Tn+st,Nr=An+Je,Kr=vr+Xe,Ci=new A((Ut+ce)/Vr,(Tn+xe)/Vr);Ci.z=uo/Vr,et.push(Ci);const dr=new A(hr/Kr,Tr/Kr);dr.z=Nr/Kr,Ke.push(dr)}de.push(et),ve.push(Ke)}return[de,ve]}(d,D,I,b);return function(U,q,ne){let Q=1/0;Pb(ne,q)&&(Q=Jb(ne,q[0]));for(let de=0;de<q.length;de++){const ve=q[de],ce=U[de];for(let xe=0;xe<ve.length-1;xe++){const Se=ve[xe],Me=[Se,ve[xe+1],ce[xe+1],ce[xe],Se];Cb(ne,Me)&&(Q=Math.min(Q,Jb(ne,Me)))}}return Q!==1/0&&Q}($[0],$[1],F)}},line:class extends Lo{constructor(a){super(a,n2),this.gradientVersion=0,Gp||(Gp=new Vz(n2.paint.properties["line-width"].specification),Gp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){a==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof yl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,r){super.recalculate(a,r),this.paint._values["line-floorwidth"]=Gp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new t_(a)}queryRadius(a){const r=a,s=r2(od("line-width",this,r),od("line-gap-width",this,r)),d=od("line-offset",this,r);return s/2+Math.abs(d)+Op(this.paint.get("line-translate"))}queryIntersectsFeature(a,r,s,d,m,_,v){const b=$p(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,v),k=v/2*r2(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),I=this.paint.get("line-offset").evaluate(r,s);return I&&(d=function(D,F){const $=[];for(let U=0;U<D.length;U++){const q=D[U],ne=[];for(let Q=0;Q<q.length;Q++){const de=q[Q-1],ve=q[Q],ce=q[Q+1],xe=Q===0?new A(0,0):ve.sub(de)._unit()._perp(),Se=Q===q.length-1?new A(0,0):ce.sub(ve)._unit()._perp(),Me=xe._add(Se)._unit(),rt=Me.x*Se.x+Me.y*Se.y;rt!==0&&Me._mult(1/rt),ne.push(Me._mult(F)._add(ve))}$.push(ne)}return $}(d,I*v)),function(D,F,$){for(let U=0;U<F.length;U++){const q=F[U];if(D.length>=3){for(let ne=0;ne<q.length;ne++)if(Yu(D,q[ne]))return!0}if(J3(D,q,$))return!0}return!1}(b,d,k)}isTileClipped(){return!0}},symbol:Kp,background:class extends Lo{constructor(a){super(a,h5)}},raster:class extends Lo{constructor(a){super(a,d5)}}};class m5{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const d_=63710088e-1;class zs{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zs(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,d=this.lat*s,m=r.lat*s,_=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return d_*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof zs)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new zs(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new zs(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const k2=2*Math.PI*d_;function T2(a){return k2*Math.cos(a*Math.PI/180)}function C2(a){return(180+a)/360}function P2(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function I2(a,r){return a/T2(r)}function f_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Yp{constructor(r,s,d=0){this.x=+r,this.y=+s,this.z=+d}static fromLngLat(r,s=0){const d=zs.convert(r);return new Yp(C2(d.lng),P2(d.lat),I2(s,d.lat))}toLngLat(){return new zs(360*this.x-180,f_(this.y))}toAltitude(){return this.z*T2(f_(this.y))}meterInMercatorCoordinateUnits(){return 1/k2*(r=f_(this.y),1/Math.cos(r*Math.PI/180));var r}}function M2(a,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[a*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class p_{constructor(r,s,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=d,this.key=gd(0,r,r,s,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,d){const m=(v=this.y,b=this.z,k=M2(256*(_=this.x),256*(v=Math.pow(2,b)-v-1),b),I=M2(256*(_+1),256*(v+1),b),k[0]+","+k[1]+","+I[0]+","+I[1]);var _,v,b,k,I;const D=function(F,$,U){let q,ne="";for(let Q=F;Q>0;Q--)q=1<<Q-1,ne+=($&q?1:0)+(U&q?2:0);return ne}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new A((r.x*s-this.x)*Mn,(r.y*s-this.y)*Mn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class A2{constructor(r,s){this.wrap=r,this.canonical=s,this.key=gd(r,s.z,s.z,s.x,s.y)}}class lo{constructor(r,s,d,m,_){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=s,this.canonical=new p_(d,+m,+_),this.key=gd(s,r,d,m,_)}clone(){return new lo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new lo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?gd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):gd(this.wrap*+s,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new lo(s,this.wrap,s,d,m),new lo(s,this.wrap,s,d+1,m),new lo(s,this.wrap,s,d,m+1),new lo(s,this.wrap,s,d+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new lo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new A2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Yp(r.x-this.wrap,r.y))}}function gd(a,r,s,d,m){(a*=2)<0&&(a=-1*a-1);const _=1<<s;return(_*_*a+_*m+d).toString(36)+s.toString(36)+r.toString(36)}it("CanonicalTileID",p_),it("OverscaledTileID",lo,{omit:["posMatrix"]});class z2{constructor(r,s,d){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void ke(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=d||"mapbox";for(let _=0;_<m;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(m,_)]=this.data[this._idx(m-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,m)]=this.data[this._idx(_,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<m;_++)for(let v=0;v<m;v++){const b=this.get(_,v);b>this.max&&(this.max=b),b<this.min&&(this.min=b)}}get(r,s){const d=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[m],d[m+1],d[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}_unpackMapbox(r,s,d){return(256*r*256+256*s+d)/10-1e4}_unpackTerrarium(r,s,d){return 256*r+s+d/256-32768}getPixels(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,_=s*this.dim+this.dim,v=d*this.dim,b=d*this.dim+this.dim;switch(s){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:v=b-1;break;case 1:b=v+1}const k=-s*this.dim,I=-d*this.dim;for(let D=v;D<b;D++)for(let F=m;F<_;F++)this.data[this._idx(F,D)]=r.data[this._idx(F+k,D+I)]}}it("DEMData",z2);class D2{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const d=r[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class R2{constructor(r,s,d,m,_){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=d,r._y=m,this.properties=r.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class L2{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Cl(Mn,16,0),this.grid3D=new Cl(Mn,16,0),this.featureIndexArray=new j,this.promoteId=s}insert(r,s,d,m,_,v){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,_);const k=v?this.grid3D:this.grid;for(let I=0;I<s.length;I++){const D=s[I],F=[1/0,1/0,-1/0,-1/0];for(let $=0;$<D.length;$++){const U=D[$];F[0]=Math.min(F[0],U.x),F[1]=Math.min(F[1],U.y),F[2]=Math.max(F[2],U.x),F[3]=Math.max(F[3],U.y)}F[0]<Mn&&F[1]<Mn&&F[2]>=0&&F[3]>=0&&k.insert(b,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Is.VectorTile(new r_(this.rawTileData)).layers,this.sourceLayerCoder=new D2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,d,m){this.loadVTLayers();const _=r.params||{},v=Mn/r.tileSize/r.scale,b=Bh(_.filter),k=r.queryGeometry,I=r.queryPadding*v,D=O2(k),F=this.grid.query(D.minX-I,D.minY-I,D.maxX+I,D.maxY+I),$=O2(r.cameraQueryGeometry),U=this.grid3D.query($.minX-I,$.minY-I,$.maxX+I,$.maxY+I,(Q,de,ve,ce)=>function(xe,Se,Me,rt,st){for(const Xe of xe)if(Se<=Xe.x&&Me<=Xe.y&&rt>=Xe.x&&st>=Xe.y)return!0;const Je=[new A(Se,Me),new A(Se,st),new A(rt,st),new A(rt,Me)];if(xe.length>2){for(const Xe of Je)if(Yu(xe,Xe))return!0}for(let Xe=0;Xe<xe.length-1;Xe++)if(ez(xe[Xe],xe[Xe+1],Je))return!0;return!1}(r.cameraQueryGeometry,Q-I,de-I,ve+I,ce+I));for(const Q of U)F.push(Q);F.sort(g5);const q={};let ne;for(let Q=0;Q<F.length;Q++){const de=F[Q];if(de===ne)continue;ne=de;const ve=this.featureIndexArray.get(de);let ce=null;this.loadMatchingFeature(q,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,b,_.layers,_.availableImages,s,d,m,(xe,Se,Me)=>(ce||(ce=ea(xe)),Se.queryIntersectsFeature(k,xe,Me,ce,this.z,r.transform,v,r.pixelPosMatrix)))}return q}loadMatchingFeature(r,s,d,m,_,v,b,k,I,D,F){const $=this.bucketLayerIDs[s];if(v&&!function(Q,de){for(let ve=0;ve<Q.length;ve++)if(de.indexOf(Q[ve])>=0)return!0;return!1}(v,$))return;const U=this.sourceLayerCoder.decode(d),q=this.vtLayers[U].feature(m);if(_.needGeometry){const Q=Ll(q,!0);if(!_.filter(new In(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!_.filter(new In(this.tileID.overscaledZ),q))return;const ne=this.getId(q,U);for(let Q=0;Q<$.length;Q++){const de=$[Q];if(v&&v.indexOf(de)<0)continue;const ve=k[de];if(!ve)continue;let ce={};ne&&D&&(ce=D.getState(ve.sourceLayer||"_geojsonTileLayer",ne));const xe=K({},I[de]);xe.paint=F2(xe.paint,ve.paint,q,ce,b),xe.layout=F2(xe.layout,ve.layout,q,ce,b);const Se=!F||F(q,ve,ce);if(!Se)continue;const Me=new R2(q,this.z,this.x,this.y,ne);Me.layer=xe;let rt=r[de];rt===void 0&&(rt=r[de]=[]),rt.push({featureIndex:m,feature:Me,intersectionZ:Se})}}lookupSymbolFeatures(r,s,d,m,_,v,b,k){const I={};this.loadVTLayers();const D=Bh(_);for(const F of r)this.loadMatchingFeature(I,d,m,F,D,v,b,k,s);return I}hasLayer(r){for(const s of this.bucketLayerIDs)for(const d of s)if(r===d)return!0;return!1}getId(r,s){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function F2(a,r,s,d,m){return ge(a,(_,v)=>{const b=r instanceof Vu?r.get(v):null;return b&&b.evaluate?b.evaluate(s,d,m):b})}function O2(a){let r=1/0,s=1/0,d=-1/0,m=-1/0;for(const _ of a)r=Math.min(r,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return{minX:r,minY:s,maxX:d,maxY:m}}function g5(a,r){return r-a}function $2(a,r,s,d,m){const _=[];for(let v=0;v<a.length;v++){const b=a[v];let k;for(let I=0;I<b.length-1;I++){let D=b[I],F=b[I+1];D.x<r&&F.x<r||(D.x<r?D=new A(r,D.y+(r-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x<r&&(F=new A(r,D.y+(r-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y<s&&F.y<s||(D.y<s?D=new A(D.x+(s-D.y)/(F.y-D.y)*(F.x-D.x),s)._round():F.y<s&&(F=new A(D.x+(s-D.y)/(F.y-D.y)*(F.x-D.x),s)._round()),D.x>=d&&F.x>=d||(D.x>=d?D=new A(d,D.y+(d-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x>=d&&(F=new A(d,D.y+(d-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y>=m&&F.y>=m||(D.y>=m?D=new A(D.x+(m-D.y)/(F.y-D.y)*(F.x-D.x),m)._round():F.y>=m&&(F=new A(D.x+(m-D.y)/(F.y-D.y)*(F.x-D.x),m)._round()),k&&D.equals(k[k.length-1])||(k=[D],_.push(k)),k.push(F)))))}}return _}it("FeatureIndex",L2,{omit:["rawTileData","sourceLayerCoder"]});class Ds extends A{constructor(r,s,d,m){super(r,s),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new Ds(this.x,this.y,this.angle,this.segment)}}function B2(a,r,s,d,m){if(r.segment===void 0)return!0;let _=r,v=r.segment+1,b=0;for(;b>-s/2;){if(v--,v<0)return!1;b-=a[v].dist(_),_=a[v]}b+=a[v].dist(a[v+1]),v++;const k=[];let I=0;for(;b<s/2;){const D=a[v],F=a[v+1];if(!F)return!1;let $=a[v-1].angleTo(D)-D.angleTo(F);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:b,angleDelta:$}),I+=$;b-k[0].distance>d;)I-=k.shift().angleDelta;if(I>m)return!1;v++,b+=D.dist(F)}return!0}function V2(a){let r=0;for(let s=0;s<a.length-1;s++)r+=a[s].dist(a[s+1]);return r}function N2(a,r,s){return a?.6*r*s:0}function U2(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function y5(a,r,s,d,m,_){const v=N2(s,m,_),b=U2(s,d)*_;let k=0;const I=V2(a)/2;for(let D=0;D<a.length-1;D++){const F=a[D],$=a[D+1],U=F.dist($);if(k+U>I){const q=(I-k)/U,ne=ci.number(F.x,$.x,q),Q=ci.number(F.y,$.y,q),de=new Ds(ne,Q,$.angleTo(F),D);return de._round(),!v||B2(a,de,b,v,r)?de:void 0}k+=U}}function _5(a,r,s,d,m,_,v,b,k){const I=N2(d,_,v),D=U2(d,m),F=D*v,$=a[0].x===0||a[0].x===k||a[0].y===0||a[0].y===k;return r-F<r/4&&(r=F+r/4),j2(a,$?r/2*b%r:(D/2+2*_)*v*b%r,r,I,s,F,$,!1,k)}function j2(a,r,s,d,m,_,v,b,k){const I=_/2,D=V2(a);let F=0,$=r-s,U=[];for(let q=0;q<a.length-1;q++){const ne=a[q],Q=a[q+1],de=ne.dist(Q),ve=Q.angleTo(ne);for(;$+s<F+de;){$+=s;const ce=($-F)/de,xe=ci.number(ne.x,Q.x,ce),Se=ci.number(ne.y,Q.y,ce);if(xe>=0&&xe<k&&Se>=0&&Se<k&&$-I>=0&&$+I<=D){const Me=new Ds(xe,Se,ve,q);Me._round(),d&&!B2(a,Me,_,d,m)||U.push(Me)}}F+=de}return b||U.length||v||(U=j2(a,F/2,s,d,m,_,v,!0,k)),U}function G2(a,r,s,d){const m=[],_=a.image,v=_.pixelRatio,b=_.paddedRect.w-2,k=_.paddedRect.h-2,I=a.right-a.left,D=a.bottom-a.top,F=_.stretchX||[[0,b]],$=_.stretchY||[[0,k]],U=(qe,et)=>qe+et[1]-et[0],q=F.reduce(U,0),ne=$.reduce(U,0),Q=b-q,de=k-ne;let ve=0,ce=q,xe=0,Se=ne,Me=0,rt=Q,st=0,Je=de;if(_.content&&d){const qe=_.content;ve=Jp(F,0,qe[0]),xe=Jp($,0,qe[1]),ce=Jp(F,qe[0],qe[2]),Se=Jp($,qe[1],qe[3]),Me=qe[0]-ve,st=qe[1]-xe,rt=qe[2]-qe[0]-ce,Je=qe[3]-qe[1]-Se}const Xe=(qe,et,Ke,Be)=>{const xt=Qp(qe.stretch-ve,ce,I,a.left),ct=em(qe.fixed-Me,rt,qe.stretch,q),Ut=Qp(et.stretch-xe,Se,D,a.top),Tn=em(et.fixed-st,Je,et.stretch,ne),An=Qp(Ke.stretch-ve,ce,I,a.left),vr=em(Ke.fixed-Me,rt,Ke.stretch,q),uo=Qp(Be.stretch-xe,Se,D,a.top),Vr=em(Be.fixed-st,Je,Be.stretch,ne),hr=new A(xt,Ut),Tr=new A(An,Ut),Nr=new A(An,uo),Kr=new A(xt,uo),Ci=new A(ct/v,Tn/v),dr=new A(vr/v,Vr/v),Ur=r*Math.PI/180;if(Ur){const Pi=Math.sin(Ur),Ii=Math.cos(Ur),Hn=[Ii,-Pi,Pi,Ii];hr._matMult(Hn),Tr._matMult(Hn),Kr._matMult(Hn),Nr._matMult(Hn)}const Yr=qe.stretch+qe.fixed,pi=et.stretch+et.fixed;return{tl:hr,tr:Tr,bl:Kr,br:Nr,tex:{x:_.paddedRect.x+1+Yr,y:_.paddedRect.y+1+pi,w:Ke.stretch+Ke.fixed-Yr,h:Be.stretch+Be.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ci,pixelOffsetBR:dr,minFontScaleX:rt/v/I,minFontScaleY:Je/v/D,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const qe=W2(F,Q,q),et=W2($,de,ne);for(let Ke=0;Ke<qe.length-1;Ke++){const Be=qe[Ke],xt=qe[Ke+1];for(let ct=0;ct<et.length-1;ct++)m.push(Xe(Be,et[ct],xt,et[ct+1]))}}else m.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:k+1}));return m}function Jp(a,r,s){let d=0;for(const m of a)d+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return d}function W2(a,r,s){const d=[{fixed:-1,stretch:0}];for(const[m,_]of a){const v=d[d.length-1];d.push({fixed:m-v.stretch,stretch:v.stretch}),d.push({fixed:m-v.stretch,stretch:v.stretch+(_-m)})}return d.push({fixed:r+1,stretch:s}),d}function Qp(a,r,s,d){return a/r*s+d}function em(a,r,s,d){return a-r*s/d}it("Anchor",Ds);class tm{constructor(r,s,d,m,_,v,b,k,I,D){if(this.boxStartIndex=r.length,I){let F=v.top,$=v.bottom;const U=v.collisionPadding;U&&(F-=U[1],$+=U[3]);let q=$-F;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let F=v.top*b-k[0],$=v.bottom*b+k[2],U=v.left*b-k[3],q=v.right*b+k[1];const ne=v.collisionPadding;if(ne&&(U-=ne[0]*b,F-=ne[1]*b,q+=ne[2]*b,$+=ne[3]*b),D){const Q=new A(U,F),de=new A(q,F),ve=new A(U,$),ce=new A(q,$),xe=D*Math.PI/180;Q._rotate(xe),de._rotate(xe),ve._rotate(xe),ce._rotate(xe),U=Math.min(Q.x,de.x,ve.x,ce.x),q=Math.max(Q.x,de.x,ve.x,ce.x),F=Math.min(Q.y,de.y,ve.y,ce.y),$=Math.max(Q.y,de.y,ve.y,ce.y)}r.emplaceBack(s.x,s.y,U,F,q,$,d,m,_)}this.boxEndIndex=r.length}}class v5{constructor(r=[],s=x5){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:d}=this,m=s[r];for(;r>0;){const _=r-1>>1,v=s[_];if(d(m,v)>=0)break;s[r]=v,r=_}s[r]=m}_down(r){const{data:s,compare:d}=this,m=this.length>>1,_=s[r];for(;r<m;){let v=1+(r<<1),b=s[v];const k=v+1;if(k<this.length&&d(s[k],b)<0&&(v=k,b=s[k]),d(b,_)>=0)break;s[r]=b,r=v}s[r]=_}}function x5(a,r){return a<r?-1:a>r?1:0}function w5(a,r=1,s=!1){let d=1/0,m=1/0,_=-1/0,v=-1/0;const b=a[0];for(let U=0;U<b.length;U++){const q=b[U];(!U||q.x<d)&&(d=q.x),(!U||q.y<m)&&(m=q.y),(!U||q.x>_)&&(_=q.x),(!U||q.y>v)&&(v=q.y)}const k=Math.min(_-d,v-m);let I=k/2;const D=new v5([],b5);if(k===0)return new A(d,m);for(let U=d;U<_;U+=k)for(let q=m;q<v;q+=k)D.push(new oc(U+I,q+I,I,a));let F=function(U){let q=0,ne=0,Q=0;const de=U[0];for(let ve=0,ce=de.length,xe=ce-1;ve<ce;xe=ve++){const Se=de[ve],Me=de[xe],rt=Se.x*Me.y-Me.x*Se.y;ne+=(Se.x+Me.x)*rt,Q+=(Se.y+Me.y)*rt,q+=3*rt}return new oc(ne/q,Q/q,0,U)}(a),$=D.length;for(;D.length;){const U=D.pop();(U.d>F.d||!F.d)&&(F=U,s&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,$)),U.max-F.d<=r||(I=U.h/2,D.push(new oc(U.p.x-I,U.p.y-I,I,a)),D.push(new oc(U.p.x+I,U.p.y-I,I,a)),D.push(new oc(U.p.x-I,U.p.y+I,I,a)),D.push(new oc(U.p.x+I,U.p.y+I,I,a)),$+=4)}return s&&(console.log(`num probes: ${$}`),console.log(`best distance: ${F.d}`)),F.p}function b5(a,r){return r.max-a.max}function oc(a,r,s,d){this.p=new A(a,r),this.h=s,this.d=function(m,_){let v=!1,b=1/0;for(let k=0;k<_.length;k++){const I=_[k];for(let D=0,F=I.length,$=F-1;D<F;$=D++){const U=I[D],q=I[$];U.y>m.y!=q.y>m.y&&m.x<(q.x-U.x)*(m.y-U.y)/(q.y-U.y)+U.x&&(v=!v),b=Math.min(b,Ib(m,U,q))}}return(v?1:-1)*Math.sqrt(b)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const m_=Number.POSITIVE_INFINITY;function q2(a,r){return r[1]!==m_?function(s,d,m){let _=0,v=0;switch(d=Math.abs(d),m=Math.abs(m),s){case"top-right":case"top-left":case"top":v=m-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-m}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,v]}(a,r[0],r[1]):function(s,d){let m=0,_=0;d<0&&(d=0);const v=d/Math.sqrt(2);switch(s){case"top-right":case"top-left":_=v-7;break;case"bottom-right":case"bottom-left":_=7-v;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(s){case"top-right":case"bottom-right":m=-v;break;case"top-left":case"bottom-left":m=v;break;case"left":m=d;break;case"right":m=-d}return[m,_]}(a,r[0])}function g_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function S5(a,r,s,d,m,_,v,b,k,I,D){let F=_.textMaxSize.evaluate(r,{});F===void 0&&(F=v);const $=a.layers[0].layout,U=$.get("icon-offset").evaluate(r,{},D),q=H2(s.horizontal),ne=v/24,Q=a.tilePixelRatio*ne,de=a.tilePixelRatio*F/24,ve=a.tilePixelRatio*b,ce=a.tilePixelRatio*$.get("symbol-spacing"),xe=$.get("text-padding")*a.tilePixelRatio,Se=function(Be,xt,ct,Ut=1){const Tn=Be.get("icon-padding").evaluate(xt,{},ct),An=Tn&&Tn.values;return[An[0]*Ut,An[1]*Ut,An[2]*Ut,An[3]*Ut]}($,r,D,a.tilePixelRatio),Me=$.get("text-max-angle")/180*Math.PI,rt=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",st=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",Je=$.get("symbol-placement"),Xe=ce/2,qe=$.get("icon-text-fit");let et;d&&qe!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(et=_2(d,s.vertical,qe,$.get("icon-text-fit-padding"),U,ne)),q&&(d=_2(d,q,qe,$.get("icon-text-fit-padding"),U,ne)));const Ke=(Be,xt)=>{xt.x<0||xt.x>=Mn||xt.y<0||xt.y>=Mn||function(ct,Ut,Tn,An,vr,uo,Vr,hr,Tr,Nr,Kr,Ci,dr,Ur,Yr,pi,Pi,Ii,Hn,jr,jt,Xi,Gr,Jr,$o){const ta=ct.addToLineVertexArray(Ut,Tn);let na,Za,Bo,co,Mi=0,Ha=0,vd=0,J2=0,E_=-1,k_=-1;const Xa={};let Q2=nr(""),T_=0,C_=0;if(hr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[T_,C_]=hr.layout.get("text-offset").evaluate(jt,{},Jr).map(Ai=>Ai*Ar):(T_=hr.layout.get("text-radial-offset").evaluate(jt,{},Jr)*Ar,C_=m_),ct.allowVerticalPlacement&&An.vertical){const Ai=hr.layout.get("text-rotate").evaluate(jt,{},Jr)+90;Bo=new tm(Tr,Ut,Nr,Kr,Ci,An.vertical,dr,Ur,Yr,Ai),Vr&&(co=new tm(Tr,Ut,Nr,Kr,Ci,Vr,Pi,Ii,Yr,Ai))}if(vr){const Ai=hr.layout.get("icon-rotate").evaluate(jt,{}),ba=hr.layout.get("icon-text-fit")!=="none",xd=G2(vr,Ai,Gr,ba),wd=Vr?G2(Vr,Ai,Gr,ba):void 0;Za=new tm(Tr,Ut,Nr,Kr,Ci,vr,Pi,Ii,!1,Ai),Mi=4*xd.length;const nS=ct.iconSizeData;let Ol=null;nS.kind==="source"?(Ol=[qa*hr.layout.get("icon-size").evaluate(jt,{})],Ol[0]>As&&ke(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):nS.kind==="composite"&&(Ol=[qa*Xi.compositeIconSizes[0].evaluate(jt,{},Jr),qa*Xi.compositeIconSizes[1].evaluate(jt,{},Jr)],(Ol[0]>As||Ol[1]>As)&&ke(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,xd,Ol,jr,Hn,jt,u.WritingMode.none,Ut,ta.lineStartIndex,ta.lineLength,-1,Jr),E_=ct.icon.placedSymbolArray.length-1,wd&&(Ha=4*wd.length,ct.addSymbols(ct.icon,wd,Ol,jr,Hn,jt,u.WritingMode.vertical,Ut,ta.lineStartIndex,ta.lineLength,-1,Jr),k_=ct.icon.placedSymbolArray.length-1)}const eS=Object.keys(An.horizontal);for(const Ai of eS){const ba=An.horizontal[Ai];if(!na){Q2=nr(ba.text);const wd=hr.layout.get("text-rotate").evaluate(jt,{},Jr);na=new tm(Tr,Ut,Nr,Kr,Ci,ba,dr,Ur,Yr,wd)}const xd=ba.positionedLines.length===1;if(vd+=Z2(ct,Ut,ba,uo,hr,Yr,jt,pi,ta,An.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,xd?eS:[Ai],Xa,E_,Xi,Jr),xd)break}An.vertical&&(J2+=Z2(ct,Ut,An.vertical,uo,hr,Yr,jt,pi,ta,u.WritingMode.vertical,["vertical"],Xa,k_,Xi,Jr));const T5=na?na.boxStartIndex:ct.collisionBoxArray.length,C5=na?na.boxEndIndex:ct.collisionBoxArray.length,P5=Bo?Bo.boxStartIndex:ct.collisionBoxArray.length,I5=Bo?Bo.boxEndIndex:ct.collisionBoxArray.length,M5=Za?Za.boxStartIndex:ct.collisionBoxArray.length,A5=Za?Za.boxEndIndex:ct.collisionBoxArray.length,z5=co?co.boxStartIndex:ct.collisionBoxArray.length,D5=co?co.boxEndIndex:ct.collisionBoxArray.length;let ra=-1;const rm=(Ai,ba)=>Ai&&Ai.circleDiameter?Math.max(Ai.circleDiameter,ba):ba;ra=rm(na,ra),ra=rm(Bo,ra),ra=rm(Za,ra),ra=rm(co,ra);const tS=ra>-1?1:0;tS&&(ra*=$o/Ar),ct.glyphOffsetArray.length>=ic.MAX_GLYPHS&&ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jt.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,jt.sortKey),ct.symbolInstances.emplaceBack(Ut.x,Ut.y,Xa.right>=0?Xa.right:-1,Xa.center>=0?Xa.center:-1,Xa.left>=0?Xa.left:-1,Xa.vertical||-1,E_,k_,Q2,T5,C5,P5,I5,M5,A5,z5,D5,Nr,vd,J2,Mi,Ha,tS,0,dr,T_,C_,ra)}(a,xt,Be,s,d,m,et,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,Q,[xe,xe,xe,xe],rt,k,ve,Se,st,U,r,_,I,D,v)};if(Je==="line")for(const Be of $2(r.geometry,0,0,Mn,Mn)){const xt=_5(Be,ce,Me,s.vertical||q,d,24,de,a.overscaling,Mn);for(const ct of xt)q&&E5(a,q.text,Xe,ct)||Ke(Be,ct)}else if(Je==="line-center"){for(const Be of r.geometry)if(Be.length>1){const xt=y5(Be,Me,s.vertical||q,d,24,de);xt&&Ke(Be,xt)}}else if(r.type==="Polygon")for(const Be of X0(r.geometry,0)){const xt=w5(Be,16);Ke(Be[0],new Ds(xt.x,xt.y,0))}else if(r.type==="LineString")for(const Be of r.geometry)Ke(Be,new Ds(Be[0].x,Be[0].y,0));else if(r.type==="Point")for(const Be of r.geometry)for(const xt of Be)Ke([xt],new Ds(xt.x,xt.y,0))}function Z2(a,r,s,d,m,_,v,b,k,I,D,F,$,U,q){const ne=function(ve,ce,xe,Se,Me,rt,st,Je){const Xe=Se.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,qe=[];for(const et of ce.positionedLines)for(const Ke of et.positionedGlyphs){if(!Ke.rect)continue;const Be=Ke.rect||{};let xt=4,ct=!0,Ut=1,Tn=0;const An=(Me||Je)&&Ke.vertical,vr=Ke.metrics.advance*Ke.scale/2;if(Je&&ce.verticalizable&&(Tn=et.lineOffset/2-(Ke.imageName?-(Ar-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*Ar)),Ke.imageName){const Hn=st[Ke.imageName];ct=Hn.sdf,Ut=Hn.pixelRatio,xt=1/Ut}const uo=Me?[Ke.x+vr,Ke.y]:[0,0];let Vr=Me?[0,0]:[Ke.x+vr+xe[0],Ke.y+xe[1]-Tn],hr=[0,0];An&&(hr=Vr,Vr=[0,0]);const Tr=(Ke.metrics.left-xt)*Ke.scale-vr+Vr[0],Nr=(-Ke.metrics.top-xt)*Ke.scale+Vr[1],Kr=Tr+Be.w*Ke.scale/Ut,Ci=Nr+Be.h*Ke.scale/Ut,dr=new A(Tr,Nr),Ur=new A(Kr,Nr),Yr=new A(Tr,Ci),pi=new A(Kr,Ci);if(An){const Hn=new A(-vr,vr-qp),jr=-Math.PI/2,jt=12-vr,Xi=new A(22-jt,-(Ke.imageName?jt:0)),Gr=new A(...hr);dr._rotateAround(jr,Hn)._add(Xi)._add(Gr),Ur._rotateAround(jr,Hn)._add(Xi)._add(Gr),Yr._rotateAround(jr,Hn)._add(Xi)._add(Gr),pi._rotateAround(jr,Hn)._add(Xi)._add(Gr)}if(Xe){const Hn=Math.sin(Xe),jr=Math.cos(Xe),jt=[jr,-Hn,Hn,jr];dr._matMult(jt),Ur._matMult(jt),Yr._matMult(jt),pi._matMult(jt)}const Pi=new A(0,0),Ii=new A(0,0);qe.push({tl:dr,tr:Ur,bl:Yr,br:pi,tex:Be,writingMode:ce.writingMode,glyphOffset:uo,sectionIndex:Ke.sectionIndex,isSDF:ct,pixelOffsetTL:Pi,pixelOffsetBR:Ii,minFontScaleX:0,minFontScaleY:0})}return qe}(0,s,b,m,_,v,d,a.allowVerticalPlacement),Q=a.textSizeData;let de=null;Q.kind==="source"?(de=[qa*m.layout.get("text-size").evaluate(v,{})],de[0]>As&&ke(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Q.kind==="composite"&&(de=[qa*U.compositeTextSizes[0].evaluate(v,{},q),qa*U.compositeTextSizes[1].evaluate(v,{},q)],(de[0]>As||de[1]>As)&&ke(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,ne,de,b,_,v,I,r,k.lineStartIndex,k.lineLength,$,q);for(const ve of D)F[ve]=a.text.placedSymbolArray.length-1;return 4*ne.length}function H2(a){for(const r in a)return a[r];return null}function E5(a,r,s,d){const m=a.compareText;if(r in m){const _=m[r];for(let v=_.length-1;v>=0;v--)if(d.dist(_[v])<s)return!0}else m[r]=[];return m[r].push(d),!1}const X2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class y_{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=X2[15&d];if(!_)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new y_(b,v,_,r)}constructor(r,s=64,d=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=X2.indexOf(this.ArrayType),v=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-b%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+k,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+v+b+k),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+k,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=s,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return __(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:v,nodeSize:b}=this,k=[0,_.length-1,0],I=[];for(;k.length;){const D=k.pop()||0,F=k.pop()||0,$=k.pop()||0;if(F-$<=b){for(let Q=$;Q<=F;Q++){const de=v[2*Q],ve=v[2*Q+1];de>=r&&de<=d&&ve>=s&&ve<=m&&I.push(_[Q])}continue}const U=$+F>>1,q=v[2*U],ne=v[2*U+1];q>=r&&q<=d&&ne>=s&&ne<=m&&I.push(_[U]),(D===0?r<=q:s<=ne)&&(k.push($),k.push(U-1),k.push(1-D)),(D===0?d>=q:m>=ne)&&(k.push(U+1),k.push(F),k.push(1-D))}return I}within(r,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:v}=this,b=[0,m.length-1,0],k=[],I=d*d;for(;b.length;){const D=b.pop()||0,F=b.pop()||0,$=b.pop()||0;if(F-$<=v){for(let Q=$;Q<=F;Q++)Y2(_[2*Q],_[2*Q+1],r,s)<=I&&k.push(m[Q]);continue}const U=$+F>>1,q=_[2*U],ne=_[2*U+1];Y2(q,ne,r,s)<=I&&k.push(m[U]),(D===0?r-d<=q:s-d<=ne)&&(b.push($),b.push(U-1),b.push(1-D)),(D===0?r+d>=q:s+d>=ne)&&(b.push(U+1),b.push(F),b.push(1-D))}return k}}function __(a,r,s,d,m,_){if(m-d<=s)return;const v=d+m>>1;K2(a,r,v,d,m,_),__(a,r,s,d,v-1,1-_),__(a,r,s,v+1,m,1-_)}function K2(a,r,s,d,m,_){for(;m>d;){if(m-d>600){const I=m-d+1,D=s-d+1,F=Math.log(I),$=.5*Math.exp(2*F/3),U=.5*Math.sqrt(F*$*(I-$)/I)*(D-I/2<0?-1:1);K2(a,r,s,Math.max(d,Math.floor(s-D*$/I+U)),Math.min(m,Math.floor(s+(I-D)*$/I+U)),_)}const v=r[2*s+_];let b=d,k=m;for(yd(a,r,d,s),r[2*m+_]>v&&yd(a,r,d,m);b<k;){for(yd(a,r,b,k),b++,k--;r[2*b+_]<v;)b++;for(;r[2*k+_]>v;)k--}r[2*d+_]===v?yd(a,r,d,k):(k++,yd(a,r,k,m)),k<=s&&(d=k+1),s<=k&&(m=k-1)}}function yd(a,r,s,d){v_(a,s,d),v_(r,2*s,2*d),v_(r,2*s+1,2*d+1)}function v_(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}function Y2(a,r,s,d){const m=a-s,_=r-d;return m*m+_*_}var x_;u.PerformanceMarkers=void 0,(x_=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",x_.load="load",x_.fullLoad="fullLoad";let nm=null,_d=[];const w_=1e3/60,b_="loadTime",S_="fullLoadTime",k5={mark(a){performance.mark(a)},frame(a){const r=a;nm!=null&&_d.push(r-nm),nm=r},clearMetrics(){nm=null,_d=[],performance.clearMeasures(b_),performance.clearMeasures(S_);for(const a in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[a])},getPerformanceMetrics(){performance.measure(b_,u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure(S_,u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const a=performance.getEntriesByName(b_)[0].duration,r=performance.getEntriesByName(S_)[0].duration,s=_d.length,d=1/(_d.reduce((_,v)=>_+v,0)/s/1e3),m=_d.filter(_=>_>w_).reduce((_,v)=>_+(v-w_)/w_,0);return{loadTime:a,fullLoadTime:r,fps:d,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};u.AJAXError=lt,u.ARRAY_TYPE=Ju,u.Actor=class{constructor(a,r,s){this.target=a,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ue(["receive","process"],this),this.invoker=new m5(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Tt()?a:window}send(a,r,s,d,m=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);const v=Nt(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:a,hasCallback:!!s,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:Pl(r,v)},v),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const r=a.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[s];const d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d()}else Tt()||r.mustQueue?(this.tasks[s]=r,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,r)}process(){if(!this.taskQueue.length)return;const a=this.taskQueue.shift(),r=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(a,r)}processTask(a,r){if(r.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(r.error?s(Yo(r.error)):s(null,Yo(r.data)))}else{let s=!1;const d=Nt(this.globalScope)?void 0:[],m=r.hasCallback?(b,k)=>{s=!0,delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:b?Pl(b):null,data:Pl(k,d)},d)}:b=>{s=!0};let _=null;const v=Yo(r.data);if(this.parent[r.type])_=this.parent[r.type](r.sourceMapId,v,m);else if(this.parent.getWorkerSource){const b=r.type.split(".");_=this.parent.getWorkerSource(r.sourceMapId,b[0],v.source)[b[1]](v,m)}else m(new Error(`Could not find function ${r.type}`));!s&&_&&_.cancel&&(this.cancelCallbacks[a]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=sd,u.CanonicalTileID=p_,u.CollisionBoxArray=g,u.CollisionCircleLayoutArray=class extends Wu{},u.Color=Qt,u.DEMData=z2,u.DataConstantProperty=ht,u.DictionaryCoder=D2,u.EXTENT=Mn,u.ErrorEvent=on,u.EvaluationParameters=In,u.Event=Gt,u.Evented=pr,u.FeatureIndex=L2,u.FillBucket=J0,u.FillExtrusionBucket=e_,u.GeoJSONFeature=R2,u.ImageAtlas=f2,u.ImagePosition=i_,u.KDBush=y_,u.LineBucket=t_,u.LineStripIndexArray=class extends i{},u.LngLat=zs,u.MercatorCoordinate=Yp,u.ONE_EM=Ar,u.OverscaledTileID=lo,u.PerformanceUtils=k5,u.Point=A,u.Pos3dArray=class extends Uu{},u.PosArray=te,u.Properties=di,u.Protobuf=r_,u.QuadTriangleArray=class extends qu{},u.RGBAImage=so,u.RasterBoundsArray=class extends ed{},u.RequestPerformance=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},u.SegmentVector=He,u.SymbolBucket=ic,u.Transitionable=zp,u.TriangleIndexArray=Fe,u.Uniform1f=Oo,u.Uniform1i=class extends Xr{constructor(a,r){super(a,r),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},u.Uniform2f=class extends Xr{constructor(a,r){super(a,r),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},u.Uniform3f=class extends Xr{constructor(a,r){super(a,r),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},u.Uniform4f=Dl,u.UniformColor=Br,u.UniformMatrix4f=class extends Xr{constructor(a,r){super(a,r),this.current=Er}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let r=1;r<16;r++)if(a[r]!==this.current[r]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},u.UnwrappedTileID=A2,u.ValidationError=Le,u.ZoomHistory=Tp,u.addDynamicAttributes=l_,u.arrayBufferToImage=function(a,r){const s=new Image;s.onload=()=>{r(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=dn})},s.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(d):dn},u.arrayBufferToImageBitmap=function(a,r){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.asyncAll=function(a,r,s){if(!a.length)return s(null,[]);let d=a.length;const m=new Array(a.length);let _=null;a.forEach((v,b)=>{r(v,(k,I)=>{k&&(_=k),m[b]=I,--d==0&&s(_,m)})})},u.bezier=H,u.bindAll=ue,u.clamp=B,u.clipLine=$2,u.clone=function(a){var r=new Ju(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},u.clone$1=Ee,u.collisionCircleLayout=Gz,u.config=Bt,u.copy=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},u.create=function(){var a=new Ju(16);return Ju!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},u.createExpression=Fn,u.createFilter=Bh,u.createLayout=cr,u.createStyleLayer=function(a){return a.type==="custom"?new f5(a):new p5[a.type](a)},u.deepEqual=function a(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let d=0;d<r.length;d++)if(!a(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const d in r)if(!a(r[d],s[d]))return!1;return!0}return r===s},u.derefLayers=function(a){a=a.slice();const r=Object.create(null);for(let s=0;s<a.length;s++)r[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=ji(a[s],r[a[s].ref]));return a},u.diffStyles=function(a,r){if(!a)return[{command:qt.setStyle,args:[r]}];let s=[];try{if(!Ht(a.version,r.version))return[{command:qt.setStyle,args:[r]}];Ht(a.center,r.center)||s.push({command:qt.setCenter,args:[r.center]}),Ht(a.zoom,r.zoom)||s.push({command:qt.setZoom,args:[r.zoom]}),Ht(a.bearing,r.bearing)||s.push({command:qt.setBearing,args:[r.bearing]}),Ht(a.pitch,r.pitch)||s.push({command:qt.setPitch,args:[r.pitch]}),Ht(a.sprite,r.sprite)||s.push({command:qt.setSprite,args:[r.sprite]}),Ht(a.glyphs,r.glyphs)||s.push({command:qt.setGlyphs,args:[r.glyphs]}),Ht(a.transition,r.transition)||s.push({command:qt.setTransition,args:[r.transition]}),Ht(a.light,r.light)||s.push({command:qt.setLight,args:[r.light]});const d={},m=[];(function(v,b,k,I){let D;for(D in b=b||{},v=v||{})Object.prototype.hasOwnProperty.call(v,D)&&(Object.prototype.hasOwnProperty.call(b,D)||ai(D,k,I));for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&(Object.prototype.hasOwnProperty.call(v,D)?Ht(v[D],b[D])||(v[D].type==="geojson"&&b[D].type==="geojson"&&ga(v,b,D)?k.push({command:qt.setGeoJSONSourceData,args:[D,b[D].data]}):Or(D,b,k,I)):lr(D,b,k))})(a.sources,r.sources,m,d);const _=[];a.layers&&a.layers.forEach(v=>{d[v.source]?s.push({command:qt.removeLayer,args:[v.id]}):_.push(v)}),s=s.concat(m),function(v,b,k){b=b||[];const I=(v=v||[]).map(Qe),D=b.map(Qe),F=v.reduce(St,{}),$=b.reduce(St,{}),U=I.slice(),q=Object.create(null);let ne,Q,de,ve,ce,xe,Se;for(ne=0,Q=0;ne<I.length;ne++)de=I[ne],Object.prototype.hasOwnProperty.call($,de)?Q++:(k.push({command:qt.removeLayer,args:[de]}),U.splice(U.indexOf(de,Q),1));for(ne=0,Q=0;ne<D.length;ne++)de=D[D.length-1-ne],U[U.length-1-ne]!==de&&(Object.prototype.hasOwnProperty.call(F,de)?(k.push({command:qt.removeLayer,args:[de]}),U.splice(U.lastIndexOf(de,U.length-Q),1)):Q++,xe=U[U.length-ne],k.push({command:qt.addLayer,args:[$[de],xe]}),U.splice(U.length-ne,0,de),q[de]=!0);for(ne=0;ne<D.length;ne++)if(de=D[ne],ve=F[de],ce=$[de],!q[de]&&!Ht(ve,ce))if(Ht(ve.source,ce.source)&&Ht(ve["source-layer"],ce["source-layer"])&&Ht(ve.type,ce.type)){for(Se in Dn(ve.layout,ce.layout,k,de,null,qt.setLayoutProperty),Dn(ve.paint,ce.paint,k,de,null,qt.setPaintProperty),Ht(ve.filter,ce.filter)||k.push({command:qt.setFilter,args:[de,ce.filter]}),Ht(ve.minzoom,ce.minzoom)&&Ht(ve.maxzoom,ce.maxzoom)||k.push({command:qt.setLayerZoomRange,args:[de,ce.minzoom,ce.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Dn(ve[Se],ce[Se],k,de,Se.slice(6),qt.setPaintProperty):Ht(ve[Se],ce[Se])||k.push({command:qt.setLayerProperty,args:[de,Se,ce[Se]]}));for(Se in ce)Object.prototype.hasOwnProperty.call(ce,Se)&&!Object.prototype.hasOwnProperty.call(ve,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Dn(ve[Se],ce[Se],k,de,Se.slice(6),qt.setPaintProperty):Ht(ve[Se],ce[Se])||k.push({command:qt.setLayerProperty,args:[de,Se,ce[Se]]}))}else k.push({command:qt.removeLayer,args:[de]}),xe=U[U.lastIndexOf(de)+1],k.push({command:qt.addLayer,args:[ce,xe]})}(_,r.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:qt.setStyle,args:[r]}]}return s},u.dot=function(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]+a[3]*r[3]},u.earthRadius=d_,u.ease=fe,u.emitValidationErrors=Ts,u.emptyStyle=function(){const a={},r=Ce.$version;for(const s in Ce.$root){const d=Ce.$root[s];if(d.required){let m=null;m=s==="version"?r:d.type==="array"?[]:{},m!=null&&(a[s]=m)}}return a},u.equals=function(a,r){var s=a[0],d=a[1],m=a[2],_=a[3],v=a[4],b=a[5],k=a[6],I=a[7],D=a[8],F=a[9],$=a[10],U=a[11],q=a[12],ne=a[13],Q=a[14],de=a[15],ve=r[0],ce=r[1],xe=r[2],Se=r[3],Me=r[4],rt=r[5],st=r[6],Je=r[7],Xe=r[8],qe=r[9],et=r[10],Ke=r[11],Be=r[12],xt=r[13],ct=r[14],Ut=r[15];return Math.abs(s-ve)<=fi*Math.max(1,Math.abs(s),Math.abs(ve))&&Math.abs(d-ce)<=fi*Math.max(1,Math.abs(d),Math.abs(ce))&&Math.abs(m-xe)<=fi*Math.max(1,Math.abs(m),Math.abs(xe))&&Math.abs(_-Se)<=fi*Math.max(1,Math.abs(_),Math.abs(Se))&&Math.abs(v-Me)<=fi*Math.max(1,Math.abs(v),Math.abs(Me))&&Math.abs(b-rt)<=fi*Math.max(1,Math.abs(b),Math.abs(rt))&&Math.abs(k-st)<=fi*Math.max(1,Math.abs(k),Math.abs(st))&&Math.abs(I-Je)<=fi*Math.max(1,Math.abs(I),Math.abs(Je))&&Math.abs(D-Xe)<=fi*Math.max(1,Math.abs(D),Math.abs(Xe))&&Math.abs(F-qe)<=fi*Math.max(1,Math.abs(F),Math.abs(qe))&&Math.abs($-et)<=fi*Math.max(1,Math.abs($),Math.abs(et))&&Math.abs(U-Ke)<=fi*Math.max(1,Math.abs(U),Math.abs(Ke))&&Math.abs(q-Be)<=fi*Math.max(1,Math.abs(q),Math.abs(Be))&&Math.abs(ne-xt)<=fi*Math.max(1,Math.abs(ne),Math.abs(xt))&&Math.abs(Q-ct)<=fi*Math.max(1,Math.abs(Q),Math.abs(ct))&&Math.abs(de-Ut)<=fi*Math.max(1,Math.abs(de),Math.abs(Ut))},u.evaluateSizeForFeature=function(a,{uSize:r,uSizeT:s},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/qa:a.kind==="composite"?ci.number(d/qa,m/qa,s):r},u.evaluateSizeForZoom=function(a,r){let s=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:v}=a,b=m?B(Ei.interpolationFactor(m,r,_,v),0,1):0;a.kind==="camera"?d=ci.number(a.minSize,a.maxSize,b):s=b}return{uSizeT:s,uSize:d}},u.evaluateVariableOffset=q2,u.evented=$u,u.exported=bt,u.extend=K,u.filterObject=ye,u.findLineIntersection=function(a,r,s,d){const m=r.y-a.y,_=r.x-a.x,v=d.y-s.y,b=d.x-s.x,k=v*_-b*m;if(k===0)return null;const I=(b*(a.y-s.y)-v*(a.x-s.x))/k;return new A(a.x+I*_,a.y+I*m)},u.fromScaling=function(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},u.getAnchorAlignment=a_,u.getAnchorJustification=g_,u.getArrayBuffer=Wn,u.getDefaultExportFromCjs=S,u.getJSON=function(a,r){return Ot(K(a,{type:"json"}),r)},u.getOverlapMode=s_,u.getProtocolAction=Jt,u.getRTLTextPluginStatus=Xh,u.getReferrer=zn,u.getVideo=function(a,r){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let d=0;d<a.length;d++){const m=window.document.createElement("source");wi(a[d])||(s.crossOrigin="Anonymous"),m.src=a[d],s.appendChild(m)}return{cancel:()=>{}}},u.groupByLayout=function(a,r){const s={};for(let m=0;m<a.length;m++){const _=r&&r[a[m].id]||D0(a[m]);r&&(r[a[m].id]=_);let v=s[_];v||(v=s[_]=[]),v.push(a[m])}const d=[];for(const m in s)d.push(s[m]);return d},u.identity=U0,u.interpolate=ci,u.invert=function(a,r){var s=r[0],d=r[1],m=r[2],_=r[3],v=r[4],b=r[5],k=r[6],I=r[7],D=r[8],F=r[9],$=r[10],U=r[11],q=r[12],ne=r[13],Q=r[14],de=r[15],ve=s*b-d*v,ce=s*k-m*v,xe=s*I-_*v,Se=d*k-m*b,Me=d*I-_*b,rt=m*I-_*k,st=D*ne-F*q,Je=D*Q-$*q,Xe=D*de-U*q,qe=F*Q-$*ne,et=F*de-U*ne,Ke=$*de-U*Q,Be=ve*Ke-ce*et+xe*qe+Se*Xe-Me*Je+rt*st;return Be?(a[0]=(b*Ke-k*et+I*qe)*(Be=1/Be),a[1]=(m*et-d*Ke-_*qe)*Be,a[2]=(ne*rt-Q*Me+de*Se)*Be,a[3]=($*Me-F*rt-U*Se)*Be,a[4]=(k*Xe-v*Ke-I*Je)*Be,a[5]=(s*Ke-m*Xe+_*Je)*Be,a[6]=(Q*xe-q*rt-de*ce)*Be,a[7]=(D*rt-$*xe+U*ce)*Be,a[8]=(v*et-b*Xe+I*st)*Be,a[9]=(d*Xe-s*et-_*st)*Be,a[10]=(q*Me-ne*xe+de*ve)*Be,a[11]=(F*xe-D*Me-U*ve)*Be,a[12]=(b*Je-v*qe-k*st)*Be,a[13]=(s*qe-d*Je+m*st)*Be,a[14]=(ne*ce-q*Se-Q*ve)*Be,a[15]=(D*Se-F*ce+$*ve)*Be,a):null},u.isImageBitmap=xn,u.isSafari=Nt,u.isWorker=Tt,u.keysDifference=function(a,r){const s=[];for(const d in a)d in r||s.push(d);return s},u.lazyLoadRTLTextPlugin=function(){Hi.isLoading()||Hi.isLoaded()||Xh()!=="deferred"||Ap()},u.makeRequest=Ot,u.mapObject=ge,u.mercatorXfromLng=C2,u.mercatorYfromLat=P2,u.mercatorZfromAltitude=I2,u.mul=nz,u.mul$1=function(a,r,s){return a[0]=r[0]*s[0],a[1]=r[1]*s[1],a[2]=r[2]*s[2],a[3]=r[3]*s[3],a},u.multiply=Db,u.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},u.operations=qt,u.ortho=function(a,r,s,d,m,_,v){var b=1/(r-s),k=1/(d-m),I=1/(_-v);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*I,a[11]=0,a[12]=(r+s)*b,a[13]=(m+d)*k,a[14]=(v+_)*I,a[15]=1,a},u.parseCacheControl=function(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,m,_)=>{const v=m||_;return r[d]=!v||v.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},u.parseGlyphPbf=function(a){return new r_(a).readFields(t5,[])},u.pbf=o2,u.performSymbolLayout=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Mn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0].layout,s=a.bucket.layers[0]._unevaluatedLayout._values,d={layoutIconSize:s["icon-size"].possiblyEvaluate(new In(a.bucket.zoom+1),a.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new In(a.bucket.zoom+1),a.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new In(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:I}=a.bucket.textSizeData;d.compositeTextSizes=[s["text-size"].possiblyEvaluate(new In(k),a.canonical),s["text-size"].possiblyEvaluate(new In(I),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:I}=a.bucket.iconSizeData;d.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new In(k),a.canonical),s["icon-size"].possiblyEvaluate(new In(I),a.canonical)]}const m=r.get("text-line-height")*Ar,_=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",v=r.get("text-keep-upright"),b=r.get("text-size");for(const k of a.bucket.features){const I=r.get("text-font").evaluate(k,{},a.canonical).join(","),D=b.evaluate(k,{},a.canonical),F=d.layoutTextSize.evaluate(k,{},a.canonical),$=d.layoutIconSize.evaluate(k,{},a.canonical),U={horizontal:{},vertical:void 0},q=k.text;let ne,Q=[0,0];if(q){const ce=q.toString(),xe=r.get("text-letter-spacing").evaluate(k,{},a.canonical)*Ar,Se=Wh(ce)?xe:0,Me=r.get("text-anchor").evaluate(k,{},a.canonical),rt=r.get("text-variable-anchor");if(!rt){const et=r.get("text-radial-offset").evaluate(k,{},a.canonical);Q=et?q2(Me,[et*Ar,m_]):r.get("text-offset").evaluate(k,{},a.canonical).map(Ke=>Ke*Ar)}let st=_?"center":r.get("text-justify").evaluate(k,{},a.canonical);const Je=r.get("symbol-placement"),Xe=Je==="point"?r.get("text-max-width").evaluate(k,{},a.canonical)*Ar:0,qe=()=>{a.bucket.allowVerticalPlacement&&Du(ce)&&(U.vertical=Zp(q,a.glyphMap,a.glyphPositions,a.imagePositions,I,Xe,m,Me,"left",Se,Q,u.WritingMode.vertical,!0,Je,F,D))};if(!_&&rt){const et=st==="auto"?rt.map(Be=>g_(Be)):[st];let Ke=!1;for(let Be=0;Be<et.length;Be++){const xt=et[Be];if(!U.horizontal[xt])if(Ke)U.horizontal[xt]=U.horizontal[0];else{const ct=Zp(q,a.glyphMap,a.glyphPositions,a.imagePositions,I,Xe,m,"center",xt,Se,Q,u.WritingMode.horizontal,!1,Je,F,D);ct&&(U.horizontal[xt]=ct,Ke=ct.positionedLines.length===1)}}qe()}else{st==="auto"&&(st=g_(Me));const et=Zp(q,a.glyphMap,a.glyphPositions,a.imagePositions,I,Xe,m,Me,st,Se,Q,u.WritingMode.horizontal,!1,Je,F,D);et&&(U.horizontal[st]=et),qe(),Du(ce)&&_&&v&&(U.vertical=Zp(q,a.glyphMap,a.glyphPositions,a.imagePositions,I,Xe,m,Me,st,Se,Q,u.WritingMode.vertical,!1,Je,F,D))}}let de=!1;if(k.icon&&k.icon.name){const ce=a.imageMap[k.icon.name];ce&&(ne=s5(a.imagePositions[k.icon.name],r.get("icon-offset").evaluate(k,{},a.canonical),r.get("icon-anchor").evaluate(k,{},a.canonical)),de=!!ce.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=de:a.bucket.sdfIcons!==de&&ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ce.pixelRatio!==a.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const ve=H2(U.horizontal)||U.vertical;a.bucket.iconsInText=!!ve&&ve.iconsInText,(ve||ne)&&S5(a.bucket,k,U,ne,a.imageMap,d,F,$,Q,de,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},u.perspective=function(a,r,s,d,m){var _,v=1/Math.tan(r/2);return a[0]=v/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(_=1/(d-m)),a[14]=2*m*d*_):(a[10]=-1,a[14]=-2*d),a},u.pick=function(a,r){const s={};for(let d=0;d<r.length;d++){const m=r[d];m in a&&(s[m]=a[m])}return s},u.plugin=Hi,u.pointGeometry=w,u.polygonIntersectsPolygon=Cb,u.potpack=d2,u.register=it,u.registerForPluginStateChange=function(a){return a({pluginStatus:hi,pluginURL:wa}),$u.on("pluginStateChange",a),a},u.renderColorRamp=$b,u.rotateX=function(a,r,s){var d=Math.sin(s),m=Math.cos(s),_=r[4],v=r[5],b=r[6],k=r[7],I=r[8],D=r[9],F=r[10],$=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=_*m+I*d,a[5]=v*m+D*d,a[6]=b*m+F*d,a[7]=k*m+$*d,a[8]=I*m-_*d,a[9]=D*m-v*d,a[10]=F*m-b*d,a[11]=$*m-k*d,a},u.rotateZ=function(a,r,s){var d=Math.sin(s),m=Math.cos(s),_=r[0],v=r[1],b=r[2],k=r[3],I=r[4],D=r[5],F=r[6],$=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=_*m+I*d,a[1]=v*m+D*d,a[2]=b*m+F*d,a[3]=k*m+$*d,a[4]=I*m-_*d,a[5]=D*m-v*d,a[6]=F*m-b*d,a[7]=$*m-k*d,a},u.sameOrigin=wi,u.scale=function(a,r,s){var d=s[0],m=s[1],_=s[2];return a[0]=r[0]*d,a[1]=r[1]*d,a[2]=r[2]*d,a[3]=r[3]*d,a[4]=r[4]*m,a[5]=r[5]*m,a[6]=r[6]*m,a[7]=r[7]*m,a[8]=r[8]*_,a[9]=r[9]*_,a[10]=r[10]*_,a[11]=r[11]*_,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},u.setRTLTextPlugin=function(a,r,s=!1){if(hi===qh||hi===Ou||hi===Zh)throw new Error("setRTLTextPlugin cannot be called multiple times.");wa=bt.resolveURL(a),hi=qh,Il=r,Hh(),s||Ap()},u.sphericalToCartesian=function([a,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(r)*Math.sin(s),y:a*Math.sin(r)*Math.sin(s),z:a*Math.cos(s)}},u.toEvaluationFeature=Ll,u.transformMat4=Bp,u.translate=function(a,r,s){var d,m,_,v,b,k,I,D,F,$,U,q,ne=s[0],Q=s[1],de=s[2];return r===a?(a[12]=r[0]*ne+r[4]*Q+r[8]*de+r[12],a[13]=r[1]*ne+r[5]*Q+r[9]*de+r[13],a[14]=r[2]*ne+r[6]*Q+r[10]*de+r[14],a[15]=r[3]*ne+r[7]*Q+r[11]*de+r[15]):(m=r[1],_=r[2],v=r[3],b=r[4],k=r[5],I=r[6],D=r[7],F=r[8],$=r[9],U=r[10],q=r[11],a[0]=d=r[0],a[1]=m,a[2]=_,a[3]=v,a[4]=b,a[5]=k,a[6]=I,a[7]=D,a[8]=F,a[9]=$,a[10]=U,a[11]=q,a[12]=d*ne+b*Q+F*de+r[12],a[13]=m*ne+k*Q+$*de+r[13],a[14]=_*ne+I*Q+U*de+r[14],a[15]=v*ne+D*Q+q*de+r[15]),a},u.triggerPluginCompletionEvent=Mp,u.unicodeBlockLookup=Ye,u.uniqueId=function(){return le++},u.v8Spec=Ce,u.validateCustomStyleLayer=function(a){const r=[],s=a.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},u.validateLight=R0,u.validateStyle=xa,u.vectorTile=Is,u.warnOnce=ke,u.wrap=V}),h(["./shared"],function(u){class S{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,N){for(const ie of O){this._layerConfigs[ie.id]=ie;const se=this._layers[ie.id]=u.createStyleLayer(ie);se._featureFilter=u.createFilter(se.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of N)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const X=u.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ie of X){const se=ie.map(Ie=>this._layers[Ie.id]),me=se[0];if(me.visibility==="none")continue;const pe=me.source||"";let ae=this.familiesBySource[pe];ae||(ae=this.familiesBySource[pe]={});const _e=me.sourceLayer||"_geojsonTileLayer";let Ae=ae[_e];Ae||(Ae=ae[_e]=[]),Ae.push(se)}}}class w{constructor(O){const N={},X=[];for(const pe in O){const ae=O[pe],_e=N[pe]={};for(const Ae in ae){const Ie=ae[+Ae];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const ze={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};X.push(ze),_e[Ae]={rect:ze,metrics:Ie.metrics}}}const{w:ie,h:se}=u.potpack(X),me=new u.AlphaImage({width:ie||1,height:se||1});for(const pe in O){const ae=O[pe];for(const _e in ae){const Ae=ae[+_e];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Ie=N[pe][_e].rect;u.AlphaImage.copy(Ae.bitmap,me,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},Ae.bitmap)}}this.image=me,this.positions=N}}u.register("GlyphAtlas",w);class C{constructor(O){this.tileID=new u.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId}parse(O,N,X,ie,se){this.status="parsing",this.data=O,this.collisionBoxArray=new u.CollisionBoxArray;const me=new u.DictionaryCoder(Object.keys(O.layers).sort()),pe=new u.FeatureIndex(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const ae={},_e={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},Ae=N.familiesBySource[this.source];for(const Vt in Ae){const un=O.layers[Vt];if(!un)continue;un.version===1&&u.warnOnce(`Vector tile source "${this.source}" layer "${Vt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fn=me.encode(Vt),Pn=[];for(let Rn=0;Rn<un.length;Rn++){const Qn=un.feature(Rn),Qt=pe.getId(Qn,Vt);Pn.push({feature:Qn,id:Qt,index:Rn,sourceLayerIndex:fn})}for(const Rn of Ae[Vt]){const Qn=Rn[0];Qn.source!==this.source&&u.warnOnce(`layer.source = ${Qn.source} does not equal this.source = ${this.source}`),Qn.minzoom&&this.zoom<Math.floor(Qn.minzoom)||Qn.maxzoom&&this.zoom>=Qn.maxzoom||Qn.visibility!=="none"&&(A(Rn,this.zoom,X),(ae[Qn.id]=Qn.createBucket({index:pe.bucketLayerIDs.length,layers:Rn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fn,sourceID:this.source})).populate(Pn,_e,this.tileID.canonical),pe.bucketLayerIDs.push(Rn.map(Qt=>Qt.id)))}}let Ie,ze,yt,zt;const ut=u.mapObject(_e.glyphDependencies,Vt=>Object.keys(Vt).map(Number));Object.keys(ut).length?ie.send("getGlyphs",{uid:this.uid,stacks:ut,source:this.source,tileID:this.tileID,type:"glyphs"},(Vt,un)=>{Ie||(Ie=Vt,ze=un,Xt.call(this))}):ze={};const _t=Object.keys(_e.iconDependencies);_t.length?ie.send("getImages",{icons:_t,source:this.source,tileID:this.tileID,type:"icons"},(Vt,un)=>{Ie||(Ie=Vt,yt=un,Xt.call(this))}):yt={};const Rt=Object.keys(_e.patternDependencies);function Xt(){if(Ie)return se(Ie);if(ze&&yt&&zt){const Vt=new w(ze),un=new u.ImageAtlas(yt,zt);for(const fn in ae){const Pn=ae[fn];Pn instanceof u.SymbolBucket?(A(Pn.layers,this.zoom,X),u.performSymbolLayout({bucket:Pn,glyphMap:ze,glyphPositions:Vt.positions,imageMap:yt,imagePositions:un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Pn.hasPattern&&(Pn instanceof u.LineBucket||Pn instanceof u.FillBucket||Pn instanceof u.FillExtrusionBucket)&&(A(Pn.layers,this.zoom,X),Pn.addFeatures(_e,this.tileID.canonical,un.patternPositions))}this.status="done",se(null,{buckets:Object.values(ae).filter(fn=>!fn.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vt.image,imageAtlas:un,glyphMap:this.returnDependencies?ze:null,iconMap:this.returnDependencies?yt:null,glyphPositions:this.returnDependencies?Vt.positions:null})}}Rt.length?ie.send("getImages",{icons:Rt,source:this.source,tileID:this.tileID,type:"patterns"},(Vt,un)=>{Ie||(Ie=Vt,zt=un,Xt.call(this))}):zt={},Xt.call(this)}}function A(J,O,N){const X=new u.EvaluationParameters(O);for(const ie of J)ie.recalculate(X,N)}function z(J,O){const N=u.getArrayBuffer(J.request,(X,ie,se,me)=>{X?O(X):ie&&O(null,{vectorTile:new u.vectorTile.VectorTile(new u.Protobuf(ie)),rawData:ie,cacheControl:se,expires:me})});return()=>{N.cancel(),O()}}class G{constructor(O,N,X,ie){this.actor=O,this.layerIndex=N,this.availableImages=X,this.loadVectorData=ie||z,this.loading={},this.loaded={}}loadTile(O,N){const X=O.uid;this.loading||(this.loading={});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request),se=this.loading[X]=new C(O);se.abort=this.loadVectorData(O,(me,pe)=>{if(delete this.loading[X],me||!pe)return se.status="done",this.loaded[X]=se,N(me);const ae=pe.rawData,_e={};pe.expires&&(_e.expires=pe.expires),pe.cacheControl&&(_e.cacheControl=pe.cacheControl);const Ae={};if(ie){const Ie=ie.finish();Ie&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ie)))}se.vectorTile=pe.vectorTile,se.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ie,ze)=>{if(Ie||!ze)return N(Ie);N(null,u.extend({rawTileData:ae.slice(0)},ze,_e,Ae))}),this.loaded=this.loaded||{},this.loaded[X]=se})}reloadTile(O,N){const X=this.loaded,ie=O.uid,se=this;if(X&&X[ie]){const me=X[ie];me.showCollisionBoxes=O.showCollisionBoxes;const pe=(ae,_e)=>{const Ae=me.reloadCallback;Ae&&(delete me.reloadCallback,me.parse(me.vectorTile,se.layerIndex,this.availableImages,se.actor,Ae)),N(ae,_e)};me.status==="parsing"?me.reloadCallback=pe:me.status==="done"&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,pe):pe())}}abortTile(O,N){const X=this.loading,ie=O.uid;X&&X[ie]&&X[ie].abort&&(X[ie].abort(),delete X[ie]),N()}removeTile(O,N){const X=this.loaded,ie=O.uid;X&&X[ie]&&delete X[ie],N()}}class Z{constructor(){this.loaded={}}loadTile(O,N){const{uid:X,encoding:ie,rawImageData:se}=O,me=u.isImageBitmap(se)?this.getImageData(se):se,pe=new u.DEMData(X,me,ie);this.loaded=this.loaded||{},this.loaded[X]=pe,N(null,pe)}getImageData(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);const N=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:N.width,height:N.height},N.data)}removeTile(O){const N=this.loaded,X=O.uid;N&&N[X]&&delete N[X]}}function H(J,O){if(J.length!==0){fe(J[0],O);for(var N=1;N<J.length;N++)fe(J[N],!O)}}function fe(J,O){for(var N=0,X=0,ie=0,se=J.length,me=se-1;ie<se;me=ie++){var pe=(J[ie][0]-J[me][0])*(J[me][1]+J[ie][1]),ae=N+pe;X+=Math.abs(N)>=Math.abs(pe)?N-ae+pe:pe-ae+N,N=ae}N+X>=0!=!!O&&J.reverse()}var B=u.getDefaultExportFromCjs(function J(O,N){var X,ie=O&&O.type;if(ie==="FeatureCollection")for(X=0;X<O.features.length;X++)J(O.features[X],N);else if(ie==="GeometryCollection")for(X=0;X<O.geometries.length;X++)J(O.geometries[X],N);else if(ie==="Feature")J(O.geometry,N);else if(ie==="Polygon")H(O.coordinates,N);else if(ie==="MultiPolygon")for(X=0;X<O.coordinates.length;X++)H(O.coordinates[X],N);return O});const V=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},le=u.pointGeometry,ue=u.vectorTile.VectorTileFeature,ge=ye;function ye(J,O){this.options=O||{},this.features=J,this.length=J.length}function Ee(J,O){this.id=typeof J.id=="number"?J.id:void 0,this.type=J.type,this.rawGeometry=J.type===1?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=O||4096}ye.prototype.feature=function(J){return new Ee(this.features[J],this.options.extent)},Ee.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var O=0;O<J.length;O++){for(var N=J[O],X=[],ie=0;ie<N.length;ie++)X.push(new le(N[ie][0],N[ie][1]));this.geometry.push(X)}return this.geometry},Ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,O=1/0,N=-1/0,X=1/0,ie=-1/0,se=0;se<J.length;se++)for(var me=J[se],pe=0;pe<me.length;pe++){var ae=me[pe];O=Math.min(O,ae.x),N=Math.max(N,ae.x),X=Math.min(X,ae.y),ie=Math.max(ie,ae.y)}return[O,X,N,ie]},Ee.prototype.toGeoJSON=ue.prototype.toGeoJSON;var je=u.pbf,ke=ge;function Ve(J){var O=new je;return function(N,X){for(var ie in N.layers)X.writeMessage(3,$t,N.layers[ie])}(J,O),O.finish()}function $t(J,O){var N;O.writeVarintField(15,J.version||1),O.writeStringField(1,J.name||""),O.writeVarintField(5,J.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<J.length;N++)X.feature=J.feature(N),O.writeMessage(2,Tt,X);var ie=X.keys;for(N=0;N<ie.length;N++)O.writeStringField(3,ie[N]);var se=X.values;for(N=0;N<se.length;N++)O.writeMessage(4,Ne,se[N])}function Tt(J,O){var N=J.feature;N.id!==void 0&&O.writeVarintField(1,N.id),O.writeMessage(2,Ct,J),O.writeVarintField(3,N.type),O.writeMessage(4,dn,N)}function Ct(J,O){var N=J.feature,X=J.keys,ie=J.values,se=J.keycache,me=J.valuecache;for(var pe in N.properties){var ae=N.properties[pe],_e=se[pe];if(ae!==null){_e===void 0&&(X.push(pe),se[pe]=_e=X.length-1),O.writeVarint(_e);var Ae=typeof ae;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(ae=JSON.stringify(ae));var Ie=Ae+":"+ae,ze=me[Ie];ze===void 0&&(ie.push(ae),me[Ie]=ze=ie.length-1),O.writeVarint(ze)}}}function Nt(J,O){return(O<<3)+(7&J)}function xn(J){return J<<1^J>>31}function dn(J,O){for(var N=J.loadGeometry(),X=J.type,ie=0,se=0,me=N.length,pe=0;pe<me;pe++){var ae=N[pe],_e=1;X===1&&(_e=ae.length),O.writeVarint(Nt(1,_e));for(var Ae=X===3?ae.length-1:ae.length,Ie=0;Ie<Ae;Ie++){Ie===1&&X!==1&&O.writeVarint(Nt(2,Ae-1));var ze=ae[Ie].x-ie,yt=ae[Ie].y-se;O.writeVarint(xn(ze)),O.writeVarint(xn(yt)),ie+=ze,se+=yt}X===3&&O.writeVarint(Nt(7,1))}}function Ne(J,O){var N=typeof J;N==="string"?O.writeStringField(1,J):N==="boolean"?O.writeBooleanField(7,J):N==="number"&&(J%1!=0?O.writeDoubleField(3,J):J<0?O.writeSVarintField(6,J):O.writeVarintField(5,J))}K.exports=Ve,K.exports.fromVectorTileJs=Ve,K.exports.fromGeojsonVt=function(J,O){O=O||{};var N={};for(var X in J)N[X]=new ke(J[X].features,O),N[X].name=X,N[X].version=O.version,N[X].extent=O.extent;return Ve({layers:N})},K.exports.GeoJSONWrapper=ke;var at=u.getDefaultExportFromCjs(K.exports);const bt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},Bt=Math.fround||(lt=new Float32Array(1),J=>(lt[0]=+J,lt[0]));var lt;class zn{constructor(O){this.options=Object.assign(Object.create(bt),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:N,minZoom:X,maxZoom:ie}=this.options;N&&console.time("total time");const se=`prepare ${O.length} points`;N&&console.time(se),this.points=O;const me=[];for(let ae=0;ae<O.length;ae++){const _e=O[ae];if(!_e.geometry)continue;const[Ae,Ie]=_e.geometry.coordinates,ze=Bt(Ot(Ae)),yt=Bt(Wn(Ie));me.push(ze,yt,1/0,ae,-1,1),this.options.reduce&&me.push(0)}let pe=this.trees[ie+1]=this._createTree(me);N&&console.timeEnd(se);for(let ae=ie;ae>=X;ae--){const _e=+Date.now();pe=this.trees[ae]=this._createTree(this._cluster(pe,ae)),N&&console.log("z%d: %d clusters in %dms",ae,pe.numItems,+Date.now()-_e)}return N&&console.timeEnd("total time"),this}getClusters(O,N){let X=((O[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,O[1]));let se=O[2]===180?180:((O[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)X=-180,se=180;else if(X>se){const Ie=this.getClusters([X,ie,180,me],N),ze=this.getClusters([-180,ie,se,me],N);return Ie.concat(ze)}const pe=this.trees[this._limitZoom(N)],ae=pe.range(Ot(X),Wn(me),Ot(se),Wn(ie)),_e=pe.data,Ae=[];for(const Ie of ae){const ze=this.stride*Ie;Ae.push(_e[ze+5]>1?Jt(_e,ze,this.clusterProps):this.points[_e[ze+3]])}return Ae}getChildren(O){const N=this._getOriginId(O),X=this._getOriginZoom(O),ie="No cluster with the specified id.",se=this.trees[X];if(!se)throw new Error(ie);const me=se.data;if(N*this.stride>=me.length)throw new Error(ie);const pe=this.options.radius/(this.options.extent*Math.pow(2,X-1)),ae=se.within(me[N*this.stride],me[N*this.stride+1],pe),_e=[];for(const Ae of ae){const Ie=Ae*this.stride;me[Ie+4]===O&&_e.push(me[Ie+5]>1?Jt(me,Ie,this.clusterProps):this.points[me[Ie+3]])}if(_e.length===0)throw new Error(ie);return _e}getLeaves(O,N,X){const ie=[];return this._appendLeaves(ie,O,N=N||10,X=X||0,0),ie}getTile(O,N,X){const ie=this.trees[this._limitZoom(O)],se=Math.pow(2,O),{extent:me,radius:pe}=this.options,ae=pe/me,_e=(X-ae)/se,Ae=(X+1+ae)/se,Ie={features:[]};return this._addTileFeatures(ie.range((N-ae)/se,_e,(N+1+ae)/se,Ae),ie.data,N,X,se,Ie),N===0&&this._addTileFeatures(ie.range(1-ae/se,_e,1,Ae),ie.data,se,X,se,Ie),N===se-1&&this._addTileFeatures(ie.range(0,_e,ae/se,Ae),ie.data,-1,X,se,Ie),Ie.features.length?Ie:null}getClusterExpansionZoom(O){let N=this._getOriginZoom(O)-1;for(;N<=this.options.maxZoom;){const X=this.getChildren(O);if(N++,X.length!==1)break;O=X[0].properties.cluster_id}return N}_appendLeaves(O,N,X,ie,se){const me=this.getChildren(N);for(const pe of me){const ae=pe.properties;if(ae&&ae.cluster?se+ae.point_count<=ie?se+=ae.point_count:se=this._appendLeaves(O,ae.cluster_id,X,ie,se):se<ie?se++:O.push(pe),O.length===X)break}return se}_createTree(O){const N=new u.KDBush(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<O.length;X+=this.stride)N.add(O[X],O[X+1]);return N.finish(),N.data=O,N}_addTileFeatures(O,N,X,ie,se,me){for(const pe of O){const ae=pe*this.stride,_e=N[ae+5]>1;let Ae,Ie,ze;if(_e)Ae=Jn(N,ae,this.clusterProps),Ie=N[ae],ze=N[ae+1];else{const ut=this.points[N[ae+3]];Ae=ut.properties;const[_t,Rt]=ut.geometry.coordinates;Ie=Ot(_t),ze=Wn(Rt)}const yt={type:1,geometry:[[Math.round(this.options.extent*(Ie*se-X)),Math.round(this.options.extent*(ze*se-ie))]],tags:Ae};let zt;zt=_e||this.options.generateId?N[ae+3]:this.points[N[ae+3]].id,zt!==void 0&&(yt.id=zt),me.features.push(yt)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,N){const{radius:X,extent:ie,reduce:se,minPoints:me}=this.options,pe=X/(ie*Math.pow(2,N)),ae=O.data,_e=[],Ae=this.stride;for(let Ie=0;Ie<ae.length;Ie+=Ae){if(ae[Ie+2]<=N)continue;ae[Ie+2]=N;const ze=ae[Ie],yt=ae[Ie+1],zt=O.within(ae[Ie],ae[Ie+1],pe),ut=ae[Ie+5];let _t=ut;for(const Rt of zt){const Xt=Rt*Ae;ae[Xt+2]>N&&(_t+=ae[Xt+5])}if(_t>ut&&_t>=me){let Rt,Xt=ze*ut,Vt=yt*ut,un=-1;const fn=((Ie/Ae|0)<<5)+(N+1)+this.points.length;for(const Pn of zt){const Rn=Pn*Ae;if(ae[Rn+2]<=N)continue;ae[Rn+2]=N;const Qn=ae[Rn+5];Xt+=ae[Rn]*Qn,Vt+=ae[Rn+1]*Qn,ae[Rn+4]=fn,se&&(Rt||(Rt=this._map(ae,Ie,!0),un=this.clusterProps.length,this.clusterProps.push(Rt)),se(Rt,this._map(ae,Rn)))}ae[Ie+4]=fn,_e.push(Xt/_t,Vt/_t,1/0,fn,-1,_t),se&&_e.push(un)}else{for(let Rt=0;Rt<Ae;Rt++)_e.push(ae[Ie+Rt]);if(_t>1)for(const Rt of zt){const Xt=Rt*Ae;if(!(ae[Xt+2]<=N)){ae[Xt+2]=N;for(let Vt=0;Vt<Ae;Vt++)_e.push(ae[Xt+Vt])}}}}return _e}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,N,X){if(O[N+5]>1){const me=this.clusterProps[O[N+6]];return X?Object.assign({},me):me}const ie=this.points[O[N+3]].properties,se=this.options.map(ie);return X&&se===ie?Object.assign({},se):se}}function Jt(J,O,N){return{type:"Feature",id:J[O+3],properties:Jn(J,O,N),geometry:{type:"Point",coordinates:[(X=J[O],360*(X-.5)),wi(J[O+1])]}};var X}function Jn(J,O,N){const X=J[O+5],ie=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,se=J[O+6],me=se===-1?{}:Object.assign({},N[se]);return Object.assign(me,{cluster:!0,cluster_id:J[O+3],point_count:X,point_count_abbreviated:ie})}function Ot(J){return J/360+.5}function Wn(J){const O=Math.sin(J*Math.PI/180),N=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return N<0?0:N>1?1:N}function wi(J){const O=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function Ir(J,O,N,X){for(var ie,se=X,me=N-O>>1,pe=N-O,ae=J[O],_e=J[O+1],Ae=J[N],Ie=J[N+1],ze=O+3;ze<N;ze+=3){var yt=wr(J[ze],J[ze+1],ae,_e,Ae,Ie);if(yt>se)ie=ze,se=yt;else if(yt===se){var zt=Math.abs(ze-me);zt<pe&&(ie=ze,pe=zt)}}se>X&&(ie-O>3&&Ir(J,O,ie,X),J[ie+2]=se,N-ie>3&&Ir(J,ie,N,X))}function wr(J,O,N,X,ie,se){var me=ie-N,pe=se-X;if(me!==0||pe!==0){var ae=((J-N)*me+(O-X)*pe)/(me*me+pe*pe);ae>1?(N=ie,X=se):ae>0&&(N+=me*ae,X+=pe*ae)}return(me=J-N)*me+(pe=O-X)*pe}function Gt(J,O,N,X){var ie={id:J===void 0?null:J,type:O,geometry:N,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(se){var me=se.geometry,pe=se.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")on(se,me);else if(pe==="Polygon"||pe==="MultiLineString")for(var ae=0;ae<me.length;ae++)on(se,me[ae]);else if(pe==="MultiPolygon")for(ae=0;ae<me.length;ae++)for(var _e=0;_e<me[ae].length;_e++)on(se,me[ae][_e])}(ie),ie}function on(J,O){for(var N=0;N<O.length;N+=3)J.minX=Math.min(J.minX,O[N]),J.minY=Math.min(J.minY,O[N+1]),J.maxX=Math.max(J.maxX,O[N]),J.maxY=Math.max(J.maxY,O[N+1])}function pr(J,O,N,X){if(O.geometry){var ie=O.geometry.coordinates,se=O.geometry.type,me=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),pe=[],ae=O.id;if(N.promoteId?ae=O.properties[N.promoteId]:N.generateId&&(ae=X||0),se==="Point")Ce(ie,pe);else if(se==="MultiPoint")for(var _e=0;_e<ie.length;_e++)Ce(ie[_e],pe);else if(se==="LineString")Fr(ie,pe,me,!1);else if(se==="MultiLineString"){if(N.lineMetrics){for(_e=0;_e<ie.length;_e++)Fr(ie[_e],pe=[],me,!1),J.push(Gt(ae,"LineString",pe,O.properties));return}ji(ie,pe,me,!1)}else if(se==="Polygon")ji(ie,pe,me,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(_e=0;_e<O.geometry.geometries.length;_e++)pr(J,{id:ae,geometry:O.geometry.geometries[_e],properties:O.properties},N,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ie.length;_e++){var Ae=[];ji(ie[_e],Ae,me,!0),pe.push(Ae)}}J.push(Gt(ae,se,pe,O.properties))}}function Ce(J,O){O.push(Ht(J[0])),O.push(qt(J[1])),O.push(0)}function Fr(J,O,N,X){for(var ie,se,me=0,pe=0;pe<J.length;pe++){var ae=Ht(J[pe][0]),_e=qt(J[pe][1]);O.push(ae),O.push(_e),O.push(0),pe>0&&(me+=X?(ie*_e-ae*se)/2:Math.sqrt(Math.pow(ae-ie,2)+Math.pow(_e-se,2))),ie=ae,se=_e}var Ae=O.length-3;O[2]=1,Ir(O,0,Ae,N),O[Ae+2]=1,O.size=Math.abs(me),O.start=0,O.end=O.size}function ji(J,O,N,X){for(var ie=0;ie<J.length;ie++){var se=[];Fr(J[ie],se,N,X),O.push(se)}}function Ht(J){return J/360+.5}function qt(J){var O=Math.sin(J*Math.PI/180),N=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return N<0?0:N>1?1:N}function lr(J,O,N,X,ie,se,me,pe){if(X/=O,se>=(N/=O)&&me<X)return J;if(me<N||se>=X)return null;for(var ae=[],_e=0;_e<J.length;_e++){var Ae=J[_e],Ie=Ae.geometry,ze=Ae.type,yt=ie===0?Ae.minX:Ae.minY,zt=ie===0?Ae.maxX:Ae.maxY;if(yt>=N&&zt<X)ae.push(Ae);else if(!(zt<N||yt>=X)){var ut=[];if(ze==="Point"||ze==="MultiPoint")ai(Ie,ut,N,X,ie);else if(ze==="LineString")Or(Ie,ut,N,X,ie,!1,pe.lineMetrics);else if(ze==="MultiLineString")Dn(Ie,ut,N,X,ie,!1);else if(ze==="Polygon")Dn(Ie,ut,N,X,ie,!0);else if(ze==="MultiPolygon")for(var _t=0;_t<Ie.length;_t++){var Rt=[];Dn(Ie[_t],Rt,N,X,ie,!0),Rt.length&&ut.push(Rt)}if(ut.length){if(pe.lineMetrics&&ze==="LineString"){for(_t=0;_t<ut.length;_t++)ae.push(Gt(Ae.id,ze,ut[_t],Ae.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(ut.length===1?(ze="LineString",ut=ut[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=ut.length===3?"Point":"MultiPoint"),ae.push(Gt(Ae.id,ze,ut,Ae.tags))}}}return ae.length?ae:null}function ai(J,O,N,X,ie){for(var se=0;se<J.length;se+=3){var me=J[se+ie];me>=N&&me<=X&&(O.push(J[se]),O.push(J[se+1]),O.push(J[se+2]))}}function Or(J,O,N,X,ie,se,me){for(var pe,ae,_e=ga(J),Ae=ie===0?St:Le,Ie=J.start,ze=0;ze<J.length-3;ze+=3){var yt=J[ze],zt=J[ze+1],ut=J[ze+2],_t=J[ze+3],Rt=J[ze+4],Xt=ie===0?yt:zt,Vt=ie===0?_t:Rt,un=!1;me&&(pe=Math.sqrt(Math.pow(yt-_t,2)+Math.pow(zt-Rt,2))),Xt<N?Vt>N&&(ae=Ae(_e,yt,zt,_t,Rt,N),me&&(_e.start=Ie+pe*ae)):Xt>X?Vt<X&&(ae=Ae(_e,yt,zt,_t,Rt,X),me&&(_e.start=Ie+pe*ae)):Qe(_e,yt,zt,ut),Vt<N&&Xt>=N&&(ae=Ae(_e,yt,zt,_t,Rt,N),un=!0),Vt>X&&Xt<=X&&(ae=Ae(_e,yt,zt,_t,Rt,X),un=!0),!se&&un&&(me&&(_e.end=Ie+pe*ae),O.push(_e),_e=ga(J)),me&&(Ie+=pe)}var fn=J.length-3;yt=J[fn],zt=J[fn+1],ut=J[fn+2],(Xt=ie===0?yt:zt)>=N&&Xt<=X&&Qe(_e,yt,zt,ut),fn=_e.length-3,se&&fn>=3&&(_e[fn]!==_e[0]||_e[fn+1]!==_e[1])&&Qe(_e,_e[0],_e[1],_e[2]),_e.length&&O.push(_e)}function ga(J){var O=[];return O.size=J.size,O.start=J.start,O.end=J.end,O}function Dn(J,O,N,X,ie,se){for(var me=0;me<J.length;me++)Or(J[me],O,N,X,ie,se,!1)}function Qe(J,O,N,X){J.push(O),J.push(N),J.push(X)}function St(J,O,N,X,ie,se){var me=(se-O)/(X-O);return J.push(se),J.push(N+(ie-N)*me),J.push(1),me}function Le(J,O,N,X,ie,se){var me=(se-N)/(ie-N);return J.push(O+(X-O)*me),J.push(se),J.push(1),me}function Kt(J,O){for(var N=[],X=0;X<J.length;X++){var ie,se=J[X],me=se.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")ie=Mt(se.geometry,O);else if(me==="MultiLineString"||me==="Polygon"){ie=[];for(var pe=0;pe<se.geometry.length;pe++)ie.push(Mt(se.geometry[pe],O))}else if(me==="MultiPolygon")for(ie=[],pe=0;pe<se.geometry.length;pe++){for(var ae=[],_e=0;_e<se.geometry[pe].length;_e++)ae.push(Mt(se.geometry[pe][_e],O));ie.push(ae)}N.push(Gt(se.id,me,ie,se.tags))}return N}function Mt(J,O){var N=[];N.size=J.size,J.start!==void 0&&(N.start=J.start,N.end=J.end);for(var X=0;X<J.length;X+=3)N.push(J[X]+O,J[X+1],J[X+2]);return N}function mr(J,O){if(J.transformed)return J;var N,X,ie,se=1<<J.z,me=J.x,pe=J.y;for(N=0;N<J.features.length;N++){var ae=J.features[N],_e=ae.geometry,Ae=ae.type;if(ae.geometry=[],Ae===1)for(X=0;X<_e.length;X+=2)ae.geometry.push(gr(_e[X],_e[X+1],O,se,me,pe));else for(X=0;X<_e.length;X++){var Ie=[];for(ie=0;ie<_e[X].length;ie+=2)Ie.push(gr(_e[X][ie],_e[X][ie+1],O,se,me,pe));ae.geometry.push(Ie)}}return J.transformed=!0,J}function gr(J,O,N,X,ie,se){return[Math.round(N*(J*X-ie)),Math.round(N*(O*X-se))]}function We(J,O,N,X,ie){for(var se=O===ie.maxZoom?0:ie.tolerance/((1<<O)*ie.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:X,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<J.length;pe++){me.numFeatures++,At(me,J[pe],se,ie);var ae=J[pe].minX,_e=J[pe].minY,Ae=J[pe].maxX,Ie=J[pe].maxY;ae<me.minX&&(me.minX=ae),_e<me.minY&&(me.minY=_e),Ae>me.maxX&&(me.maxX=Ae),Ie>me.maxY&&(me.maxY=Ie)}return me}function At(J,O,N,X){var ie=O.geometry,se=O.type,me=[];if(se==="Point"||se==="MultiPoint")for(var pe=0;pe<ie.length;pe+=3)me.push(ie[pe]),me.push(ie[pe+1]),J.numPoints++,J.numSimplified++;else if(se==="LineString")It(me,ie,J,N,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(pe=0;pe<ie.length;pe++)It(me,ie[pe],J,N,se==="Polygon",pe===0);else if(se==="MultiPolygon")for(var ae=0;ae<ie.length;ae++){var _e=ie[ae];for(pe=0;pe<_e.length;pe++)It(me,_e[pe],J,N,!0,pe===0)}if(me.length){var Ae=O.tags||null;if(se==="LineString"&&X.lineMetrics){for(var Ie in Ae={},O.tags)Ae[Ie]=O.tags[Ie];Ae.mapbox_clip_start=ie.start/ie.size,Ae.mapbox_clip_end=ie.end/ie.size}var ze={geometry:me,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Ae};O.id!==null&&(ze.id=O.id),J.features.push(ze)}}function It(J,O,N,X,ie,se){var me=X*X;if(X>0&&O.size<(ie?me:X))N.numPoints+=O.length/3;else{for(var pe=[],ae=0;ae<O.length;ae+=3)(X===0||O[ae+2]>me)&&(N.numSimplified++,pe.push(O[ae]),pe.push(O[ae+1])),N.numPoints++;ie&&function(_e,Ae){for(var Ie=0,ze=0,yt=_e.length,zt=yt-2;ze<yt;zt=ze,ze+=2)Ie+=(_e[ze]-_e[zt])*(_e[ze+1]+_e[zt+1]);if(Ie>0===Ae)for(ze=0,yt=_e.length;ze<yt/2;ze+=2){var ut=_e[ze],_t=_e[ze+1];_e[ze]=_e[yt-2-ze],_e[ze+1]=_e[yt-1-ze],_e[yt-2-ze]=ut,_e[yt-1-ze]=_t}}(pe,se),J.push(pe)}}function Nn(J,O){var N=(O=this.options=function(ie,se){for(var me in se)ie[me]=se[me];return ie}(Object.create(this.options),O)).debug;if(N&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(ie,se){var me=[];if(ie.type==="FeatureCollection")for(var pe=0;pe<ie.features.length;pe++)pr(me,ie.features[pe],se,pe);else pr(me,ie.type==="Feature"?ie:{geometry:ie},se);return me}(J,O);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(ie,se){var me=se.buffer/se.extent,pe=ie,ae=lr(ie,1,-1-me,me,0,-1,2,se),_e=lr(ie,1,1-me,2+me,0,-1,2,se);return(ae||_e)&&(pe=lr(ie,1,-me,1+me,0,-1,2,se)||[],ae&&(pe=Kt(ae,1).concat(pe)),_e&&(pe=pe.concat(Kt(_e,-1)))),pe}(X,O),X.length&&this.splitTile(X,0,0,0),N&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zr(J,O,N){return 32*((1<<J)*N+O)+J}function ft(J,O){return O?J.properties[O]:J.id}function bi(J,O){if(J==null)return!0;if(J.type==="Feature")return ft(J,O)!=null;if(J.type==="FeatureCollection"){const N=new Set;for(const X of J.features){const ie=ft(X,O);if(ie==null||N.has(ie))return!1;N.add(ie)}return!0}return!1}function Gi(J,O){const N=new Map;if(J!=null)if(J.type==="Feature")N.set(ft(J,O),J);else for(const X of J.features)N.set(ft(X,O),X);return N}function ya(J,O){const N=J.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);const X=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!X)return O(null,null);const ie=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=me.length,this._features=me}feature(me){return new class{constructor(pe){this._feature=pe,this.extent=u.EXTENT,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const ae of this._feature.geometry)pe.push([new u.Point(ae[0],ae[1])]);return pe}{const pe=[];for(const ae of this._feature.geometry){const _e=[];for(const Ae of ae)_e.push(new u.Point(Ae[0],Ae[1]));pe.push(_e)}return pe}}toGeoJSON(pe,ae,_e){return V.call(this,pe,ae,_e)}}(this._features[me])}}(X.features);let se=at(ie);se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),O(null,{vectorTile:ie,rawData:se.buffer})}Nn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Nn.prototype.splitTile=function(J,O,N,X,ie,se,me){for(var pe=[J,O,N,X],ae=this.options,_e=ae.debug;pe.length;){X=pe.pop(),N=pe.pop(),O=pe.pop(),J=pe.pop();var Ae=1<<O,Ie=Zr(O,N,X),ze=this.tiles[Ie];if(!ze&&(_e>1&&console.time("creation"),ze=this.tiles[Ie]=We(J,O,N,X,ae),this.tileCoords.push({z:O,x:N,y:X}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,N,X,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var yt="z"+O;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(ze.source=J,ie){if(O===ae.maxZoom||O===ie)continue;var zt=1<<ie-O;if(N!==Math.floor(se/zt)||X!==Math.floor(me/zt))continue}else if(O===ae.indexMaxZoom||ze.numPoints<=ae.indexMaxPoints)continue;if(ze.source=null,J.length!==0){_e>1&&console.time("clipping");var ut,_t,Rt,Xt,Vt,un,fn=.5*ae.buffer/ae.extent,Pn=.5-fn,Rn=.5+fn,Qn=1+fn;ut=_t=Rt=Xt=null,Vt=lr(J,Ae,N-fn,N+Rn,0,ze.minX,ze.maxX,ae),un=lr(J,Ae,N+Pn,N+Qn,0,ze.minX,ze.maxX,ae),J=null,Vt&&(ut=lr(Vt,Ae,X-fn,X+Rn,1,ze.minY,ze.maxY,ae),_t=lr(Vt,Ae,X+Pn,X+Qn,1,ze.minY,ze.maxY,ae),Vt=null),un&&(Rt=lr(un,Ae,X-fn,X+Rn,1,ze.minY,ze.maxY,ae),Xt=lr(un,Ae,X+Pn,X+Qn,1,ze.minY,ze.maxY,ae),un=null),_e>1&&console.timeEnd("clipping"),pe.push(ut||[],O+1,2*N,2*X),pe.push(_t||[],O+1,2*N,2*X+1),pe.push(Rt||[],O+1,2*N+1,2*X),pe.push(Xt||[],O+1,2*N+1,2*X+1)}}},Nn.prototype.getTile=function(J,O,N){var X=this.options,ie=X.extent,se=X.debug;if(J<0||J>24)return null;var me=1<<J,pe=Zr(J,O=(O%me+me)%me,N);if(this.tiles[pe])return mr(this.tiles[pe],ie);se>1&&console.log("drilling down to z%d-%d-%d",J,O,N);for(var ae,_e=J,Ae=O,Ie=N;!ae&&_e>0;)_e--,Ae=Math.floor(Ae/2),Ie=Math.floor(Ie/2),ae=this.tiles[Zr(_e,Ae,Ie)];return ae&&ae.source?(se>1&&console.log("found parent tile z%d-%d-%d",_e,Ae,Ie),se>1&&console.time("drilling down"),this.splitTile(ae.source,_e,Ae,Ie,J,O,N),se>1&&console.timeEnd("drilling down"),this.tiles[pe]?mr(this.tiles[pe],ie):null):null};class _a extends G{constructor(O,N,X,ie){super(O,N,X,ya),this._dataUpdateable=new Map,this.loadGeoJSON=(se,me)=>{const{promoteId:pe}=se;if(se.request)return u.getJSON(se.request,(ae,_e,Ae,Ie)=>{this._dataUpdateable=bi(_e,pe)?Gi(_e,pe):void 0,me(ae,_e,Ae,Ie)});if(typeof se.data=="string")try{const ae=JSON.parse(se.data);this._dataUpdateable=bi(ae,pe)?Gi(ae,pe):void 0,me(null,ae)}catch{me(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`))}else se.dataDiff?this._dataUpdateable?(function(ae,_e,Ae){var Ie,ze,yt,zt;if(_e.removeAll&&ae.clear(),_e.remove)for(const ut of _e.remove)ae.delete(ut);if(_e.add)for(const ut of _e.add){const _t=ft(ut,Ae);_t!=null&&ae.set(_t,ut)}if(_e.update)for(const ut of _e.update){let _t=ae.get(ut.id);if(_t==null)continue;const Rt=!ut.removeAllProperties&&(((Ie=ut.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((ze=ut.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((ut.newGeometry||ut.removeAllProperties||Rt)&&(_t={..._t},ae.set(ut.id,_t),Rt&&(_t.properties={..._t.properties})),ut.newGeometry&&(_t.geometry=ut.newGeometry),ut.removeAllProperties)_t.properties={};else if(((yt=ut.removeProperties)===null||yt===void 0?void 0:yt.length)>0)for(const Xt of ut.removeProperties)Object.prototype.hasOwnProperty.call(_t.properties,Xt)&&delete _t.properties[Xt];if(((zt=ut.addOrUpdateProperties)===null||zt===void 0?void 0:zt.length)>0)for(const{key:Xt,value:Vt}of ut.addOrUpdateProperties)_t.properties[Xt]=Vt}}(this._dataUpdateable,se.dataDiff,pe),me(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):me(new Error(`Cannot update existing geojson data in ${se.source}`)):me(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ie&&(this.loadGeoJSON=ie)}loadData(O,N){var X;(X=this._pendingRequest)===null||X===void 0||X.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request);this._pendingCallback=N,this._pendingRequest=this.loadGeoJSON(O,(se,me)=>{if(delete this._pendingCallback,delete this._pendingRequest,se||!me)return N(se);if(typeof me!="object")return N(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{B(me,!0);try{if(O.filter){const ae=u.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));const _e=me.features.filter(Ae=>ae.value.evaluate({zoom:0},Ae));me={type:"FeatureCollection",features:_e}}this._geoJSONIndex=O.cluster?new zn(function({superclusterOptions:ae,clusterProperties:_e}){if(!_e||!ae)return ae;const Ae={},Ie={},ze={accumulated:null,zoom:0},yt={properties:null},zt=Object.keys(_e);for(const ut of zt){const[_t,Rt]=_e[ut],Xt=u.createExpression(Rt),Vt=u.createExpression(typeof _t=="string"?[_t,["accumulated"],["get",ut]]:_t);Ae[ut]=Xt.value,Ie[ut]=Vt.value}return ae.map=ut=>{yt.properties=ut;const _t={};for(const Rt of zt)_t[Rt]=Ae[Rt].evaluate(ze,yt);return _t},ae.reduce=(ut,_t)=>{yt.properties=_t;for(const Rt of zt)ze.accumulated=ut[Rt],ut[Rt]=Ie[Rt].evaluate(ze,yt)},ae}(O)).load(me.features):function(ae,_e){return new Nn(ae,_e)}(me,O.geojsonVtOptions)}catch(ae){return N(ae)}this.loaded={};const pe={};if(ie){const ae=ie.finish();ae&&(pe.resourceTiming={},pe.resourceTiming[O.source]=JSON.parse(JSON.stringify(ae)))}N(null,pe)}})}reloadTile(O,N){const X=this.loaded;return X&&X[O.uid]?super.reloadTile(O,N):this.loadTile(O,N)}removeSource(O,N){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),N()}getClusterExpansionZoom(O,N){try{N(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(X){N(X)}}getClusterChildren(O,N){try{N(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(X){N(X)}}getClusterLeaves(O,N){try{N(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(X){N(X)}}}class Mr{constructor(O){this.self=O,this.actor=new u.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:G,geojson:_a},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(N,X)=>{if(this.workerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.workerSourceTypes[N]=X},this.self.registerRTLTextPlugin=N=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=N.applyArabicShaping,u.plugin.processBidirectionalText=N.processBidirectionalText,u.plugin.processStyledBidirectionalText=N.processStyledBidirectionalText}}setReferrer(O,N){this.referrer=N}setImages(O,N,X){this.availableImages[O]=N;for(const ie in this.workerSources[O]){const se=this.workerSources[O][ie];for(const me in se)se[me].availableImages=N}X()}setLayers(O,N,X){this.getLayerIndex(O).replace(N),X()}updateLayers(O,N,X){this.getLayerIndex(O).update(N.layers,N.removedIds),X()}loadTile(O,N,X){this.getWorkerSource(O,N.type,N.source).loadTile(N,X)}loadDEMTile(O,N,X){this.getDEMWorkerSource(O,N.source).loadTile(N,X)}reloadTile(O,N,X){this.getWorkerSource(O,N.type,N.source).reloadTile(N,X)}abortTile(O,N,X){this.getWorkerSource(O,N.type,N.source).abortTile(N,X)}removeTile(O,N,X){this.getWorkerSource(O,N.type,N.source).removeTile(N,X)}removeDEMTile(O,N){this.getDEMWorkerSource(O,N.source).removeTile(N)}removeSource(O,N,X){if(!this.workerSources[O]||!this.workerSources[O][N.type]||!this.workerSources[O][N.type][N.source])return;const ie=this.workerSources[O][N.type][N.source];delete this.workerSources[O][N.type][N.source],ie.removeSource!==void 0?ie.removeSource(N,X):X()}loadWorkerSource(O,N,X){try{this.self.importScripts(N.url),X()}catch(ie){X(ie.toString())}}syncRTLPluginState(O,N,X){try{u.plugin.setState(N);const ie=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&ie!=null){this.self.importScripts(ie);const se=u.plugin.isParsed();X(se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ie}`),se)}}catch(ie){X(ie.toString())}}getAvailableImages(O){let N=this.availableImages[O];return N||(N=[]),N}getLayerIndex(O){let N=this.layerIndexes[O];return N||(N=this.layerIndexes[O]=new S),N}getWorkerSource(O,N,X){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][N]||(this.workerSources[O][N]={}),!this.workerSources[O][N][X]){const ie={send:(se,me,pe)=>{this.actor.send(se,me,pe,O)}};this.workerSources[O][N][X]=new this.workerSourceTypes[N](ie,this.getLayerIndex(O),this.getAvailableImages(O))}return this.workerSources[O][N][X]}getDEMWorkerSource(O,N){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][N]||(this.demWorkerSources[O][N]=new Z),this.demWorkerSources[O][N]}}return u.isWorker()&&(self.worker=new Mr(self)),Mr}),h(["./shared"],function(u){var S="3.0.0";class w{static testProp(i){if(!w.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in w.docStyle)return i[c];return i[0]}static create(i,c,f){const g=window.document.createElement(i);return c!==void 0&&(g.className=c),f&&f.appendChild(g),g}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,c){i.style[w.transformProp]=c}static addEventListener(i,c,f,g={}){i.addEventListener(c,f,"passive"in g?g:g.capture)}static removeEventListener(i,c,f,g={}){i.removeEventListener(c,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,c){const f=i.getBoundingClientRect();return new u.Point(c.clientX-f.left-i.clientLeft,c.clientY-f.top-i.clientTop)}static touchPos(i,c){const f=i.getBoundingClientRect(),g=[];for(let x=0;x<c.length;x++)g.push(new u.Point(c[x].clientX-f.left-i.clientLeft,c[x].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(p){!G&&z&&(Z?H(p):A=p)}};let A,z,G=!1,Z=!1;function H(p){const i=p.createTexture();p.bindTexture(p.TEXTURE_2D,i);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,z),p.isContextLost())return;C.supported=!0}catch{}p.deleteTexture(i),G=!0}var fe;typeof document!="undefined"&&(z=document.createElement("img"),z.onload=function(){A&&H(A),A=null,Z=!0},z.onerror=function(){G=!0,A=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(p){let i,c,f,g;p.resetRequestQueue=()=>{i=[],c=0,f=0,g={}},p.addThrottleControl=M=>{const L=f++;return g[L]=M,L},p.removeThrottleControl=M=>{delete g[M],P()},p.getImage=(M,L,R=!0)=>{C.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*");const j={requestParameters:M,supportImageRefresh:R,callback:L,cancelled:!1,completed:!1,cancel:()=>{j.completed||j.cancelled||(j.cancelled=!0,j.innerRequest&&(j.innerRequest.cancel(),c--),P())}};return i.push(j),P(),j};const x=M=>{const{requestParameters:L,supportImageRefresh:R,callback:j}=M;return u.extend(L,{type:"image"}),(R!==!1||u.isWorker()||u.getProtocolAction(L.url)||L.headers&&!Object.keys(L.headers).reduce((te,Y)=>te&&Y==="accept",!0)?u.makeRequest:T)(L,(te,Y,ee,oe)=>{E(M,j,te,Y,ee,oe)})},E=(M,L,R,j,te,Y)=>{R?L(R):j instanceof HTMLImageElement||j instanceof ImageBitmap?L(null,j):j&&((ee,oe)=>{typeof createImageBitmap=="function"?u.arrayBufferToImageBitmap(ee,oe):u.arrayBufferToImage(ee,oe)})(j,(ee,oe)=>{ee!=null?L(ee):oe!=null&&L(null,oe,{cacheControl:te,expires:Y})}),M.cancelled||(M.completed=!0,c--,P())},P=()=>{const M=(()=>{const L=Object.keys(g);let R=!1;if(L.length>0){for(const j of L)if(R=g[j](),R)break}return R})()?u.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<M&&i.length>0;L++){const R=i.shift();if(R.cancelled){L--;continue}const j=x(R);c++,R.innerRequest=j}},T=(M,L)=>{const R=new Image,j=M.url;let te=!1;const Y=M.credentials;return Y&&Y==="include"?R.crossOrigin="use-credentials":(Y&&Y==="same-origin"||!u.sameOrigin(j))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{L(null,R),R.onerror=R.onload=null},R.onerror=()=>{te||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=j,{cancel:()=>{te=!0,R.src=""}}}}(fe||(fe={})),fe.resetRequestQueue();var B,V=fe;(function(p){p.Glyphs="Glyphs",p.Image="Image",p.Source="Source",p.SpriteImage="SpriteImage",p.SpriteJSON="SpriteJSON",p.Style="Style",p.Tile="Tile",p.Unknown="Unknown"})(B||(B={}));class K{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,f){const g=function(x){const E=x.match(le);if(!E)throw new Error(`Unable to parse URL "${x}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(i);return g.path+=`${c}${f}`,function(x){const E=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${E}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ue(p){var i=new u.ARRAY_TYPE(3);return i[0]=p[0],i[1]=p[1],i[2]=p[2],i}var ge,ye=function(p,i,c){return p[0]=i[0]-c[0],p[1]=i[1]-c[1],p[2]=i[2]-c[2],p};ge=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(ge[0]=0,ge[1]=0,ge[2]=0);var Ee=function(p){var i=p[0],c=p[1];return i*i+c*c};function je(p){const i=[];if(typeof p=="string")i.push({id:"default",url:p});else if(p&&p.length>0){const c=[];for(const{id:f,url:g}of p){const x=`${f}${g}`;c.indexOf(x)===-1&&(c.push(x),i.push({id:f,url:g}))}}return i}function ke(p,i,c,f,g){if(f)return void p(f);if(g!==Object.values(i).length||g!==Object.values(c).length)return;const x={};for(const E in i){x[E]={};const P=u.exported.getImageCanvasContext(c[E]),T=i[E];for(const M in T){const{width:L,height:R,x:j,y:te,sdf:Y,pixelRatio:ee,stretchX:oe,stretchY:he,content:be}=T[M];x[E][M]={data:null,pixelRatio:ee,sdf:Y,stretchX:oe,stretchY:he,content:be,spriteData:{width:L,height:R,x:j,y:te,context:P}}}}p(null,x)}(function(){var p=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class Ve{constructor(i,c,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(c,g)}update(i,c,f){const{width:g,height:x}=i,E=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:P}=this,{gl:T}=P;if(this.useMipmap=Boolean(c&&c.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!c||c.premultiply!==!1)),E)this.size=[g,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,i):T.texImage2D(T.TEXTURE_2D,0,this.format,g,x,0,this.format,T.UNSIGNED_BYTE,i.data);else{const{x:M,y:L}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?T.texSubImage2D(T.TEXTURE_2D,0,M,L,T.RGBA,T.UNSIGNED_BYTE,i):T.texSubImage2D(T.TEXTURE_2D,0,M,L,g,x,T.RGBA,T.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(i,c,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||i),this.filter=i),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function $t(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}class Tt extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:f}of this.requestors)this._notify(c,f);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new u.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let f=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||c<g[1])return!1;f=g[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const f=c.spriteData,g=f&&f.width||c.data.width,x=f&&f.height||c.data.height;return!(i[0]<0||g<i[0]||i[1]<0||x<i[1]||i[2]<0||g<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,f=!0){const g=this.getImage(i);if(f&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const f={};for(const g of i){let x=this.getImage(g);x||(this.fire(new u.Event("styleimagemissing",{id:g})),x=this.getImage(g)),x?f[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:u.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,f)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],f=this.getImage(i);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new u.ImagePosition(g,f);this.patterns[i]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:f}=u.potpack(i),g=this.atlasImage;g.resize({width:c||1,height:f||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],P=E.x+1,T=E.y+1,M=this.getImage(x).data,L=M.width,R=M.height;u.RGBAImage.copy(M,g,{x:0,y:0},{x:P,y:T},{width:L,height:R}),u.RGBAImage.copy(M,g,{x:0,y:R-1},{x:P,y:T-1},{width:L,height:1}),u.RGBAImage.copy(M,g,{x:0,y:0},{x:P,y:T+R},{width:L,height:1}),u.RGBAImage.copy(M,g,{x:L-1,y:0},{x:P-1,y:T},{width:1,height:R}),u.RGBAImage.copy(M,g,{x:0,y:0},{x:P+L,y:T},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||u.warnOnce(`Image with ID: "${c}" was not found`),$t(f)&&this.updateImage(c,f)}}}const Ct=1e20;function Nt(p,i,c,f,g,x,E,P,T){for(let M=i;M<i+f;M++)xn(p,c*x+M,x,g,E,P,T);for(let M=c;M<c+g;M++)xn(p,M*x+i,1,f,E,P,T)}function xn(p,i,c,f,g,x,E){x[0]=0,E[0]=-Ct,E[1]=Ct,g[0]=p[i];for(let P=1,T=0,M=0;P<f;P++){g[P]=p[i+P*c];const L=P*P;do{const R=x[T];M=(g[P]-g[R]+L-R*R)/(P-R)/2}while(M<=E[T]&&--T>-1);T++,x[T]=P,E[T]=M,E[T+1]=Ct}for(let P=0,T=0;P<f;P++){for(;E[T+1]<P;)T++;const M=x[T],L=P-M;p[i+P*c]=g[M]+L*L}}class dn{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const f=[];for(const g in i)for(const x of i[g])f.push({stack:g,id:x});u.asyncAll(f,({stack:g,id:x},E)=>{let P=this.entries[g];P||(P=this.entries[g]={glyphs:{},requests:{},ranges:{}});let T=P.glyphs[x];if(T!==void 0)return void E(null,{stack:g,id:x,glyph:T});if(T=this._tinySDF(P,g,x),T)return P.glyphs[x]=T,void E(null,{stack:g,id:x,glyph:T});const M=Math.floor(x/256);if(256*M>65535)return void E(new Error("glyphs > 65535 not supported"));if(P.ranges[M])return void E(null,{stack:g,id:x,glyph:T});if(!this.url)return void E(new Error("glyphsUrl is not set"));let L=P.requests[M];L||(L=P.requests[M]=[],dn.loadGlyphRange(g,M,this.url,this.requestManager,(R,j)=>{if(j){for(const te in j)this._doesCharSupportLocalGlyph(+te)||(P.glyphs[+te]=j[+te]);P.ranges[M]=!0}for(const te of L)te(R,j);delete P.requests[M]})),L.push((R,j)=>{R?E(R):j&&E(null,{stack:g,id:x,glyph:j[x]||null})})},(g,x)=>{if(g)c(g);else if(x){const E={};for(const{stack:P,id:T,glyph:M}of x)(E[P]||(E[P]={}))[T]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};c(null,E)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](i)||u.unicodeBlockLookup["Hangul Syllables"](i)||u.unicodeBlockLookup.Hiragana(i)||u.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=i.tinySDF;if(!x){let P="400";/bold/i.test(c)?P="900":/medium/i.test(c)?P="500":/light/i.test(c)&&(P="200"),x=i.tinySDF=new dn.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:P})}const E=x.draw(String.fromCharCode(f));return{id:f,bitmap:new u.AlphaImage({width:E.width||30,height:E.height||30},E.data),metrics:{width:E.glyphWidth||24,height:E.glyphHeight||24,left:E.glyphLeft||0,top:E.glyphTop-27||-8,advance:E.glyphAdvance||24}}}}dn.loadGlyphRange=function(p,i,c,f,g){const x=256*i,E=x+255,P=f.transformRequest(c.replace("{fontstack}",p).replace("{range}",`${x}-${E}`),B.Glyphs);u.getArrayBuffer(P,(T,M)=>{if(T)g(T);else if(M){const L={};for(const R of u.parseGlyphPbf(M))L[R.id]=R;g(null,L)}})},dn.TinySDF=class{constructor({fontSize:p=24,buffer:i=3,radius:c=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:E="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=c;const P=this.size=p+4*i,T=this._createCanvas(P),M=this.ctx=T.getContext("2d",{willReadFrequently:!0});M.font=`${E} ${x} ${p}px ${g}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(p){const i=document.createElement("canvas");return i.width=i.height=p,i}draw(p){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(p),E=Math.ceil(c),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),T=Math.min(this.size-this.buffer,E+Math.ceil(f)),M=P+2*this.buffer,L=T+2*this.buffer,R=Math.max(M*L,0),j=new Uint8ClampedArray(R),te={data:j,width:M,height:L,glyphWidth:P,glyphHeight:T,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(P===0||T===0)return te;const{ctx:Y,buffer:ee,gridInner:oe,gridOuter:he}=this;Y.clearRect(ee,ee,P,T),Y.fillText(p,ee,ee+E);const be=Y.getImageData(ee,ee,P,T);he.fill(Ct,0,R),oe.fill(0,0,R);for(let re=0;re<T;re++)for(let we=0;we<P;we++){const Te=be.data[4*(re*P+we)+3]/255;if(Te===0)continue;const De=(re+ee)*M+we+ee;if(Te===1)he[De]=0,oe[De]=Ct;else{const $e=.5-Te;he[De]=$e>0?$e*$e:0,oe[De]=$e<0?$e*$e:0}}Nt(he,0,0,M,L,M,this.f,this.v,this.z),Nt(oe,ee,ee,P,T,M,this.f,this.v,this.z);for(let re=0;re<R;re++){const we=Math.sqrt(he[re])-Math.sqrt(oe[re]);j[re]=Math.round(255-255*(we/this.radius+this.cutoff))}return te}};class Ne{constructor(){this.specification=u.v8Spec.light.position}possiblyEvaluate(i,c){return u.sphericalToCartesian(i.expression.evaluate(c))}interpolate(i,c,f){return{x:u.interpolate.number(i.x,c.x,f),y:u.interpolate.number(i.y,c.y,f),z:u.interpolate.number(i.z,c.z,f)}}}const at="-transition";let bt,Bt;class lt extends u.Evented{constructor(i){super(),bt=bt||new u.Properties({anchor:new u.DataConstantProperty(u.v8Spec.light.anchor),position:new Ne,color:new u.DataConstantProperty(u.v8Spec.light.color),intensity:new u.DataConstantProperty(u.v8Spec.light.intensity)}),this._transitionable=new u.Transitionable(bt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.validateLight,i,c))for(const f in i){const g=i[f];f.endsWith(at)?this._transitionable.setTransition(f.slice(0,-at.length),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&u.emitValidationErrors(this,i.call(u.validateStyle,u.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v8Spec})))}}class zn{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const f=i.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,c)),this.dashEntry[f]}getDashRanges(i,c,f){const g=[];let x=i.length%2==1?-i[i.length-1]*f:0,E=i[0]*f,P=!0;g.push({left:x,right:E,isDash:P,zeroLength:i[0]===0});let T=i[0];for(let M=1;M<i.length;M++){P=!P;const L=i[M];x=T*f,T+=L,E=T*f,g.push({left:x,right:E,isDash:P,zeroLength:L===0})}return g}addRoundDash(i,c,f){const g=c/2;for(let x=-f;x<=f;x++){const E=this.width*(this.nextRow+f+x);let P=0,T=i[P];for(let M=0;M<this.width;M++){M/T.right>1&&(T=i[++P]);const L=Math.abs(M-T.left),R=Math.abs(M-T.right),j=Math.min(L,R);let te;const Y=x/f*(g+1);if(T.isDash){const ee=g-Math.abs(Y);te=Math.sqrt(j*j+ee*ee)}else te=g-Math.sqrt(j*j+Y*Y);this.data[E+M]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(i){for(let P=i.length-1;P>=0;--P){const T=i[P],M=i[P+1];T.zeroLength?i.splice(P,1):M&&M.isDash===T.isDash&&(M.left=T.left,i.splice(P,1))}const c=i[0],f=i[i.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const g=this.width*this.nextRow;let x=0,E=i[x];for(let P=0;P<this.width;P++){P/E.right>1&&(E=i[++x]);const T=Math.abs(P-E.left),M=Math.abs(P-E.right),L=Math.min(T,M);this.data[g+P]=Math.max(0,Math.min(255,(E.isDash?L:-L)+128))}}addDash(i,c){const f=c?7:0,g=2*f+1;if(this.nextRow+g>this.height)return u.warnOnce("LineAtlas out of space"),null;let x=0;for(let P=0;P<i.length;P++)x+=i[P];if(x!==0){const P=this.width/x,T=this.getDashRanges(i,this.width,P);c?this.addRoundDash(T,P,f):this.addRegularDash(T)}const E={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,E}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Jt{constructor(i,c,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let x=0;x<g.length;x++){const E=new Jt.Actor(g[x],c,f);E.name=`Worker ${x}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,f){u.asyncAll(this.actors,(g,x)=>{g.send(i,c,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Jn(p,i,c){const f=function(g,x){if(g)return c(g);if(x){const E=u.pick(u.extend(x,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(E.vectorLayers=x.vector_layers,E.vectorLayerIds=E.vectorLayers.map(P=>P.id)),c(null,E)}};return p.url?u.getJSON(i.transformRequest(p.url,B.Source),f):u.exported.frame(()=>f(null,p))}Jt.Actor=u.Actor;class Ot{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}extend(i){const c=this._sw,f=this._ne;let g,x;if(i instanceof u.LngLat)g=i,x=i;else{if(!(i instanceof Ot))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ot.convert(i)):this.extend(u.LngLat.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.LngLat.convert(i)):this;if(g=i._sw,x=i._ne,!g||!x)return this}return c||f?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new u.LngLat(g.lng,g.lat),this._ne=new u.LngLat(x.lng,x.lat)),this}getCenter(){return new u.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new u.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:f}=u.LngLat.convert(i);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return i instanceof Ot?i:i&&new Ot(i)}static fromLngLat(i,c=0){const f=360*c/40075017,g=f/Math.cos(Math.PI/180*i.lat);return new Ot(new u.LngLat(i.lng-g,i.lat-f),new u.LngLat(i.lng+g,i.lat+f))}}class Wn{constructor(i,c,f){this.bounds=Ot.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*c),g=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*c),E=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=f&&i.x<x&&i.y>=g&&i.y<E}}class wi extends u.Evented{constructor(i,c,f,g){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(c,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jn(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new u.ErrorEvent(i)):c&&(u.extend(this,c),c.bounds&&(this.tileBounds=new Wn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,B.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,P){return delete i.request,i.aborted?c(null):E&&E.status!==404?c(E):(P&&P.resourceTiming&&(i.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&i.setExpiryData(P),i.loadVectorData(P,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",g,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ir extends u.Evented{constructor(i,c,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},c),u.extend(this,u.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Jn(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new u.ErrorEvent(i)):c&&(u.extend(this,c),c.bounds&&(this.tileBounds=new Wn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=V.getImage(this.map._requestManager.transformRequest(f,B.Tile),(g,x,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(g)i.state="errored",c(g);else if(x){this.map._refreshExpiredTiles&&E&&i.setExpiryData(E);const P=this.map.painter.context,T=P.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new Ve(P,x,T.RGBA,{useMipmap:!0}),i.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&T.texParameterf(T.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class wr extends Ir{constructor(i,c,f,g){super(i,c,f,g),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(x,E){x&&(i.state="errored",c(x)),E&&(i.dem=E,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.request=V.getImage(this.map._requestManager.transformRequest(f,B.Tile),function(x,E){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(x)i.state="errored",c(x);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(E),delete E.cacheControl,delete E.expires;const P=u.isImageBitmap(E)&&(Bt==null&&(Bt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Bt)?E:u.exported.getImageData(E,1),T={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:P,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",T,g.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,f=Math.pow(2,c.z),g=(c.x-1+f)%f,x=c.x===0?i.wrap-1:i.wrap,E=(c.x+1+f)%f,P=c.x+1===f?i.wrap+1:i.wrap,T={};return T[new u.OverscaledTileID(i.overscaledZ,x,c.z,g,c.y).key]={backfilled:!1},T[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(T[new u.OverscaledTileID(i.overscaledZ,x,c.z,g,c.y-1).key]={backfilled:!1},T[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},T[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<f&&(T[new u.OverscaledTileID(i.overscaledZ,x,c.z,g,c.y+1).key]={backfilled:!1},T[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},T[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y+1).key]={backfilled:!1}),T}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Gt extends u.Evented{constructor(i,c,f,g){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=c.data,this._options=u.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.EXTENT,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:f},g),this}_updateWorkerData(i){const c=u.extend({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(u.exported.resolveURL(this._data),B.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new u.Event("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new u.ErrorEvent(f));const E={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&u.extend(E,{resourceTiming:x}),this.fire(new u.Event("data",{...E,sourceDataType:"metadata"})),this.fire(new u.Event("data",{...E,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(x,E)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):x?c(x):(i.loadVectorData(E,this.map.painter,f==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return u.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var on=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pr extends u.Evented{constructor(i,c,f,g){super(),this.id=i,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}load(i,c){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=V.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(f,g)=>{this._request=null,this._loaded=!0,f?this.fire(new u.ErrorEvent(f)):g&&(this.image=g,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(g){let x=1/0,E=1/0,P=-1/0,T=-1/0;for(const j of g)x=Math.min(x,j.x),E=Math.min(E,j.y),P=Math.max(P,j.x),T=Math.max(T,j.y);const M=Math.max(P-x,T-E),L=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),R=Math.pow(2,L);return new u.CanonicalTileID(L,Math.floor((x+P)/2*R),Math.floor((E+T)/2*R))}(c),this.minzoom=this.maxzoom=this.tileID.z;const f=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,on.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ve(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ce extends pr{constructor(i,c,f,g){super(i,c,f,g),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,B.Source).url);u.getVideo(this.urls,(c,f)=>{this._loaded=!0,c?this.fire(new u.ErrorEvent(c)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,on.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Fr extends pr{constructor(i,c,f,g){super(i,c,f,g),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(E=>typeof E!="number"))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,on.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(c,this.canvas,f.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const E=this.tiles[x];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ji={vector:wi,raster:Ir,"raster-dem":wr,geojson:Gt,video:Ce,image:pr,canvas:Fr};function Ht(p,i){const c=u.create();return u.translate(c,c,[1,1,0]),u.scale(c,c,[.5*p.width,.5*p.height,1]),u.multiply(c,c,p.calculatePosMatrix(i.toUnwrapped()))}function qt(p,i,c,f,g,x){const E=function(R,j,te){if(R)for(const Y of R){const ee=j[Y];if(ee&&ee.source===te&&ee.type==="fill-extrusion")return!0}else for(const Y in j){const ee=j[Y];if(ee.source===te&&ee.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,p.id),P=x.maxPitchScaleFactor(),T=p.tilesIn(f,P,E);T.sort(lr);const M=[];for(const R of T)M.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(i,c,p._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,g,x,P,Ht(p.transform,R.tileID))});const L=function(R){const j={},te={};for(const Y of R){const ee=Y.queryResults,oe=Y.wrappedTileID,he=te[oe]=te[oe]||{};for(const be in ee){const re=ee[be],we=he[be]=he[be]||{},Te=j[be]=j[be]||[];for(const De of re)we[De.featureIndex]||(we[De.featureIndex]=!0,Te.push(De))}}return j}(M);for(const R in L)L[R].forEach(j=>{const te=j.feature,Y=p.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=Y});return L}function lr(p,i){const c=p.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}class ai{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,x){const E={};if(!x)return E;for(const P of g){const T=P.layerIds.map(M=>x.getLayer(M)).filter(Boolean);if(T.length!==0){P.layers=T,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(M=>T.filter(L=>L.id===M)[0]));for(const M of T)E[M.id]=P}}return E}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,f,g,x,E,P,T,M,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:E,tileSize:this.tileSize,pixelPosMatrix:L,transform:T,params:P,queryPadding:this.queryPadding*M},i,c,f):{}}querySourceFeatures(i,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=c&&c.sourceLayer?c.sourceLayer:"",E=g._geojsonTileLayer||g[x];if(!E)return;const P=u.createFilter(c&&c.filter),{z:T,x:M,y:L}=this.tileID.canonical,R={z:T,x:M,y:L};for(let j=0;j<E.length;j++){const te=E.feature(j);if(P.needGeometry){const oe=u.toEvaluationFeature(te,!0);if(!P.filter(new u.EvaluationParameters(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!P.filter(new u.EvaluationParameters(this.tileID.overscaledZ),te))continue;const Y=f.getId(te,x),ee=new u.GeoJSONFeature(te,T,M,L,Y);ee.tile=R,i.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const f=u.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const x=this.expirationTime-c;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const x=this.buckets[g],E=x.layers[0].sourceLayer||"_geojsonTileLayer",P=f[E],T=i[E];if(!P||!T||Object.keys(T).length===0)continue;x.update(T,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const M=c&&c.style&&c.style.getLayer(g);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=u.exported.now()+i}setDependencies(i,c){const f={};for(const g of c)f[g]=!0;this.dependencies[i]=f}hasDependency(i,c){for(const f of i){const g=this.dependencies[f];if(g){for(const x of c)if(g[x])return!0}}return!1}}class Or{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:c,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const f=i.wrapped().key,g=c===void 0?0:this.data[f].indexOf(c),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||c.push(g);for(const f of c)this.remove(f.value.tileID,f)}}class ga{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){const g=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},u.extend(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])f[x]||(this.deletedStates[i][g][x]=null)}else for(const x in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;const g=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,c){const f=String(c),g=u.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][c];if(x===null)return{};for(const E in x)delete g[E]}return g}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const E in this.stateChanges[g])this.state[g][E]||(this.state[g][E]={}),u.extend(this.state[g][E],this.stateChanges[g][E]),x[E]=this.state[g][E];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const E in this.state[g])x[E]={},this.state[g][E]={};else for(const E in this.deletedStates[g]){if(this.deletedStates[g][E]===null)this.state[g][E]={};else for(const P of Object.keys(this.deletedStates[g][E]))delete this.state[g][E][P];x[E]=this.state[g][E]}f[g]=f[g]||{},u.extend(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,c)}}class Dn extends u.Evented{constructor(i,c,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,x,E,P){const T=new ji[x.type](g,x,E,P);if(T.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${T.id}`);return u.bindAll(["load","abort","unload","serialize","prepare"],T),T}(i,c,f,this),this._tiles={},this._cache=new Or(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ga,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new u.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Qe).map(i=>i.key)}getRenderableIds(i){const c=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&c.push(this._tiles[f]);return i?c.sort((f,g)=>{const x=f.tileID,E=g.tileID,P=new u.Point(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),T=new u.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-E.overscaledZ||T.y-P.y||T.x-P.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(Qe).map(f=>f.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),this._loadTile(f,this._tileLoaded.bind(this,f,i,c)))}_tileLoaded(i,c,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new u.ErrorEvent(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=u.exported.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const x=c[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const E=this.getTileByID(x);f(i,E),f(E,i)}}function f(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let E=x.tileID.canonical.x-g.tileID.canonical.x;const P=x.tileID.canonical.y-g.tileID.canonical.y,T=Math.pow(2,g.tileID.canonical.z),M=x.tileID.key;E===0&&P===0||Math.abs(P)>1||(Math.abs(E)>1&&(Math.abs(E+T)===1?E+=T:Math.abs(E-T)===1&&(E-=T)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,E,P),g.neighboringTiles&&g.neighboringTiles[M]&&(g.neighboringTiles[M].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,g){for(const x in this._tiles){let E=this._tiles[x];if(g[x]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>f)continue;let P=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const M=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[M.key],E&&E.hasData()&&(P=M)}let T=P;for(;T.overscaledZ>c;)if(T=T.scaledTo(T.overscaledZ-1),i[T.key]){g[P.key]=P;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){const g=i.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(c*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new u.OverscaledTileID(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(L=>this._source.hasTile(L)))):f=[];const g=i.coveringZoomLevel(this._source),x=Math.max(g-Dn.maxOverzooming,this._source.minzoom),E=Math.max(g+Dn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const R of f)if(R.canonical.z>this._source.minzoom){const j=R.scaledTo(R.canonical.z-1);L[j.key]=j;const te=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));L[te.key]=te}f=f.concat(Object.values(L))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new u.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(f,g);if(St(this._source.type)){const L={},R={},j=Object.keys(T),te=u.exported.now();for(const Y of j){const ee=T[Y],oe=this._tiles[Y];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=te)continue;const he=this.findLoadedParent(ee,x);he&&(this._addTile(he.tileID),L[he.tileID.key]=he.tileID),R[Y]=ee}this._retainLoadedChildren(R,g,E,T);for(const Y in L)T[Y]||(this._coveredTiles[Y]=!0,T[Y]=L[Y]);if(c){const Y={},ee={};for(const oe of f)this._tiles[oe.key].hasData()?Y[oe.key]=oe:ee[oe.key]=oe;for(const oe in ee){const he=ee[oe].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(Y[he[0].key]=T[he[0].key]=he[0],Y[he[1].key]=T[he[1].key]=he[1],Y[he[2].key]=T[he[2].key]=he[2],Y[he[3].key]=T[he[3].key]=he[3],delete ee[oe])}for(const oe in ee){const he=this.findLoadedParent(ee[oe],this._source.minzoom);if(he){Y[he.tileID.key]=T[he.tileID.key]=he.tileID;for(const be in Y)Y[be].isChildOf(he.tileID)&&delete Y[be]}}for(const oe in this._tiles)Y[oe]||(this._coveredTiles[oe]=!0)}}for(const L in T)this._tiles[L].clearFadeHold();const M=u.keysDifference(this._tiles,T);for(const L of M){const R=this._tiles[L];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const f={},g={},x=Math.max(c-Dn.maxOverzooming,this._source.minzoom),E=Math.max(c+Dn.maxUnderzooming,this._source.minzoom),P={};for(const T of i){const M=this._addTile(T);f[T.key]=T,M.hasData()||c<this._source.maxzoom&&(P[T.key]=T)}this._retainLoadedChildren(P,c,E,f);for(const T of i){let M=this._tiles[T.key];if(M.hasData())continue;if(c+1>this._source.maxzoom){const R=T.children(this._source.maxzoom)[0],j=this.getTile(R);if(j&&j.hasData()){f[R.key]=R;continue}}else{const R=T.children(this._source.maxzoom);if(f[R[0].key]&&f[R[1].key]&&f[R[2].key]&&f[R[3].key])continue}let L=M.wasRequested();for(let R=T.overscaledZ-1;R>=x;--R){const j=T.scaledTo(R);if(g[j.key])break;if(g[j.key]=!0,M=this.getTile(j),!M&&L&&(M=this._addTile(j)),M){const te=M.hasData();if((L||te)&&(f[j.key]=j),L=M.wasRequested(),te)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}c.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of c)this._loadedParentTiles[x]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const f=c;return c||(c=new ai(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,f||this._source.fire(new u.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,f){const g=[],x=this.transform;if(!x)return g;const E=f?x.getCameraQueryGeometry(i):i,P=i.map(Y=>x.pointCoordinate(Y,this.terrain)),T=E.map(Y=>x.pointCoordinate(Y,this.terrain)),M=this.getIds();let L=1/0,R=1/0,j=-1/0,te=-1/0;for(const Y of T)L=Math.min(L,Y.x),R=Math.min(R,Y.y),j=Math.max(j,Y.x),te=Math.max(te,Y.y);for(let Y=0;Y<M.length;Y++){const ee=this._tiles[M[Y]];if(ee.holdingForFade())continue;const oe=ee.tileID,he=Math.pow(2,x.zoom-ee.tileID.overscaledZ),be=c*ee.queryPadding*u.EXTENT/ee.tileSize/he,re=[oe.getTilePoint(new u.MercatorCoordinate(L,R)),oe.getTilePoint(new u.MercatorCoordinate(j,te))];if(re[0].x-be<u.EXTENT&&re[0].y-be<u.EXTENT&&re[1].x+be>=0&&re[1].y+be>=0){const we=P.map(De=>oe.getTilePoint(De)),Te=T.map(De=>oe.getTilePoint(De));g.push({tile:ee,tileID:oe,queryGeometry:we,cameraQueryGeometry:Te,scale:he})}}return g}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(St(this._source.type)){const i=u.exported.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){const g=this._tiles[i];g&&g.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(const f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}}function Qe(p,i){const c=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return p.overscaledZ-i.overscaledZ||f-c||i.canonical.y-p.canonical.y||i.canonical.x-p.canonical.x}function St(p){return p==="raster"||p==="image"||p==="video"}Dn.maxOverzooming=10,Dn.maxUnderzooming=3;const Le="mapboxgl_preloaded_worker_pool";class Kt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Kt.workerCount;)this.workers.push(new Worker(u.config.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const Mt=Math.floor(u.exported.hardwareConcurrency/2);let mr;function gr(){return mr||(mr=new Kt),mr}Kt.workerCount=u.isSafari(globalThis)?Math.max(Math.min(Mt,3),1):1;class We{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);let c=1,f=this._distances[c];const g=i*this.paddedLength+this.padding;for(;f<g&&c<this._distances.length;)f=this._distances[++c];const x=c-1,E=this._distances[x],P=f-E,T=P>0?(g-E)/P:0;return this.points[x].mult(1-T).add(this.points[c].mult(T))}}function At(p,i){let c=!0;return p==="always"||p!=="never"&&i!=="never"||(c=!1),c}class It{constructor(i,c,f){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let E=0;E<this.xCellCount*this.yCellCount;E++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,g,x){this._forEachCell(c,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(i,c,f,g){this._forEachCell(c-g,f-g,c+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,c,f,g,x,E){this.boxCells[x].push(E)}_insertCircleCell(i,c,f,g,x,E){this.circleCells[x].push(E)}_query(i,c,f,g,x,E,P){if(f<0||i>this.width||g<0||c>this.height)return[];const T=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=g){if(x)return[{key:null,x1:i,y1:c,x2:f,y2:g}];for(let M=0;M<this.boxKeys.length;M++)T.push({key:this.boxKeys[M],x1:this.bboxes[4*M],y1:this.bboxes[4*M+1],x2:this.bboxes[4*M+2],y2:this.bboxes[4*M+3]});for(let M=0;M<this.circleKeys.length;M++){const L=this.circles[3*M],R=this.circles[3*M+1],j=this.circles[3*M+2];T.push({key:this.circleKeys[M],x1:L-j,y1:R-j,x2:L+j,y2:R+j})}}else this._forEachCell(i,c,f,g,this._queryCell,T,{hitTest:x,overlapMode:E,seenUids:{box:{},circle:{}}},P);return T}query(i,c,f,g){return this._query(i,c,f,g,!1,null)}hitTest(i,c,f,g,x,E){return this._query(i,c,f,g,!0,x,E).length>0}hitTestCircle(i,c,f,g,x){const E=i-f,P=i+f,T=c-f,M=c+f;if(P<0||E>this.width||M<0||T>this.height)return!1;const L=[];return this._forEachCell(E,T,P,M,this._queryCellCircle,L,{hitTest:!0,overlapMode:g,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},x),L.length>0}_queryCell(i,c,f,g,x,E,P,T){const{seenUids:M,hitTest:L,overlapMode:R}=P,j=this.boxCells[x];if(j!==null){const Y=this.bboxes;for(const ee of j)if(!M.box[ee]){M.box[ee]=!0;const oe=4*ee,he=this.boxKeys[ee];if(i<=Y[oe+2]&&c<=Y[oe+3]&&f>=Y[oe+0]&&g>=Y[oe+1]&&(!T||T(he))&&(!L||!At(R,he.overlapMode))&&(E.push({key:he,x1:Y[oe],y1:Y[oe+1],x2:Y[oe+2],y2:Y[oe+3]}),L))return!0}}const te=this.circleCells[x];if(te!==null){const Y=this.circles;for(const ee of te)if(!M.circle[ee]){M.circle[ee]=!0;const oe=3*ee,he=this.circleKeys[ee];if(this._circleAndRectCollide(Y[oe],Y[oe+1],Y[oe+2],i,c,f,g)&&(!T||T(he))&&(!L||!At(R,he.overlapMode))){const be=Y[oe],re=Y[oe+1],we=Y[oe+2];if(E.push({key:he,x1:be-we,y1:re-we,x2:be+we,y2:re+we}),L)return!0}}}return!1}_queryCellCircle(i,c,f,g,x,E,P,T){const{circle:M,seenUids:L,overlapMode:R}=P,j=this.boxCells[x];if(j!==null){const Y=this.bboxes;for(const ee of j)if(!L.box[ee]){L.box[ee]=!0;const oe=4*ee,he=this.boxKeys[ee];if(this._circleAndRectCollide(M.x,M.y,M.radius,Y[oe+0],Y[oe+1],Y[oe+2],Y[oe+3])&&(!T||T(he))&&!At(R,he.overlapMode))return E.push(!0),!0}}const te=this.circleCells[x];if(te!==null){const Y=this.circles;for(const ee of te)if(!L.circle[ee]){L.circle[ee]=!0;const oe=3*ee,he=this.circleKeys[ee];if(this._circlesCollide(Y[oe],Y[oe+1],Y[oe+2],M.x,M.y,M.radius)&&(!T||T(he))&&!At(R,he.overlapMode))return E.push(!0),!0}}}_forEachCell(i,c,f,g,x,E,P,T){const M=this._convertToXCellCoord(i),L=this._convertToYCellCoord(c),R=this._convertToXCellCoord(f),j=this._convertToYCellCoord(g);for(let te=M;te<=R;te++)for(let Y=L;Y<=j;Y++)if(x.call(this,i,c,f,g,this.xCellCount*Y+te,E,P,T))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,g,x,E){const P=g-i,T=x-c,M=f+E;return M*M>P*P+T*T}_circleAndRectCollide(i,c,f,g,x,E,P){const T=(E-g)/2,M=Math.abs(i-(g+T));if(M>T+f)return!1;const L=(P-x)/2,R=Math.abs(c-(x+L));if(R>L+f)return!1;if(M<=T||R<=L)return!0;const j=M-T,te=R-L;return j*j+te*te<=f*f}}function Nn(p,i,c,f,g){const x=u.create();return i?(u.scale(x,x,[1/g,1/g,1]),c||u.rotateZ(x,x,f.angle)):u.multiply(x,f.labelPlaneMatrix,p),x}function Zr(p,i,c,f,g){if(i){const x=u.clone(p);return u.scale(x,x,[g,g,1]),c||u.rotateZ(x,x,-f.angle),x}return f.glCoordMatrix}function ft(p,i,c){let f;c?(f=[p.x,p.y,c(p.x,p.y),1],u.transformMat4(f,f,i)):(f=[p.x,p.y,0,1],ae(f,f,i));const g=f[3];return{point:new u.Point(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function bi(p,i){return .5+p/i*.5}function Gi(p,i){const c=p[0]/p[3],f=p[1]/p[3];return c>=-i[0]&&c<=i[0]&&f>=-i[1]&&f<=i[1]}function ya(p,i,c,f,g,x,E,P,T,M){const L=f?p.textSizeData:p.iconSizeData,R=u.evaluateSizeForZoom(L,c.transform.zoom),j=[256/c.width*2+1,256/c.height*2+1],te=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;te.clear();const Y=p.lineVertexArray,ee=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,oe=c.transform.width/c.transform.height;let he=!1;for(let be=0;be<ee.length;be++){const re=ee.get(be);if(re.hidden||re.writingMode===u.WritingMode.vertical&&!he){pe(re.numGlyphs,te);continue}let we;if(he=!1,M?(we=[re.anchorX,re.anchorY,M(re.anchorX,re.anchorY),1],u.transformMat4(we,we,i)):(we=[re.anchorX,re.anchorY,0,1],ae(we,we,i)),!Gi(we,j)){pe(re.numGlyphs,te);continue}const Te=bi(c.transform.cameraToCenterDistance,we[3]),De=u.evaluateSizeForFeature(L,R,re),$e=E?De/Te:De*Te,Ue=new u.Point(re.anchorX,re.anchorY),Fe=ft(Ue,g,M).point,tt={projections:{},offsets:{}},vt=J(re,$e,!1,P,i,g,x,p.glyphOffsetArray,Y,te,Fe,Ue,tt,oe,T,M);he=vt.useVertical,(vt.notEnoughRoom||he||vt.needsFlipping&&J(re,$e,!0,P,i,g,x,p.glyphOffsetArray,Y,te,Fe,Ue,tt,oe,T,M).notEnoughRoom)&&pe(re.numGlyphs,te)}f?p.text.dynamicLayoutVertexBuffer.updateData(te):p.icon.dynamicLayoutVertexBuffer.updateData(te)}function _a(p,i,c,f,g,x,E,P,T,M,L,R,j){const te=P.glyphStartIndex+P.numGlyphs,Y=P.lineStartIndex,ee=P.lineStartIndex+P.lineLength,oe=i.getoffsetX(P.glyphStartIndex),he=i.getoffsetX(te-1),be=se(p*oe,c,f,g,x,E,P.segment,Y,ee,T,M,L,R,j);if(!be)return null;const re=se(p*he,c,f,g,x,E,P.segment,Y,ee,T,M,L,R,j);return re?{first:be,last:re}:null}function Mr(p,i,c,f){return p===u.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*f?{useVertical:!0}:(p===u.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function J(p,i,c,f,g,x,E,P,T,M,L,R,j,te,Y,ee){const oe=i/24,he=p.lineOffsetX*oe,be=p.lineOffsetY*oe;let re;if(p.numGlyphs>1){const we=p.glyphStartIndex+p.numGlyphs,Te=p.lineStartIndex,De=p.lineStartIndex+p.lineLength,$e=_a(oe,P,he,be,c,L,R,p,T,x,j,Y,ee);if(!$e)return{notEnoughRoom:!0};const Ue=ft($e.first.point,E,ee).point,Fe=ft($e.last.point,E,ee).point;if(f&&!c){const tt=Mr(p.writingMode,Ue,Fe,te);if(tt)return tt}re=[$e.first];for(let tt=p.glyphStartIndex+1;tt<we-1;tt++)re.push(se(oe*P.getoffsetX(tt),he,be,c,L,R,p.segment,Te,De,T,x,j,Y,ee));re.push($e.last)}else{if(f&&!c){const Te=ft(R,g,ee).point,De=p.lineStartIndex+p.segment+1,$e=new u.Point(T.getx(De),T.gety(De)),Ue=ft($e,g,ee),Fe=Ue.signedDistanceFromCamera>0?Ue.point:O(R,$e,Te,1,g,ee),tt=Mr(p.writingMode,Te,Fe,te);if(tt)return tt}const we=se(oe*P.getoffsetX(p.glyphStartIndex),he,be,c,L,R,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,T,x,j,Y,ee);if(!we)return{notEnoughRoom:!0};re=[we]}for(const we of re)u.addDynamicAttributes(M,we.point,we.angle);return{}}function O(p,i,c,f,g,x){const E=ft(p.add(p.sub(i)._unit()),g,x).point,P=c.sub(E);return c.add(P._mult(f/P.mag()))}function N(p,i){const{projectionCache:c,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:E,getElevation:P,previousVertex:T,direction:M,absOffsetX:L}=i;if(c.projections[p])return c.projections[p];const R=new u.Point(f.getx(p),f.gety(p)),j=ft(R,g,P);if(j.signedDistanceFromCamera>0)return c.projections[p]=j.point,j.point;const te=p-M;return O(E===0?x:new u.Point(f.getx(te),f.gety(te)),R,T,L-E+1,g,P)}function X(p,i,c){return p._unit()._perp()._mult(i*c)}function ie(p,i,c,f,g,x,E,P){const{projectionCache:T,direction:M}=P;if(T.offsets[p])return T.offsets[p];const L=c.add(i);if(p+M<f||p+M>=g)return T.offsets[p]=L,L;const R=N(p+M,P),j=X(R.sub(c),E,M),te=c.add(j),Y=R.add(j);return T.offsets[p]=u.findLineIntersection(x,L,te,Y)||L,T.offsets[p]}function se(p,i,c,f,g,x,E,P,T,M,L,R,j,te){const Y=f?p-i:p+i;let ee=Y>0?1:-1,oe=0;f&&(ee*=-1,oe=Math.PI),ee<0&&(oe+=Math.PI);let he,be,re=ee>0?P+E:P+E+1,we=g,Te=g,De=0,$e=0;const Ue=Math.abs(Y),Fe=[];let tt;for(;De+$e<=Ue;){if(re+=ee,re<P||re>=T)return null;De+=$e,Te=we,be=he;const He={projectionCache:R,lineVertexArray:M,labelPlaneMatrix:L,tileAnchorPoint:x,distanceFromAnchor:De,getElevation:te,previousVertex:Te,direction:ee,absOffsetX:Ue};if(we=N(re,He),c===0)Fe.push(Te),tt=we.sub(Te);else{let kt;const nt=we.sub(Te);kt=nt.mag()===0?X(N(re+ee,He).sub(we),c,ee):X(nt,c,ee),be||(be=Te.add(kt)),he=ie(re,kt,we,P,T,be,c,He),Fe.push(be),tt=he.sub(be)}$e=tt.mag()}const vt=tt._mult((Ue-De)/$e)._add(be||Te),Dt=oe+Math.atan2(we.y-Te.y,we.x-Te.x);return Fe.push(vt),{point:vt,angle:j?Dt:0,path:Fe}}const me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pe(p,i){for(let c=0;c<p;c++){const f=i.length;i.resize(f+4),i.float32.set(me,3*f)}}function ae(p,i,c){const f=i[0],g=i[1];return p[0]=c[0]*f+c[4]*g+c[12],p[1]=c[1]*f+c[5]*g+c[13],p[3]=c[3]*f+c[7]*g+c[15],p}const _e=100;class Ae{constructor(i,c=new It(i.width+200,i.height+200,25),f=new It(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+_e,this.screenBottomBoundary=i.height+_e,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,f,g,x,E){const P=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,E),T=f*P.perspectiveRatio,M=i.x1*T+P.point.x,L=i.y1*T+P.point.y,R=i.x2*T+P.point.x,j=i.y2*T+P.point.y;return!this.isInsideGrid(M,L,R,j)||c!=="always"&&this.grid.hitTest(M,L,R,j,c,x)||P.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[M,L,R,j],offscreen:this.isOffscreen(M,L,R,j)}}placeCollisionCircles(i,c,f,g,x,E,P,T,M,L,R,j,te,Y){const ee=[],oe=new u.Point(c.anchorX,c.anchorY),he=ft(oe,E,Y),be=bi(this.transform.cameraToCenterDistance,he.signedDistanceFromCamera),re=(L?x/be:x*be)/u.ONE_EM,we=ft(oe,P,Y).point,Te=_a(re,g,c.lineOffsetX*re,c.lineOffsetY*re,!1,we,oe,c,f,P,{projections:{},offsets:{}},!1,Y);let De=!1,$e=!1,Ue=!0;if(Te){const Fe=.5*j*be+te,tt=new u.Point(-100,-100),vt=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),Dt=new We,He=Te.first,kt=Te.last;let nt=[];for(let nn=He.path.length-1;nn>=1;nn--)nt.push(He.path[nn]);for(let nn=1;nn<kt.path.length;nn++)nt.push(kt.path[nn]);const tn=2.5*Fe;if(T){const nn=nt.map(Lt=>ft(Lt,T,Y));nt=nn.some(Lt=>Lt.signedDistanceFromCamera<=0)?[]:nn.map(Lt=>Lt.point)}let tr=[];if(nt.length>0){const nn=nt[0].clone(),Lt=nt[0].clone();for(let Zn=1;Zn<nt.length;Zn++)nn.x=Math.min(nn.x,nt[Zn].x),nn.y=Math.min(nn.y,nt[Zn].y),Lt.x=Math.max(Lt.x,nt[Zn].x),Lt.y=Math.max(Lt.y,nt[Zn].y);tr=nn.x>=tt.x&&Lt.x<=vt.x&&nn.y>=tt.y&&Lt.y<=vt.y?[nt]:Lt.x<tt.x||nn.x>vt.x||Lt.y<tt.y||nn.y>vt.y?[]:u.clipLine([nt],tt.x,tt.y,vt.x,vt.y)}for(const nn of tr){Dt.reset(nn,.25*Fe);let Lt=0;Lt=Dt.length<=.5*Fe?1:Math.ceil(Dt.paddedLength/tn)+1;for(let Zn=0;Zn<Lt;Zn++){const Hr=Zn/Math.max(Lt-1,1),nr=Dt.lerp(Hr),Sr=nr.x+_e,ki=nr.y+_e;ee.push(Sr,ki,Fe,0);const oo=Sr-Fe,ao=ki-Fe,Xr=Sr+Fe,Oo=ki+Fe;if(Ue=Ue&&this.isOffscreen(oo,ao,Xr,Oo),$e=$e||this.isInsideGrid(oo,ao,Xr,Oo),i!=="always"&&this.grid.hitTestCircle(Sr,ki,Fe,i,R)&&(De=!0,!M))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!M&&De||!$e||be<this.perspectiveRatioCutoff?[]:ee,offscreen:Ue,collisionDetected:De}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let f=1/0,g=1/0,x=-1/0,E=-1/0;for(const L of i){const R=new u.Point(L.x+_e,L.y+_e);f=Math.min(f,R.x),g=Math.min(g,R.y),x=Math.max(x,R.x),E=Math.max(E,R.y),c.push(R)}const P=this.grid.query(f,g,x,E).concat(this.ignoredGrid.query(f,g,x,E)),T={},M={};for(const L of P){const R=L.key;if(T[R.bucketInstanceId]===void 0&&(T[R.bucketInstanceId]={}),T[R.bucketInstanceId][R.featureIndex])continue;const j=[new u.Point(L.x1,L.y1),new u.Point(L.x2,L.y1),new u.Point(L.x2,L.y2),new u.Point(L.x1,L.y2)];u.polygonIntersectsPolygon(c,j)&&(T[R.bucketInstanceId][R.featureIndex]=!0,M[R.bucketInstanceId]===void 0&&(M[R.bucketInstanceId]=[]),M[R.bucketInstanceId].push(R.featureIndex))}return M}insertCollisionBox(i,c,f,g,x,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,g,x,E){const P=f?this.ignoredGrid:this.grid,T={bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:c};for(let M=0;M<i.length;M+=4)P.insertCircle(T,i[M],i[M+1],i[M+2])}projectAndGetPerspectiveRatio(i,c,f,g){let x;return g?(x=[c,f,g(c,f),1],u.transformMat4(x,x,i)):(x=[c,f,0,1],ae(x,x,i)),{point:new u.Point((x[0]/x[3]+1)/2*this.transform.width+_e,(-x[1]/x[3]+1)/2*this.transform.height+_e),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(i,c,f,g){return f<_e||i>=this.screenRightBoundary||g<_e||c>this.screenBottomBoundary}isInsideGrid(i,c,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i}}function Ie(p,i,c){return i*(u.EXTENT/(p.tileSize*Math.pow(2,c-p.tileID.overscaledZ)))}class ze{constructor(i,c,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class yt{constructor(i,c,f,g,x){this.text=new ze(i?i.text:null,c,f,x),this.icon=new ze(i?i.icon:null,c,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zt{constructor(i,c,f){this.text=i,this.icon=c,this.skipFade=f}}class ut{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class _t{constructor(i,c,f,g,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}}class Rt{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function Xt(p,i,c,f,g){const{horizontalAlign:x,verticalAlign:E}=u.getAnchorAlignment(p),P=-(x-.5)*i,T=-(E-.5)*c,M=u.evaluateVariableOffset(p,f);return new u.Point(P+M[0]*g,T+M[1]*g)}function Vt(p,i,c,f,g,x){const{x1:E,x2:P,y1:T,y2:M,anchorPointX:L,anchorPointY:R}=p,j=new u.Point(i,c);return f&&j._rotate(g?x:-x),{x1:E+j.x,y1:T+j.y,x2:P+j.x,y2:M+j.y,anchorPointX:L,anchorPointY:R}}class un{constructor(i,c,f,g,x){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new Ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Rt(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,f,g){const x=f.getBucket(c),E=f.latestFeatureIndex;if(!x||!E||c.id!==x.layerIds[0])return;const P=f.collisionBoxArray,T=x.layers[0].layout,M=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),L=f.tileSize/u.EXTENT,R=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),j=T.get("text-pitch-alignment")==="map",te=T.get("text-rotation-alignment")==="map",Y=Ie(f,1,this.transform.zoom),ee=Nn(R,j,te,this.transform,Y);let oe=null;if(j){const be=Zr(R,j,te,this.transform,Y);oe=u.multiply([],this.transform.labelPlaneMatrix,be)}this.retainedQueryData[x.bucketInstanceId]=new _t(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,f.tileID);const he={bucket:x,layout:T,posMatrix:R,textLabelPlaneMatrix:ee,labelToScreenMatrix:oe,scale:M,textPixelRatio:L,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const be of x.sortKeyRanges){const{sortKey:re,symbolInstanceStart:we,symbolInstanceEnd:Te}=be;i.push({sortKey:re,symbolInstanceStart:we,symbolInstanceEnd:Te,parameters:he})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:he})}attemptAnchorPlacement(i,c,f,g,x,E,P,T,M,L,R,j,te,Y,ee,oe){const he=[j.textOffset0,j.textOffset1],be=Xt(i,f,g,he,x),re=this.collisionIndex.placeCollisionBox(Vt(c,be.x,be.y,E,P,this.transform.angle),R,T,M,L.predicate,oe);if((!ee||this.collisionIndex.placeCollisionBox(Vt(ee,be.x,be.y,E,P,this.transform.angle),R,T,M,L.predicate,oe).box.length!==0)&&re.box.length>0){let we;if(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(we=this.prevPlacement.variableOffsets[j.crossTileID].anchor),j.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[j.crossTileID]={textOffset:he,width:f,height:g,anchor:i,textBoxScale:x,prevAnchor:we},this.markUsedJustification(te,i,j,Y),te.allowVerticalPlacement&&(this.markUsedOrientation(te,Y,j),this.placedOrientations[j.crossTileID]=Y),{shift:be,placedGlyphBoxes:re}}}placeLayerBucketPart(i,c,f){const{bucket:g,layout:x,posMatrix:E,textLabelPlaneMatrix:P,labelToScreenMatrix:T,textPixelRatio:M,holdingForFade:L,collisionBoxArray:R,partiallyEvaluatedTextSize:j,collisionGroup:te}=i.parameters,Y=x.get("text-optional"),ee=x.get("icon-optional"),oe=u.getOverlapMode(x,"text-overlap","text-allow-overlap"),he=oe==="always",be=u.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),re=be==="always",we=x.get("text-rotation-alignment")==="map",Te=x.get("text-pitch-alignment")==="map",De=x.get("icon-text-fit")!=="none",$e=x.get("symbol-z-order")==="viewport-y",Ue=he&&(re||!g.hasIconData()||ee),Fe=re&&(he||!g.hasTextData()||Y);!g.collisionArrays&&R&&g.deserializeCollisionBoxes(R);const tt=this.retainedQueryData[g.bucketInstanceId].tileID,vt=this.terrain?(He,kt)=>this.terrain.getElevation(tt,He,kt):null,Dt=(He,kt)=>{if(c[He.crossTileID])return;if(L)return void(this.placements[He.crossTileID]=new zt(!1,!1,!1));let nt=!1,tn=!1,tr=!0,nn=null,Lt={box:null,offscreen:null},Zn={box:null,offscreen:null},Hr=null,nr=null,Sr=null,ki=0,oo=0,ao=0;kt.textFeatureIndex?ki=kt.textFeatureIndex:He.useRuntimeCollisionCircles&&(ki=He.featureIndex),kt.verticalTextFeatureIndex&&(oo=kt.verticalTextFeatureIndex);const Xr=kt.textBox;if(Xr){const Br=an=>{let yr=u.WritingMode.horizontal;if(g.allowVerticalPlacement&&!an&&this.prevPlacement){const kr=this.prevPlacement.placedOrientations[He.crossTileID];kr&&(this.placedOrientations[He.crossTileID]=kr,yr=kr,this.markUsedOrientation(g,yr,He))}return yr},Er=(an,yr)=>{if(g.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const kr of g.writingModes)if(kr===u.WritingMode.vertical?(Lt=yr(),Zn=Lt):Lt=an(),Lt&&Lt.box&&Lt.box.length)break}else Lt=an()};if(x.get("text-variable-anchor")){let an=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[He.crossTileID]){const cn=this.prevPlacement.variableOffsets[He.crossTileID];an.indexOf(cn.anchor)>0&&(an=an.filter(_r=>_r!==cn.anchor),an.unshift(cn.anchor))}const yr=(cn,_r,Ti)=>{const Ku=cn.x2-cn.x1,Qo=cn.y2-cn.y1,$0=He.textBoxScale,Lp=De&&be==="never"?_r:null;let Mn={box:[],offscreen:!1};const id=oe!=="never"?2*an.length:an.length;for(let Rl=0;Rl<id;++Rl){const ea=this.attemptAnchorPlacement(an[Rl%an.length],cn,Ku,Qo,$0,we,Te,M,E,te,Rl>=an.length?oe:"never",He,g,Ti,Lp,vt);if(ea&&(Mn=ea.placedGlyphBoxes,Mn&&Mn.box&&Mn.box.length)){nt=!0,nn=ea.shift;break}}return Mn};Er(()=>yr(Xr,kt.iconBox,u.WritingMode.horizontal),()=>{const cn=kt.verticalTextBox;return g.allowVerticalPlacement&&!(Lt&&Lt.box&&Lt.box.length)&&He.numVerticalGlyphVertices>0&&cn?yr(cn,kt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Lt&&(nt=Lt.box,tr=Lt.offscreen);const kr=Br(Lt&&Lt.box);if(!nt&&this.prevPlacement){const cn=this.prevPlacement.variableOffsets[He.crossTileID];cn&&(this.variableOffsets[He.crossTileID]=cn,this.markUsedJustification(g,cn.anchor,He,kr))}}else{const an=(yr,kr)=>{const cn=this.collisionIndex.placeCollisionBox(yr,oe,M,E,te.predicate,vt);return cn&&cn.box&&cn.box.length&&(this.markUsedOrientation(g,kr,He),this.placedOrientations[He.crossTileID]=kr),cn};Er(()=>an(Xr,u.WritingMode.horizontal),()=>{const yr=kt.verticalTextBox;return g.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&yr?an(yr,u.WritingMode.vertical):{box:null,offscreen:null}}),Br(Lt&&Lt.box&&Lt.box.length)}}if(Hr=Lt,nt=Hr&&Hr.box&&Hr.box.length>0,tr=Hr&&Hr.offscreen,He.useRuntimeCollisionCircles){const Br=g.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),Er=u.evaluateSizeForFeature(g.textSizeData,j,Br),an=x.get("text-padding");nr=this.collisionIndex.placeCollisionCircles(oe,Br,g.lineVertexArray,g.glyphOffsetArray,Er,E,P,T,f,Te,te.predicate,He.collisionCircleDiameter,an,vt),nr.circles.length&&nr.collisionDetected&&!f&&u.warnOnce("Collisions detected, but collision boxes are not shown"),nt=he||nr.circles.length>0&&!nr.collisionDetected,tr=tr&&nr.offscreen}if(kt.iconFeatureIndex&&(ao=kt.iconFeatureIndex),kt.iconBox){const Br=Er=>{const an=De&&nn?Vt(Er,nn.x,nn.y,we,Te,this.transform.angle):Er;return this.collisionIndex.placeCollisionBox(an,be,M,E,te.predicate,vt)};Zn&&Zn.box&&Zn.box.length&&kt.verticalIconBox?(Sr=Br(kt.verticalIconBox),tn=Sr.box.length>0):(Sr=Br(kt.iconBox),tn=Sr.box.length>0),tr=tr&&Sr.offscreen}const Oo=Y||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,Dl=ee||He.numIconVertices===0;if(Oo||Dl?Dl?Oo||(tn=tn&&nt):nt=tn&&nt:tn=nt=tn&&nt,nt&&Hr&&Hr.box&&this.collisionIndex.insertCollisionBox(Hr.box,oe,x.get("text-ignore-placement"),g.bucketInstanceId,Zn&&Zn.box&&oo?oo:ki,te.ID),tn&&Sr&&this.collisionIndex.insertCollisionBox(Sr.box,be,x.get("icon-ignore-placement"),g.bucketInstanceId,ao,te.ID),nr&&(nt&&this.collisionIndex.insertCollisionCircles(nr.circles,oe,x.get("text-ignore-placement"),g.bucketInstanceId,ki,te.ID),f)){const Br=g.bucketInstanceId;let Er=this.collisionCircleArrays[Br];Er===void 0&&(Er=this.collisionCircleArrays[Br]=new ut);for(let an=0;an<nr.circles.length;an+=4)Er.circles.push(nr.circles[an+0]),Er.circles.push(nr.circles[an+1]),Er.circles.push(nr.circles[an+2]),Er.circles.push(nr.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new zt(nt||Ue,tn||Fe,tr||g.justReloaded),c[He.crossTileID]=!0};if($e){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=g.getSortedSymbolIndexes(this.transform.angle);for(let kt=He.length-1;kt>=0;--kt){const nt=He[kt];Dt(g.symbolInstances.get(nt),g.collisionArrays[nt])}}else for(let He=i.symbolInstanceStart;He<i.symbolInstanceEnd;He++)Dt(g.symbolInstances.get(He),g.collisionArrays[He]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[g.bucketInstanceId];u.invert(He.invProjMatrix,E),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,c,f,g){let x;x=g===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(c)];const E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of E)P>=0&&(i.text.placedSymbolArray.get(P).crossTileID=x>=0&&P!==x?0:f.crossTileID)}markUsedOrientation(i,c,f){const g=c===u.WritingMode.horizontal||c===u.WritingMode.horizontalOnly?c:0,x=c===u.WritingMode.vertical?c:0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of E)i.text.placedSymbolArray.get(P).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},E=c?c.variableOffsets:{},P=c?c.placedOrientations:{};for(const T in this.placements){const M=this.placements[T],L=x[T];L?(this.opacities[T]=new yt(L,g,M.text,M.icon),f=f||M.text!==L.text.placed||M.icon!==L.icon.placed):(this.opacities[T]=new yt(null,g,M.text,M.icon,M.skipFade),f=f||M.text||M.icon)}for(const T in x){const M=x[T];if(!this.opacities[T]){const L=new yt(M,g,!1,!1);L.isHidden()||(this.opacities[T]=L,f=f||M.text.placed||M.icon.placed)}}for(const T in E)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=E[T]);for(const T in P)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=P[T]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const f={};for(const g of c){const x=g.getBucket(i);x&&g.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,g.collisionBoxArray)}}updateBucketOpacities(i,c,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0].layout,x=new yt(null,0,!1,!1,!0),E=g.get("text-allow-overlap"),P=g.get("icon-allow-overlap"),T=g.get("text-variable-anchor"),M=g.get("text-rotation-alignment")==="map",L=g.get("text-pitch-alignment")==="map",R=g.get("icon-text-fit")!=="none",j=new yt(null,0,E&&(P||!i.hasIconData()||g.get("icon-optional")),P&&(E||!i.hasTextData()||g.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const te=(Y,ee,oe)=>{for(let he=0;he<ee/4;he++)Y.opacityVertexArray.emplaceBack(oe);Y.hasVisibleVertices=Y.hasVisibleVertices||oe!==$r};for(let Y=0;Y<i.symbolInstances.length;Y++){const ee=i.symbolInstances.get(Y),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:he,crossTileID:be}=ee;let re=this.opacities[be];c[be]?re=x:re||(re=j,this.opacities[be]=re),c[be]=!0;const we=ee.numIconVertices>0,Te=this.placedOrientations[ee.crossTileID],De=Te===u.WritingMode.vertical,$e=Te===u.WritingMode.horizontal||Te===u.WritingMode.horizontalOnly;if(oe>0||he>0){const Ue=si(re.text);te(i.text,oe,De?$r:Ue),te(i.text,he,$e?$r:Ue);const Fe=re.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(Dt=>{Dt>=0&&(i.text.placedSymbolArray.get(Dt).hidden=Fe||De?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=Fe||$e?1:0);const tt=this.variableOffsets[ee.crossTileID];tt&&this.markUsedJustification(i,tt.anchor,ee,Te);const vt=this.placedOrientations[ee.crossTileID];vt&&(this.markUsedJustification(i,"left",ee,vt),this.markUsedOrientation(i,vt,ee))}if(we){const Ue=si(re.icon),Fe=!(R&&ee.verticalPlacedIconSymbolIndex&&De);ee.placedIconSymbolIndex>=0&&(te(i.icon,ee.numIconVertices,Fe?Ue:$r),i.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=re.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(te(i.icon,ee.numVerticalIconVertices,Fe?$r:Ue),i.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=re.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ue=i.collisionArrays[Y];if(Ue){let Fe=new u.Point(0,0);if(Ue.textBox||Ue.verticalTextBox){let vt=!0;if(T){const Dt=this.variableOffsets[be];Dt?(Fe=Xt(Dt.anchor,Dt.width,Dt.height,Dt.textOffset,Dt.textBoxScale),M&&Fe._rotate(L?this.transform.angle:-this.transform.angle)):vt=!1}Ue.textBox&&fn(i.textCollisionBox.collisionVertexArray,re.text.placed,!vt||De,Fe.x,Fe.y),Ue.verticalTextBox&&fn(i.textCollisionBox.collisionVertexArray,re.text.placed,!vt||$e,Fe.x,Fe.y)}const tt=Boolean(!$e&&Ue.verticalIconBox);Ue.iconBox&&fn(i.iconCollisionBox.collisionVertexArray,re.icon.placed,tt,R?Fe.x:0,R?Fe.y:0),Ue.verticalIconBox&&fn(i.iconCollisionBox.collisionVertexArray,re.icon.placed,!tt,R?Fe.x:0,R?Fe.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Y.invProjMatrix,i.placementViewportMatrix=Y.viewportMatrix,i.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function fn(p,i,c,f,g){p.emplaceBack(i?1:0,c?1:0,f||0,g||0),p.emplaceBack(i?1:0,c?1:0,f||0,g||0),p.emplaceBack(i?1:0,c?1:0,f||0,g||0),p.emplaceBack(i?1:0,c?1:0,f||0,g||0)}const Pn=Math.pow(2,25),Rn=Math.pow(2,24),Qn=Math.pow(2,17),Qt=Math.pow(2,16),xh=Math.pow(2,9),wh=Math.pow(2,8),Si=Math.pow(2,1);function si(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const i=p.placed?1:0,c=Math.floor(127*p.opacity);return c*Pn+i*Rn+c*Qn+i*Qt+c*xh+i*wh+c*Si+i}const $r=0;class ep{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,f,g,x){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((P,T)=>P.sortKey-T.sortKey));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class fu{constructor(i,c,f,g,x,E,P,T){this.placement=new un(i,c,E,P,T),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f){const g=u.exported.now(),x=()=>!this._forceFullPlacement&&u.exported.now()-g>2;for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=P)&&(!E.maxzoom||E.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new ep(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ln=512/u.EXTENT/2;class dl{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let x=0;x<c.length;x++){const E=c.get(x),P=E.key,T=g.get(P);T?T.push(E):g.set(P,[E])}for(const[x,E]of g){const P={positions:E.map(T=>({x:Math.floor(T.anchorX*Ln),y:Math.floor(T.anchorY*Ln)})),crossTileIDs:E.map(T=>T.crossTileID)};if(P.positions.length>128){const T=new u.KDBush(P.positions.length,16,Uint16Array);for(const{x:M,y:L}of P.positions)T.add(M,L);T.finish(),delete P.positions,P.index=T}this._symbolsByKey[x]=P}}getScaledCoordinates(i,c){const{x:f,y:g,z:x}=this.tileID.canonical,{x:E,y:P,z:T}=c.canonical,M=Ln/Math.pow(2,T-x),L=(P*u.EXTENT+i.anchorY)*M,R=g*u.EXTENT*Ln;return{x:Math.floor((E*u.EXTENT+i.anchorX)*M-f*u.EXTENT*Ln),y:Math.floor(L-R)}}findMatches(i,c,f){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const E=i.get(x);if(E.crossTileID)continue;const P=this._symbolsByKey[E.key];if(!P)continue;const T=this.getScaledCoordinates(E,c);if(P.index){const M=P.index.range(T.x-g,T.y-g,T.x+g,T.y+g).sort();for(const L of M){const R=P.crossTileIDs[L];if(!f[R]){f[R]=!0,E.crossTileID=R;break}}}else if(P.positions)for(let M=0;M<P.positions.length;M++){const L=P.positions[M],R=P.crossTileIDs[M];if(Math.abs(L.x-T.x)<=g&&Math.abs(L.y-T.y)<=g&&!f[R]){f[R]=!0,E.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Oa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class br{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const f in this.indexes){const g=this.indexes[f],x={};for(const E in g){const P=g[E];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),x[P.tileID.key]=P}this.indexes[f]=x}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>i.overscaledZ)for(const P in E){const T=E[P];T.tileID.isChildOf(i)&&T.findMatches(c.symbolInstances,i,g)}else{const P=E[i.scaledTo(Number(x)).key];P&&P.findMatches(c.symbolInstances,i,g)}}for(let x=0;x<c.symbolInstances.length;x++){const E=c.symbolInstances.get(x);E.crossTileID||(E.crossTileID=f.generate(),g[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new dl(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const f of c.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let c=!1;for(const f in this.indexes){const g=this.indexes[f];for(const x in g)i[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],c=!0)}return c}}class fl{constructor(){this.layerIndexes={},this.crossTileIDs=new Oa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new br);let x=!1;const E={};g.handleWrapJump(f);for(const P of c){const T=P.getBucket(i);T&&i.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(P.tileID,T,this.crossTileIDs)&&(x=!0),E[T.bucketInstanceId]=!0)}return g.removeStaleBuckets(E)&&(x=!0),x}pruneUnusedLayers(i){const c={};i.forEach(f=>{c[f]=!0});for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}const li=(p,i)=>u.emitValidationErrors(p,i&&i.filter(c=>c.identifier!=="source.canvas")),tp=u.pick(u.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),va=u.pick(u.operations,["setCenter","setZoom","setBearing","setPitch"]),x0=u.emptyStyle();class io extends u.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new Jt(gr(),this,i._getMapId()),this.imageManager=new Tt,this.imageManager.setEventedParent(this),this.glyphManager=new dn(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new zn(256,512),this.crossTileSymbolIndex=new fl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const f=this;this._rtlTextPluginCallback=io.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,E)=>{if(u.triggerPluginCompletionEvent(x),E&&E.every(P=>P))for(const P in f.sourceCaches){const T=f.sourceCaches[P].getSource().type;T!=="vector"&&T!=="geojson"||f.sourceCaches[P].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const E=x.getSource();if(E&&E.vectorLayerIds)for(const P in this._layers){const T=this._layers[P];T.source===E.id&&this._validateLayer(T)}})}loadURL(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(i,B.Style);this._request=u.getJSON(g,(x,E)=>{this._request=null,x?this.fire(new u.ErrorEvent(x)):E&&this._load(E,c,f)})}loadJSON(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.exported.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,f)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(x0,{validate:!1})}_load(i,c,f){const g=c.transformStyle?c.transformStyle(f,i):i;if(!c.validate||!li(this,u.validateStyle(g))){this._loaded=!0,this.stylesheet=g;for(const x in g.sources)this.addSource(x,g.sources[x],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new lt(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}}_createLayers(){const i=u.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const f=u.createStyleLayer(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(i,c=!1,f){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,E,P){const T=je(g),M=T.length,L=E>1?"@2x":"",R={},j={},te={};for(const{id:Y,url:ee}of T){const oe=x.transformRequest(x.normalizeSpriteURL(ee,L,".json"),B.SpriteJSON),he=`${Y}_${oe.url}`;R[he]=u.getJSON(oe,(we,Te)=>{delete R[he],j[Y]=Te,ke(P,j,te,we,M)});const be=x.transformRequest(x.normalizeSpriteURL(ee,L,".png"),B.SpriteImage),re=`${Y}_${be.url}`;R[re]=V.getImage(be,(we,Te)=>{delete R[re],te[Y]=Te,ke(P,j,te,we,M)})}return{cancel(){for(const Y of Object.values(R))Y.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new u.ErrorEvent(g));else if(x)for(const E in x){this._spritesImagesIds[E]=[];const P=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(T=>!(T in x)):[];for(const T of P)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in x[E]){const M=E==="default"?T:`${E}:${T}`;this._spritesImagesIds[E].push(M),M in this.imageManager.images?this.imageManager.updateImage(M,x[E][T],!1):this.imageManager.addImage(M,x[E][T]),c&&(this._changedImages[M]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const f=i.sourceLayer;if(!f)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const f=[];for(const g of i)c[g]&&f.push(c[g]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const g=this._layers[f];g.type!=="custom"&&(i[f]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const E in this._updatedSources){const P=this._updatedSources[E];if(P==="reload")this._reloadSource(E);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];f[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in f){const x=this.sourceCaches[g];f[g]!==x.used&&x.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const f=this.serialize();if(i=c.transformStyle?c.transformStyle(f,i):i,li(this,u.validateStyle(i)))return!1;(i=u.clone$1(i)).layers=u.derefLayers(i.layers);const g=u.diffStyles(f,i).filter(E=>!(E.command in va));if(g.length===0)return!1;const x=g.filter(E=>!(E.command in tp));if(x.length>0)throw new Error(`Unimplemented: ${x.map(E=>E.command).join(", ")}.`);for(const E of g)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.validateStyle.source,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[i]=new Dn(i,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new u.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new u.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let x;if(i.type==="custom"){if(li(this,u.validateCustomStyleLayer(i)))return;x=u.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(g,i.source),i=u.clone$1(i),i=u.extend(i,{source:g})),this._validate(u.validateStyle.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;x=u.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const P=this._removedLayers[g];delete this._removedLayers[g],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===c&&g.maxzoom===f||(c!=null&&(g.minzoom=c),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!u.deepEqual(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.validateStyle.filter,`layers.${g.id}.filter`,c,null,f)||(g.filter=u.clone$1(c),this._updateLayer(g)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,f,g={}){this._checkLoaded();const x=this.getLayer(i);x?u.deepEqual(x.getLayoutProperty(c),f)||(x.setLayoutProperty(c,f,g),this._updateLayer(x)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const f=this.getLayer(i);if(f)return f.getLayoutProperty(c);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,f,g={}){this._checkLoaded();const x=this.getLayer(i);x?u.deepEqual(x.getPaintProperty(c),f)||(x.setPaintProperty(c,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const f=i.source,g=i.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const E=x.getSource().type;E==="geojson"&&g?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,i.id,c)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const x=g.getSource().type,E=x==="vector"?i.sourceLayer:void 0;x!=="vector"||E?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,i.id,c):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,f=i.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i=u.mapObject(this.sourceCaches,g=>g.serialize()),c=this._serializeByIds(this._order),f=this.stylesheet;return u.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:i,layers:c},g=>g!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",f={},g=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(c(P)){f[P]=E;for(const T of i){const M=T[P];if(M)for(const L of M)g.push(L)}}}g.sort((E,P)=>P.intersectionZ-E.intersectionZ);const x=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(c(P))for(let T=g.length-1;T>=0;T--){const M=g[T].feature;if(f[M.layer.id]<E)break;x.push(M),g.pop()}else for(const T of i){const M=T[P];if(M)for(const L of M)x.push(L.feature)}}return x}queryRenderedFeatures(i,c,f){c&&c.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const T=this._layers[P];if(!T)return this.fire(new u.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];g[T.source]=!0}}const x=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const P in this.sourceCaches)c.layers&&!g[P]||x.push(qt(this.sourceCaches[P],this._layers,E,i,c,f));return this.placement&&x.push(function(P,T,M,L,R,j,te){const Y={},ee=j.queryRenderedSymbols(L),oe=[];for(const he of Object.keys(ee).map(Number))oe.push(te[he]);oe.sort(lr);for(const he of oe){const be=he.featureIndex.lookupSymbolFeatures(ee[he.bucketInstanceId],T,he.bucketIndex,he.sourceLayerIndex,R.filter,R.layers,R.availableImages,P);for(const re in be){const we=Y[re]=Y[re]||[],Te=be[re];Te.sort((De,$e)=>{const Ue=he.featureSortOrder;if(Ue){const Fe=Ue.indexOf(De.featureIndex);return Ue.indexOf($e.featureIndex)-Fe}return $e.featureIndex-De.featureIndex});for(const De of Te)we.push(De)}}for(const he in Y)Y[he].forEach(be=>{const re=be.feature,we=M[P[he].source].getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=we});return Y}(this._layers,E,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.sourceCaches[i];return f?function(g,x){const E=g.getRenderableIds().map(M=>g.getTileByID(M)),P=[],T={};for(let M=0;M<E.length;M++){const L=E[M],R=L.tileID.canonical.key;T[R]||(T[R]=!0,L.querySourceFeatures(P,x))}return P}(f,c):[]}addSourceType(i,c,f){return io.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(io.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const E in i)if(!u.deepEqual(i[E],f[E])){g=!0;break}if(!g)return;const x={now:u.exported.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}_validate(i,c,f,g,x={}){return(!x||x.validate!==!1)&&li(this,i.call(u.validateStyle,u.extend({key:c,style:this.serialize(),value:f,styleSpec:u.v8Spec},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,f,g,x=!1){let E=!1,P=!1;const T={};for(const M of this._order){const L=this._layers[M];if(L.type!=="symbol")continue;if(!T[L.source]){const j=this.sourceCaches[L.source];T[L.source]=j.getRenderableIds(!0).map(te=>j.getTileByID(te)).sort((te,Y)=>Y.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(Y.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(L,T[L.source],i.center.lng);E=E||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.exported.now(),i.zoom))&&(this.pauseablePlacement=new fu(i,this.map.terrain,this._order,x,c,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.exported.now()),P=!0),E&&this.pauseablePlacement.placement.setStale()),P||E)for(const M of this._order){const L=this._layers[M];L.type==="symbol"&&this.placement.updateLayerOpacities(L,T[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,f){this.imageManager.getImages(c.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,f){this.glyphManager.getGlyphs(c.stacks,f);const g=this.sourceCaches[c.source];g&&g.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,f){return u.makeRequest(c,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.validateStyle.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,f={},g){this._checkLoaded();const x=[{id:i,url:c}],E=[...je(this.stylesheet.sprite),...x];this._validate(u.validateStyle.sprite,"sprite",E,null,f)||(this.stylesheet.sprite=E,this._loadSprite(x,!0,g))}removeSprite(i){this._checkLoaded();const c=je(this.stylesheet.sprite);if(c.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}else this.fire(new u.ErrorEvent(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return je(this.stylesheet.sprite)}setSprite(i,c={},f){this._checkLoaded(),i&&this._validate(u.validateStyle.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}io.getSourceType=function(p){return ji[p]},io.setSourceType=function(p,i){ji[p]=i},io.registerForPluginStateChange=u.registerForPluginStateChange;var _s=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),vs="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Wi={prelude:pn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",vs),terrainDepth:pn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",vs),terrainCoords:pn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",vs)};function pn(p,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=x?x.concat(g):g,P={};return{fragmentSource:p=p.replace(c,(T,M,L,R,j)=>(P[j]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${L} ${R} ${j};
#else
uniform ${L} ${R} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${L} ${R} ${j} = u_${j};
#endif
`)),vertexSource:i=i.replace(c,(T,M,L,R,j)=>{const te=R==="float"?"vec2":"vec4",Y=j.match(/color/)?"color":te;return P[j]?M==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${L} ${te} a_${j};
varying ${L} ${R} ${j};
#else
uniform ${L} ${R} u_${j};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${L} ${R} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${Y}(a_${j}, u_${j}_t);
#else
    ${L} ${R} ${j} = u_${j};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${L} ${te} a_${j};
#else
uniform ${L} ${R} u_${j};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${L} ${R} ${j} = a_${j};
#else
    ${L} ${R} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${L} ${R} ${j} = unpack_mix_${Y}(a_${j}, u_${j}_t);
#else
    ${L} ${R} ${j} = u_${j};
#endif
`}),staticAttributes:f,staticUniforms:E}}class pu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,f,g,x,E,P,T,M){this.context=i;let L=this.boundPaintVertexBuffers.length!==g.length;for(let R=0;!L&&R<g.length;R++)this.boundPaintVertexBuffers[R]!==g[R]&&(L=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||L||this.boundIndexBuffer!==x||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==M?this.freshBind(c,f,g,x,E,P,T,M):(i.bindVertexArray.set(this.vao),P&&P.bind(),x&&x.dynamicDraw&&x.bind(),T&&T.bind(),M&&M.bind())}freshBind(i,c,f,g,x,E,P,T){const M=i.numAttributes,L=this.context,R=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=T,c.enableAttributes(R,i);for(const j of f)j.enableAttributes(R,i);E&&E.enableAttributes(R,i),P&&P.enableAttributes(R,i),T&&T.enableAttributes(R,i),c.bind(),c.setVertexAttribPointers(R,i,x);for(const j of f)j.bind(),j.setVertexAttribPointers(R,i,x);E&&(E.bind(),E.setVertexAttribPointers(R,i,x)),g&&g.bind(),P&&(P.bind(),P.setVertexAttribPointers(R,i,x)),T&&(T.bind(),T.setVertexAttribPointers(R,i,x)),L.currentNumAttributes=M}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function bh(p){const i=[];for(let c=0;c<p.length;c++){if(p[c]===null)continue;const f=p[c].split(" ");i.push(f.pop())}return i}class w0{constructor(i,c,f,g,x,E,P){const T=i.gl;this.program=T.createProgram();const M=bh(f.staticAttributes),L=g?g.getBinderAttributes():[],R=M.concat(L),j=Wi.prelude.staticUniforms?bh(Wi.prelude.staticUniforms):[],te=f.staticUniforms?bh(f.staticUniforms):[],Y=g?g.getBinderUniforms():[],ee=j.concat(te).concat(Y),oe=[];for(const $e of ee)oe.indexOf($e)<0&&oe.push($e);const he=g?g.defines():[];E&&he.push("#define OVERDRAW_INSPECTOR;"),P&&he.push("#define TERRAIN3D;");const be=he.concat(Wi.prelude.fragmentSource,f.fragmentSource).join(`
`),re=he.concat(Wi.prelude.vertexSource,f.vertexSource).join(`
`),we=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(we,be),T.compileShader(we),T.attachShader(this.program,we);const Te=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(Te,re),T.compileShader(Te),T.attachShader(this.program,Te),this.attributes={};const De={};this.numAttributes=R.length;for(let $e=0;$e<this.numAttributes;$e++)R[$e]&&(T.bindAttribLocation(this.program,$e,R[$e]),this.attributes[R[$e]]=$e);T.linkProgram(this.program),T.deleteShader(Te),T.deleteShader(we);for(let $e=0;$e<oe.length;$e++){const Ue=oe[$e];if(Ue&&!De[Ue]){const Fe=T.getUniformLocation(this.program,Ue);Fe&&(De[Ue]=Fe)}}this.fixedUniforms=x(i,De),this.terrainUniforms=(($e,Ue)=>({u_depth:new u.Uniform1i($e,Ue.u_depth),u_terrain:new u.Uniform1i($e,Ue.u_terrain),u_terrain_dim:new u.Uniform1f($e,Ue.u_terrain_dim),u_terrain_matrix:new u.UniformMatrix4f($e,Ue.u_terrain_matrix),u_terrain_unpack:new u.Uniform4f($e,Ue.u_terrain_unpack),u_terrain_exaggeration:new u.Uniform1f($e,Ue.u_terrain_exaggeration)}))(i,De),this.binderUniforms=g?g.getUniforms(i,De):[]}draw(i,c,f,g,x,E,P,T,M,L,R,j,te,Y,ee,oe,he,be){const re=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(x),i.setCullFace(E),T){i.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,T.depthTexture),i.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,T.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(T[Te])}for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(P[Te]);ee&&ee.setUniforms(i,this.binderUniforms,te,{zoom:Y});let we=0;switch(c){case re.LINES:we=2;break;case re.TRIANGLES:we=3;break;case re.LINE_STRIP:we=1}for(const Te of j.get()){const De=Te.vaos||(Te.vaos={});(De[M]||(De[M]=new pu)).bind(i,this,L,ee?ee.getPaintVertexBuffers():[],R,Te.vertexOffset,oe,he,be),re.drawElements(c,Te.primitiveLength*we,re.UNSIGNED_SHORT,Te.primitiveOffset*we*2)}}}function mu(p,i,c){const f=1/Ie(c,1,i.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/g,E=x*(c.tileID.canonical.x+c.tileID.wrap*g),P=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[E>>16,P>>16],u_pixel_coord_lower:[65535&E,65535&P]}}const np=(p,i,c,f)=>{const g=i.style.light,x=g.properties.get("position"),E=[x.x,x.y,x.z],P=function(){var M=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M}();g.properties.get("anchor")==="viewport"&&function(M,L){var R=Math.sin(L),j=Math.cos(L);M[0]=j,M[1]=R,M[2]=0,M[3]=-R,M[4]=j,M[5]=0,M[6]=0,M[7]=0,M[8]=1}(P,-i.transform.angle),function(M,L,R){var j=L[0],te=L[1],Y=L[2];M[0]=j*R[0]+te*R[3]+Y*R[6],M[1]=j*R[1]+te*R[4]+Y*R[7],M[2]=j*R[2]+te*R[5]+Y*R[8]}(E,E,P);const T=g.properties.get("color");return{u_matrix:p,u_lightpos:E,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+c,u_opacity:f}},rp=(p,i,c,f,g,x,E)=>u.extend(np(p,i,c,f),mu(x,i,E),{u_height_factor:-Math.pow(2,g.overscaledZ)/E.tileSize/8}),ip=p=>({u_matrix:p}),Sh=(p,i,c,f)=>u.extend(ip(p),mu(c,i,f)),b0=(p,i)=>({u_matrix:p,u_world:i}),Eh=(p,i,c,f,g)=>u.extend(Sh(p,i,c,f),{u_world:g}),op=(p,i,c,f)=>{const g=p.transform;let x,E;if(f.paint.get("circle-pitch-alignment")==="map"){const P=Ie(c,1,g.zoom);x=!0,E=[P,P]}else x=!1,E=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(i.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:E}},ap=(p,i,c)=>{const f=Ie(c,1,i.zoom),g=Math.pow(2,i.zoom-c.tileID.overscaledZ),x=c.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:x}},kh=(p,i,c=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:c}),Th=p=>({u_matrix:p}),$a=(p,i,c,f)=>({u_matrix:p,u_extrude_scale:Ie(i,1,c),u_intensity:f});function gu(p,i){const c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new u.MercatorCoordinate(0,f/c).toLngLat().lat,new u.MercatorCoordinate(0,(f+1)/c).toLngLat().lat]}const ui=(p,i,c,f)=>{const g=p.transform;return{u_matrix:gl(p,i,c,f),u_ratio:1/Ie(i,1,g.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},yu=(p,i,c,f,g)=>u.extend(ui(p,i,c,g),{u_image:0,u_image_height:f}),_u=(p,i,c,f,g)=>{const x=p.transform,E=ml(i,x);return{u_matrix:gl(p,i,c,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ie(i,1,x.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},pl=(p,i,c,f,g,x)=>{const E=p.lineAtlas,P=ml(i,p.transform),T=c.layout.get("line-cap")==="round",M=E.getDash(f.from,T),L=E.getDash(f.to,T),R=M.width*g.fromScale,j=L.width*g.toScale;return u.extend(ui(p,i,c,x),{u_patternscale_a:[P/R,-M.height/2],u_patternscale_b:[P/j,-L.height/2],u_sdfgamma:E.width/(256*Math.min(R,j)*p.pixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:L.y,u_mix:g.t})};function ml(p,i){return 1/Ie(p,1,i.tileZoom)}function gl(p,i,c,f){return p.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const yl=(p,i,c,f,g)=>{return{u_matrix:p,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(E=g.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:_l(g.paint.get("raster-hue-rotate"))};var x,E};function _l(p){p*=Math.PI/180;const i=Math.sin(p),c=Math.cos(p);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const vl=(p,i,c,f,g,x,E,P,T,M)=>{const L=g.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:L.width/L.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:P,u_is_text:+T,u_pitch_with_map:+f,u_texsize:M,u_texture:0}},ci=(p,i,c,f,g,x,E,P,T,M,L)=>{const R=g.transform;return u.extend(vl(p,i,c,f,g,x,E,P,T,M),{u_gamma_scale:f?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+L})},Ei=(p,i,c,f,g,x,E,P,T,M)=>u.extend(ci(p,i,c,f,g,x,E,P,!0,T,!0),{u_texsize_icon:M,u_texture_icon:1}),Ch=(p,i,c)=>({u_matrix:p,u_opacity:i,u_color:c}),vu=(p,i,c,f,g,x)=>u.extend(function(E,P,T,M){const L=T.imageManager.getPattern(E.from.toString()),R=T.imageManager.getPattern(E.to.toString()),{width:j,height:te}=T.imageManager.getPixelSize(),Y=Math.pow(2,M.tileID.overscaledZ),ee=M.tileSize*Math.pow(2,T.transform.tileZoom)/Y,oe=ee*(M.tileID.canonical.x+M.tileID.wrap*Y),he=ee*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[j,te],u_mix:P.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Ie(M,1,T.transform.tileZoom),u_pixel_coord_upper:[oe>>16,he>>16],u_pixel_coord_lower:[65535&oe,65535&he]}}(f,x,c,g),{u_matrix:p,u_opacity:i}),xu={fillExtrusion:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_lightpos:new u.Uniform3f(p,i.u_lightpos),u_lightintensity:new u.Uniform1f(p,i.u_lightintensity),u_lightcolor:new u.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,i.u_vertical_gradient),u_opacity:new u.Uniform1f(p,i.u_opacity)}),fillExtrusionPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_lightpos:new u.Uniform3f(p,i.u_lightpos),u_lightintensity:new u.Uniform1f(p,i.u_lightintensity),u_lightcolor:new u.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,i.u_vertical_gradient),u_height_factor:new u.Uniform1f(p,i.u_height_factor),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade),u_opacity:new u.Uniform1f(p,i.u_opacity)}),fill:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),fillPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),fillOutline:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world)}),fillOutlinePattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),circle:(p,i)=>({u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(p,i.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(p,i.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),collisionBox:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(p,i.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(p,i.u_extrude_scale),u_overscale_factor:new u.Uniform1f(p,i.u_overscale_factor)}),collisionCircle:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_inv_matrix:new u.UniformMatrix4f(p,i.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(p,i.u_viewport_size)}),debug:(p,i)=>({u_color:new u.UniformColor(p,i.u_color),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_overlay:new u.Uniform1i(p,i.u_overlay),u_overlay_scale:new u.Uniform1f(p,i.u_overlay_scale)}),clippingMask:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),heatmap:(p,i)=>({u_extrude_scale:new u.Uniform1f(p,i.u_extrude_scale),u_intensity:new u.Uniform1f(p,i.u_intensity),u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),heatmapTexture:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world),u_image:new u.Uniform1i(p,i.u_image),u_color_ramp:new u.Uniform1i(p,i.u_color_ramp),u_opacity:new u.Uniform1f(p,i.u_opacity)}),hillshade:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_latrange:new u.Uniform2f(p,i.u_latrange),u_light:new u.Uniform2f(p,i.u_light),u_shadow:new u.UniformColor(p,i.u_shadow),u_highlight:new u.UniformColor(p,i.u_highlight),u_accent:new u.UniformColor(p,i.u_accent)}),hillshadePrepare:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_dimension:new u.Uniform2f(p,i.u_dimension),u_zoom:new u.Uniform1f(p,i.u_zoom),u_unpack:new u.Uniform4f(p,i.u_unpack)}),line:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels)}),lineGradient:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_image:new u.Uniform1i(p,i.u_image),u_image_height:new u.Uniform1f(p,i.u_image_height)}),linePattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texsize:new u.Uniform2f(p,i.u_texsize),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_image:new u.Uniform1i(p,i.u_image),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),lineSDF:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(p,i.u_patternscale_a),u_patternscale_b:new u.Uniform2f(p,i.u_patternscale_b),u_sdfgamma:new u.Uniform1f(p,i.u_sdfgamma),u_image:new u.Uniform1i(p,i.u_image),u_tex_y_a:new u.Uniform1f(p,i.u_tex_y_a),u_tex_y_b:new u.Uniform1f(p,i.u_tex_y_b),u_mix:new u.Uniform1f(p,i.u_mix)}),raster:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_tl_parent:new u.Uniform2f(p,i.u_tl_parent),u_scale_parent:new u.Uniform1f(p,i.u_scale_parent),u_buffer_scale:new u.Uniform1f(p,i.u_buffer_scale),u_fade_t:new u.Uniform1f(p,i.u_fade_t),u_opacity:new u.Uniform1f(p,i.u_opacity),u_image0:new u.Uniform1i(p,i.u_image0),u_image1:new u.Uniform1i(p,i.u_image1),u_brightness_low:new u.Uniform1f(p,i.u_brightness_low),u_brightness_high:new u.Uniform1f(p,i.u_brightness_high),u_saturation_factor:new u.Uniform1f(p,i.u_saturation_factor),u_contrast_factor:new u.Uniform1f(p,i.u_contrast_factor),u_spin_weights:new u.Uniform3f(p,i.u_spin_weights)}),symbolIcon:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texture:new u.Uniform1i(p,i.u_texture)}),symbolSDF:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texture:new u.Uniform1i(p,i.u_texture),u_gamma_scale:new u.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,i.u_is_halo)}),symbolTextAndIcon:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texsize_icon:new u.Uniform2f(p,i.u_texsize_icon),u_texture:new u.Uniform1i(p,i.u_texture),u_texture_icon:new u.Uniform1i(p,i.u_texture_icon),u_gamma_scale:new u.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,i.u_is_halo)}),background:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_opacity:new u.Uniform1f(p,i.u_opacity),u_color:new u.UniformColor(p,i.u_color)}),backgroundPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_opacity:new u.Uniform1f(p,i.u_opacity),u_image:new u.Uniform1i(p,i.u_image),u_pattern_tl_a:new u.Uniform2f(p,i.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(p,i.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(p,i.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(p,i.u_pattern_br_b),u_texsize:new u.Uniform2f(p,i.u_texsize),u_mix:new u.Uniform1f(p,i.u_mix),u_pattern_size_a:new u.Uniform2f(p,i.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(p,i.u_pattern_size_b),u_scale_a:new u.Uniform1f(p,i.u_scale_a),u_scale_b:new u.Uniform1f(p,i.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(p,i.u_tile_units_to_pixels)}),terrain:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texture:new u.Uniform1i(p,i.u_texture),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)}),terrainDepth:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)}),terrainCoords:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texture:new u.Uniform1i(p,i.u_texture),u_terrain_coords_id:new u.Uniform1f(p,i.u_terrain_coords_id),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)})};class Ph{constructor(i,c,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ih={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wu{constructor(i,c,f,g){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){const g=c.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,c,f){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],E=c.attributes[x.name];E!==void 0&&i.vertexAttribPointer(E,x.components,i[Ih[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class en{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mh extends en{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class bu extends en{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class sp extends en{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class lp extends en{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xs extends en{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class S0 extends en{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class E0 extends en{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class k0 extends en{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class T0 extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class C0 extends en{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class P0 extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ah extends en{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Su extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class zh extends en{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Dh extends en{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ws extends en{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class up extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class cp extends en{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Rh extends en{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ba extends en{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class hp extends en{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class bs extends en{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ss extends en{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class dp extends en{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Lh extends en{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class mn extends en{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Eu extends en{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class I0 extends en{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class fp extends en{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class xl extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class M0 extends en{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Fh extends en{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class pp extends Fh{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class A0 extends Fh{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Oh extends Fh{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ku{constructor(i,c,f,g,x){this.context=i,this.width=c,this.height=f;const E=i.gl,P=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new pp(i,P),g)this.depthAttachment=x?new Oh(i,P):new A0(i,P);else if(x)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Fn{constructor(i,c,f){this.blendFunction=i,this.blendColor=c,this.mask=f}}Fn.Replace=[1,0],Fn.disabled=new Fn(Fn.Replace,u.Color.transparent,[!1,!1,!1,!1]),Fn.unblended=new Fn(Fn.Replace,u.Color.transparent,[!0,!0,!0,!0]),Fn.alphaBlended=new Fn([1,771],u.Color.transparent,[!0,!0,!0,!0]);class $h{constructor(i){this.gl=i,this.clearColor=new Mh(this),this.clearDepth=new bu(this),this.clearStencil=new sp(this),this.colorMask=new lp(this),this.depthMask=new xs(this),this.stencilMask=new S0(this),this.stencilFunc=new E0(this),this.stencilOp=new k0(this),this.stencilTest=new T0(this),this.depthRange=new C0(this),this.depthTest=new P0(this),this.depthFunc=new Ah(this),this.blend=new Su(this),this.blendFunc=new zh(this),this.blendColor=new Dh(this),this.blendEquation=new ws(this),this.cullFace=new up(this),this.cullFaceSide=new cp(this),this.frontFace=new Rh(this),this.program=new Ba(this),this.activeTexture=new hp(this),this.viewport=new bs(this),this.bindFramebuffer=new Ss(this),this.bindRenderbuffer=new dp(this),this.bindTexture=new Lh(this),this.bindVertexBuffer=new mn(this),this.bindElementBuffer=new Eu(this),this.bindVertexArray=new I0(this),this.pixelStoreUnpack=new fp(this),this.pixelStoreUnpackPremultiplyAlpha=new xl(this),this.pixelStoreUnpackFlipY=new M0(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.HALF_FLOAT=i.HALF_FLOAT,i.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=i.RGBA16F,this.RGB16F=i.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Ph(this,i,c)}createVertexBuffer(i,c,f){return new wu(this,i,c,f)}createRenderbuffer(i,c,f){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,f,g){return new ku(this,i,c,f,g)}clear({color:i,depth:c,stencil:f}){const g=this.gl;let x=0;i&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.deepEqual(i.blendFunction,Fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(i){return this.gl.deleteVertexArray(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Wt{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);const Tu=7680;class Sn{constructor(i,c,f,g,x,E){this.test=i,this.ref=c,this.mask=f,this.fail=g,this.depthFail=x,this.pass=E}}Sn.disabled=new Sn({func:519,mask:0},0,0,Tu,Tu,Tu);class wn{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}let Es;function mp(p,i,c,f,g,x,E){const P=p.context,T=P.gl,M=p.useProgram("collisionBox"),L=[];let R=0,j=0;for(let re=0;re<f.length;re++){const we=f[re],Te=i.getTile(we),De=Te.getBucket(c);if(!De)continue;let $e=we.posMatrix;g[0]===0&&g[1]===0||($e=p.translatePosMatrix(we.posMatrix,Te,g,x));const Ue=E?De.textCollisionBox:De.iconCollisionBox,Fe=De.collisionCircleArray;if(Fe.length>0){const tt=u.create(),vt=$e;u.mul(tt,De.placementInvProjMatrix,p.transform.glCoordMatrix),u.mul(tt,tt,De.placementViewportMatrix),L.push({circleArray:Fe,circleOffset:j,transform:vt,invTransform:tt,coord:we}),R+=Fe.length/4,j=R}Ue&&M.draw(P,T.LINES,Wt.disabled,Sn.disabled,p.colorModeForRenderPass(),wn.disabled,ap($e,p.transform,Te),p.style.map.terrain&&p.style.map.terrain.getTerrainData(we),c.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,null,p.transform.zoom,null,null,Ue.collisionVertexBuffer)}if(!E||!L.length)return;const te=p.useProgram("collisionCircle"),Y=new u.CollisionCircleLayoutArray;Y.resize(4*R),Y._trim();let ee=0;for(const re of L)for(let we=0;we<re.circleArray.length/4;we++){const Te=4*we,De=re.circleArray[Te+0],$e=re.circleArray[Te+1],Ue=re.circleArray[Te+2],Fe=re.circleArray[Te+3];Y.emplace(ee++,De,$e,Ue,Fe,0),Y.emplace(ee++,De,$e,Ue,Fe,1),Y.emplace(ee++,De,$e,Ue,Fe,2),Y.emplace(ee++,De,$e,Ue,Fe,3)}(!Es||Es.length<2*R)&&(Es=function(re){const we=2*re,Te=new u.QuadTriangleArray;Te.resize(we),Te._trim();for(let De=0;De<we;De++){const $e=6*De;Te.uint16[$e+0]=4*De+0,Te.uint16[$e+1]=4*De+1,Te.uint16[$e+2]=4*De+2,Te.uint16[$e+3]=4*De+2,Te.uint16[$e+4]=4*De+3,Te.uint16[$e+5]=4*De+0}return Te}(R));const oe=P.createIndexBuffer(Es,!0),he=P.createVertexBuffer(Y,u.collisionCircleLayout.members,!0);for(const re of L){const we={u_matrix:re.transform,u_inv_matrix:re.invTransform,u_camera_to_center_distance:(be=p.transform).cameraToCenterDistance,u_viewport_size:[be.width,be.height]};te.draw(P,T.TRIANGLES,Wt.disabled,Sn.disabled,p.colorModeForRenderPass(),wn.disabled,we,p.style.map.terrain&&p.style.map.terrain.getTerrainData(re.coord),c.id,he,oe,u.SegmentVector.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,p.transform.zoom,null,null,null)}var be;he.destroy(),oe.destroy()}wn.disabled=new wn(!1,1029,2305),wn.backCCW=new wn(!0,1029,2305);const Bh=u.identity(new Float32Array(16));function z0(p,i,c,f,g,x){const{horizontalAlign:E,verticalAlign:P}=u.getAnchorAlignment(p),T=-(E-.5)*i,M=-(P-.5)*c,L=u.evaluateVariableOffset(p,f);return new u.Point((T/g+L[0])*x,(M/g+L[1])*x)}function gp(p,i,c,f,g,x,E,P,T,M,L){const R=p.text.placedSymbolArray,j=p.text.dynamicLayoutVertexArray,te=p.icon.dynamicLayoutVertexArray,Y={};j.clear();for(let ee=0;ee<R.length;ee++){const oe=R.get(ee),he=oe.hidden||!oe.crossTileID||p.allowVerticalPlacement&&!oe.placedOrientation?null:f[oe.crossTileID];if(he){const be=new u.Point(oe.anchorX,oe.anchorY),re=ft(be,c?E:x,L),we=bi(g.cameraToCenterDistance,re.signedDistanceFromCamera);let Te=u.evaluateSizeForFeature(p.textSizeData,T,oe)*we/u.ONE_EM;c&&(Te*=p.tilePixelRatio/P);const{width:De,height:$e,anchor:Ue,textOffset:Fe,textBoxScale:tt}=he,vt=z0(Ue,De,$e,Fe,tt,Te),Dt=c?ft(be.add(vt),x,L).point:re.point.add(i?vt.rotate(-g.angle):vt),He=p.allowVerticalPlacement&&oe.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let kt=0;kt<oe.numGlyphs;kt++)u.addDynamicAttributes(j,Dt,He);M&&oe.associatedIconIndex>=0&&(Y[oe.associatedIconIndex]={shiftedAnchor:Dt,angle:He})}else pe(oe.numGlyphs,j)}if(M){te.clear();const ee=p.icon.placedSymbolArray;for(let oe=0;oe<ee.length;oe++){const he=ee.get(oe);if(he.hidden)pe(he.numGlyphs,te);else{const be=Y[oe];if(be)for(let re=0;re<he.numGlyphs;re++)u.addDynamicAttributes(te,be.shiftedAnchor,be.angle);else pe(he.numGlyphs,te)}}p.icon.dynamicLayoutVertexBuffer.updateData(te)}p.text.dynamicLayoutVertexBuffer.updateData(j)}function Cu(p,i,c){return c.iconsInText&&i?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Pu(p,i,c,f,g,x,E,P,T,M,L,R){const j=p.context,te=j.gl,Y=p.transform,ee=P==="map",oe=T==="map",he=P!=="viewport"&&c.layout.get("symbol-placement")!=="point",be=ee&&!oe&&!he,re=!c.layout.get("symbol-sort-key").isConstant();let we=!1;const Te=p.depthModeForSublayer(0,Wt.ReadOnly),De=c.layout.get("text-variable-anchor"),$e=[];for(const Ue of f){const Fe=i.getTile(Ue),tt=Fe.getBucket(c);if(!tt)continue;const vt=g?tt.text:tt.icon;if(!vt||!vt.segments.get().length||!vt.hasVisibleVertices)continue;const Dt=vt.programConfigurations.get(c.id),He=g||tt.sdfIcons,kt=g?tt.textSizeData:tt.iconSizeData,nt=oe||Y.pitch!==0,tn=p.useProgram(Cu(He,g,tt),Dt),tr=u.evaluateSizeForZoom(kt,Y.zoom),nn=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Ue);let Lt,Zn,Hr,nr,Sr=[0,0],ki=null;if(g)Zn=Fe.glyphAtlasTexture,Hr=te.LINEAR,Lt=Fe.glyphAtlasTexture.size,tt.iconsInText&&(Sr=Fe.imageAtlasTexture.size,ki=Fe.imageAtlasTexture,nr=nt||p.options.rotating||p.options.zooming||kt.kind==="composite"||kt.kind==="camera"?te.LINEAR:te.NEAREST);else{const _r=c.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;Zn=Fe.imageAtlasTexture,Hr=He||p.options.rotating||p.options.zooming||_r||nt?te.LINEAR:te.NEAREST,Lt=Fe.imageAtlasTexture.size}const oo=Ie(Fe,1,p.transform.zoom),ao=Nn(Ue.posMatrix,oe,ee,p.transform,oo),Xr=Zr(Ue.posMatrix,oe,ee,p.transform,oo),Oo=De&&tt.hasTextData(),Dl=c.layout.get("icon-text-fit")!=="none"&&Oo&&tt.hasIconData();if(he){const _r=p.style.map.terrain?(Ku,Qo)=>p.style.map.terrain.getElevation(Ue,Ku,Qo):null,Ti=c.layout.get("text-rotation-alignment")==="map";ya(tt,Ue.posMatrix,p,g,ao,Xr,oe,M,Ti,_r)}const Br=p.translatePosMatrix(Ue.posMatrix,Fe,x,E),Er=he||g&&De||Dl?Bh:ao,an=p.translatePosMatrix(Xr,Fe,x,E,!0),yr=He&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let kr;kr=He?tt.iconsInText?Ei(kt.kind,tr,be,oe,p,Br,Er,an,Lt,Sr):ci(kt.kind,tr,be,oe,p,Br,Er,an,g,Lt,!0):vl(kt.kind,tr,be,oe,p,Br,Er,an,g,Lt);const cn={program:tn,buffers:vt,uniformValues:kr,atlasTexture:Zn,atlasTextureIcon:ki,atlasInterpolation:Hr,atlasInterpolationIcon:nr,isSDF:He,hasHalo:yr};if(re&&tt.canOverlap){we=!0;const _r=vt.segments.get();for(const Ti of _r)$e.push({segments:new u.SegmentVector([Ti]),sortKey:Ti.sortKey,state:cn,terrainData:nn})}else $e.push({segments:vt.segments,sortKey:0,state:cn,terrainData:nn})}we&&$e.sort((Ue,Fe)=>Ue.sortKey-Fe.sortKey);for(const Ue of $e){const Fe=Ue.state;if(j.activeTexture.set(te.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,te.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(j.activeTexture.set(te.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Fe.isSDF){const tt=Fe.uniformValues;Fe.hasHalo&&(tt.u_is_halo=1,Vh(Fe.buffers,Ue.segments,c,p,Fe.program,Te,L,R,tt,Ue.terrainData)),tt.u_is_halo=0}Vh(Fe.buffers,Ue.segments,c,p,Fe.program,Te,L,R,Fe.uniformValues,Ue.terrainData)}}function Vh(p,i,c,f,g,x,E,P,T,M){const L=f.context;g.draw(L,L.gl.TRIANGLES,x,E,P,wn.disabled,T,M,c.id,p.layoutVertexBuffer,p.indexBuffer,i,c.paint,f.transform.zoom,p.programConfigurations.get(c.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Nh(p,i,c,f,g){if(!c||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let E=x[c.to.toString()],P=x[c.from.toString()];if(!E||!P){const T=g.getPaintProperty(i);E=x[T],P=x[T]}E&&P&&p.setConstantPatternPositions(E,P)}function wl(p,i,c,f,g,x,E){const P=p.context.gl,T="fill-pattern",M=c.paint.get(T),L=M&&M.constantOr(1),R=c.getCrossfadeParameters();let j,te,Y,ee,oe;E?(te=L&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=P.LINES):(te=L?"fillPattern":"fill",j=P.TRIANGLES);const he=M.constantOr(null);for(const be of f){const re=i.getTile(be);if(L&&!re.patternsLoaded())continue;const we=re.getBucket(c);if(!we)continue;const Te=we.programConfigurations.get(c.id),De=p.useProgram(te,Te),$e=p.style.map.terrain&&p.style.map.terrain.getTerrainData(be);L&&(p.context.activeTexture.set(P.TEXTURE0),re.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Te.updatePaintBuffers(R)),Nh(Te,T,he,re,c);const Ue=$e?be:null,Fe=p.translatePosMatrix(Ue?Ue.posMatrix:be.posMatrix,re,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){ee=we.indexBuffer2,oe=we.segments2;const tt=[P.drawingBufferWidth,P.drawingBufferHeight];Y=te==="fillOutlinePattern"&&L?Eh(Fe,p,R,re,tt):b0(Fe,tt)}else ee=we.indexBuffer,oe=we.segments,Y=L?Sh(Fe,p,R,re):ip(Fe);De.draw(p.context,j,g,p.stencilModeForClipping(be),x,wn.disabled,Y,$e,c.id,we.layoutVertexBuffer,ee,oe,c.paint,p.transform.zoom,Te)}}function bl(p,i,c,f,g,x,E){const P=p.context,T=P.gl,M="fill-extrusion-pattern",L=c.paint.get(M),R=L.constantOr(1),j=c.getCrossfadeParameters(),te=c.paint.get("fill-extrusion-opacity"),Y=L.constantOr(null);for(const ee of f){const oe=i.getTile(ee),he=oe.getBucket(c);if(!he)continue;const be=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ee),re=he.programConfigurations.get(c.id),we=p.useProgram(R?"fillExtrusionPattern":"fillExtrusion",re);R&&(p.context.activeTexture.set(T.TEXTURE0),oe.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),re.updatePaintBuffers(j)),Nh(re,M,Y,oe,c);const Te=p.translatePosMatrix(ee.posMatrix,oe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),De=c.paint.get("fill-extrusion-vertical-gradient"),$e=R?rp(Te,p,De,te,ee,j,oe):np(Te,p,De,te);we.draw(P,P.gl.TRIANGLES,g,x,E,wn.backCCW,$e,be,c.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,c.paint,p.transform.zoom,re,p.style.map.terrain&&he.centroidVertexBuffer)}}function D0(p,i,c,f,g,x,E){const P=p.context,T=P.gl,M=c.fbo;if(!M)return;const L=p.useProgram("hillshade"),R=p.style.map.terrain&&p.style.map.terrain.getTerrainData(i);P.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,M.colorAttachment.get()),L.draw(P,T.TRIANGLES,g,x,E,wn.disabled,((j,te,Y,ee)=>{const oe=Y.paint.get("hillshade-shadow-color"),he=Y.paint.get("hillshade-highlight-color"),be=Y.paint.get("hillshade-accent-color");let re=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=j.transform.angle);const we=!j.options.moving;return{u_matrix:ee?ee.posMatrix:j.transform.calculatePosMatrix(te.tileID.toUnwrapped(),we),u_image:0,u_latrange:gu(0,te.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),re],u_shadow:oe,u_highlight:he,u_accent:be}})(p,c,f,R?i:null),R,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function yp(p,i,c,f,g,x){const E=p.context,P=E.gl,T=i.dem;if(T&&T.data){const M=T.dim,L=T.stride,R=T.getPixels();if(E.activeTexture.set(P.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(L),i.demTexture){const te=i.demTexture;te.update(R,{premultiply:!1}),te.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else i.demTexture=new Ve(E,R,P.RGBA,{premultiply:!1}),i.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);E.activeTexture.set(P.TEXTURE0);let j=i.fbo;if(!j){const te=new Ve(E,{width:M,height:M,data:null},P.RGBA);te.bind(P.LINEAR,P.CLAMP_TO_EDGE),j=i.fbo=E.createFramebuffer(M,M,!0,!1),j.colorAttachment.set(te.texture)}E.bindFramebuffer.set(j.framebuffer),E.viewport.set([0,0,M,M]),p.useProgram("hillshadePrepare").draw(E,P.TRIANGLES,f,g,x,wn.disabled,((te,Y)=>{const ee=Y.stride,oe=u.create();return u.ortho(oe,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(oe,oe,[0,-u.EXTENT,0]),{u_matrix:oe,u_image:1,u_dimension:[ee,ee],u_zoom:te.overscaledZ,u_unpack:Y.getUnpackVector()}})(i.tileID,T),null,c.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function er(p,i,c,f,g,x){const E=f.paint.get("raster-fade-duration");if(!x&&E>0){const P=u.exported.now(),T=(P-p.timeAdded)/E,M=i?(P-i.timeAdded)/E:-1,L=c.getSource(),R=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),j=!i||Math.abs(i.tileID.overscaledZ-R)>Math.abs(p.tileID.overscaledZ-R),te=j&&p.refreshedUponExpiration?1:u.clamp(j?T:1-M,0,1);return p.refreshedUponExpiration&&T>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const Va=new u.Color(1,0,0,1),qi=new u.Color(0,1,0,1),_p=new u.Color(0,0,1,1),Uh=new u.Color(1,0,1,1),vp=new u.Color(0,1,1,1);function Na(p,i,c,f){ks(p,0,i+c/2,p.transform.width,c,f)}function Sl(p,i,c,f){ks(p,i-c/2,0,c,p.transform.height,f)}function ks(p,i,c,f,g,x){const E=p.context,P=E.gl;P.enable(P.SCISSOR_TEST),P.scissor(i*p.pixelRatio,c*p.pixelRatio,f*p.pixelRatio,g*p.pixelRatio),E.clear({color:x}),P.disable(P.SCISSOR_TEST)}function xp(p,i,c){const f=p.context,g=f.gl,x=c.posMatrix,E=p.useProgram("debug"),P=Wt.disabled,T=Sn.disabled,M=p.colorModeForRenderPass(),L="$debug",R=p.style.map.terrain&&p.style.map.terrain.getTerrainData(c);f.activeTexture.set(g.TEXTURE0);const j=i.getTileByID(c.key).latestRawTileData,te=Math.floor((j&&j.byteLength||0)/1024),Y=i.getTile(c).tileSize,ee=512/Math.min(Y,512)*(c.overscaledZ/p.transform.zoom)*.5;let oe=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(oe+=` => ${c.overscaledZ}`),function(he,be){he.initDebugOverlayCanvas();const re=he.debugOverlayCanvas,we=he.context.gl,Te=he.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,re.width,re.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(be,5,5),Te.strokeText(be,5,5),he.debugOverlayTexture.update(re),he.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(p,`${oe} ${te}kB`),E.draw(f,g.TRIANGLES,P,T,Fn.alphaBlended,wn.disabled,kh(x,u.Color.transparent,ee),null,L,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),E.draw(f,g.LINE_STRIP,P,T,M,wn.disabled,kh(x,u.Color.red),R,L,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function jh(p,i,c){const f=p.context,g=f.gl,x=p.colorModeForRenderPass(),E=new Wt(g.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D),P=p.useProgram("terrain"),T=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,p.width,p.height]);for(const M of c){const L=p.renderToTexture.getTexture(M),R=i.getTerrainData(M.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,L.texture);const j={u_matrix:p.transform.calculatePosMatrix(M.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(p.transform.zoom)};P.draw(f,g.TRIANGLES,E,Sn.disabled,x,wn.backCCW,j,R,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}}const Gh={symbol:function(p,i,c,f,g){if(p.renderPass!=="translucent")return;const x=Sn.disabled,E=p.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(P,T,M,L,R,j,te){const Y=T.transform,ee=R==="map",oe=j==="map";for(const he of P){const be=L.getTile(he),re=be.getBucket(M);if(!re||!re.text||!re.text.segments.get().length)continue;const we=u.evaluateSizeForZoom(re.textSizeData,Y.zoom),Te=Ie(be,1,T.transform.zoom),De=Nn(he.posMatrix,oe,ee,T.transform,Te),$e=M.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(we){const Ue=Math.pow(2,Y.zoom-be.tileID.overscaledZ);gp(re,ee,oe,te,Y,De,he.posMatrix,Ue,we,$e,T.style.map.terrain?(Fe,tt)=>T.style.map.terrain.getElevation(he,Fe,tt):null)}}}(f,p,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),g),c.paint.get("icon-opacity").constantOr(1)!==0&&Pu(p,i,c,f,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,E),c.paint.get("text-opacity").constantOr(1)!==0&&Pu(p,i,c,f,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,E),i.map.showCollisionBoxes&&(mp(p,i,c,f,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),mp(p,i,c,f,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,c,f){if(p.renderPass!=="translucent")return;const g=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),P=!c.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(x.constantOr(1)===0||E.constantOr(1)===0))return;const T=p.context,M=T.gl,L=p.depthModeForSublayer(0,Wt.ReadOnly),R=Sn.disabled,j=p.colorModeForRenderPass(),te=[];for(let Y=0;Y<f.length;Y++){const ee=f[Y],oe=i.getTile(ee),he=oe.getBucket(c);if(!he)continue;const be=he.programConfigurations.get(c.id),re=p.useProgram("circle",be),we=he.layoutVertexBuffer,Te=he.indexBuffer,De=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ee),$e={programConfiguration:be,program:re,layoutVertexBuffer:we,indexBuffer:Te,uniformValues:op(p,ee,oe,c),terrainData:De};if(P){const Ue=he.segments.get();for(const Fe of Ue)te.push({segments:new u.SegmentVector([Fe]),sortKey:Fe.sortKey,state:$e})}else te.push({segments:he.segments,sortKey:0,state:$e})}P&&te.sort((Y,ee)=>Y.sortKey-ee.sortKey);for(const Y of te){const{programConfiguration:ee,program:oe,layoutVertexBuffer:he,indexBuffer:be,uniformValues:re,terrainData:we}=Y.state;oe.draw(T,M.TRIANGLES,L,R,j,wn.disabled,re,we,c.id,he,be,Y.segments,c.paint,p.transform.zoom,ee)}},heatmap:function(p,i,c,f){if(c.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const g=p.context,x=g.gl,E=Sn.disabled,P=new Fn([x.ONE,x.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(T,M,L){const R=T.gl;T.activeTexture.set(R.TEXTURE1),T.viewport.set([0,0,M.width/4,M.height/4]);let j=L.heatmapFbo;if(j)R.bindTexture(R.TEXTURE_2D,j.colorAttachment.get()),T.bindFramebuffer.set(j.framebuffer);else{const te=R.createTexture();R.bindTexture(R.TEXTURE_2D,te),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),j=L.heatmapFbo=T.createFramebuffer(M.width/4,M.height/4,!1,!1),function(Y,ee,oe,he){var be,re;const we=Y.gl,Te=(be=Y.HALF_FLOAT)!==null&&be!==void 0?be:we.UNSIGNED_BYTE,De=(re=Y.RGBA16F)!==null&&re!==void 0?re:we.RGBA;we.texImage2D(we.TEXTURE_2D,0,De,ee.width/4,ee.height/4,0,we.RGBA,Te,null),he.colorAttachment.set(oe)}(T,M,te,j)}})(g,p,c),g.clear({color:u.Color.transparent});for(let T=0;T<f.length;T++){const M=f[T];if(i.hasRenderableParent(M))continue;const L=i.getTile(M),R=L.getBucket(c);if(!R)continue;const j=R.programConfigurations.get(c.id),te=p.useProgram("heatmap",j),{zoom:Y}=p.transform;te.draw(g,x.TRIANGLES,Wt.disabled,E,P,wn.disabled,$a(M.posMatrix,L,Y,c.paint.get("heatmap-intensity")),null,c.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,c.paint,p.transform.zoom,j)}g.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(g,x){const E=g.context,P=E.gl,T=x.heatmapFbo;if(!T)return;E.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,T.colorAttachment.get()),E.activeTexture.set(P.TEXTURE1);let M=x.colorRampTexture;M||(M=x.colorRampTexture=new Ve(E,x.colorRamp,P.RGBA)),M.bind(P.LINEAR,P.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(E,P.TRIANGLES,Wt.disabled,Sn.disabled,g.colorModeForRenderPass(),wn.disabled,((L,R,j,te)=>{const Y=u.create();u.ortho(Y,0,L.width,L.height,0,0,1);const ee=L.context.gl;return{u_matrix:Y,u_world:[ee.drawingBufferWidth,ee.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")}})(g,x),null,x.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,x.paint,g.transform.zoom)}(p,c))},line:function(p,i,c,f){if(p.renderPass!=="translucent")return;const g=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(g.constantOr(1)===0||x.constantOr(1)===0)return;const E=p.depthModeForSublayer(0,Wt.ReadOnly),P=p.colorModeForRenderPass(),T=c.paint.get("line-dasharray"),M=c.paint.get("line-pattern"),L=M.constantOr(1),R=c.paint.get("line-gradient"),j=c.getCrossfadeParameters(),te=L?"linePattern":T?"lineSDF":R?"lineGradient":"line",Y=p.context,ee=Y.gl;let oe=!0;for(const he of f){const be=i.getTile(he);if(L&&!be.patternsLoaded())continue;const re=be.getBucket(c);if(!re)continue;const we=re.programConfigurations.get(c.id),Te=p.context.program.get(),De=p.useProgram(te,we),$e=oe||De.program!==Te,Ue=p.style.map.terrain&&p.style.map.terrain.getTerrainData(he),Fe=M.constantOr(null);if(Fe&&be.imageAtlas){const Dt=be.imageAtlas,He=Dt.patternPositions[Fe.to.toString()],kt=Dt.patternPositions[Fe.from.toString()];He&&kt&&we.setConstantPatternPositions(He,kt)}const tt=Ue?he:null,vt=L?_u(p,be,c,j,tt):T?pl(p,be,c,T,j,tt):R?yu(p,be,c,re.lineClipsArray.length,tt):ui(p,be,c,tt);if(L)Y.activeTexture.set(ee.TEXTURE0),be.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),we.updatePaintBuffers(j);else if(T&&($e||p.lineAtlas.dirty))Y.activeTexture.set(ee.TEXTURE0),p.lineAtlas.bind(Y);else if(R){const Dt=re.gradients[c.id];let He=Dt.texture;if(c.gradientVersion!==Dt.version){let kt=256;if(c.stepInterpolant){const nt=i.getSource().maxzoom,tn=he.canonical.z===nt?Math.ceil(1<<p.transform.maxZoom-he.canonical.z):1;kt=u.clamp(u.nextPowerOfTwo(re.maxLineLength/u.EXTENT*1024*tn),256,Y.maxTextureSize)}Dt.gradient=u.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:kt,image:Dt.gradient||void 0,clips:re.lineClipsArray}),Dt.texture?Dt.texture.update(Dt.gradient):Dt.texture=new Ve(Y,Dt.gradient,ee.RGBA),Dt.version=c.gradientVersion,He=Dt.texture}Y.activeTexture.set(ee.TEXTURE0),He.bind(c.stepInterpolant?ee.NEAREST:ee.LINEAR,ee.CLAMP_TO_EDGE)}De.draw(Y,ee.TRIANGLES,E,p.stencilModeForClipping(he),P,wn.disabled,vt,Ue,c.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,c.paint,p.transform.zoom,we,re.layoutVertexBuffer2),oe=!1}},fill:function(p,i,c,f){const g=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const E=p.colorModeForRenderPass(),P=c.paint.get("fill-pattern"),T=p.opaquePassEnabledForLayer()&&!P.constantOr(1)&&g.constantOr(u.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===T){const M=p.depthModeForSublayer(1,p.renderPass==="opaque"?Wt.ReadWrite:Wt.ReadOnly);wl(p,i,c,f,M,E,!1)}if(p.renderPass==="translucent"&&c.paint.get("fill-antialias")){const M=p.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);wl(p,i,c,f,M,E,!0)}},"fill-extrusion":function(p,i,c,f){const g=c.paint.get("fill-extrusion-opacity");if(g!==0&&p.renderPass==="translucent"){const x=new Wt(p.context.gl.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D);if(g!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))bl(p,i,c,f,x,Sn.disabled,Fn.disabled),bl(p,i,c,f,x,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const E=p.colorModeForRenderPass();bl(p,i,c,f,x,Sn.disabled,E)}}},hillshade:function(p,i,c,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const g=p.context,x=p.depthModeForSublayer(0,Wt.ReadOnly),E=p.colorModeForRenderPass(),[P,T]=p.renderPass==="translucent"?p.stencilConfigForOverlap(f):[{},f];for(const M of T){const L=i.getTile(M);L.needsHillshadePrepare!==void 0&&L.needsHillshadePrepare&&p.renderPass==="offscreen"?yp(p,L,c,x,Sn.disabled,E):p.renderPass==="translucent"&&D0(p,M,L,c,x,P[M.overscaledZ],E)}g.viewport.set([0,0,p.width,p.height])},raster:function(p,i,c,f){if(p.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!f.length)return;const g=p.context,x=g.gl,E=i.getSource(),P=p.useProgram("raster"),T=p.colorModeForRenderPass(),[M,L]=E instanceof pr?[{},f]:p.stencilConfigForOverlap(f),R=L[L.length-1].overscaledZ,j=!p.options.moving;for(const te of L){const Y=p.depthModeForSublayer(te.overscaledZ-R,c.paint.get("raster-opacity")===1?Wt.ReadWrite:Wt.ReadOnly,x.LESS),ee=i.getTile(te);ee.registerFadeDuration(c.paint.get("raster-fade-duration"));const oe=i.findLoadedParent(te,0),he=er(ee,oe,i,c,p.transform,p.style.map.terrain);let be,re;const we=c.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;g.activeTexture.set(x.TEXTURE0),ee.texture.bind(we,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(x.TEXTURE1),oe?(oe.texture.bind(we,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),be=Math.pow(2,oe.tileID.overscaledZ-ee.tileID.overscaledZ),re=[ee.tileID.canonical.x*be%1,ee.tileID.canonical.y*be%1]):ee.texture.bind(we,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const Te=p.style.map.terrain&&p.style.map.terrain.getTerrainData(te),De=Te?te:null,$e=De?De.posMatrix:p.transform.calculatePosMatrix(te.toUnwrapped(),j),Ue=yl($e,re||[0,0],be||1,he,c);E instanceof pr?P.draw(g,x.TRIANGLES,Y,Sn.disabled,T,wn.disabled,Ue,Te,c.id,E.boundsBuffer,p.quadTriangleIndexBuffer,E.boundsSegments):P.draw(g,x.TRIANGLES,Y,M[te.overscaledZ],T,wn.disabled,Ue,Te,c.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,i,c,f){const g=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(x===0)return;const E=p.context,P=E.gl,T=p.transform,M=T.tileSize,L=c.paint.get("background-pattern");if(p.isPatternMissing(L))return;const R=!L&&g.a===1&&x===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==R)return;const j=Sn.disabled,te=p.depthModeForSublayer(0,R==="opaque"?Wt.ReadWrite:Wt.ReadOnly),Y=p.colorModeForRenderPass(),ee=p.useProgram(L?"backgroundPattern":"background"),oe=f||T.coveringTiles({tileSize:M,terrain:p.style.map.terrain});L&&(E.activeTexture.set(P.TEXTURE0),p.imageManager.bind(p.context));const he=c.getCrossfadeParameters();for(const be of oe){const re=f?be.posMatrix:p.transform.calculatePosMatrix(be.toUnwrapped()),we=L?vu(re,x,p,L,{tileID:be,tileSize:M},he):Ch(re,x,g),Te=p.style.map.terrain&&p.style.map.terrain.getTerrainData(be);ee.draw(E,P.TRIANGLES,te,j,Y,wn.disabled,we,Te,c.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,i,c){for(let f=0;f<c.length;f++)xp(p,i,c[f])},custom:function(p,i,c){const f=p.context,g=c.implementation;if(p.renderPass==="offscreen"){const x=g.prerender;x&&(p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),x.call(g,f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),f.setStencilMode(Sn.disabled);const x=g.renderingMode==="3d"?new Wt(p.context.gl.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Wt.ReadOnly);f.setDepthMode(x),g.render(f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState(),f.bindFramebuffer.set(null)}}};class wp{constructor(i,c){this.context=new $h(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.create(),renderTime:0},this.setup(),this.numSublayers=Dn.maxUnderzooming+Dn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fl}resize(i,c,f){if(this.width=i*f,this.height=c*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,c=new u.PosArray;c.emplaceBack(0,0),c.emplaceBack(u.EXTENT,0),c.emplaceBack(0,u.EXTENT),c.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,_s.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const f=new u.PosArray;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(f,_s.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const g=new u.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(u.EXTENT,0,u.EXTENT,0),g.emplaceBack(0,u.EXTENT,0,u.EXTENT),g.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(g,on.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const x=new u.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,_s.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const E=new u.LineStripIndexArray;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const P=new u.TriangleIndexArray;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(P);const T=this.context.gl;this.stencilClearMode=new Sn({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Wt.disabled,this.stencilClearMode,Fn.disabled,wn.disabled,Th(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Fn.disabled),f.setDepthMode(Wt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of c){const P=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,T=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);x.draw(f,g.TRIANGLES,Wt.disabled,new Sn({func:g.ALWAYS,mask:0},P,255,g.KEEP,g.KEEP,g.REPLACE),Fn.disabled,wn.disabled,Th(E.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Sn({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Sn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,f=i.sort((E,P)=>P.overscaledZ-E.overscaledZ),g=f[f.length-1].overscaledZ,x=f[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let P=0;P<x;P++)E[P+g]=new Sn({func:c.GEQUAL,mask:255},P+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[E,f]}return[{[g]:Sn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Fn([i.CONSTANT_COLOR,i.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Fn.unblended:Fn.alphaBlended}depthModeForSublayer(i,c,f){if(!this.opaquePassEnabledForLayer())return Wt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Wt(f||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.exported.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,x={},E={},P={};for(const T in g){const M=g[T];M.used&&M.prepare(this.context),x[T]=M.getVisibleCoordinates(),E[T]=x[T].slice().reverse(),P[T]=M.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let T=0;T<f.length;T++)if(this.style._layers[f[T]].is3D()){this.opaquePassCutoff=T;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const T=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||T.length)&&(u.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(M,L){const R=M.context,j=R.gl,te=Fn.unblended,Y=new Wt(j.LEQUAL,Wt.ReadWrite,[0,1]),ee=L.getTerrainMesh(),oe=L.sourceCache.getRenderableTiles(),he=M.useProgram("terrainDepth");R.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),R.clear({color:u.Color.transparent,depth:1});for(const be of oe){const re=L.getTerrainData(be.tileID),we={u_matrix:M.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(M.transform.zoom)};he.draw(R,j.TRIANGLES,Y,Sn.disabled,te,wn.backCCW,we,re,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain),function(M,L){const R=M.context,j=R.gl,te=Fn.unblended,Y=new Wt(j.LEQUAL,Wt.ReadWrite,[0,1]),ee=L.getTerrainMesh(),oe=L.getCoordsTexture(),he=L.sourceCache.getRenderableTiles(),be=M.useProgram("terrainCoords");R.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),R.clear({color:u.Color.transparent,depth:1}),L.coordsIndex=[];for(const re of he){const we=L.getTerrainData(re.tileID);R.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,oe.texture);const Te={u_matrix:M.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(M.transform.zoom)};be.draw(R,j.TRIANGLES,Y,Sn.disabled,te,wn.backCCW,Te,we,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),L.coordsIndex.push(re.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const T of f){const M=this.style._layers[T];if(!M.hasOffscreenPass()||M.isHidden(this.transform.zoom))continue;const L=E[M.source];(M.type==="custom"||L.length)&&this.renderLayer(this,g[M.source],M,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const T=this.style._layers[f[this.currentLayer]],M=g[T.source],L=x[T.source];this._renderTileClippingMasks(T,L),this.renderLayer(this,M,T,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const T=this.style._layers[f[this.currentLayer]],M=g[T.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(T))continue;const L=(T.type==="symbol"?P:E)[T.source];this._renderTileClippingMasks(T,x[T.source]),this.renderLayer(this,M,T,L)}if(this.options.showTileBoundaries){const T=function(M,L){let R=null;const j=Object.values(M._layers).flatMap(oe=>oe.source&&!oe.isHidden(L)?[M.sourceCaches[oe.source]]:[]),te=j.filter(oe=>oe.getSource().type==="vector"),Y=j.filter(oe=>oe.getSource().type!=="vector"),ee=oe=>{(!R||R.getSource().maxzoom<oe.getSource().maxzoom)&&(R=oe)};return te.forEach(oe=>ee(oe)),R||Y.forEach(oe=>ee(oe)),R}(this.style,this.transform.zoom);T&&Gh.debug(this,T,T.getVisibleCoordinates())}this.options.showPadding&&function(T){const M=T.transform.padding;Na(T,T.transform.height-(M.top||0),3,Va),Na(T,M.bottom||0,3,qi),Sl(T,M.left||0,3,_p),Sl(T,T.transform.width-(M.right||0),3,Uh);const L=T.transform.centerPoint;(function(R,j,te,Y){ks(R,j-1,te-10,2,20,Y),ks(R,j-10,te-1,20,2,Y)})(T,L.x,T.transform.height-L.y,vp)}(this),this.context.setDefault()}renderLayer(i,c,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(g||[]).length)&&(this.id=f.id,Gh[f.type](i,c,f,g,this.style.placement.variableOffsets))}translatePosMatrix(i,c,f,g,x){if(!f[0]&&!f[1])return i;const E=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(E){const M=Math.sin(E),L=Math.cos(E);f=[f[0]*L-f[1]*M,f[0]*M+f[1]*L]}const P=[x?f[0]:Ie(c,f[0],this.transform.zoom),x?f[1]:Ie(c,f[1],this.transform.zoom),0],T=new Float32Array(16);return u.translate(T,i,P),T}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!c||!f}useProgram(i,c){this.cache=this.cache||{};const f=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new w0(this.context,i,Wi[i],c,xu[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Iu{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,f){const g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const T=1/(P=u.transformMat4([],P,i))[3]/c*g;return u.mul$1(P,P,[T,T,1/P[3],T])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const T=function(j,te){var Y=te[0],ee=te[1],oe=te[2],he=Y*Y+ee*ee+oe*oe;return he>0&&(he=1/Math.sqrt(he)),j[0]=te[0]*he,j[1]=te[1]*he,j[2]=te[2]*he,j}([],function(j,te,Y){var ee=te[0],oe=te[1],he=te[2],be=Y[0],re=Y[1],we=Y[2];return j[0]=oe*we-he*re,j[1]=he*be-ee*we,j[2]=ee*re-oe*be,j}([],ye([],x[P[0]],x[P[1]]),ye([],x[P[2]],x[P[1]]))),M=-((L=T)[0]*(R=x[P[1]])[0]+L[1]*R[1]+L[2]*R[2]);var L,R;return T.concat(M)});return new Iu(x,E)}}class Ao{constructor(i,c){this.min=i,this.max=c,this.center=function(f,g,x){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,x){return f[0]=g[0]+x[0],f[1]=g[1]+x[1],f[2]=g[2]+x[2],f}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],f=ue(this.min),g=ue(this.max);for(let x=0;x<c.length;x++)f[x]=c[x]?this.min[x]:this.center[x],g[x]=c[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Ao(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let E=0;for(let P=0;P<c.length;P++)u.dot(x,c[P])>=0&&E++;if(E===0)return 0;E!==c.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let P=0;P<i.points.length;P++){const T=i.points[P][g]-this.min[g];x=Math.min(x,T),E=Math.max(E,T)}if(E<0||x>this.max[g]-this.min[g])return 0}return 1}}class Mu{constructor(i=0,c=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=g}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=u.interpolate.number(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.interpolate.number(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=u.interpolate.number(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=u.interpolate.number(i.right,c.right,f)),this}getCenter(i,c){const f=u.clamp((this.left+i-this.right)/2,0,i),g=u.clamp((this.top+c-this.bottom)/2,0,c);return new u.Point(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Mu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Au{constructor(i,c,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=g==null?60:g,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Mu,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Au(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,x){var E=g[0],P=g[1],T=g[2],M=g[3],L=Math.sin(x),R=Math.cos(x);f[0]=E*R+T*L,f[1]=P*R+M*L,f[2]=E*-L+T*R,f[3]=P*-L+M*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.Point(0,0)),g=this.pointCoordinate(new u.Point(this.width,0)),x=this.pointCoordinate(new u.Point(this.width,this.height)),E=this.pointCoordinate(new u.Point(0,this.height)),P=Math.floor(Math.min(f.x,g.x,x.x,E.x)),T=Math.floor(Math.max(f.x,g.x,x.x,E.x)),M=1;for(let L=P-M;L<=T+M;L++)L!==0&&c.push(new u.UnwrappedTileID(L,i))}return c}coveringTiles(i){var c,f;let g=this.coveringZoomLevel(i);const x=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),P=u.MercatorCoordinate.fromLngLat(this.center),T=Math.pow(2,g),M=[T*E.x,T*E.y,0],L=[T*P.x,T*P.y,0],R=Iu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let j=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=g);const te=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Y=re=>({aabb:new Ao([re*T,0,0],[(re+1)*T,T,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),ee=[],oe=[],he=g,be=i.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let re=1;re<=3;re++)ee.push(Y(-re)),ee.push(Y(re));for(ee.push(Y(0));ee.length>0;){const re=ee.pop(),we=re.x,Te=re.y;let De=re.fullyVisible;if(!De){const vt=re.aabb.intersects(R);if(vt===0)continue;De=vt===2}const $e=i.terrain?M:L,Ue=re.aabb.distanceX($e),Fe=re.aabb.distanceY($e),tt=Math.max(Math.abs(Ue),Math.abs(Fe));if(re.zoom===he||tt>te+(1<<he-re.zoom)-2&&re.zoom>=j){const vt=he-re.zoom,Dt=M[0]-.5-(we<<vt),He=M[1]-.5-(Te<<vt);oe.push({tileID:new u.OverscaledTileID(re.zoom===he?be:re.zoom,re.wrap,re.zoom,we,Te),distanceSq:Ee([L[0]-.5-we,L[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(Dt*Dt+He*He)})}else for(let vt=0;vt<4;vt++){const Dt=(we<<1)+vt%2,He=(Te<<1)+(vt>>1),kt=re.zoom+1;let nt=re.aabb.quadrant(vt);if(i.terrain){const tn=new u.OverscaledTileID(kt,re.wrap,kt,Dt,He),tr=i.terrain.getMinMaxElevation(tn),nn=(c=tr.minElevation)!==null&&c!==void 0?c:this.elevation,Lt=(f=tr.maxElevation)!==null&&f!==void 0?f:this.elevation;nt=new Ao([nt.min[0],nt.min[1],nn],[nt.max[0],nt.max[1],Lt])}ee.push({aabb:nt,zoom:kt,x:Dt,y:He,wrap:re.wrap,fullyVisible:De})}}return oe.sort((re,we)=>re.distanceSq-we.distanceSq).map(re=>re.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,c){const f=u.MercatorCoordinate.fromLngLat(i.wrap()),g=(1<<this.tileZoom)*u.EXTENT,x=f.x*g,E=f.y*g,P=Math.floor(x/u.EXTENT),T=Math.floor(E/u.EXTENT),M=new u.OverscaledTileID(this.tileZoom,0,this.tileZoom,P,T);return c.getElevation(M,x%u.EXTENT,E%u.EXTENT,u.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),f=this.getElevation(c,i);if(!(this.elevation-f))return;const g=this.getCameraPosition(),x=u.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),E=u.MercatorCoordinate.fromLngLat(c,f),P=x.x-E.x,T=x.y-E.y,M=x.z-E.z,L=Math.sqrt(P*P+T*T+M*M),R=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=f,this._center=c,this.zoom=R}setLocationAtPoint(i,c){const f=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),E=new u.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,c),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const j=c.pointCoordinate(i);if(j!=null)return j}const f=[i.x,i.y,0,1],g=[i.x,i.y,1,1];u.transformMat4(f,f,this.pixelMatrixInverse),u.transformMat4(g,g,this.pixelMatrixInverse);const x=f[3],E=g[3],P=f[1]/x,T=g[1]/E,M=f[2]/x,L=g[2]/E,R=M===L?0:(0-M)/(L-M);return new u.MercatorCoordinate(u.interpolate.number(f[0]/x,g[0]/E,R)/this.worldSize,u.interpolate.number(P,T,R)/this.worldSize)}coordinatePoint(i,c=0,f=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.transformMat4(g,g,f),new u.Point(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Ot().extend(this.pointLocation(new u.Point(0,i))).extend(this.pointLocation(new u.Point(this.width,i))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ot([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const f=i.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const x=i.canonical,E=this.worldSize/this.zoomScale(x.z),P=x.x+Math.pow(2,x.z)*i.wrap,T=u.identity(new Float64Array(16));return u.translate(T,T,[P*E,x.y*E,0]),u.scale(T,T,[E/u.EXTENT,E/u.EXTENT,1]),u.multiply(T,c?this.alignedProjMatrix:this.projMatrix,T),g[f]=new Float32Array(T),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,f,g,x=-90,E=90,P=-180,T=180;const M=this.size,L=this._unmodified;if(this.latRange){const te=this.latRange;x=u.mercatorYfromLat(te[1])*this.worldSize,E=u.mercatorYfromLat(te[0])*this.worldSize,i=E-x<M.y?M.y/(E-x):0}if(this.lngRange){const te=this.lngRange;P=u.wrap(u.mercatorXfromLng(te[0])*this.worldSize,0,this.worldSize),T=u.wrap(u.mercatorXfromLng(te[1])*this.worldSize,0,this.worldSize),T<P&&(T+=this.worldSize),c=T-P<M.x?M.x/(T-P):0}const R=this.point,j=Math.max(c||0,i||0);if(j)return this.center=this.unproject(new u.Point(c?(T+P)/2:R.x,i?(E+x)/2:R.y)),this.zoom+=this.scaleZoom(j),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const te=R.y,Y=M.y/2;te-Y<x&&(g=x+Y),te+Y>E&&(g=E-Y)}if(this.lngRange){const te=(P+T)/2,Y=u.wrap(R.x,te-this.worldSize/2,te+this.worldSize/2),ee=M.x/2;Y-ee<P&&(f=P+ee),Y+ee>T&&(f=T-ee)}f===void 0&&g===void 0||(this.center=this.unproject(new u.Point(f!==void 0?f:R.x,g!==void 0?g:R.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=u.identity(new Float64Array(16));u.scale(g,g,[this.width/2,-this.height/2,1]),u.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.identity(new Float64Array(16)),u.scale(g,g,[1,-1,1]),u.translate(g,g,[-1,-1,0]),u.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,E=Math.PI/2+this._pitch,P=this._fov*(.5+i.y/this.height),T=Math.sin(P)*x/Math.sin(u.clamp(Math.PI-E-P,.01,Math.PI-.01)),M=this.getHorizon(),L=2*Math.atan(M/this.cameraToCenterDistance)*(.5+i.y/(2*M)),R=Math.sin(L)*x/Math.sin(u.clamp(Math.PI-E-L,.01,Math.PI-.01)),j=Math.min(T,R),te=1.01*(Math.cos(Math.PI/2-this._pitch)*j+x),Y=this.height/50;g=new Float64Array(16),u.perspective(g,this._fov,this.width/this.height,Y,te),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,u.scale(g,g,[1,-1,1]),u.translate(g,g,[0,0,-this.cameraToCenterDistance]),u.rotateX(g,g,this._pitch),u.rotateZ(g,g,this.angle),u.translate(g,g,[-c,-f,0]),this.mercatorMatrix=u.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),u.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,g),u.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.invert([],g),this.pixelMatrix3D=u.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const ee=this.width%2/2,oe=this.height%2/2,he=Math.cos(this.angle),be=Math.sin(this.angle),re=c-Math.round(c)+he*ee+be*oe,we=f-Math.round(f)+he*oe+be*ee,Te=new Float64Array(g);if(u.translate(Te,Te,[re>.5?re-1:re,we>.5?we-1:we,0]),this.alignedProjMatrix=Te,g=u.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.Point(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let f=c.x,g=c.y,x=c.x,E=c.y;for(const P of i)f=Math.min(f,P.x),g=Math.min(g,P.y),x=Math.max(x,P.x),E=Math.max(E,P.y);return[new u.Point(f,g),new u.Point(x,g),new u.Point(x,E),new u.Point(f,E),new u.Point(f,g)]}}}class bp{constructor(i){this._hashName=i&&encodeURIComponent(i),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,f){let g=!1,x=null;const E=()=>{x=null,g&&(c(),x=setTimeout(E,300),g=!1)};return()=>(g=!0,x||E(),x)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),E=Math.round(c.lng*x)/x,P=Math.round(c.lat*x)/x,T=this._map.getBearing(),M=this._map.getPitch();let L="";if(L+=i?`/${E}/${P}/${f}`:`${f}/${P}/${E}`,(T||M)&&(L+="/"+Math.round(10*T)/10),M&&(L+=`/${Math.round(M)}`),this._hashName){const R=this._hashName;let j=!1;const te=window.location.hash.slice(1).split("&").map(Y=>{const ee=Y.split("=")[0];return ee===R?(j=!0,`${ee}=${L}`):Y}).filter(Y=>Y);return j||te.push(`${R}=${L}`),`#${te.join("&")}`}return`#${L}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(c=f)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const El={linearity:.3,easing:u.bezier(0,0,.3,1)},Sp=u.extend({deceleration:2500,maxSpeed:1400},El),Ep=u.extend({deceleration:20,maxSpeed:1400},El),kl=u.extend({deceleration:1e3,maxSpeed:360},El),kp=u.extend({deceleration:1e3,maxSpeed:90},El);class zo{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=u.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const x=Tl(c.pan.mag(),f,u.extend({},Sp,i||{}));g.offset=c.pan.mult(x.amount/c.pan.mag()),g.center=this._map.transform.center,Zi(g,x)}if(c.zoom){const x=Tl(c.zoom,f,Ep);g.zoom=this._map.transform.zoom+x.amount,Zi(g,x)}if(c.bearing){const x=Tl(c.bearing,f,kl);g.bearing=this._map.transform.bearing+u.clamp(x.amount,-179,179),Zi(g,x)}if(c.pitch){const x=Tl(c.pitch,f,kp);g.pitch=this._map.transform.pitch+x.amount,Zi(g,x)}if(g.zoom||g.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),u.extend(g,{noMoveStart:!0})}}function Zi(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function Tl(p,i,c){const{maxSpeed:f,linearity:g,deceleration:x}=c,E=u.clamp(p*g/(i/1e3),-f,f),P=Math.abs(E)/(x*g);return{easing:c.easing,duration:1e3*P,amount:E*(P/2)}}class ur extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,g={}){const x=w.mousePos(c.getCanvasContainer(),f),E=c.unproject(x);super(i,u.extend({point:x,lngLat:E,originalEvent:f},g)),this._defaultPrevented=!1,this.target=c}}class xa extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){const g=i==="touchend"?f.changedTouches:f.touches,x=w.touchPos(c.getCanvasContainer(),g),E=x.map(T=>c.unproject(T)),P=x.reduce((T,M,L,R)=>T.add(M.div(R.length)),new u.Point(0,0));super(i,{points:x,point:P,lngLats:E,lngLat:c.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class R0 extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class L0{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new R0(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new ur(i.type,this._map,i))}mouseup(i){this._map.fire(new ur(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ur(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ur(i.type,this._map,i))}mouseover(i){this._map.fire(new ur(i.type,this._map,i))}mouseout(i){this._map.fire(new ur(i.type,this._map,i))}touchstart(i){return this._firePreventable(new xa(i.type,this._map,i))}touchmove(i){this._map.fire(new xa(i.type,this._map,i))}touchend(i){this._map.fire(new xa(i.type,this._map,i))}touchcancel(i){this._map.fire(new xa(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class F0{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ur(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ur(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ts{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.Point.convert(i),this._map.terrain)}}class Cl{constructor(i,c){this._map=i,this._tr=new Ts(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(g.x,f.x),E=Math.max(g.x,f.x),P=Math.min(g.y,f.y),T=Math.max(g.y,f.y);w.setTransform(this._box,`translate(${x}px,${P}px)`),this._box.style.width=E-x+"px",this._box.style.height=T-P+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const f=this._startPos,g=c;if(this.reset(),w.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.Event(i,{originalEvent:c}))}}function Do(p,i){if(p.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${i.length}`);const c={};for(let f=0;f<p.length;f++)c[p[f].identifier]=i[f];return c}class it{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const x=new u.Point(0,0);for(const E of g)x._add(E);return x.div(g.length)}(c),this.touches=Do(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;const g=Do(f,c);for(const x in this.touches){const E=g[x];(!E||E.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class zu{constructor(i){this.singleTap=new it(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){const g=this.singleTap.touchend(i,c,f);if(g){const x=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(g)<30;if(x&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Pl{constructor(i){this._tr=new Ts(i),this._zoomIn=new zu({numTouches:1,numTaps:2}),this._zoomOut=new zu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){const g=this._zoomIn.touchend(i,c,f),x=this._zoomOut.touchend(i,c,f),E=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(g)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yo{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=c.length?c[0]:c;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Tp={0:1,2:2};class Ye{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=w.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,f){const g=Tp[f];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Du{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Wh=p=>{p.mousedown=p.dragStart,p.mousemoveWindow=p.dragMove,p.mouseup=p.dragEnd,p.contextmenu=function(i){i.preventDefault()}},Cp=({enable:p,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const f=new Ye({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Yo({clickTolerance:i,move:(g,x)=>({bearingDelta:(x.x-g.x)*c}),moveStateManager:f,enable:p,assignEvents:Wh})},Ru=({enable:p,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const f=new Ye({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Yo({clickTolerance:i,move:(g,x)=>({pitchDelta:(x.y-g.y)*c}),moveStateManager:f,enable:p,assignEvents:Wh})};class Pp{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,f)}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);const g=Do(f,c),x=new u.Point(0,0),E=new u.Point(0,0);let P=0;for(const M in g){const L=g[M],R=this._touches[M];R&&(x._add(L),E._add(L.sub(R)),P++,g[M]=L)}if(this._touches=g,P<this._minTouches||!E.mag())return;const T=E.div(P);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(P),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,f){return{}}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,x]=this._firstTwoTouches,E=Fu(f,c,g),P=Fu(f,c,x);if(!E||!P)return;const T=this._aroundCenter?null:E.add(P).div(2);return this._move([E,P],T,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,E=Fu(f,c,g),P=Fu(f,c,x);E&&P||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fu(p,i,c){for(let f=0;f<p.length;f++)if(p[f].identifier===c)return i[f]}function Ip(p,i){return Math.log(p/i)/Math.LN2}class qh extends Lu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ip(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ip(this._distance,f),pinchAround:c}}}function Ou(p,i){return 180*p.angleWith(i)/Math.PI}class Zh extends Lu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ou(this._vector,f),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,f=Ou(i,this._startVector);return Math.abs(f)<c}}function Il(p){return Math.abs(p.y)>Math.abs(p.x)}class hi extends Lu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,f){super.touchstart(i,c,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Il(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,x=c.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return Il(i)&&Il(c)&&E}}const wa={panStep:100,bearingStep:15,pitchStep:10};class Mp{constructor(i){this._tr=new Ts(i);const c=wa;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,g=0,x=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:P=>{const T=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Hh,zoom:c?Math.round(T.zoom)+c*(i.shiftKey?2:1):T.zoom,bearing:T.bearing+f*this._bearingStep,pitch:T.pitch+g*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:T.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hh(p){return p*(2-p)}const $u=4.000244140625;class Xh{constructor(i,c){this._map=i,this._tr=new Ts(i),this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,u.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=u.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%$u==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=w.mousePos(this._el,i),f=this._tr;this._around=u.LngLat.convert(this._aroundCenter?f.center:f.unproject(c)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>$u?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&T!==0&&(T=1/T);const M=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(M*T))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let x,E=!1;if(this._type==="wheel"&&f&&g){const P=Math.min((u.exported.now()-this._lastWheelEventTime)/200,1),T=g(P);x=u.interpolate.number(f,c,T),P<1?this._frameId||(this._frameId=!0):E=!0}else x=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.ease;if(this._prevEase){const f=this._prevEase,g=(u.exported.now()-f.start)/f.duration,x=f.easing(g+.01)-f.easing(g),E=.27/Math.sqrt(x*x+1e-4)*.01,P=Math.sqrt(.0729-E*E);c=u.bezier(E,P,.25,1)}return this._prevEase={start:u.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Ap{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hi{constructor(i){this._tr=new Ts(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class In{constructor(){this._tap=new zu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=c[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,c,f))}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=c[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,c,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bu{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Kh{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zp{constructor(i,c,f,g){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ml=p=>p.zoom||p.drag||p.pitch||p.rotate;class Dp extends u.Event{}function Yh(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Ro{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zo(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),u.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,E]of this._listeners)w.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,f]of this._listeners)w.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new L0(c,i));const g=c.boxZoom=new Cl(c,i);this._add("boxZoom",g);const x=new Pl(c),E=new Hi(c);c.doubleClickZoom=new Ap(E,x),this._add("tapZoom",x),this._add("clickZoom",E);const P=new In;this._add("tapDragZoom",P);const T=c.touchPitch=new hi(c);this._add("touchPitch",T);const M=Cp(i),L=Ru(i);c.dragRotate=new Kh(i,M,L),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const R=(({enable:he,clickTolerance:be})=>{const re=new Ye({checkCorrectEvent:we=>w.mouseButton(we)===0&&!we.ctrlKey});return new Yo({clickTolerance:be,move:(we,Te)=>({around:Te,panDelta:Te.sub(we)}),activateOnStart:!0,moveStateManager:re,enable:he,assignEvents:Wh})})(i),j=new Pp(i,c);c.dragPan=new Bu(f,R,j),this._add("mousePan",R),this._add("touchPan",j,["touchZoom","touchRotate"]);const te=new Zh,Y=new qh;c.touchZoomRotate=new zp(f,Y,te,P),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);const ee=c.scrollZoom=new Xh(c,this);this._add("scrollZoom",ee,["mousePan"]);const oe=c.keyboard=new Mp(c);this._add("keyboard",oe),this._add("blockableMapEvent",new F0(c));for(const he of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[he]&&c[he].enable(i[he])}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ml(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,f){for(const g in i)if(g!==f&&(!c||c.indexOf(g)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const f of i)this._el.contains(f.target)&&c.push(f);return c}handleEvent(i,c){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=i.type==="renderFrame"?void 0:i,g={needsRenderFrame:!1},x={},E={},P=i.touches,T=P?this._getMapTouches(P):void 0,M=T?w.touchPos(this._el,T):w.mousePos(this._el,i);for(const{handlerName:j,handler:te,allowed:Y}of this._handlers){if(!te.isEnabled())continue;let ee;this._blockedByActive(E,Y,j)?te.reset():te[c||i.type]&&(ee=te[c||i.type](i,M,T),this.mergeHandlerResult(g,x,ee,j,f),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||te.isActive())&&(E[j]=te)}const L={};for(const j in this._previousActiveHandlers)E[j]||(L[j]=f);this._previousActiveHandlers=E,(Object.keys(L).length||Yh(g))&&(this._changes.push([g,x,L]),this._triggerRenderFrame()),(Object.keys(E).length||Yh(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:R}=g;R&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],R(this._map))}mergeHandlerResult(i,c,f,g,x){if(!f)return;u.extend(i,f);const E={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(c.zoom=E),f.panDelta!==void 0&&(c.drag=E),f.pitchDelta!==void 0&&(c.pitch=E),f.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},f={};for(const[g,x,E]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new u.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),u.extend(c,x),u.extend(f,E);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){const g=this._map,x=g._getTransformForUpdate(),E=g.terrain;if(!(Yh(i)||E&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:P,zoomDelta:T,bearingDelta:M,pitchDelta:L,around:R,pinchAround:j}=i;j!==void 0&&(R=j),g._stop(!0),R=R||g.transform.centerPoint;const te=x.pointLocation(P?R.sub(P):R);M&&(x.bearing+=M),L&&(x.pitch+=L),T&&(x.zoom+=T),E?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(P)):x.setLocationAtPoint(te,R):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(te,R),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(te,R),g._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){const g=Ml(this._eventsInProgress),x=Ml(i),E={};for(const L in i){const{originalEvent:R}=i[L];this._eventsInProgress[L]||(E[`${L}start`]=R),this._eventsInProgress[L]=i[L]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const L in E)this._fireEvent(L,E[L]);x&&this._fireEvent("move",x.originalEvent);for(const L in i){const{originalEvent:R}=i[L];this._fireEvent(L,R)}const P={};let T;for(const L in this._eventsInProgress){const{handlerName:R,originalEvent:j}=this._eventsInProgress[L];this._handlersById[R].isActive()||(delete this._eventsInProgress[L],T=c[R]||j,P[`${L}end`]=T)}for(const L in P)this._fireEvent(L,P[L]);const M=Ml(this._eventsInProgress);if(f&&(g||x)&&!M){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=j=>j!==0&&-this._bearingSnap<j&&j<this._bearingSnap;L?(R(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:T})):(this._map.fire(new u.Event("moveend",{originalEvent:T})),R(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Dp("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vu={extend:(p,...i)=>u.extend(p,...i),run(p){p()},logToElement(p,i=!1,c="log"){const f=window.document.getElementById(c);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${p}`)}};class ht extends u.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,u.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=u.Point.convert(i).mult(-1),this.panTo(this.transform.center,u.extend({offset:i},c),f)}panTo(i,c,f){return this.easeTo(u.extend({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(u.extend({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(u.extend({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,u.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Ot.convert(i);const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,c)}_cameraForBoxAndBearing(i,c,f,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=u.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Te=g.padding;g.padding={top:Te,bottom:Te,right:Te,left:Te}}g.padding=u.extend(x,g.padding);const E=this.transform,P=E.padding,T=E.project(u.LngLat.convert(i)),M=E.project(u.LngLat.convert(c)),L=T.rotate(-f*Math.PI/180),R=M.rotate(-f*Math.PI/180),j=new u.Point(Math.max(L.x,R.x),Math.max(L.y,R.y)),te=new u.Point(Math.min(L.x,R.x),Math.min(L.y,R.y)),Y=j.sub(te),ee=(E.width-(P.left+P.right+g.padding.left+g.padding.right))/Y.x,oe=(E.height-(P.top+P.bottom+g.padding.top+g.padding.bottom))/Y.y;if(oe<0||ee<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const he=Math.min(E.scaleZoom(E.scale*Math.min(ee,oe)),g.maxZoom),be=u.Point.convert(g.offset),re=new u.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),we=be.add(re).mult(E.scale/E.zoomScale(he));return{center:E.unproject(T.add(M).div(2).sub(we)),zoom:he,bearing:f}}fitBounds(i,c,f){return this._fitInternal(this.cameraForBounds(i,c),c,f)}fitScreenCoordinates(i,c,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(i)),this.transform.pointLocation(u.Point.convert(c)),f,g),g,x)}_fitInternal(i,c,f){return i?(delete(c=u.extend(i,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(i,c){this.stop();const f=this._getTransformForUpdate();let g=!1,x=!1,E=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=u.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(x=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(E=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new u.Event("movestart",c)).fire(new u.Event("move",c)),g&&this.fire(new u.Event("zoomstart",c)).fire(new u.Event("zoom",c)).fire(new u.Event("zoomend",c)),x&&this.fire(new u.Event("rotatestart",c)).fire(new u.Event("rotate",c)).fire(new u.Event("rotateend",c)),E&&this.fire(new u.Event("pitchstart",c)).fire(new u.Event("pitch",c)).fire(new u.Event("pitchend",c)),this.fire(new u.Event("moveend",c))}calculateCameraOptionsFromTo(i,c,f,g=0){const x=u.MercatorCoordinate.fromLngLat(i,c),E=u.MercatorCoordinate.fromLngLat(f,g),P=E.x-x.x,T=E.y-x.y,M=E.z-x.z,L=Math.hypot(P,T,M);if(L===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(P,T),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),te=180*Math.atan2(P,-T)/Math.PI;let Y=180*Math.acos(R/L)/Math.PI;return Y=M<0?90-Y:90+Y,{center:E.toLngLat(),zoom:j,pitch:Y,bearing:te}}easeTo(i,c){this._stop(!1,i.easeId),((i=u.extend({offset:[0,0],duration:500,easing:u.ease},i)).animate===!1||!i.essential&&u.exported.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),E=this.getPitch(),P=this.getPadding(),T="zoom"in i?+i.zoom:g,M="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,R="padding"in i?i.padding:f.padding,j=u.Point.convert(i.offset);let te=f.centerPoint.add(j);const Y=f.pointLocation(te),ee=u.LngLat.convert(i.center||Y);this._normalizeCenter(ee);const oe=f.project(Y),he=f.project(ee).sub(oe),be=f.zoomScale(T-g);let re,we;i.around&&(re=u.LngLat.convert(i.around),we=f.locationPoint(re));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||T!==g,this._rotating=this._rotating||x!==M,this._pitching=this._pitching||L!==E,this._padding=!f.isPaddingEqual(R),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Te),this.terrain&&this._prepareElevation(ee),this._ease(De=>{if(this._zooming&&(f.zoom=u.interpolate.number(g,T,De)),this._rotating&&(f.bearing=u.interpolate.number(x,M,De)),this._pitching&&(f.pitch=u.interpolate.number(E,L,De)),this._padding&&(f.interpolatePadding(P,R,De),te=f.centerPoint.add(j)),this.terrain&&!i.freezeElevation&&this._updateElevation(De),re)f.setLocationAtPoint(re,we);else{const $e=f.zoomScale(f.zoom-g),Ue=T>g?Math.min(2,be):Math.max(.5,be),Fe=Math.pow(Ue,1-De),tt=f.unproject(oe.add(he.mult(De*Fe)).mult($e));f.setLocationAtPoint(f.renderWorldCopies?tt.wrap():tt,te)}this._applyUpdatedTransform(f),this._fireMoveEvents(c)},De=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,De)},i),this}_prepareEase(i,c,f={}){this._moving=!0,c||f.moving||this.fire(new u.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new u.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new u.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new u.Event("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(i,this.terrain),this.transform.freezeElevation=!0}_updateElevation(i){const c=this.transform.getElevation(this._elevationCenter,this.terrain);if(i<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(c-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.interpolate.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:f,zoom:g,pitch:x,bearing:E,elevation:P}=this.transformCameraUpdate(c);f&&(c.center=f),g!==void 0&&(c.zoom=g),x!==void 0&&(c.pitch=x),E!==void 0&&(c.bearing=E),P!==void 0&&(c.elevation=P),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.Event("move",i)),this._zooming&&this.fire(new u.Event("zoom",i)),this._rotating&&this.fire(new u.Event("rotate",i)),this._pitching&&this.fire(new u.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.Event("zoomend",i)),g&&this.fire(new u.Event("rotateend",i)),x&&this.fire(new u.Event("pitchend",i)),this.fire(new u.Event("moveend",i))}flyTo(i,c){if(!i.essential&&u.exported.prefersReducedMotion){const nt=u.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(nt,c)}this.stop(),i=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},i);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),E=this.getPitch(),P=this.getPadding(),T="zoom"in i?u.clamp(+i.zoom,f.minZoom,f.maxZoom):g,M="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,R="padding"in i?i.padding:f.padding,j=f.zoomScale(T-g),te=u.Point.convert(i.offset);let Y=f.centerPoint.add(te);const ee=f.pointLocation(Y),oe=u.LngLat.convert(i.center||ee);this._normalizeCenter(oe);const he=f.project(ee),be=f.project(oe).sub(he);let re=i.curve;const we=Math.max(f.width,f.height),Te=we/j,De=be.mag();if("minZoom"in i){const nt=u.clamp(Math.min(i.minZoom,g,T),f.minZoom,f.maxZoom),tn=we/f.zoomScale(nt-g);re=Math.sqrt(tn/De*2)}const $e=re*re;function Ue(nt){const tn=(Te*Te-we*we+(nt?-1:1)*$e*$e*De*De)/(2*(nt?Te:we)*$e*De);return Math.log(Math.sqrt(tn*tn+1)-tn)}function Fe(nt){return(Math.exp(nt)-Math.exp(-nt))/2}function tt(nt){return(Math.exp(nt)+Math.exp(-nt))/2}const vt=Ue(0);let Dt=function(nt){return tt(vt)/tt(vt+re*nt)},He=function(nt){return we*((tt(vt)*(Fe(tn=vt+re*nt)/tt(tn))-Fe(vt))/$e)/De;var tn},kt=(Ue(1)-vt)/re;if(Math.abs(De)<1e-6||!isFinite(kt)){if(Math.abs(we-Te)<1e-6)return this.easeTo(i,c);const nt=Te<we?-1:1;kt=Math.abs(Math.log(Te/we))/re,He=function(){return 0},Dt=function(tn){return Math.exp(nt*re*tn)}}return i.duration="duration"in i?+i.duration:1e3*kt/("screenSpeed"in i?+i.screenSpeed/re:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==M,this._pitching=L!==E,this._padding=!f.isPaddingEqual(R),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(oe),this._ease(nt=>{const tn=nt*kt,tr=1/Dt(tn);f.zoom=nt===1?T:g+f.scaleZoom(tr),this._rotating&&(f.bearing=u.interpolate.number(x,M,nt)),this._pitching&&(f.pitch=u.interpolate.number(E,L,nt)),this._padding&&(f.interpolatePadding(P,R,nt),Y=f.centerPoint.add(te)),this.terrain&&!i.freezeElevation&&this._updateElevation(nt);const nn=nt===1?oe:f.unproject(he.add(be.mult(He(tn))).mult(tr));f.setLocationAtPoint(f.renderWorldCopies?nn.wrap():nn,Y),this._applyUpdatedTransform(f),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,c)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=u.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((u.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=u.wrap(i,-180,180);const f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.transform.getElevation(u.LngLat.convert(i),this.terrain)-this.transform.elevation:null}}class Et{constructor(i={}){this.options=i,u.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const f=this._map._getUIString(`AttributionControl.${c}`);i.title=f,i.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const x=c[g];if(x.used||x.usedForTerrain){const E=x.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,x)=>g.length-x.length),i=i.filter((g,x)=>{for(let E=x+1;E<i.length;E++)if(i[E].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class Al{constructor(i={}){this.options=i,u.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const c=w.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}}}class Jh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Qh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var di=u.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Nu extends u.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const f={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.ortho(g.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),this._tiles[g.key]=new ai(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(i){for(const c in this._tiles){const f=this._tiles[c];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16),u.ortho(x.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),c[f]=x}else if(g.canonical.isChildOf(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=g.canonical.z-i.canonical.z,P=g.canonical.x-(g.canonical.x>>E<<E),T=g.canonical.y-(g.canonical.y>>E<<E),M=u.EXTENT>>E;u.ortho(x.posMatrix,0,M,0,M,0,1),u.translate(x.posMatrix,x.posMatrix,[-P*M,-T*M,0]),c[f]=x}else if(i.canonical.isChildOf(g.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=i.canonical.z-g.canonical.z,P=i.canonical.x-(i.canonical.x>>E<<E),T=i.canonical.y-(i.canonical.y>>E<<E),M=u.EXTENT>>E;u.ortho(x.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),u.translate(x.posMatrix,x.posMatrix,[P*M,T*M,0]),u.scale(x.posMatrix,x.posMatrix,[1/2**E,1/2**E,0]),c[f]=x}}return c}getSourceTile(i,c){const f=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&c)for(;g>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(g--).key);return x}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class Lo{constructor(i,c,f){this.painter=i,this.sourceCache=new Nu(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,f,g=u.EXTENT){if(!(c>=0&&c<g&&f>=0&&f<g))return 0;let x=0;const E=this.getTerrainData(i);if(E.tile&&E.tile.dem){const P=function(Y,ee,oe){var he=ee[0],be=ee[1];return Y[0]=oe[0]*he+oe[4]*be+oe[12],Y[1]=oe[1]*he+oe[5]*be+oe[13],Y}([],[c/g*u.EXTENT,f/g*u.EXTENT],E.u_terrain_matrix),T=[P[0]*E.tile.dem.dim,P[1]*E.tile.dem.dim],M=[Math.floor(T[0]),Math.floor(T[1])],L=E.tile.dem.get(M[0],M[1]),R=E.tile.dem.get(M[0],M[1]+1),j=E.tile.dem.get(M[0]+1,M[1]),te=E.tile.dem.get(M[0]+1,M[1]+1);x=u.interpolate.number(u.interpolate.number(L,R,T[0]-M[0]),u.interpolate.number(j,te,T[0]-M[0]),T[1]-M[1])}return x}getElevation(i,c,f,g=u.EXTENT){return this.getDEMElevation(i,c,f,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,x=new u.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(g,new u.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.identity([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Ve(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?x=i.canonical.z-g:u.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=i.canonical.x-(i.canonical.x>>x<<x),P=i.canonical.y-(i.canonical.y>>x<<x),T=u.fromScaling(new Float64Array(16),[1/(u.EXTENT<<x),1/(u.EXTENT<<x),0]);u.translate(T,T,[E*u.EXTENT,P*u.EXTENT,0]),this._demMatrixCache[i.key]={matrix:T,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,f=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(c.context,{width:f,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(c.context,{width:f,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,E=0;x<this._coordsTextureSize;x++)for(let P=0;P<this._coordsTextureSize;P++,E+=4)c[E+0]=255&P,c[E+1]=255&x,c[E+2]=P>>8<<4|x>>8,c[E+3]=0;const f=new u.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new Ve(i,f,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const c=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const x=c[0]+(c[2]>>4<<8),E=c[1]+((15&c[2])<<8),P=this.coordsIndex[255-c[3]],T=P&&this.sourceCache.getTileByID(P);if(!T)return null;const M=this._coordsTextureSize,L=(1<<T.tileID.canonical.z)*M;return new u.MercatorCoordinate((T.tileID.canonical.x*M+x)/L,(T.tileID.canonical.y*M+E)/L,this.getElevation(T.tileID,x,E,M))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.Pos3dArray,f=new u.TriangleIndexArray,g=this.meshSize,x=u.EXTENT/g,E=g*g;for(let R=0;R<=g;R++)for(let j=0;j<=g;j++)c.emplaceBack(j*x,R*x,0);for(let R=0;R<E;R+=g+1)for(let j=0;j<g;j++)f.emplaceBack(j+R,g+j+R+1,g+j+R+2),f.emplaceBack(j+R,g+j+R+2,j+R+1);const P=c.length,T=P+2*(g+1);for(const R of[0,1])for(let j=0;j<=g;j++)for(const te of[0,1])c.emplaceBack(j*x,R*u.EXTENT,te);for(let R=0;R<2*g;R+=2)f.emplaceBack(T+R,T+R+1,T+R+3),f.emplaceBack(T+R,T+R+3,T+R+2),f.emplaceBack(P+R,P+R+3,P+R+1),f.emplaceBack(P+R,P+R+2,P+R+3);const M=c.length,L=M+2*(g+1);for(const R of[0,1])for(let j=0;j<=g;j++)for(const te of[0,1])c.emplaceBack(R*u.EXTENT,j*x,te);for(let R=0;R<2*g;R+=2)f.emplaceBack(M+R,M+R+1,M+R+3),f.emplaceBack(M+R,M+R+3,M+R+2),f.emplaceBack(L+R,L+R+3,L+R+1),f.emplaceBack(L+R,L+R+2,L+R+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(c,di.members),segments:u.SegmentVector.simpleSegment(0,0,c.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.earthRadius/Math.pow(2,i)/5}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}}class O0{constructor(i,c,f){this._context=i,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:i,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Jo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class qn{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new O0(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(c)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const g=i.sourceCaches[f].getVisibleCoordinates();for(const x of g){const E=this.terrain.sourceCache.getTerrainCoords(x);for(const P in E)this._coordsDescendingInv[f][P]||(this._coordsDescendingInv[f][P]=[]),this._coordsDescendingInv[f][P].push(E[P])}}this._coordsDescendingInvStr={};for(const f of i._order){const g=i._layers[f],x=g.source;if(Jo[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const E in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][E]=this._coordsDescendingInv[x][E].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][f.tileID.key];x&&x!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Jo[c]&&(this._prevType&&Jo[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Jo[this._prevType]||Jo[c]&&g){this._prevType=c;const x=this._stacks.length-1,E=this._stacks[x]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(jh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[x]){const M=this.pool.getObjectForId(P.rtt[x].id);if(M.stamp===P.rtt[x].stamp){this.pool.useObject(M);continue}}const T=this.pool.getOrCreateFreeObject();this.pool.useObject(T),this.pool.stampObject(T),P.rtt[x]={id:T.id,stamp:T.stamp},f.context.bindFramebuffer.set(T.fbo.framebuffer),f.context.clear({color:u.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let M=0;M<E.length;M++){const L=f.style._layers[E[M]],R=L.source?this._coordsDescendingInv[L.source][P.tileID.key]:[P.tileID];f.context.viewport.set([0,0,T.fbo.width,T.fbo.height]),f._renderTileClippingMasks(L,R),f.renderLayer(f,f.style.sourceCaches[L.source],L,R),L.source&&(P.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][P.tileID.key])}}return jh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Jo[c]}return!1}}const cr=S,Rp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},Cs=p=>{p.touchstart=p.dragStart,p.touchmoveWindow=p.dragMove,p.touchend=p.dragEnd},Uu={showCompass:!0,showZoom:!0,visualizePitch:!1};class ed{constructor(i,c,f=!1){this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),x=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Cp({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:P,bearingDegreesPerPixelMoved:T=.8})=>{const M=new Du;return new Yo({clickTolerance:P,move:(L,R)=>({bearingDelta:(R.x-L.x)*T}),moveStateManager:M,enable:E,assignEvents:Cs})})({clickTolerance:g,enable:!0}),this.map=i,f&&(this.mousePitch=Ru({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:P,pitchDegreesPerPixelMoved:T=-.5})=>{const M=new Du;return new Yo({clickTolerance:P,move:(L,R)=>({pitchDelta:(R.y-L.y)*T}),moveStateManager:M,enable:E,assignEvents:Cs})})({clickTolerance:x,enable:!0})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(c,"mousedown",this.mousedown),w.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),w.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),w.disableDrag()}moveMouse(i,c){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,c)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(i,c)||{};x&&f.setPitch(f.getPitch()+x)}}moveTouch(i,c){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,c)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(i,c)||{};x&&f.setPitch(f.getPitch()+x)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}mousedown(i){this.startMouse(u.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),w.mousePos(this.element,i)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.moveMouse(i,w.mousePos(this.element,i))}mouseup(i){this.mouseRotate.dragEnd(i),this.mousePitch&&this.mousePitch.dragEnd(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.startTouch(i,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.moveTouch(i,this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let Fo;function ju(p,i,c){if(p=new u.LngLat(p.lng,p.lat),i){const f=new u.LngLat(p.lng-360,p.lat),g=new u.LngLat(p.lng+360,p.lat),x=c.locationPoint(p).distSqr(i);c.locationPoint(f).distSqr(i)<x?p=f:c.locationPoint(g).distSqr(i)<x&&(p=g)}for(;Math.abs(p.lng-c.center.lng)>180;){const f=c.locationPoint(p);if(f.x>=0&&f.y>=0&&f.x<=c.width&&f.y<=c.height)break;p.lng>c.center.lng?p.lng-=360:p.lng+=360}return p}const Ua={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gu(p,i,c){const f=p.classList;for(const g in Ua)f.remove(`maplibregl-${c}-anchor-${g}`);f.add(`maplibregl-${c}-anchor-${i}`)}class zl extends u.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=u.extend({element:i},c)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=u.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const f=w.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${x}px`),f.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const E=w.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const P=w.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const be of M){const re=w.createNS("http://www.w3.org/2000/svg","ellipse");re.setAttributeNS(null,"opacity","0.04"),re.setAttributeNS(null,"cx","10.5"),re.setAttributeNS(null,"cy","5.80029008"),re.setAttributeNS(null,"rx",be.rx),re.setAttributeNS(null,"ry",be.ry),T.appendChild(re)}const L=w.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const R=w.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(R);const j=w.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");const te=w.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(te);const Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const ee=w.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const oe=w.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#000000"),oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962");const he=w.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),ee.appendChild(oe),ee.appendChild(he),P.appendChild(T),P.appendChild(L),P.appendChild(j),P.appendChild(Y),P.appendChild(ee),f.appendChild(P),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(f),this._offset=u.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Gu(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,f=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,f=this._element;this._popup&&(c===f||f.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ju(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Ua[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${c}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),x=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=u.Point.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const td={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ps=0,ja=!1;const nd={maxWidth:100,unit:"metric"};function Wu(p,i,c){const f=c&&c.maxWidth||100,g=p._container.clientHeight/2,x=p.unproject([0,g]),E=p.unproject([f,g]),P=x.distanceTo(E);if(c&&c.unit==="imperial"){const T=3.2808*P;T>5280?Ga(i,f,T/5280,p._getUIString("ScaleControl.Miles")):Ga(i,f,T,p._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ga(i,f,P/1852,p._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Ga(i,f,P/1e3,p._getUIString("ScaleControl.Kilometers")):Ga(i,f,P,p._getUIString("ScaleControl.Meters"))}function Ga(p,i,c,f){const g=function(x){const E=Math.pow(10,`${Math.floor(x)}`.length-1);let P=x/E;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(T){const M=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*M)/M}(P),E*P}(c);p.style.width=i*(g/c)+"px",p.innerHTML=`${g}&nbsp;${f}`}const qu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Zu(p){if(p){if(typeof p=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new u.Point(0,0),top:new u.Point(0,p),"top-left":new u.Point(i,i),"top-right":new u.Point(-i,i),bottom:new u.Point(0,-p),"bottom-left":new u.Point(i,-i),"bottom-right":new u.Point(-i,-i),left:new u.Point(p,0),right:new u.Point(-p,0)}}if(p instanceof u.Point||Array.isArray(p)){const i=u.Point.convert(p);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.Point.convert(p.center||[0,0]),top:u.Point.convert(p.top||[0,0]),"top-left":u.Point.convert(p["top-left"]||[0,0]),"top-right":u.Point.convert(p["top-right"]||[0,0]),bottom:u.Point.convert(p.bottom||[0,0]),"bottom-left":u.Point.convert(p["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(p["bottom-right"]||[0,0]),left:u.Point.convert(p.left||[0,0]),right:u.Point.convert(p.right||[0,0])}}return Zu(new u.Point(0,0))}const Hu=S,Xu={setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:class extends ht{constructor(p){var i;if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),(p=u.extend({},Rp,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Au(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Jh,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},Qh,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(i=p.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this.transformCameraUpdate=p.transformCameraUpdate,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),u.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1;this._resizeObserver=new ResizeObserver(f=>{c?this._trackResize&&this.resize(f)._update():c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ro(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new bp(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,u.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Et({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new Al,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(p,i){if(i===void 0&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,i,c,f){return f==null&&this.terrain&&(f=this.transform.getElevation(c,this.terrain)),super.calculateCameraOptionsFromTo(p,i,c,f)}resize(p){var i;const c=this._containerDimensions(),f=c[0],g=c[1];this._resizeCanvas(f,g,this.getPixelRatio()),this.transform.resize(f,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,g),this.painter.resize(f,g,this.getPixelRatio());const x=!this._moving;return x&&(this.stop(),this.fire(new u.Event("movestart",p)).fire(new u.Event("move",p))),this.fire(new u.Event("resize",p)),x&&this.fire(new u.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[i,c]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(i,c,p),this.painter.resize(i,c,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(Ot.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?60:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(p){return this._cooperativeGestures=p,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(p){return this.transform.locationPoint(u.LngLat.convert(p),this.style&&this.terrain)}unproject(p){return this.transform.pointLocation(u.Point.convert(p),this.terrain)}isMoving(){var p;return this._moving||((p=this.handlers)===null||p===void 0?void 0:p.isMoving())}isZooming(){var p;return this._zooming||((p=this.handlers)===null||p===void 0?void 0:p.isZooming())}isRotating(){var p;return this._rotating||((p=this.handlers)===null||p===void 0?void 0:p.isRotating())}_createDelegatedListener(p,i,c){if(p==="mouseenter"||p==="mouseover"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:x=>{const E=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];E.length?f||(f=!0,c.call(this,new ur(p,this,x.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(p==="mouseleave"||p==="mouseout"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{(this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,c.call(this,new ur(p,this,E.originalEvent)))},mouseout:E=>{f&&(f=!1,c.call(this,new ur(p,this,E.originalEvent)))}}}}{const f=g=>{const x=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];x.length&&(g.features=x,c.call(this,g),delete g.features)};return{layer:i,listener:c,delegates:{[p]:f}}}}on(p,i,c){if(c===void 0)return super.on(p,i);const f=this._createDelegatedListener(p,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(p,i,c){if(c===void 0)return super.once(p,i);const f=this._createDelegatedListener(p,i,c);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(p,i,c){return c===void 0?super.off(p,i):(this._delegatedListeners&&this._delegatedListeners[p]&&(f=>{const g=this._delegatedListeners[p];for(let x=0;x<g.length;x++){const E=g[x];if(E.layer===i&&E.listener===c){for(const P in E.delegates)this.off(P,E.delegates[P]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(p,i){if(!this.style)return[];let c;const f=p instanceof u.Point||Array.isArray(p),g=f?p:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:p)||{},g instanceof u.Point||typeof g[0]=="number")c=[u.Point.convert(g)];else{const x=u.Point.convert(g[0]),E=u.Point.convert(g[1]);c=[x,new u.Point(E.x,x.y),E,new u.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(p,i){return this.style.querySourceFeatures(p,i)}setStyle(p,i){return(i=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(p,i))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const i=this._locale[p];if(i==null)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(p,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!p)),p?(this.style=new io(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p,i,c):this.style.loadJSON(p,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new io(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,i){if(typeof p=="string"){const c=this._requestManager.transformRequest(p,B.Style);u.getJSON(c,(f,g)=>{f?this.fire(new u.ErrorEvent(f)):g&&this._updateDiff(g,i)})}else typeof p=="object"&&this._updateDiff(p,i)}_updateDiff(p,i){try{this.style.setState(p,i)&&this._update(!0)}catch(c){u.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(p,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(p,i){return this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)}isSourceLoaded(p){const i=this.style&&this.style.sourceCaches[p];if(i!==void 0)return i.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),p){const i=this.style.sourceCaches[p.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${p.source}`);for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===p.source&&u.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Lo(this.painter,i,p),this.painter.renderToTexture=new qn(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId===p.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new u.Event("terrain",{terrain:p})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const i in p){const c=p[i]._tiles;for(const f in c){const g=c[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(p,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,c)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,i,{pixelRatio:c=1,sdf:f=!1,stretchX:g,stretchY:x,content:E}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||u.isImageBitmap(i)){const{width:P,height:T,data:M}=u.exported.getImageData(i);this.style.addImage(p,{data:new u.RGBAImage({width:P,height:T},M),pixelRatio:c,stretchX:g,stretchY:x,content:E,sdf:f,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:T,data:M}=i,L=i;this.style.addImage(p,{data:new u.RGBAImage({width:P,height:T},new Uint8Array(M)),pixelRatio:c,stretchX:g,stretchY:x,content:E,sdf:f,version:0,userImage:L}),L.onAdd&&L.onAdd(this,p)}}}updateImage(p,i){const c=this.style.getImage(p);if(!c)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||u.isImageBitmap(i)?u.exported.getImageData(i):i,{width:g,height:x,data:E}=f;if(g===void 0||x===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||x!==c.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(i instanceof HTMLImageElement||u.isImageBitmap(i));c.data.replace(E,P),this.style.updateImage(p,c)}getImage(p){return this.style.getImage(p)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,i){V.getImage(this._requestManager.transformRequest(p,B.Image),i)}listImages(){return this.style.listImages()}addLayer(p,i){return this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)}moveLayer(p,i){return this.style.moveLayer(p,i),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,i,c){return this.style.setLayerZoomRange(p,i,c),this._update(!0)}setFilter(p,i,c={}){return this.style.setFilter(p,i,c),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,i,c,f={}){return this.style.setPaintProperty(p,i,c,f),this._update(!0)}getPaintProperty(p,i){return this.style.getPaintProperty(p,i)}setLayoutProperty(p,i,c,f={}){return this.style.setLayoutProperty(p,i,c,f),this._update(!0)}getLayoutProperty(p,i){return this.style.getLayoutProperty(p,i)}setGlyphs(p,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(p,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(p,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(p,i,c,f=>{f||this._update(!0)}),this}removeSprite(p){return this._lazyInitEmptyStyle(),this.style.removeSprite(p),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(p,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(p,i,c=>{c||this._update(!0)}),this}setLight(p,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,i){return this.style.setFeatureState(p,i),this._update()}removeFeatureState(p,i){return this.style.removeFeatureState(p,i),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,i=0;return this._container&&(p=this._container.clientWidth||400,i=this._container.clientHeight||300),[p,i]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",p);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const f=this._controlContainer=w.create("div","maplibregl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=w.create("div",`maplibregl-ctrl-${x} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(p){this._onCooperativeGesture(p,p[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(p,i,c){this._canvas.width=c*p,this._canvas.height=c*i,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const p={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:p},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const c=this._canvas.getContext("webgl2",p);if(!c){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new wp(c,this.transform),C.testSupport(c)}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=u.exported.now();this.style.zoomHistory.update(g,x);const E=new u.EvaluationParameters(g,{now:x,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=E.crossFadingFactor();P===1&&P===this._crossFadingFactor||(c=!0,this._crossFadingFactor=P),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var p;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(p=this._resizeObserver)===null||p===void 0||p.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.exported.frame(p=>{u.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get version(){return cr}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(p){this.options=u.extend({},Uu,p),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),i=p===this._map.getMaxZoom(),c=p===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ed(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,i){const c=w.create("button",p,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(p,i){const c=this._map._getUIString(`NavigationControl.${i}`);p.title=c,p.setAttribute("aria-label",c)}},GeolocateControl:class extends u.Evented{constructor(p){super(),this.options=u.extend({},td,p),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){Fo===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Fo=f.state!=="denied",i(Fo)}).catch(()=>{Fo=!!window.navigator.geolocation,i(Fo)}):(Fo=!!window.navigator.geolocation,i(Fo)):i(Fo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ps=0,ja=!1}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),c=p.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.Event("geolocate",p)),this._finish()}}_updateCamera(p){const i=new u.LngLat(p.coords.longitude,p.coords.latitude),c=p.coords.accuracy,f=this._map.getBearing(),g=u.extend({bearing:f},this.options.fitBoundsOptions),x=Ot.fromLngLat(i,c);this._map.fitBounds(x,g,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new u.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.getBounds(),i=p.getSouthEast(),c=p.getNorthEast(),f=i.distanceTo(c),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&ja)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zl(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ps--,ja=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ps++,Ps>1?(p={maximumAge:6e5,timeout:0},ja=!0):(p=this.options.positionOptions,ja=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Et,LogoControl:Al,ScaleControl:class{constructor(p){this.options=u.extend({},nd,p),u.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Wu(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Wu(this._map,this._container,this.options)}},FullscreenControl:class extends u.Evented{constructor(p={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const p=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(p){this.options=p,u.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends u.Evented{constructor(p){super(),this.options=u.extend(Object.create(qu),p),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=u.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const i=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=p;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ju(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const i=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let c=this.options.anchor;const f=Zu(this.options.offset);if(!c){const x=this._container.offsetWidth,E=this._container.offsetHeight;let P;P=i.y+f.bottom.y<E?["top"]:i.y>this._map.transform.height-E?["bottom"]:[],i.x<x/2?P.push("left"):i.x>this._map.transform.width-x/2&&P.push("right"),c=P.length===0?"bottom":P.join("-")}const g=i.add(f[c]).round();w.setTransform(this._container,`${Ua[c]} translate(${g.x}px,${g.y}px)`),Gu(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(rd);p&&p.focus()}_onClose(){this.remove()}},Marker:zl,Style:io,LngLat:u.LngLat,LngLatBounds:Ot,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,AJAXError:u.AJAXError,config:u.config,CanvasSource:Fr,GeoJSONSource:Gt,ImageSource:pr,RasterDEMTileSource:wr,RasterTileSource:Ir,VectorTileSource:wi,VideoSource:Ce,prewarm:function(){gr().acquire(Le)},clearPrewarmedResources:function(){const p=mr;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Le),mr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return Hu},get workerCount(){return Kt.workerCount},set workerCount(p){Kt.workerCount=p},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){u.config.MAX_PARALLEL_IMAGE_REQUESTS=p},get workerUrl(){return u.config.WORKER_URL},set workerUrl(p){u.config.WORKER_URL=p},addProtocol(p,i){u.config.REGISTERED_PROTOCOLS[p]=i},removeProtocol(p){delete u.config.REGISTERED_PROTOCOLS[p]}};return Vu.extend(Xu,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),Xu});var y=l;return y})})(IA);var qd=F5(IA.exports);function oN(e){return[{id:"background",type:"background",paint:{"background-color":"black"}},{id:"natural",type:"fill",source:e,"source-layer":"natural",paint:{"fill-color":"#19A974","fill-opacity":.5}},{id:"landuse",type:"fill",source:e,"source-layer":"landuse",paint:{"fill-color":"white","fill-opacity":.25}},{id:"water",type:"fill",source:e,"source-layer":"water",paint:{"fill-color":"#268bd2","fill-opacity":.5}},{id:"physical",type:"line",source:e,"source-layer":"physical",paint:{"line-color":"#357EDD","line-opacity":.5}},{id:"buildings",type:"fill",source:e,"source-layer":"buildings",paint:{"fill-color":"#6c71c4","fill-opacity":.8}},{id:"roads",type:"line",source:e,"source-layer":"roads",paint:{"line-color":"white","line-opacity":.5}},{id:"boundaries",type:"line",source:e,"source-layer":"boundaries",paint:{"line-color":"#5E2CA5","line-opacity":.5}},{id:"transit",type:"line",source:e,"source-layer":"transit",paint:{"line-color":"#dc322f","line-opacity":.5}},{id:"pois",type:"circle",source:e,"source-layer":"pois",paint:{"circle-radius":2,"circle-color":"#268bd2","circle-opacity":.9}},{id:"places",type:"circle",source:e,"source-layer":"places",paint:{"circle-radius":5,"circle-color":"#b58900","circle-opacity":.9}},{id:"mask",type:"fill",source:e,"source-layer":"mask",paint:{"fill-color":"#000000","fill-opacity":.5}}]}function aN(e,t){const n=t.hasCasings?"visible":"none";return[{id:"background",type:"background",paint:{"background-color":t.background}},{id:"earth",type:"fill",source:e,"source-layer":"earth",paint:{"fill-color":t.earth}},{id:"landuse_park",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","park"],["==","landuse","cemetery"]],paint:{"fill-color":t.park}},{id:"landuse_hospital",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":t.hospital}},{id:"landuse_industrial",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":t.industrial}},{id:"landuse_school",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","school"]],paint:{"fill-color":t.school}},{id:"natural_wood",type:"fill",source:e,"source-layer":"natural",filter:["any",["==","natural","wood"],["==","leisure","nature_reserve"],["==","landuse","forest"]],paint:{"fill-color":t.wood}},{id:"landuse_pedestrian",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","highway","footway"]],paint:{"fill-color":t.pedestrian}},{id:"natural_scrub",type:"fill",source:e,"source-layer":"natural",filter:["in","natural","scrub","grassland"],paint:{"fill-color":t.scrub}},{id:"natural_glacier",type:"fill",source:e,"source-layer":"natural",filter:["==","natural","glacier"],paint:{"fill-color":t.glacier}},{id:"natural_sand",type:"fill",source:e,"source-layer":"natural",filter:["==","natural","sand"],paint:{"fill-color":t.sand}},{id:"landuse_aerodrome",type:"fill",source:e,"source-layer":"landuse",filter:["==","aeroway","aerodrome"],paint:{"fill-color":t.aerodrome}},{id:"transit_runway",type:"line",source:e,"source-layer":"transit",filter:["has","aeroway"],paint:{"line-color":t.runway,"line-width":6}},{id:"landuse_runway",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","aeroway","runway"],["==","area:aeroway","runway"],["==","area:aeroway","taxiway"]],paint:{"fill-color":t.runway}},{id:"water",type:"fill",source:e,"source-layer":"water",paint:{"fill-color":t.water}},{id:"roads_tunnels_other_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.tunnel_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]},layout:{visibility:n}},{id:"roads_tunnels_other",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.tunnel_other,"line-dasharray":[1,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_tunnels_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:n}},{id:"roads_tunnels_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_tunnels_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:n}},{id:"roads_tunnels_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_tunnels_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:n}},{id:"roads_tunnels_major",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_tunnels_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.tunnel_highway_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:n}},{id:"roads_tunnels_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.tunnel_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"physical_line_waterway",type:"line",source:e,"source-layer":"physical_line",filter:["==",["get","pmap:kind"],"waterway"],paint:{"line-color":t.water,"line-width":.5}},{id:"buildings",type:"fill-extrusion",source:e,"source-layer":"buildings",paint:{"fill-extrusion-color":t.buildings,"fill-extrusion-height":["to-number",["get","height"]],"fill-extrusion-opacity":.5}},{id:"roads_other",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:n}},{id:"roads_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:n}},{id:"roads_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:n}},{id:"roads_major",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:n}},{id:"roads_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"transit_railway",type:"line",source:e,"source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":t.railway,"line-width":2}},{id:"transit_railway_tracks",type:"line",source:e,"source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":t.railway_tracks,"line-width":.8,"line-dasharray":[6,10]}},{id:"boundaries",type:"line",source:e,"source-layer":"boundaries",paint:{"line-color":t.boundaries,"line-width":.5,"line-dasharray":[3,2]}},{id:"physical_line_waterway_label",type:"symbol",source:e,"source-layer":"physical_line",minzoom:14,layout:{"symbol-placement":"line","text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":14,"text-letter-spacing":.3},paint:{"text-color":t.waterway_label,"text-halo-color":t.waterway_label_halo,"text-halo-width":2}},{id:"roads_bridges_other_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.bridges_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]},layout:{visibility:n}},{id:"roads_bridges_other",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.bridges_other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_bridges_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:n}},{id:"roads_bridges_minor",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_bridges_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:n}},{id:"roads_bridges_medium",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_bridges_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:n}},{id:"roads_bridges_major",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_bridges_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.bridges_highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:n}},{id:"roads_bridges_highway",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.bridges_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"roads_labels",type:"symbol",source:e,"source-layer":"roads",layout:{"symbol-placement":"line","text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":t.roads_label,"text-halo-color":t.roads_label_halo,"text-halo-width":2}},{id:"mask",type:"fill",source:e,"source-layer":"mask",paint:{"fill-color":t.background}},{id:"physical_point_ocean",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["==","place","sea"],["==","place","ocean"]],layout:{"text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":13,"text-letter-spacing":.1},paint:{"text-color":t.ocean_label,"text-halo-color":t.ocean_label_halo,"text-halo-width":1}},{id:"physical_point_peak",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["==","natural","peak"]],layout:{"text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":14},paint:{"text-color":t.peak_label,"text-halo-color":t.peak_label_halo,"text-halo-width":1.5}},{id:"places_subplace",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","neighbourhood"],layout:{"text-field":"{name}","text-font":["NotoSans-Regular"],"text-size":{base:1.2,stops:[[11,10],[14,12]]},"text-transform":"uppercase"},paint:{"text-color":t.subplace_label,"text-halo-color":t.subplace_label_halo,"text-halo-width":.5}},{id:"places_city_circle",type:"circle",source:e,"source-layer":"places",filter:["==","pmap:kind","city"],paint:{"circle-radius":2,"circle-stroke-width":2,"circle-stroke-color":t.city_circle_stroke,"circle-color":t.city_circle},maxzoom:8},{id:"places_city",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","city"],layout:{"text-field":"{name}","text-font":["NotoSans-Bold"],"text-size":["step",["get","pmap:rank"],0,1,12,2,10],"text-variable-anchor":["bottom-left"],"text-radial-offset":.2},paint:{"text-color":t.city_label,"text-halo-color":t.city_label_halo,"text-halo-width":1}},{id:"places_state",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","state"],layout:{"text-field":"{name}","text-font":["NotoSans-Regular"],"text-size":12,"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":t.state_label,"text-halo-color":t.state_label_halo,"text-halo-width":.5}},{id:"places_country",type:"symbol",source:e,"source-layer":"places",filter:["==","place","country"],layout:{"text-field":"{name}","text-font":["NotoSans-Bold"],"text-size":{base:1.2,stops:[[2,13],[6,13],[8,20]]},"text-transform":"uppercase"},paint:{"text-color":t.country_label,"text-halo-color":t.country_label_halo,"text-halo-width":1}}]}var sN={hasCasings:!0,background:"#dddddd",earth:"#e7f1ee",park:"#c2f7d1",hospital:"#ffeae8",industrial:"#f8ffed",school:"#f2fef9",wood:"#eafbe9",pedestrian:"#eef0f0",scrub:"rgb(219,239,209)",glacier:"white",sand:"#eff5e7",aerodrome:"#dbe7e7",runway:"#d1d9d9",water:"#a4cae1",tunnel_other_casing:"#ffffff",tunnel_other:"#f7f7f7",tunnel_minor_casing:"#e2e2e2",tunnel_minor:"#ebebeb",tunnel_medium_casing:"#e1e1e1",tunnel_medium:"#ebebeb",tunnel_major_casing:"#e3cfd3",tunnel_major:"#ebebeb",tunnel_highway_casing:"#ebcea2",tunnel_highway:"#ebebeb",buildings:"#cbcece",other:"#ffffff",minor_casing:"#e2e2e2",minor:"white",medium_casing:"#e1e1e1",medium:"#ffffff",major_casing:"#e3cfd3",major:"#ffffff",highway_casing:"#ebcea2",highway:"#fefffc",railway:"#b3bcc9",railway_tracks:"#ffffff",boundaries:"#5c4a6b",waterway_label_halo:"white",waterway_label:"#a4cae1",bridges_other_casing:"#ffffff",bridges_other:"#ffffff",bridges_minor_casing:"#e2e2e2",bridges_minor:"white",bridges_medium_casing:"#e1e1e1",bridges_medium:"#ffffff",bridges_major_casing:"#e3cfd3",bridges_major:"#ffffff",bridges_highway_casing:"#ebcea2",bridges_highway:"#fefffc",roads_label:"#91888b",roads_label_halo:"white",ocean_label:"white",ocean_label_halo:"#a4cae1",peak_label:"#61bb5b",peak_label_halo:"#ffffff",subplace_label:"#757d91",subplace_label_halo:"white",city_circle:"#666666",city_circle_stroke:"white",city_label:"#787878",city_label_halo:"white",state_label:"#bdbdbd",state_label_halo:"White",country_label:"#9590aa",country_label_halo:"white"},lN={hasCasings:!0,background:"#dddddd",earth:"#151515",park:"#1d3e2e",hospital:"#2e2226",industrial:"#20201e",school:"#193a3c",wood:"#212e25",pedestrian:"#1a1a1a",scrub:"#27362a",glacier:"#1c1c1c",sand:"#374238",aerodrome:"#000000",runway:"#000000",water:"#1e293b",tunnel_other_casing:"#ffffff",tunnel_other:"#000000",tunnel_minor_casing:"#ffffff",tunnel_minor:"#000000",tunnel_medium_casing:"#ffffff",tunnel_medium:"#000000",tunnel_major_casing:"#ffffff",tunnel_major:"#000000",tunnel_highway_casing:"#ffffff",tunnel_highway:"#000000",buildings:"#393f43",other:"#000000",minor_casing:"#222222",minor:"#000000",medium_casing:"#222222",medium:"#282828",major_casing:"#222222",major:"#2f2f2f",highway_casing:"#222222",highway:"#3b3b3b",railway:"#bbbbbb",railway_tracks:"#000000",boundaries:"#6b1001",waterway_label_halo:"#000000",waterway_label:"#ffffff",bridges_other_casing:"#ffffff",bridges_other:"#000000",bridges_minor_casing:"#ffffff",bridges_minor:"#000000",bridges_medium_casing:"#ffffff",bridges_medium:"#000000",bridges_major_casing:"#ffffff",bridges_major:"#000000",bridges_highway_casing:"#ffffff",bridges_highway:"#000000",roads_label:"#7a7a7a",roads_label_halo:"#000000",ocean_label:"#ffffff",ocean_label_halo:"#000000",peak_label:"#ffffff",peak_label_halo:"#000000",subplace_label:"#8e8e8e",subplace_label_halo:"#000000",city_circle:"#ffffff",city_circle_stroke:"#000000",city_label:"#ffffff",city_label_halo:"#000000",state_label:"#ffffff",state_label_halo:"#000000",country_label:"#ffffff",country_label_halo:"#000000"},uN={hasCasings:!1,background:"#fff",earth:"#fff",park:"#fafafa",hospital:"#fafafa",industrial:"#fafafa",school:"#fafafa",wood:"#fafafa",pedestrian:"#fafafa",scrub:"#fafafa",glacier:"#ffffff",sand:"#eee",aerodrome:"#eee",runway:"#eee",water:"#eeeeee",tunnel_other_casing:"#ff00ff",tunnel_other:"#c8c8c8",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#c8c8c8",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#c8c8c8",tunnel_major_casing:"#ff00ff",tunnel_major:"#c8c8c8",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#c8c8c8",buildings:"#ffffff",other:"#c8c8c8",minor_casing:"#ff00ff",minor:"#c8c8c8",medium_casing:"#ff00ff",medium:"#c8c8c8",major_casing:"#ff00ff",major:"#c8c8c8",highway_casing:"#ff00ff",highway:"#c8c8c8",railway:"#eee",railway_tracks:"#ffffff",boundaries:"#000000",waterway_label_halo:"#ffffff",waterway_label:"#000000",bridges_other_casing:"#ff00ff",bridges_other:"#c8c8c8",bridges_minor_casing:"#ff00ff",bridges_minor:"#c8c8c8",bridges_medium_casing:"#ff00ff",bridges_medium:"#c8c8c8",bridges_major_casing:"#ff00ff",bridges_major:"#c8c8c8",bridges_highway_casing:"#ff00ff",bridges_highway:"#ffffff",roads_label:"#888",roads_label_halo:"#ffffff",ocean_label:"#aaa",ocean_label_halo:"#ffffff",peak_label:"#888",peak_label_halo:"#ffffff",subplace_label:"#888",subplace_label_halo:"#ffffff",city_circle:"#aaa",city_circle_stroke:"#ffffff",city_label:"#888",city_label_halo:"#ffffff",state_label:"#999",state_label_halo:"#ffffff",country_label:"#bbb",country_label_halo:"#ffffff"},cN={hasCasings:!1,background:"#000000",earth:"#000000",park:"#060606",hospital:"#060606",industrial:"#060606",school:"#060606",wood:"#060606",pedestrian:"#060606",scrub:"#060606",glacier:"#060606",sand:"#060606",aerodrome:"#060606",runway:"#060606",water:"#333",tunnel_other_casing:"#ff00ff",tunnel_other:"#222",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#222",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#222",tunnel_major_casing:"#ff00ff",tunnel_major:"#222",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#222",buildings:"#101010",other:"#000000",minor_casing:"#ff00ff",minor:"#222",medium_casing:"#ff00ff",medium:"#222",major_casing:"#ff00ff",major:"#222",highway_casing:"#ff00ff",highway:"#222",railway:"#121212",railway_tracks:"#121212",boundaries:"#555",waterway_label_halo:"#333",waterway_label:"#888",bridges_other_casing:"#ff00ff",bridges_other:"#222",bridges_minor_casing:"#ff00ff",bridges_minor:"#222",bridges_medium_casing:"#ff00ff",bridges_medium:"#222",bridges_major_casing:"#ff00ff",bridges_major:"#222",bridges_highway_casing:"#ff00ff",bridges_highway:"#222",roads_label:"#666",roads_label_halo:"#000",ocean_label:"#666",ocean_label_halo:"#333",peak_label:"#777",peak_label_halo:"#000000",subplace_label:"#777",subplace_label_halo:"#000000",city_circle:"#777",city_circle_stroke:"#000000",city_label:"#777",city_label_halo:"#000000",state_label:"#555",state_label_halo:"#000000",country_label:"#555",country_label_halo:"#000000"},hN={hasCasings:!1,background:"#eee",earth:"#eee",park:"#e8e8e8",hospital:"#e8e8e8",industrial:"#e8e8e8",school:"#e8e8e8",wood:"#e8e8e8",pedestrian:"#e8e8e8",scrub:"#e8e8e8",glacier:"#e8e8e8",sand:"#e8e8e8",aerodrome:"#e8e8e8",runway:"#e8e8e8",water:"#ddd",tunnel_other_casing:"#ff00ff",tunnel_other:"#ffffff",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#ffffff",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#ffffff",tunnel_major_casing:"#ff00ff",tunnel_major:"#ffffff",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#ffffff",buildings:"#ffffff",other:"#fff",minor_casing:"#ff00ff",minor:"#fff",medium_casing:"#ff00ff",medium:"#fff",major_casing:"#ff00ff",major:"#fff",highway_casing:"#ff00ff",highway:"#fff",railway:"#fff",railway_tracks:"#eee",boundaries:"#666",waterway_label_halo:"#bbbbbb",waterway_label:"#ffffff",bridges_other_casing:"#ff00ff",bridges_other:"#ffffff",bridges_minor_casing:"#ff00ff",bridges_minor:"#ffffff",bridges_medium_casing:"#ff00ff",bridges_medium:"#ffffff",bridges_major_casing:"#ff00ff",bridges_major:"#ffffff",bridges_highway_casing:"#ff00ff",bridges_highway:"#ffffff",roads_label:"#888",roads_label_halo:"#ffffff",ocean_label:"#666",ocean_label_halo:"#ffffff",peak_label:"#000000",peak_label_halo:"#ffffff",subplace_label:"#888",subplace_label_halo:"#ffffff",city_circle:"#666",city_circle_stroke:"#ffffff",city_label:"#888",city_label_halo:"#ffffff",state_label:"#888",state_label_halo:"#ffffff",country_label:"#888",country_label_halo:"#ffffff"},dN={light:sN,dark:lN,white:uN,black:cN,grayscale:hN};function AA(e,t){return t=="debug"?oN(e):aN(e,dN[t])}const gT=0,yT=0,_T=0;qd.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",()=>{},!0);const fN=hn("div",{height:"calc(100vh - $4 - $4)"}),pN=hn("div",{color:"black"}),mN=hn("div",{marginBottom:"0.5em","&:not(:last-of-type)":{borderBottom:"1px solid black"}}),gN=hn("div",{position:"absolute",top:"10px",right:"10px",width:40,height:40,backgroundColor:"#444",cursor:"pointer",zIndex:9999}),yN=hn("div",{position:"absolute",backgroundColor:"#444",top:"50px",right:"10px",padding:"$1",zIndex:9999}),fy=hn("label",{display:"flex",gap:6,cursor:"pointer"}),_N=hn("ul",{listStyleType:"none"}),vN=e=>Oe(pN,{children:e.features.map((t,n)=>Pt(mN,{children:[Pt("span",{children:[Oe("strong",{children:t.layer["source-layer"]}),Pt("span",{style:{fontSize:"0.8em"},children:[" (",t.geometry.type,")"]})]}),Oe("table",{children:Object.entries(t.properties).map(([o,l],h)=>Pt("tr",{children:[Oe("td",{children:o}),Oe("td",{children:l})]},h))})]},n))}),xN=e=>{const{layers:t,onChange:n}=e,o=W.exports.useRef(null),l=t.filter(S=>S.visible).length,h=l>0&&l!==t.length;if(W.exports.useEffect(()=>{o.current&&(o.current.indeterminate=h)},[h]),!e.layers.length)return Pt(If,{children:[Oe("h4",{children:"Layers"}),Oe("span",{children:"No vector layers found"})]});const y=()=>{const S=l!==t.length,w=t.map(C=>({...C,visible:S}));n(w)},u=S=>{const w=S.target.getAttribute("data-layer-id"),C=t.map(A=>A.id===w?{...A,visible:!A.visible}:A);n(C)};return Pt(If,{children:[Oe("h4",{children:"Layers"}),Pt(fy,{children:[Oe("input",{ref:o,type:"checkbox",checked:l===t.length,onChange:y}),Oe("em",{children:"All layers"})]}),Oe(_N,{children:e.layers.map(({id:S,visible:w})=>Oe("li",{children:Pt(fy,{style:{paddingLeft:8},children:[Oe("input",{type:"checkbox",checked:w,onChange:u,"data-layer-id":S}),S]})},S))})]})},wN=async e=>{let t=await e.getHeader(),n=await e.getMetadata(),o=[];return n.type!=="baselayer"&&(o=AA("basemap","black"),o[0].paint["background-color"]="black"),o.push({id:"raster",type:"raster",source:"source"}),{version:8,sources:{source:{type:"raster",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],minzoom:t.minZoom,maxzoom:t.maxZoom},basemap:{type:"vector",tiles:["https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=1003762824b9687f"],maxzoom:14}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o}},bN=async e=>{let t=await e.getHeader(),n=await e.getMetadata(),o=[];n.type!=="baselayer"&&(o=AA("basemap","black"),o[0].paint["background-color"]="black");var l;if(n.json){let y=JSON.parse(n.json);y.tilestats,l=y.vector_layers}else n.tilestats,l=n.vector_layers;if(l)for(let[y,u]of l.entries())o.push({id:u.id+"_fill",type:"fill",source:"source","source-layer":u.id,paint:{"fill-color":tg[y%12],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.35,.2],"fill-outline-color":["case",["boolean",["feature-state","hover"],!1],"hsl(0,100%,90%)","rgba(0,0,0,0)"]},filter:["==",["geometry-type"],"Polygon"]}),o.push({id:u.id+"_stroke",type:"line",source:"source","source-layer":u.id,paint:{"line-color":tg[y%12],"line-width":["case",["boolean",["feature-state","hover"],!1],2,.5]},filter:["==",["geometry-type"],"LineString"]}),o.push({id:u.id+"_point",type:"circle",source:"source","source-layer":u.id,paint:{"circle-color":tg[y%12],"circle-radius":["case",["boolean",["feature-state","hover"],!1],6,5]},filter:["==",["geometry-type"],"Point"]});for(let y of o)y["source-layer"]==="mask"&&y.type==="fill"&&(y.paint["fill-color"]="black",y.paint["fill-opacity"]=.8);const h=[t.minLon,t.minLat,t.maxLon,t.maxLat];return{style:{version:8,sources:{source:{type:"vector",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],minzoom:t.minZoom,maxzoom:t.maxZoom,bounds:h},basemap:{type:"vector",tiles:["https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=1003762824b9687f"],maxzoom:14,bounds:h}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o},layersVisibility:l.map(y=>({id:y.id,visible:!0}))}};function SN(e){let t=W.exports.useRef(null),[n,o]=W.exports.useState(!0),[l,h]=W.exports.useState(!1),[y,u]=W.exports.useState(!1),[S,w]=W.exports.useState([]);const C=W.exports.useRef(null),A=W.exports.useRef(new Set),z=W.exports.useRef(l);W.exports.useEffect(()=>{z.current=l},[l]);const G=()=>{o(!n)},Z=()=>{h(!l),C.current.getCanvas().style.cursor=l?"":"crosshair"},H=()=>{u(!y),C.current.showTileBoundaries=!y},fe=B=>{w(B);const V=C.current;for(const{id:K,visible:le}of B){const ue=le?"visible":"none";V.setLayoutProperty(`${K}_fill`,"visibility",ue),V.setLayoutProperty(`${K}_stroke`,"visibility",ue),V.setLayoutProperty(`${K}_point`,"visibility",ue)}};return W.exports.useEffect(()=>{let B=new nL;qd.addProtocol("pmtiles",B.tile),B.add(e.file);const V=new qd.Map({container:t.current,hash:"map",zoom:gT,center:[yT,_T],style:{version:8,sources:{},layers:[]}});V.addControl(new qd.NavigationControl({}),"bottom-left"),V.on("load",V.resize);const K=new qd.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return C.current=V,V.on("mousemove",le=>{const ue=A.current;for(const Ve of ue)V.setFeatureState(Ve,{hover:!1}),ue.delete(Ve);if(!z.current){K.remove();return}const{x:ge,y:ye}=le.point,Ee=2;var je=V.queryRenderedFeatures([[ge-Ee,ye-Ee],[ge+Ee,ye+Ee]]);je=je.filter(Ve=>Ve.source==="source");for(const Ve of je)V.setFeatureState(Ve,{hover:!0}),ue.add(Ve);let ke=iN(Oe(vN,{features:je}));je.length?(K.setHTML(ke),K.setLngLat(le.lngLat),K.addTo(V)):K.remove()}),()=>{V.remove()}},[]),W.exports.useEffect(()=>{(async()=>{if(C.current){let V=C.current,K=await e.file.getHeader();if(V.getCenter().lng===yT&&V.getCenter().lat==_T&&V.getZoom()===gT&&V.fitBounds([[K.minLon,K.minLat],[K.maxLon,K.maxLat]],{animate:!1}),K.tileType===tu.Png||K.tileType===tu.Webp||K.tileType==tu.Jpeg){let le=await wN(e.file);V.setStyle(le)}else{let{style:le,layersVisibility:ue}=await bN(e.file);V.setStyle(le),w(ue)}}})()},[]),Pt(fN,{ref:t,children:[Oe("div",{ref:t}),Oe(gN,{onClick:G,children:"menu"}),n?Pt(yN,{children:[Oe("h4",{children:"Filter"}),Oe("h4",{children:"Popup"}),Pt(fy,{children:[Oe("input",{type:"checkbox",checked:l,onChange:Z}),"show attributes"]}),Oe("h4",{children:"Tiles"}),Pt(fy,{children:[Oe("input",{type:"checkbox",checked:y,onChange:H}),"show tile boundaries"]}),Oe(xN,{layers:S,onChange:fe})]}):null]})}function EN(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function kN(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var TN=function(){function e(n){var o=this;this._insertTag=function(l){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,h),o.tags.push(l)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(kN(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var h=EN(l);try{h.insertRule(o,h.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),yi="-ms-",py="-moz-",_n="-webkit-",zA="comm",Zw="rule",Hw="decl",CN="@import",DA="@keyframes",PN=Math.abs,Wy=String.fromCharCode,IN=Object.assign;function MN(e,t){return ei(e,0)^45?(((t<<2^ei(e,0))<<2^ei(e,1))<<2^ei(e,2))<<2^ei(e,3):0}function RA(e){return e.trim()}function AN(e,t){return(e=t.exec(e))?e[0]:e}function bn(e,t,n){return e.replace(t,n)}function yx(e,t){return e.indexOf(t)}function ei(e,t){return e.charCodeAt(t)|0}function Rf(e,t,n){return e.slice(t,n)}function Ca(e){return e.length}function Xw(e){return e.length}function Om(e,t){return t.push(e),e}function zN(e,t){return e.map(t).join("")}var qy=1,ih=1,LA=0,ro=0,Cr=0,yh="";function Zy(e,t,n,o,l,h,y){return{value:e,root:t,parent:n,type:o,props:l,children:h,line:qy,column:ih,length:y,return:""}}function Rd(e,t){return IN(Zy("",null,null,"",null,null,0),e,{length:-e.length},t)}function DN(){return Cr}function RN(){return Cr=ro>0?ei(yh,--ro):0,ih--,Cr===10&&(ih=1,qy--),Cr}function Eo(){return Cr=ro<LA?ei(yh,ro++):0,ih++,Cr===10&&(ih=1,qy++),Cr}function La(){return ei(yh,ro)}function fg(){return ro}function Kf(e,t){return Rf(yh,e,t)}function Lf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function FA(e){return qy=ih=1,LA=Ca(yh=e),ro=0,[]}function OA(e){return yh="",e}function pg(e){return RA(Kf(ro-1,_x(e===91?e+2:e===40?e+1:e)))}function LN(e){for(;(Cr=La())&&Cr<33;)Eo();return Lf(e)>2||Lf(Cr)>3?"":" "}function FN(e,t){for(;--t&&Eo()&&!(Cr<48||Cr>102||Cr>57&&Cr<65||Cr>70&&Cr<97););return Kf(e,fg()+(t<6&&La()==32&&Eo()==32))}function _x(e){for(;Eo();)switch(Cr){case e:return ro;case 34:case 39:e!==34&&e!==39&&_x(Cr);break;case 40:e===41&&_x(e);break;case 92:Eo();break}return ro}function ON(e,t){for(;Eo()&&e+Cr!==47+10;)if(e+Cr===42+42&&La()===47)break;return"/*"+Kf(t,ro-1)+"*"+Wy(e===47?e:Eo())}function $N(e){for(;!Lf(La());)Eo();return Kf(e,ro)}function BN(e){return OA(mg("",null,null,null,[""],e=FA(e),0,[0],e))}function mg(e,t,n,o,l,h,y,u,S){for(var w=0,C=0,A=y,z=0,G=0,Z=0,H=1,fe=1,B=1,V=0,K="",le=l,ue=h,ge=o,ye=K;fe;)switch(Z=V,V=Eo()){case 40:if(Z!=108&&ei(ye,A-1)==58){yx(ye+=bn(pg(V),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:ye+=pg(V);break;case 9:case 10:case 13:case 32:ye+=LN(Z);break;case 92:ye+=FN(fg()-1,7);continue;case 47:switch(La()){case 42:case 47:Om(VN(ON(Eo(),fg()),t,n),S);break;default:ye+="/"}break;case 123*H:u[w++]=Ca(ye)*B;case 125*H:case 59:case 0:switch(V){case 0:case 125:fe=0;case 59+C:G>0&&Ca(ye)-A&&Om(G>32?xT(ye+";",o,n,A-1):xT(bn(ye," ","")+";",o,n,A-2),S);break;case 59:ye+=";";default:if(Om(ge=vT(ye,t,n,w,C,l,u,K,le=[],ue=[],A),h),V===123)if(C===0)mg(ye,t,ge,ge,le,h,A,u,ue);else switch(z===99&&ei(ye,3)===110?100:z){case 100:case 109:case 115:mg(e,ge,ge,o&&Om(vT(e,ge,ge,0,0,l,u,K,l,le=[],A),ue),l,ue,A,u,o?le:ue);break;default:mg(ye,ge,ge,ge,[""],ue,0,u,ue)}}w=C=G=0,H=B=1,K=ye="",A=y;break;case 58:A=1+Ca(ye),G=Z;default:if(H<1){if(V==123)--H;else if(V==125&&H++==0&&RN()==125)continue}switch(ye+=Wy(V),V*H){case 38:B=C>0?1:(ye+="\f",-1);break;case 44:u[w++]=(Ca(ye)-1)*B,B=1;break;case 64:La()===45&&(ye+=pg(Eo())),z=La(),C=A=Ca(K=ye+=$N(fg())),V++;break;case 45:Z===45&&Ca(ye)==2&&(H=0)}}return h}function vT(e,t,n,o,l,h,y,u,S,w,C){for(var A=l-1,z=l===0?h:[""],G=Xw(z),Z=0,H=0,fe=0;Z<o;++Z)for(var B=0,V=Rf(e,A+1,A=PN(H=y[Z])),K=e;B<G;++B)(K=RA(H>0?z[B]+" "+V:bn(V,/&\f/g,z[B])))&&(S[fe++]=K);return Zy(e,t,n,l===0?Zw:u,S,w,C)}function VN(e,t,n){return Zy(e,t,n,zA,Wy(DN()),Rf(e,2,-2),0)}function xT(e,t,n,o){return Zy(e,t,n,Hw,Rf(e,0,o),Rf(e,o+1,-1),o)}function qc(e,t){for(var n="",o=Xw(e),l=0;l<o;l++)n+=t(e[l],l,e,t)||"";return n}function NN(e,t,n,o){switch(e.type){case CN:case Hw:return e.return=e.return||e.value;case zA:return"";case DA:return e.return=e.value+"{"+qc(e.children,o)+"}";case Zw:e.value=e.props.join(",")}return Ca(n=qc(e.children,o))?e.return=e.value+"{"+n+"}":""}function UN(e){var t=Xw(e);return function(n,o,l,h){for(var y="",u=0;u<t;u++)y+=e[u](n,o,l,h)||"";return y}}function jN(e){return function(t){t.root||(t=t.return)&&e(t)}}function $A(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var GN=function(t,n,o){for(var l=0,h=0;l=h,h=La(),l===38&&h===12&&(n[o]=1),!Lf(h);)Eo();return Kf(t,ro)},WN=function(t,n){var o=-1,l=44;do switch(Lf(l)){case 0:l===38&&La()===12&&(n[o]=1),t[o]+=GN(ro-1,n,o);break;case 2:t[o]+=pg(l);break;case 4:if(l===44){t[++o]=La()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=Wy(l)}while(l=Eo());return t},qN=function(t,n){return OA(WN(FA(t),n))},wT=new WeakMap,ZN=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!wT.get(o))&&!l){wT.set(t,!0);for(var h=[],y=qN(n,h),u=o.props,S=0,w=0;S<y.length;S++)for(var C=0;C<u.length;C++,w++)t.props[w]=h[S]?y[S].replace(/&\f/g,u[C]):u[C]+" "+y[S]}}},HN=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function BA(e,t){switch(MN(e,t)){case 5103:return _n+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _n+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _n+e+py+e+yi+e+e;case 6828:case 4268:return _n+e+yi+e+e;case 6165:return _n+e+yi+"flex-"+e+e;case 5187:return _n+e+bn(e,/(\w+).+(:[^]+)/,_n+"box-$1$2"+yi+"flex-$1$2")+e;case 5443:return _n+e+yi+"flex-item-"+bn(e,/flex-|-self/,"")+e;case 4675:return _n+e+yi+"flex-line-pack"+bn(e,/align-content|flex-|-self/,"")+e;case 5548:return _n+e+yi+bn(e,"shrink","negative")+e;case 5292:return _n+e+yi+bn(e,"basis","preferred-size")+e;case 6060:return _n+"box-"+bn(e,"-grow","")+_n+e+yi+bn(e,"grow","positive")+e;case 4554:return _n+bn(e,/([^-])(transform)/g,"$1"+_n+"$2")+e;case 6187:return bn(bn(bn(e,/(zoom-|grab)/,_n+"$1"),/(image-set)/,_n+"$1"),e,"")+e;case 5495:case 3959:return bn(e,/(image-set\([^]*)/,_n+"$1$`$1");case 4968:return bn(bn(e,/(.+:)(flex-)?(.*)/,_n+"box-pack:$3"+yi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_n+e+e;case 4095:case 3583:case 4068:case 2532:return bn(e,/(.+)-inline(.+)/,_n+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ca(e)-1-t>6)switch(ei(e,t+1)){case 109:if(ei(e,t+4)!==45)break;case 102:return bn(e,/(.+:)(.+)-([^]+)/,"$1"+_n+"$2-$3$1"+py+(ei(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~yx(e,"stretch")?BA(bn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ei(e,t+1)!==115)break;case 6444:switch(ei(e,Ca(e)-3-(~yx(e,"!important")&&10))){case 107:return bn(e,":",":"+_n)+e;case 101:return bn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_n+(ei(e,14)===45?"inline-":"")+"box$3$1"+_n+"$2$3$1"+yi+"$2box$3")+e}break;case 5936:switch(ei(e,t+11)){case 114:return _n+e+yi+bn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _n+e+yi+bn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _n+e+yi+bn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _n+e+yi+e+e}return e}var XN=function(t,n,o,l){if(t.length>-1&&!t.return)switch(t.type){case Hw:t.return=BA(t.value,t.length);break;case DA:return qc([Rd(t,{value:bn(t.value,"@","@"+_n)})],l);case Zw:if(t.length)return zN(t.props,function(h){switch(AN(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qc([Rd(t,{props:[bn(h,/:(read-\w+)/,":"+py+"$1")]})],l);case"::placeholder":return qc([Rd(t,{props:[bn(h,/:(plac\w+)/,":"+_n+"input-$1")]}),Rd(t,{props:[bn(h,/:(plac\w+)/,":"+py+"$1")]}),Rd(t,{props:[bn(h,/:(plac\w+)/,yi+"input-$1")]})],l)}return""})}},KN=[XN],YN=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(H){var fe=H.getAttribute("data-emotion");fe.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var l=t.stylisPlugins||KN,h={},y,u=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(H){for(var fe=H.getAttribute("data-emotion").split(" "),B=1;B<fe.length;B++)h[fe[B]]=!0;u.push(H)});var S,w=[ZN,HN];{var C,A=[NN,jN(function(H){C.insert(H)})],z=UN(w.concat(l,A)),G=function(fe){return qc(BN(fe),z)};S=function(fe,B,V,K){C=V,G(fe?fe+"{"+B.styles+"}":B.styles),K&&(Z.inserted[B.name]=!0)}}var Z={key:n,sheet:new TN({key:n,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:S};return Z.sheet.hydrate(u),Z},VA={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=typeof Symbol=="function"&&Symbol.for,Kw=qr?Symbol.for("react.element"):60103,Yw=qr?Symbol.for("react.portal"):60106,Hy=qr?Symbol.for("react.fragment"):60107,Xy=qr?Symbol.for("react.strict_mode"):60108,Ky=qr?Symbol.for("react.profiler"):60114,Yy=qr?Symbol.for("react.provider"):60109,Jy=qr?Symbol.for("react.context"):60110,Jw=qr?Symbol.for("react.async_mode"):60111,Qy=qr?Symbol.for("react.concurrent_mode"):60111,e0=qr?Symbol.for("react.forward_ref"):60112,t0=qr?Symbol.for("react.suspense"):60113,JN=qr?Symbol.for("react.suspense_list"):60120,n0=qr?Symbol.for("react.memo"):60115,r0=qr?Symbol.for("react.lazy"):60116,QN=qr?Symbol.for("react.block"):60121,eU=qr?Symbol.for("react.fundamental"):60117,tU=qr?Symbol.for("react.responder"):60118,nU=qr?Symbol.for("react.scope"):60119;function Mo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Kw:switch(e=e.type,e){case Jw:case Qy:case Hy:case Ky:case Xy:case t0:return e;default:switch(e=e&&e.$$typeof,e){case Jy:case e0:case r0:case n0:case Yy:return e;default:return t}}case Yw:return t}}}function NA(e){return Mo(e)===Qy}kn.AsyncMode=Jw;kn.ConcurrentMode=Qy;kn.ContextConsumer=Jy;kn.ContextProvider=Yy;kn.Element=Kw;kn.ForwardRef=e0;kn.Fragment=Hy;kn.Lazy=r0;kn.Memo=n0;kn.Portal=Yw;kn.Profiler=Ky;kn.StrictMode=Xy;kn.Suspense=t0;kn.isAsyncMode=function(e){return NA(e)||Mo(e)===Jw};kn.isConcurrentMode=NA;kn.isContextConsumer=function(e){return Mo(e)===Jy};kn.isContextProvider=function(e){return Mo(e)===Yy};kn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kw};kn.isForwardRef=function(e){return Mo(e)===e0};kn.isFragment=function(e){return Mo(e)===Hy};kn.isLazy=function(e){return Mo(e)===r0};kn.isMemo=function(e){return Mo(e)===n0};kn.isPortal=function(e){return Mo(e)===Yw};kn.isProfiler=function(e){return Mo(e)===Ky};kn.isStrictMode=function(e){return Mo(e)===Xy};kn.isSuspense=function(e){return Mo(e)===t0};kn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Hy||e===Qy||e===Ky||e===Xy||e===t0||e===JN||typeof e=="object"&&e!==null&&(e.$$typeof===r0||e.$$typeof===n0||e.$$typeof===Yy||e.$$typeof===Jy||e.$$typeof===e0||e.$$typeof===eU||e.$$typeof===tU||e.$$typeof===nU||e.$$typeof===QN)};kn.typeOf=Mo;VA.exports=kn;var UA=VA.exports,rU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},iU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},jA={};jA[UA.ForwardRef]=rU;jA[UA.Memo]=iU;var oU=!0;function GA(e,t,n){var o="";return n.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):o+=l+" "}),o}var Qw=function(t,n,o){var l=t.key+"-"+n.name;(o===!1||oU===!1)&&t.registered[l]===void 0&&(t.registered[l]=n.styles)},eb=function(t,n,o){Qw(t,n,o);var l=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var h=n;do t.insert(n===h?"."+l:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function aU(e){for(var t=0,n,o=0,l=e.length;l>=4;++o,l-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var sU={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},lU=/[A-Z]|^ms/g,uU=/_EMO_([^_]+?)_([^]*?)_EMO_/g,WA=function(t){return t.charCodeAt(1)===45},bT=function(t){return t!=null&&typeof t!="boolean"},yv=$A(function(e){return WA(e)?e:e.replace(lU,"-$&").toLowerCase()}),ST=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(uU,function(o,l,h){return Pa={name:l,styles:h,next:Pa},l})}return sU[t]!==1&&!WA(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ff(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Pa={name:n.name,styles:n.styles,next:Pa},n.name;if(n.styles!==void 0){var o=n.next;if(o!==void 0)for(;o!==void 0;)Pa={name:o.name,styles:o.styles,next:Pa},o=o.next;var l=n.styles+";";return l}return cU(e,t,n)}case"function":{if(e!==void 0){var h=Pa,y=n(e);return Pa=h,Ff(e,t,y)}break}}if(t==null)return n;var u=t[n];return u!==void 0?u:n}function cU(e,t,n){var o="";if(Array.isArray(n))for(var l=0;l<n.length;l++)o+=Ff(e,t,n[l])+";";else for(var h in n){var y=n[h];if(typeof y!="object")t!=null&&t[y]!==void 0?o+=h+"{"+t[y]+"}":bT(y)&&(o+=yv(h)+":"+ST(h,y)+";");else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var u=0;u<y.length;u++)bT(y[u])&&(o+=yv(h)+":"+ST(h,y[u])+";");else{var S=Ff(e,t,y);switch(h){case"animation":case"animationName":{o+=yv(h)+":"+S+";";break}default:o+=h+"{"+S+"}"}}}return o}var ET=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Pa,tb=function(t,n,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,h="";Pa=void 0;var y=t[0];y==null||y.raw===void 0?(l=!1,h+=Ff(o,n,y)):h+=y[0];for(var u=1;u<t.length;u++)h+=Ff(o,n,t[u]),l&&(h+=y[u]);ET.lastIndex=0;for(var S="",w;(w=ET.exec(h))!==null;)S+="-"+w[1];var C=aU(h)+S;return{name:C,styles:h,next:Pa}},hU=function(t){return t()},qA=Fv["useInsertionEffect"]?Fv["useInsertionEffect"]:!1,ZA=qA||hU,kT=qA||W.exports.useLayoutEffect,i0={}.hasOwnProperty,HA=W.exports.createContext(typeof HTMLElement!="undefined"?YN({key:"css"}):null);HA.Provider;var nb=function(t){return W.exports.forwardRef(function(n,o){var l=W.exports.useContext(HA);return t(n,l,o)})},o0=W.exports.createContext({}),vx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",XA=function(t,n){var o={};for(var l in n)i0.call(n,l)&&(o[l]=n[l]);return o[vx]=t,o},dU=function(t){var n=t.cache,o=t.serialized,l=t.isStringTag;return Qw(n,o,l),ZA(function(){return eb(n,o,l)}),null},KA=nb(function(e,t,n){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var l=e[vx],h=[o],y="";typeof e.className=="string"?y=GA(t.registered,h,e.className):e.className!=null&&(y=e.className+" ");var u=tb(h,void 0,W.exports.useContext(o0));y+=t.key+"-"+u.name;var S={};for(var w in e)i0.call(e,w)&&w!=="css"&&w!==vx&&(S[w]=e[w]);return S.ref=n,S.className=y,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(dU,{cache:t,serialized:u,isStringTag:typeof l=="string"}),W.exports.createElement(l,S))}),xo=If;function wt(e,t,n){return i0.call(t,"css")?Oe(KA,XA(e,t),n):Oe(e,t,n)}function Ri(e,t,n){return i0.call(t,"css")?Pt(KA,XA(e,t),n):Pt(e,t,n)}const fU={black:"#000",white:"#fff"};var Of=fU;const pU={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var mc=pU;const mU={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var gc=mU;const gU={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var yc=gU;const yU={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var _c=yU;const _U={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var vc=_U;const vU={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Ld=vU;const xU={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var wU=xU;function vi(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var bU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,SU=$A(function(e){return bU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),EU=nb(function(e,t){var n=e.styles,o=tb([n],void 0,W.exports.useContext(o0)),l=W.exports.useRef();return kT(function(){var h=t.key+"-global",y=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,S=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),S!==null&&(u=!0,S.setAttribute("data-emotion",h),y.hydrate([S])),l.current=[y,u],function(){y.flush()}},[t]),kT(function(){var h=l.current,y=h[0],u=h[1];if(u){h[1]=!1;return}if(o.next!==void 0&&eb(t,o.next,!0),y.tags.length){var S=y.tags[y.tags.length-1].nextElementSibling;y.before=S,y.flush()}t.insert("",o,y,!1)},[t,o.name]),null}),kU=SU,TU=function(t){return t!=="theme"},TT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?kU:TU},CT=function(t,n,o){var l;if(n){var h=n.shouldForwardProp;l=t.__emotion_forwardProp&&h?function(y){return t.__emotion_forwardProp(y)&&h(y)}:h}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},CU=function(t){var n=t.cache,o=t.serialized,l=t.isStringTag;return Qw(n,o,l),ZA(function(){return eb(n,o,l)}),null},PU=function e(t,n){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,h,y;n!==void 0&&(h=n.label,y=n.target);var u=CT(t,n,o),S=u||TT(l),w=!S("as");return function(){var C=arguments,A=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&A.push("label:"+h+";"),C[0]==null||C[0].raw===void 0)A.push.apply(A,C);else{A.push(C[0][0]);for(var z=C.length,G=1;G<z;G++)A.push(C[G],C[0][G])}var Z=nb(function(H,fe,B){var V=w&&H.as||l,K="",le=[],ue=H;if(H.theme==null){ue={};for(var ge in H)ue[ge]=H[ge];ue.theme=W.exports.useContext(o0)}typeof H.className=="string"?K=GA(fe.registered,le,H.className):H.className!=null&&(K=H.className+" ");var ye=tb(A.concat(le),fe.registered,ue);K+=fe.key+"-"+ye.name,y!==void 0&&(K+=" "+y);var Ee=w&&u===void 0?TT(V):S,je={};for(var ke in H)w&&ke==="as"||Ee(ke)&&(je[ke]=H[ke]);return je.className=K,je.ref=B,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(CU,{cache:fe,serialized:ye,isStringTag:typeof V=="string"}),W.exports.createElement(V,je))});return Z.displayName=h!==void 0?h:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",Z.defaultProps=t.defaultProps,Z.__emotion_real=Z,Z.__emotion_base=l,Z.__emotion_styles=A,Z.__emotion_forwardProp=u,Object.defineProperty(Z,"toString",{value:function(){return"."+y}}),Z.withComponent=function(H,fe){return e(H,Ze({},n,fe,{shouldForwardProp:CT(Z,fe,!0)})).apply(void 0,A)},Z}},IU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],xx=PU.bind();IU.forEach(function(e){xx[e]=xx(e)});var MU=xx;function AU(e){return e==null||Object.keys(e).length===0}function zU(e){const{styles:t,defaultTheme:n={}}=e;return Oe(EU,{styles:typeof t=="function"?l=>t(AU(l)?n:l):t})}/** @license MUI v5.10.16
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function YA(e,t){return MU(e,t)}const DU=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Zd(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function ss(e,t,n={clone:!0}){const o=n.clone?Ze({},e):e;return Zd(e)&&Zd(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(Zd(t[l])&&l in e&&Zd(e[l])?o[l]=ss(e[l],t[l],n):o[l]=t[l])}),o}function uu(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Fa(e){if(typeof e!="string")throw new Error(uu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function RU(e,t=166){let n;function o(...l){const h=()=>{e.apply(this,l)};clearTimeout(n),n=setTimeout(h,t)}return o.clear=()=>{clearTimeout(n)},o}function LU(e){return e&&e.ownerDocument||document}function PT(e){return LU(e).defaultView||window}function FU(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const OU=typeof window!="undefined"?W.exports.useLayoutEffect:W.exports.useEffect;var rb=OU;function JA(...e){return W.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{FU(n,t)})},e)}function $U(e,t){const n=Ze({},t);return Object.keys(e).forEach(o=>{n[o]===void 0&&(n[o]=e[o])}),n}function ib(e,t,n){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((h,y)=>(y&&(h.push(t(y)),n&&n[y]&&h.push(n[y])),h),[]).join(" ")}),o}const IT=e=>e,BU=()=>{let e=IT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=IT}}},VU=BU();var QA=VU;const NU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a0(e,t,n="Mui"){const o=NU[t];return o?`${n}-${o}`:`${QA.generate(e)}-${t}`}function ob(e,t,n="Mui"){const o={};return t.forEach(l=>{o[l]=a0(e,l,n)}),o}function lf(e,t){return t?ss(e,t,{clone:!1}):e}const ab={xs:0,sm:600,md:900,lg:1200,xl:1536},MT={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${ab[e]}px)`};function ul(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const h=o.breakpoints||MT;return t.reduce((y,u,S)=>(y[h.up(h.keys[S])]=n(t[S]),y),{})}if(typeof t=="object"){const h=o.breakpoints||MT;return Object.keys(t).reduce((y,u)=>{if(Object.keys(h.values||ab).indexOf(u)!==-1){const S=h.up(u);y[S]=n(t[u],u)}else{const S=u;y[S]=t[S]}return y},{})}return n(t)}function UU(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const h=e.up(l);return o[h]={},o},{}))||{}}function jU(e,t){return e.reduce((n,o)=>{const l=n[o];return(!l||Object.keys(l).length===0)&&delete n[o],n},t)}function sb(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((l,h)=>l&&l[h]?l[h]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function AT(e,t,n,o=n){let l;return typeof e=="function"?l=e(n):Array.isArray(e)?l=e[n]||o:l=sb(e,n)||o,t&&(l=t(l,o)),l}function gt(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:l}=e,h=y=>{if(y[t]==null)return null;const u=y[t],S=y.theme,w=sb(S,o)||{};return ul(y,u,A=>{let z=AT(w,l,A);return A===z&&typeof A=="string"&&(z=AT(w,l,`${t}${A==="default"?"":Fa(A)}`,A)),n===!1?z:{[n]:z}})};return h.propTypes={},h.filterProps=[t],h}function cl(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(h=>{o[h]=l}),o),{}),n=o=>Object.keys(o).reduce((l,h)=>t[h]?lf(l,t[h](o)):l,{});return n.propTypes={},n.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),n}function GU(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const WU={m:"margin",p:"padding"},qU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},zT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ZU=GU(e=>{if(e.length>2)if(zT[e])e=zT[e];else return[e];const[t,n]=e.split(""),o=WU[t],l=qU[n]||"";return Array.isArray(l)?l.map(h=>o+h):[o+l]}),HU=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],XU=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],e3=[...HU,...XU];function Yf(e,t,n,o){var l;const h=(l=sb(e,t,!1))!=null?l:n;return typeof h=="number"?y=>typeof y=="string"?y:h*y:Array.isArray(h)?y=>typeof y=="string"?y:h[y]:typeof h=="function"?h:()=>{}}function t3(e){return Yf(e,"spacing",8)}function Jf(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),o=e(n);return t>=0?o:typeof o=="number"?-o:`-${o}`}function KU(e,t){return n=>e.reduce((o,l)=>(o[l]=Jf(t,n),o),{})}function YU(e,t,n,o){if(t.indexOf(n)===-1)return null;const l=ZU(n),h=KU(l,o),y=e[n];return ul(e,y,h)}function JU(e,t){const n=t3(e.theme);return Object.keys(e).map(o=>YU(e,t,o,n)).reduce(lf,{})}function s0(e){return JU(e,e3)}s0.propTypes={};s0.filterProps=e3;function Qf(e){return typeof e!="number"?e:`${e}px solid`}const QU=gt({prop:"border",themeKey:"borders",transform:Qf}),e9=gt({prop:"borderTop",themeKey:"borders",transform:Qf}),t9=gt({prop:"borderRight",themeKey:"borders",transform:Qf}),n9=gt({prop:"borderBottom",themeKey:"borders",transform:Qf}),r9=gt({prop:"borderLeft",themeKey:"borders",transform:Qf}),i9=gt({prop:"borderColor",themeKey:"palette"}),o9=gt({prop:"borderTopColor",themeKey:"palette"}),a9=gt({prop:"borderRightColor",themeKey:"palette"}),s9=gt({prop:"borderBottomColor",themeKey:"palette"}),l9=gt({prop:"borderLeftColor",themeKey:"palette"}),lb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Yf(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:Jf(t,o)});return ul(e,e.borderRadius,n)}return null};lb.propTypes={};lb.filterProps=["borderRadius"];const u9=cl(QU,e9,t9,n9,r9,i9,o9,a9,s9,l9,lb);var n3=u9;const c9=gt({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),h9=gt({prop:"display"}),d9=gt({prop:"overflow"}),f9=gt({prop:"textOverflow"}),p9=gt({prop:"visibility"}),m9=gt({prop:"whiteSpace"});var r3=cl(c9,h9,d9,f9,p9,m9);const g9=gt({prop:"flexBasis"}),y9=gt({prop:"flexDirection"}),_9=gt({prop:"flexWrap"}),v9=gt({prop:"justifyContent"}),x9=gt({prop:"alignItems"}),w9=gt({prop:"alignContent"}),b9=gt({prop:"order"}),S9=gt({prop:"flex"}),E9=gt({prop:"flexGrow"}),k9=gt({prop:"flexShrink"}),T9=gt({prop:"alignSelf"}),C9=gt({prop:"justifyItems"}),P9=gt({prop:"justifySelf"}),I9=cl(g9,y9,_9,v9,x9,w9,b9,S9,E9,k9,T9,C9,P9);var i3=I9;const ub=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Yf(e.theme,"spacing",8),n=o=>({gap:Jf(t,o)});return ul(e,e.gap,n)}return null};ub.propTypes={};ub.filterProps=["gap"];const cb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Yf(e.theme,"spacing",8),n=o=>({columnGap:Jf(t,o)});return ul(e,e.columnGap,n)}return null};cb.propTypes={};cb.filterProps=["columnGap"];const hb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Yf(e.theme,"spacing",8),n=o=>({rowGap:Jf(t,o)});return ul(e,e.rowGap,n)}return null};hb.propTypes={};hb.filterProps=["rowGap"];const M9=gt({prop:"gridColumn"}),A9=gt({prop:"gridRow"}),z9=gt({prop:"gridAutoFlow"}),D9=gt({prop:"gridAutoColumns"}),R9=gt({prop:"gridAutoRows"}),L9=gt({prop:"gridTemplateColumns"}),F9=gt({prop:"gridTemplateRows"}),O9=gt({prop:"gridTemplateAreas"}),$9=gt({prop:"gridArea"}),B9=cl(ub,cb,hb,M9,A9,z9,D9,R9,L9,F9,O9,$9);var o3=B9;function db(e,t){return t==="grey"?t:e}const V9=gt({prop:"color",themeKey:"palette",transform:db}),N9=gt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:db}),U9=gt({prop:"backgroundColor",themeKey:"palette",transform:db}),j9=cl(V9,N9,U9);var a3=j9;const G9=gt({prop:"position"}),W9=gt({prop:"zIndex",themeKey:"zIndex"}),q9=gt({prop:"top"}),Z9=gt({prop:"right"}),H9=gt({prop:"bottom"}),X9=gt({prop:"left"});var s3=cl(G9,W9,q9,Z9,H9,X9);const K9=gt({prop:"boxShadow",themeKey:"shadows"});var l3=K9;function hl(e){return e<=1&&e!==0?`${e*100}%`:e}const Y9=gt({prop:"width",transform:hl}),u3=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,l,h;return{maxWidth:((o=e.theme)==null||(l=o.breakpoints)==null||(h=l.values)==null?void 0:h[n])||ab[n]||hl(n)}};return ul(e,e.maxWidth,t)}return null};u3.filterProps=["maxWidth"];const J9=gt({prop:"minWidth",transform:hl}),Q9=gt({prop:"height",transform:hl}),e7=gt({prop:"maxHeight",transform:hl}),t7=gt({prop:"minHeight",transform:hl});gt({prop:"size",cssProperty:"width",transform:hl});gt({prop:"size",cssProperty:"height",transform:hl});const n7=gt({prop:"boxSizing"}),r7=cl(Y9,u3,J9,Q9,e7,t7,n7);var c3=r7;const i7=gt({prop:"fontFamily",themeKey:"typography"}),o7=gt({prop:"fontSize",themeKey:"typography"}),a7=gt({prop:"fontStyle",themeKey:"typography"}),s7=gt({prop:"fontWeight",themeKey:"typography"}),l7=gt({prop:"letterSpacing"}),u7=gt({prop:"textTransform"}),c7=gt({prop:"lineHeight"}),h7=gt({prop:"textAlign"}),d7=gt({prop:"typography",cssProperty:!1,themeKey:"typography"}),f7=cl(d7,i7,o7,a7,s7,l7,c7,h7,u7);var h3=f7;const DT={borders:n3.filterProps,display:r3.filterProps,flexbox:i3.filterProps,grid:o3.filterProps,positions:s3.filterProps,palette:a3.filterProps,shadows:l3.filterProps,sizing:c3.filterProps,spacing:s0.filterProps,typography:h3.filterProps},d3={borders:n3,display:r3,flexbox:i3,grid:o3,positions:s3,palette:a3,shadows:l3,sizing:c3,spacing:s0,typography:h3},p7=Object.keys(DT).reduce((e,t)=>(DT[t].forEach(n=>{e[n]=d3[t]}),e),{});function m7(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function g7(e,t){return typeof e=="function"?e(t):e}function y7(e=d3){const t=Object.keys(e).reduce((l,h)=>(e[h].filterProps.forEach(y=>{l[y]=e[h]}),l),{});function n(l,h,y){const u={[l]:h,theme:y},S=t[l];return S?S(u):{[l]:h}}function o(l){const{sx:h,theme:y={}}=l||{};if(!h)return null;function u(S){let w=S;if(typeof S=="function")w=S(y);else if(typeof S!="object")return S;if(!w)return null;const C=UU(y.breakpoints),A=Object.keys(C);let z=C;return Object.keys(w).forEach(G=>{const Z=g7(w[G],y);if(Z!=null)if(typeof Z=="object")if(t[G])z=lf(z,n(G,Z,y));else{const H=ul({theme:y},Z,fe=>({[G]:fe}));m7(H,Z)?z[G]=o({sx:Z,theme:y}):z=lf(z,H)}else z=lf(z,n(G,Z,y))}),jU(A,z)}return Array.isArray(h)?h.map(u):u(h)}return o}const f3=y7();f3.filterProps=["sx"];var p3=f3;const _7=["sx"],v7=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(n=>{p7[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function x7(e){const{sx:t}=e,n=vi(e,_7),{systemProps:o,otherProps:l}=v7(n);let h;return Array.isArray(t)?h=[o,...t]:typeof t=="function"?h=(...y)=>{const u=t(...y);return Zd(u)?Ze({},o,u):o}:h=Ze({},o,t),Ze({},l,{sx:h})}function m3(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=m3(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function $f(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=m3(e))&&(o&&(o+=" "),o+=t);return o}const w7=["values","unit","step"],b7=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>Ze({},n,{[o.key]:o.val}),{})};function S7(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,l=vi(e,w7),h=b7(t),y=Object.keys(h);function u(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n})`}function S(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-o/100}${n})`}function w(z,G){const Z=y.indexOf(G);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n}) and (max-width:${(Z!==-1&&typeof t[y[Z]]=="number"?t[y[Z]]:G)-o/100}${n})`}function C(z){return y.indexOf(z)+1<y.length?w(z,y[y.indexOf(z)+1]):u(z)}function A(z){const G=y.indexOf(z);return G===0?u(y[1]):G===y.length-1?S(y[G]):w(z,y[y.indexOf(z)+1]).replace("@media","@media not all and")}return Ze({keys:y,values:h,up:u,down:S,between:w,only:C,not:A,unit:n},l)}const E7={borderRadius:4};var k7=E7;function T7(e=8){if(e.mui)return e;const t=t3({spacing:e}),n=(...o)=>(o.length===0?[1]:o).map(h=>{const y=t(h);return typeof y=="number"?`${y}px`:y}).join(" ");return n.mui=!0,n}const C7=["breakpoints","palette","spacing","shape"];function fb(e={},...t){const{breakpoints:n={},palette:o={},spacing:l,shape:h={}}=e,y=vi(e,C7),u=S7(n),S=T7(l);let w=ss({breakpoints:u,direction:"ltr",components:{},palette:Ze({mode:"light"},o),spacing:S,shape:Ze({},k7,h)},y);return w=t.reduce((C,A)=>ss(C,A),w),w}const P7=W.exports.createContext(null);var g3=P7;function y3(){return W.exports.useContext(g3)}const I7=typeof Symbol=="function"&&Symbol.for;var M7=I7?Symbol.for("mui.nested"):"__THEME_NESTED__";function A7(e,t){return typeof t=="function"?t(e):Ze({},e,t)}function z7(e){const{children:t,theme:n}=e,o=y3(),l=W.exports.useMemo(()=>{const h=o===null?n:A7(o,n);return h!=null&&(h[M7]=o!==null),h},[n,o]);return Oe(g3.Provider,{value:l,children:t})}function D7(e){return Object.keys(e).length===0}function R7(e=null){const t=y3();return!t||D7(t)?e:t}const L7=fb();function pb(e=L7){return R7(e)}const F7=["className","component"];function O7(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:o,styleFunctionSx:l=p3}=e,h=YA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(l);return W.exports.forwardRef(function(S,w){const C=pb(t),A=x7(S),{className:z,component:G="div"}=A,Z=vi(A,F7);return Oe(h,Ze({as:G,ref:w,className:$f(z,o?o(n):n),theme:C},Z))})}const $7=["variant"];function RT(e){return e.length===0}function _3(e){const{variant:t}=e,n=vi(e,$7);let o=t||"";return Object.keys(n).sort().forEach(l=>{l==="color"?o+=RT(o)?e[l]:Fa(e[l]):o+=`${RT(o)?l:Fa(l)}${Fa(e[l].toString())}`}),o}const B7=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],V7=["theme"],N7=["theme"];function Fd(e){return Object.keys(e).length===0}function U7(e){return typeof e=="string"&&e.charCodeAt(0)>96}const j7=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,G7=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const o={};return n.forEach(l=>{const h=_3(l.props);o[h]=l.style}),o},W7=(e,t,n,o)=>{var l,h;const{ownerState:y={}}=e,u=[],S=n==null||(l=n.components)==null||(h=l[o])==null?void 0:h.variants;return S&&S.forEach(w=>{let C=!0;Object.keys(w.props).forEach(A=>{y[A]!==w.props[A]&&e[A]!==w.props[A]&&(C=!1)}),C&&u.push(t[_3(w.props)])}),u};function gg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const q7=fb();function Z7(e={}){const{defaultTheme:t=q7,rootShouldForwardProp:n=gg,slotShouldForwardProp:o=gg,styleFunctionSx:l=p3}=e,h=y=>{const u=Fd(y.theme)?t:y.theme;return l(Ze({},y,{theme:u}))};return h.__mui_systemSx=!0,(y,u={})=>{DU(y,le=>le.filter(ue=>!(ue!=null&&ue.__mui_systemSx)));const{name:S,slot:w,skipVariantsResolver:C,skipSx:A,overridesResolver:z}=u,G=vi(u,B7),Z=C!==void 0?C:w&&w!=="Root"||!1,H=A||!1;let fe,B=gg;w==="Root"?B=n:w?B=o:U7(y)&&(B=void 0);const V=YA(y,Ze({shouldForwardProp:B,label:fe},G)),K=(le,...ue)=>{const ge=ue?ue.map(ke=>typeof ke=="function"&&ke.__emotion_real!==ke?Ve=>{let{theme:$t}=Ve,Tt=vi(Ve,V7);return ke(Ze({theme:Fd($t)?t:$t},Tt))}:ke):[];let ye=le;S&&z&&ge.push(ke=>{const Ve=Fd(ke.theme)?t:ke.theme,$t=j7(S,Ve);if($t){const Tt={};return Object.entries($t).forEach(([Ct,Nt])=>{Tt[Ct]=typeof Nt=="function"?Nt(Ze({},ke,{theme:Ve})):Nt}),z(ke,Tt)}return null}),S&&!Z&&ge.push(ke=>{const Ve=Fd(ke.theme)?t:ke.theme;return W7(ke,G7(S,Ve),Ve,S)}),H||ge.push(h);const Ee=ge.length-ue.length;if(Array.isArray(le)&&Ee>0){const ke=new Array(Ee).fill("");ye=[...le,...ke],ye.raw=[...le.raw,...ke]}else typeof le=="function"&&le.__emotion_real!==le&&(ye=ke=>{let{theme:Ve}=ke,$t=vi(ke,N7);return le(Ze({theme:Fd(Ve)?t:Ve},$t))});return V(ye,...ge)};return V.withConfig&&(K.withConfig=V.withConfig),K}}function H7(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:$U(t.components[n].defaultProps,o)}function X7({props:e,name:t,defaultTheme:n}){const o=pb(n);return H7({theme:o,name:t,props:e})}function mb(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function K7(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function cu(e){if(e.type)return e;if(e.charAt(0)==="#")return cu(K7(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(uu(9,e));let o=e.substring(t+1,e.length-1),l;if(n==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(uu(10,l))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:n,values:o,colorSpace:l}}function l0(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,h)=>h<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function Y7(e){e=cu(e);const{values:t}=e,n=t[0],o=t[1]/100,l=t[2]/100,h=o*Math.min(l,1-l),y=(w,C=(w+n/30)%12)=>l-h*Math.max(Math.min(C-3,9-C,1),-1);let u="rgb";const S=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(u+="a",S.push(t[3])),l0({type:u,values:S})}function LT(e){e=cu(e);let t=e.type==="hsl"||e.type==="hsla"?cu(Y7(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function J7(e,t){const n=LT(e),o=LT(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function FT(e,t){return e=cu(e),t=mb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,l0(e)}function Q7(e,t){if(e=cu(e),t=mb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return l0(e)}function ej(e,t){if(e=cu(e),t=mb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return l0(e)}const tj={};function nj(e){const t=pb();return Oe(o0.Provider,{value:typeof t=="object"?t:tj,children:e.children})}function rj(e){const{children:t,theme:n}=e;return Oe(z7,{theme:n,children:Oe(nj,{children:t})})}function ij(e,t){return Ze({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const oj=["mode","contrastThreshold","tonalOffset"],OT={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Of.white,default:Of.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_v={text:{primary:Of.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Of.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function $T(e,t,n,o){const l=o.light||o,h=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=ej(e.main,l):t==="dark"&&(e.dark=Q7(e.main,h)))}function aj(e="light"){return e==="dark"?{main:yc[200],light:yc[50],dark:yc[400]}:{main:yc[700],light:yc[400],dark:yc[800]}}function sj(e="light"){return e==="dark"?{main:gc[200],light:gc[50],dark:gc[400]}:{main:gc[500],light:gc[300],dark:gc[700]}}function lj(e="light"){return e==="dark"?{main:mc[500],light:mc[300],dark:mc[700]}:{main:mc[700],light:mc[400],dark:mc[800]}}function uj(e="light"){return e==="dark"?{main:_c[400],light:_c[300],dark:_c[700]}:{main:_c[700],light:_c[500],dark:_c[900]}}function cj(e="light"){return e==="dark"?{main:vc[400],light:vc[300],dark:vc[700]}:{main:vc[800],light:vc[500],dark:vc[900]}}function hj(e="light"){return e==="dark"?{main:Ld[400],light:Ld[300],dark:Ld[700]}:{main:"#ed6c02",light:Ld[500],dark:Ld[900]}}function dj(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,l=vi(e,oj),h=e.primary||aj(t),y=e.secondary||sj(t),u=e.error||lj(t),S=e.info||uj(t),w=e.success||cj(t),C=e.warning||hj(t);function A(H){return J7(H,_v.text.primary)>=n?_v.text.primary:OT.text.primary}const z=({color:H,name:fe,mainShade:B=500,lightShade:V=300,darkShade:K=700})=>{if(H=Ze({},H),!H.main&&H[B]&&(H.main=H[B]),!H.hasOwnProperty("main"))throw new Error(uu(11,fe?` (${fe})`:"",B));if(typeof H.main!="string")throw new Error(uu(12,fe?` (${fe})`:"",JSON.stringify(H.main)));return $T(H,"light",V,o),$T(H,"dark",K,o),H.contrastText||(H.contrastText=A(H.main)),H},G={dark:_v,light:OT};return ss(Ze({common:Ze({},Of),mode:t,primary:z({color:h,name:"primary"}),secondary:z({color:y,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:u,name:"error"}),warning:z({color:C,name:"warning"}),info:z({color:S,name:"info"}),success:z({color:w,name:"success"}),grey:wU,contrastThreshold:n,getContrastText:A,augmentColor:z,tonalOffset:o},G[t]),l)}const fj=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function pj(e){return Math.round(e*1e5)/1e5}const BT={textTransform:"uppercase"},VT='"Roboto", "Helvetica", "Arial", sans-serif';function mj(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:o=VT,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:y=400,fontWeightMedium:u=500,fontWeightBold:S=700,htmlFontSize:w=16,allVariants:C,pxToRem:A}=n,z=vi(n,fj),G=l/14,Z=A||(B=>`${B/w*G}rem`),H=(B,V,K,le,ue)=>Ze({fontFamily:o,fontWeight:B,fontSize:Z(V),lineHeight:K},o===VT?{letterSpacing:`${pj(le/V)}em`}:{},ue,C),fe={h1:H(h,96,1.167,-1.5),h2:H(h,60,1.2,-.5),h3:H(y,48,1.167,0),h4:H(y,34,1.235,.25),h5:H(y,24,1.334,0),h6:H(u,20,1.6,.15),subtitle1:H(y,16,1.75,.15),subtitle2:H(u,14,1.57,.1),body1:H(y,16,1.5,.15),body2:H(y,14,1.43,.15),button:H(u,14,1.75,.4,BT),caption:H(y,12,1.66,.4),overline:H(y,12,2.66,1,BT)};return ss(Ze({htmlFontSize:w,pxToRem:Z,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:y,fontWeightMedium:u,fontWeightBold:S},fe),z,{clone:!1})}const gj=.2,yj=.14,_j=.12;function Xn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${gj})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${yj})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${_j})`].join(",")}const vj=["none",Xn(0,2,1,-1,0,1,1,0,0,1,3,0),Xn(0,3,1,-2,0,2,2,0,0,1,5,0),Xn(0,3,3,-2,0,3,4,0,0,1,8,0),Xn(0,2,4,-1,0,4,5,0,0,1,10,0),Xn(0,3,5,-1,0,5,8,0,0,1,14,0),Xn(0,3,5,-1,0,6,10,0,0,1,18,0),Xn(0,4,5,-2,0,7,10,1,0,2,16,1),Xn(0,5,5,-3,0,8,10,1,0,3,14,2),Xn(0,5,6,-3,0,9,12,1,0,3,16,2),Xn(0,6,6,-3,0,10,14,1,0,4,18,3),Xn(0,6,7,-4,0,11,15,1,0,4,20,3),Xn(0,7,8,-4,0,12,17,2,0,5,22,4),Xn(0,7,8,-4,0,13,19,2,0,5,24,4),Xn(0,7,9,-4,0,14,21,2,0,5,26,4),Xn(0,8,9,-5,0,15,22,2,0,6,28,5),Xn(0,8,10,-5,0,16,24,2,0,6,30,5),Xn(0,8,11,-5,0,17,26,2,0,6,32,5),Xn(0,9,11,-5,0,18,28,2,0,7,34,6),Xn(0,9,12,-6,0,19,29,2,0,7,36,6),Xn(0,10,13,-6,0,20,31,3,0,8,38,7),Xn(0,10,13,-6,0,21,33,3,0,8,40,7),Xn(0,10,14,-6,0,22,35,3,0,8,42,7),Xn(0,11,14,-7,0,23,36,3,0,9,44,8),Xn(0,11,15,-7,0,24,38,3,0,9,46,8)];var xj=vj;const wj=["duration","easing","delay"],bj={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NT(e){return`${Math.round(e)}ms`}function Ej(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function kj(e){const t=Ze({},bj,e.easing),n=Ze({},Sj,e.duration);return Ze({getAutoHeightDuration:Ej,create:(l=["all"],h={})=>{const{duration:y=n.standard,easing:u=t.easeInOut,delay:S=0}=h;return vi(h,wj),(Array.isArray(l)?l:[l]).map(w=>`${w} ${typeof y=="string"?y:NT(y)} ${u} ${typeof S=="string"?S:NT(S)}`).join(",")}},e,{easing:t,duration:n})}const Tj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var Cj=Tj;const Pj=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function gb(e={},...t){const{mixins:n={},palette:o={},transitions:l={},typography:h={}}=e,y=vi(e,Pj);if(e.vars)throw new Error(uu(18));const u=dj(o),S=fb(e);let w=ss(S,{mixins:ij(S.breakpoints,n),palette:u,shadows:xj.slice(),typography:mj(u,h),transitions:kj(l),zIndex:Ze({},Cj)});return w=ss(w,y),w=t.reduce((C,A)=>ss(C,A),w),w}const Ij=gb();var yb=Ij;function _b({props:e,name:t}){return X7({props:e,name:t,defaultTheme:yb})}const Mj=e=>gg(e)&&e!=="classes",Aj=Z7({defaultTheme:yb,rootShouldForwardProp:Mj});var _h=Aj;const zj=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var UT=zj;function jT(e){return typeof e=="string"}function vb(e){const{children:t,defer:n=!1,fallback:o=null}=e,[l,h]=W.exports.useState(!1);return rb(()=>{n||h(!0)},[n]),W.exports.useEffect(()=>{n&&h(!0)},[n]),Oe(W.exports.Fragment,{children:l?t:o})}const Dj=["onChange","maxRows","minRows","style","value"];function $m(e,t){return parseInt(e[t],10)||0}const Rj={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function GT(e){return e==null||Object.keys(e).length===0}const Lj=W.exports.forwardRef(function(t,n){const{onChange:o,maxRows:l,minRows:h=1,style:y,value:u}=t,S=vi(t,Dj),{current:w}=W.exports.useRef(u!=null),C=W.exports.useRef(null),A=JA(n,C),z=W.exports.useRef(null),G=W.exports.useRef(0),[Z,H]=W.exports.useState({}),fe=W.exports.useCallback(()=>{const ue=C.current,ye=PT(ue).getComputedStyle(ue);if(ye.width==="0px")return{};const Ee=z.current;Ee.style.width=ye.width,Ee.value=ue.value||t.placeholder||"x",Ee.value.slice(-1)===`
`&&(Ee.value+=" ");const je=ye["box-sizing"],ke=$m(ye,"padding-bottom")+$m(ye,"padding-top"),Ve=$m(ye,"border-bottom-width")+$m(ye,"border-top-width"),$t=Ee.scrollHeight;Ee.value="x";const Tt=Ee.scrollHeight;let Ct=$t;h&&(Ct=Math.max(Number(h)*Tt,Ct)),l&&(Ct=Math.min(Number(l)*Tt,Ct)),Ct=Math.max(Ct,Tt);const Nt=Ct+(je==="border-box"?ke+Ve:0),xn=Math.abs(Ct-$t)<=1;return{outerHeightStyle:Nt,overflow:xn}},[l,h,t.placeholder]),B=(ue,ge)=>{const{outerHeightStyle:ye,overflow:Ee}=ge;return G.current<20&&(ye>0&&Math.abs((ue.outerHeightStyle||0)-ye)>1||ue.overflow!==Ee)?(G.current+=1,{overflow:Ee,outerHeightStyle:ye}):ue},V=W.exports.useCallback(()=>{const ue=fe();GT(ue)||H(ge=>B(ge,ue))},[fe]),K=()=>{const ue=fe();GT(ue)||my.exports.flushSync(()=>{H(ge=>B(ge,ue))})};W.exports.useEffect(()=>{const ue=RU(()=>{G.current=0,C.current&&K()}),ge=PT(C.current);ge.addEventListener("resize",ue);let ye;return typeof ResizeObserver!="undefined"&&(ye=new ResizeObserver(ue),ye.observe(C.current)),()=>{ue.clear(),ge.removeEventListener("resize",ue),ye&&ye.disconnect()}}),rb(()=>{V()}),W.exports.useEffect(()=>{G.current=0},[u]);const le=ue=>{G.current=0,w||V(),o&&o(ue)};return Pt(W.exports.Fragment,{children:[Oe("textarea",Ze({value:u,onChange:le,ref:A,rows:h,style:Ze({height:Z.outerHeightStyle,overflow:Z.overflow?"hidden":null},y)},S)),Oe("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:z,tabIndex:-1,style:Ze({},Rj.shadow,y,{padding:0})})]})});var Fj=Lj;function Oj(e){return a0("MuiSvgIcon",e)}ob("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const $j=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Bj=e=>{const{color:t,fontSize:n,classes:o}=e,l={root:["root",t!=="inherit"&&`color${Fa(t)}`,`fontSize${Fa(n)}`]};return ib(l,Oj,o)},Vj=_h("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Fa(n.color)}`],t[`fontSize${Fa(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,o,l,h,y,u,S,w,C,A,z,G,Z,H,fe,B,V;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(o=n.create)==null?void 0:o.call(n,"fill",{duration:(l=e.transitions)==null||(h=l.duration)==null?void 0:h.shorter}),fontSize:{inherit:"inherit",small:((y=e.typography)==null||(u=y.pxToRem)==null?void 0:u.call(y,20))||"1.25rem",medium:((S=e.typography)==null||(w=S.pxToRem)==null?void 0:w.call(S,24))||"1.5rem",large:((C=e.typography)==null||(A=C.pxToRem)==null?void 0:A.call(C,35))||"2.1875rem"}[t.fontSize],color:(z=(G=(e.vars||e).palette)==null||(Z=G[t.color])==null?void 0:Z.main)!=null?z:{action:(H=(e.vars||e).palette)==null||(fe=H.action)==null?void 0:fe.active,disabled:(B=(e.vars||e).palette)==null||(V=B.action)==null?void 0:V.disabled,inherit:void 0}[t.color]}}),v3=W.exports.forwardRef(function(t,n){const o=_b({props:t,name:"MuiSvgIcon"}),{children:l,className:h,color:y="inherit",component:u="svg",fontSize:S="medium",htmlColor:w,inheritViewBox:C=!1,titleAccess:A,viewBox:z="0 0 24 24"}=o,G=vi(o,$j),Z=Ze({},o,{color:y,component:u,fontSize:S,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:z}),H={};C||(H.viewBox=z);const fe=Bj(Z);return Pt(Vj,Ze({as:u,className:$f(fe.root,h),focusable:"false",color:w,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},H,G,{ownerState:Z,children:[l,A?Oe("title",{children:A}):null]}))});v3.muiName="SvgIcon";var wx=v3;function vh(e,t){function n(o,l){return Oe(wx,Ze({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return n.muiName=wx.muiName,W.exports.memo(W.exports.forwardRef(n))}function Nj(e){return a0("MuiPaper",e)}ob("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Uj=["className","component","elevation","square","variant"],jj=e=>{const{square:t,elevation:n,variant:o,classes:l}=e,h={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return ib(h,Nj,l)},Gj=_h("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Ze({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ze({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${FT("#fff",UT(t.elevation))}, ${FT("#fff",UT(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),Wj=W.exports.forwardRef(function(t,n){const o=_b({props:t,name:"MuiPaper"}),{className:l,component:h="div",elevation:y=1,square:u=!1,variant:S="elevation"}=o,w=vi(o,Uj),C=Ze({},o,{component:h,elevation:y,square:u,variant:S}),A=jj(C);return Oe(Gj,Ze({as:h,ownerState:C,className:$f(A.root,l),ref:n},w))});var qj=Wj;function Zj({props:e,states:t,muiFormControl:n}){return t.reduce((o,l)=>(o[l]=e[l],n&&typeof e[l]=="undefined"&&(o[l]=n[l]),o),{})}const Hj=W.exports.createContext(void 0);var x3=Hj;function Xj(){return W.exports.useContext(x3)}function Kj(e){return Oe(zU,Ze({},e,{defaultTheme:yb}))}function WT(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Yj(e,t=!1){return e&&(WT(e.value)&&e.value!==""||t&&WT(e.defaultValue)&&e.defaultValue!=="")}function Jj(e){return a0("MuiInputBase",e)}const Qj=ob("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var bx=Qj;const eG=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],tG=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Fa(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},nG=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},rG=e=>{const{classes:t,color:n,disabled:o,error:l,endAdornment:h,focused:y,formControl:u,fullWidth:S,hiddenLabel:w,multiline:C,readOnly:A,size:z,startAdornment:G,type:Z}=e,H={root:["root",`color${Fa(n)}`,o&&"disabled",l&&"error",S&&"fullWidth",y&&"focused",u&&"formControl",z==="small"&&"sizeSmall",C&&"multiline",G&&"adornedStart",h&&"adornedEnd",w&&"hiddenLabel",A&&"readOnly"],input:["input",o&&"disabled",Z==="search"&&"inputTypeSearch",C&&"inputMultiline",z==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",G&&"inputAdornedStart",h&&"inputAdornedEnd",A&&"readOnly"]};return ib(H,Jj,t)},iG=_h("div",{name:"MuiInputBase",slot:"Root",overridesResolver:tG})(({theme:e,ownerState:t})=>Ze({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${bx.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ze({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),oG=_h("input",{name:"MuiInputBase",slot:"Input",overridesResolver:nG})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",o=Ze({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Ze({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${bx.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus:-ms-input-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${bx.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),aG=Oe(Kj,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),sG=W.exports.forwardRef(function(t,n){var o;const l=_b({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:y,autoFocus:u,className:S,components:w={},componentsProps:C={},defaultValue:A,disabled:z,disableInjectingGlobalStyles:G,endAdornment:Z,fullWidth:H=!1,id:fe,inputComponent:B="input",inputProps:V={},inputRef:K,maxRows:le,minRows:ue,multiline:ge=!1,name:ye,onBlur:Ee,onChange:je,onClick:ke,onFocus:Ve,onKeyDown:$t,onKeyUp:Tt,placeholder:Ct,readOnly:Nt,renderSuffix:xn,rows:dn,slotProps:Ne={},slots:at={},startAdornment:bt,type:Bt="text",value:lt}=l,zn=vi(l,eG),Jt=V.value!=null?V.value:lt,{current:Jn}=W.exports.useRef(Jt!=null),Ot=W.exports.useRef(),Wn=W.exports.useCallback(Mt=>{},[]),wi=JA(Ot,K,V.ref,Wn),[Ir,wr]=W.exports.useState(!1),Gt=Xj(),on=Zj({props:l,muiFormControl:Gt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});on.focused=Gt?Gt.focused:Ir,W.exports.useEffect(()=>{!Gt&&z&&Ir&&(wr(!1),Ee&&Ee())},[Gt,z,Ir,Ee]);const pr=Gt&&Gt.onFilled,Ce=Gt&&Gt.onEmpty,Fr=W.exports.useCallback(Mt=>{Yj(Mt)?pr&&pr():Ce&&Ce()},[pr,Ce]);rb(()=>{Jn&&Fr({value:Jt})},[Jt,Fr,Jn]);const ji=Mt=>{if(on.disabled){Mt.stopPropagation();return}Ve&&Ve(Mt),V.onFocus&&V.onFocus(Mt),Gt&&Gt.onFocus?Gt.onFocus(Mt):wr(!0)},Ht=Mt=>{Ee&&Ee(Mt),V.onBlur&&V.onBlur(Mt),Gt&&Gt.onBlur?Gt.onBlur(Mt):wr(!1)},qt=(Mt,...mr)=>{if(!Jn){const gr=Mt.target||Ot.current;if(gr==null)throw new Error(uu(1));Fr({value:gr.value})}V.onChange&&V.onChange(Mt,...mr),je&&je(Mt,...mr)};W.exports.useEffect(()=>{Fr(Ot.current)},[]);const lr=Mt=>{Ot.current&&Mt.currentTarget===Mt.target&&Ot.current.focus(),ke&&ke(Mt)};let ai=B,Or=V;ge&&ai==="input"&&(dn?Or=Ze({type:void 0,minRows:dn,maxRows:dn},Or):Or=Ze({type:void 0,maxRows:le,minRows:ue},Or),ai=Fj);const ga=Mt=>{Fr(Mt.animationName==="mui-auto-fill-cancel"?Ot.current:{value:"x"})};W.exports.useEffect(()=>{Gt&&Gt.setAdornedStart(Boolean(bt))},[Gt,bt]);const Dn=Ze({},l,{color:on.color||"primary",disabled:on.disabled,endAdornment:Z,error:on.error,focused:on.focused,formControl:Gt,fullWidth:H,hiddenLabel:on.hiddenLabel,multiline:ge,size:on.size,startAdornment:bt,type:Bt}),Qe=rG(Dn),St=at.root||w.Root||iG,Le=Ne.root||C.root||{},Kt=at.input||w.Input||oG;return Or=Ze({},Or,(o=Ne.input)!=null?o:C.input),Pt(W.exports.Fragment,{children:[!G&&aG,Pt(St,Ze({},Le,!jT(St)&&{ownerState:Ze({},Dn,Le.ownerState)},{ref:n,onClick:lr},zn,{className:$f(Qe.root,Le.className,S),children:[bt,Oe(x3.Provider,{value:null,children:Oe(Kt,Ze({ownerState:Dn,"aria-invalid":on.error,"aria-describedby":h,autoComplete:y,autoFocus:u,defaultValue:A,disabled:on.disabled,id:fe,onAnimationStart:ga,name:ye,placeholder:Ct,readOnly:Nt,required:on.required,rows:dn,value:Jt,onKeyDown:$t,onKeyUp:Tt,type:Bt},Or,!jT(Kt)&&{as:ai,ownerState:Ze({},Dn,Or.ownerState)},{ref:wi,className:$f(Qe.input,Or.className),onBlur:Ht,onChange:qt,onFocus:ji}))}),Z,xn?xn(Ze({},on,{startAdornment:bt})):null]}))]})});var lG=sG;const uG=gb(),cG=O7({defaultTheme:uG,defaultClassName:"MuiBox-root",generateClassName:QA.generate});var Rr=cG,qT=vh(Oe("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),hG=vh(Oe("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),dG=vh(Oe("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),fG=vh(Oe("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy"),pG=vh(Oe("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),mG=vh(Oe("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const ZT=e=>{let t;const n=new Set,o=(S,w)=>{const C=typeof S=="function"?S(t):S;if(!Object.is(C,t)){const A=t;t=(w!=null?w:typeof C!="object")?C:Object.assign({},t,C),n.forEach(z=>z(t,A))}},l=()=>t,u={setState:o,getState:l,subscribe:S=>(n.add(S),()=>n.delete(S)),destroy:()=>n.clear()};return t=e(o,l,u),u},gG=e=>e?ZT(e):ZT;var w3={exports:{}},b3={},S3={exports:{}},E3={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh=W.exports;function yG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _G=typeof Object.is=="function"?Object.is:yG,vG=oh.useState,xG=oh.useEffect,wG=oh.useLayoutEffect,bG=oh.useDebugValue;function SG(e,t){var n=t(),o=vG({inst:{value:n,getSnapshot:t}}),l=o[0].inst,h=o[1];return wG(function(){l.value=n,l.getSnapshot=t,vv(l)&&h({inst:l})},[e,n,t]),xG(function(){return vv(l)&&h({inst:l}),e(function(){vv(l)&&h({inst:l})})},[e]),bG(n),n}function vv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_G(e,n)}catch{return!0}}function EG(e,t){return t()}var kG=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?EG:SG;E3.useSyncExternalStore=oh.useSyncExternalStore!==void 0?oh.useSyncExternalStore:kG;S3.exports=E3;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0=W.exports,TG=S3.exports;function CG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PG=typeof Object.is=="function"?Object.is:CG,IG=TG.useSyncExternalStore,MG=u0.useRef,AG=u0.useEffect,zG=u0.useMemo,DG=u0.useDebugValue;b3.useSyncExternalStoreWithSelector=function(e,t,n,o,l){var h=MG(null);if(h.current===null){var y={hasValue:!1,value:null};h.current=y}else y=h.current;h=zG(function(){function S(G){if(!w){if(w=!0,C=G,G=o(G),l!==void 0&&y.hasValue){var Z=y.value;if(l(Z,G))return A=Z}return A=G}if(Z=A,PG(C,G))return Z;var H=o(G);return l!==void 0&&l(Z,H)?Z:(C=G,A=H)}var w=!1,C,A,z=n===void 0?null:n;return[function(){return S(t())},z===null?void 0:function(){return S(z())}]},[t,n,o,l]);var u=IG(e,h[0],h[1]);return AG(function(){y.hasValue=!0,y.value=u},[u]),DG(u),u};w3.exports=b3;var RG=w3.exports;const{useSyncExternalStoreWithSelector:LG}=RG;function k3(e,t=e.getState,n){const o=LG(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return W.exports.useDebugValue(o),o}const HT=e=>{const t=typeof e=="function"?gG(e):e,n=(o,l)=>k3(t,o,l);return Object.assign(n,t),n},T3=e=>e?HT(e):HT;function C3(){const e=W.exports.createContext(void 0);return{Provider:({createStore:l,children:h})=>{const y=W.exports.useRef();return y.current||(y.current=l()),W.exports.createElement(e.Provider,{value:y.current},h)},useStore:(l,h)=>{const y=W.exports.useContext(e);if(!y)throw new Error("Seems like you have not used zustand provider as an ancestor.");return k3(y,l,h)},useStoreApi:()=>{const l=W.exports.useContext(e);if(!l)throw new Error("Seems like you have not used zustand provider as an ancestor.");return W.exports.useMemo(()=>({...l}),[l])}}}const P3=(e,t)=>(...n)=>Object.assign({},e,t(...n));var I3={},c0={},xb={exports:{}},M3={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(uf,function(){var n=typeof Promise=="function",o=typeof self=="object"?self:uf,l=typeof Symbol!="undefined",h=typeof Map!="undefined",y=typeof Set!="undefined",u=typeof WeakMap!="undefined",S=typeof WeakSet!="undefined",w=typeof DataView!="undefined",C=l&&typeof Symbol.iterator!="undefined",A=l&&typeof Symbol.toStringTag!="undefined",z=y&&typeof Set.prototype.entries=="function",G=h&&typeof Map.prototype.entries=="function",Z=z&&Object.getPrototypeOf(new Set().entries()),H=G&&Object.getPrototypeOf(new Map().entries()),fe=C&&typeof Array.prototype[Symbol.iterator]=="function",B=fe&&Object.getPrototypeOf([][Symbol.iterator]()),V=C&&typeof String.prototype[Symbol.iterator]=="function",K=V&&Object.getPrototypeOf(""[Symbol.iterator]()),le=8,ue=-1;function ge(ye){var Ee=typeof ye;if(Ee!=="object")return Ee;if(ye===null)return"null";if(ye===o)return"global";if(Array.isArray(ye)&&(A===!1||!(Symbol.toStringTag in ye)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&ye===window.location)return"Location";if(typeof window.document=="object"&&ye===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&ye===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&ye===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&ye instanceof window.HTMLElement){if(ye.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(ye.tagName==="TD")return"HTMLTableDataCellElement";if(ye.tagName==="TH")return"HTMLTableHeaderCellElement"}}var je=A&&ye[Symbol.toStringTag];if(typeof je=="string")return je;var ke=Object.getPrototypeOf(ye);return ke===RegExp.prototype?"RegExp":ke===Date.prototype?"Date":n&&ke===Promise.prototype?"Promise":y&&ke===Set.prototype?"Set":h&&ke===Map.prototype?"Map":S&&ke===WeakSet.prototype?"WeakSet":u&&ke===WeakMap.prototype?"WeakMap":w&&ke===DataView.prototype?"DataView":h&&ke===H?"Map Iterator":y&&ke===Z?"Set Iterator":fe&&ke===B?"Array Iterator":V&&ke===K?"String Iterator":ke===null?"Object":Object.prototype.toString.call(ye).slice(le,ue)}return ge})})(M3);/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var XT=M3.exports;function A3(){this._key="chai/deep-eql__"+Math.random()+Date.now()}A3.prototype={get:function(t){return t[this._key]},set:function(t,n){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:n,configurable:!0})}};var wb=typeof WeakMap=="function"?WeakMap:A3;/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function KT(e,t,n){if(!n||ah(e)||ah(t))return null;var o=n.get(e);if(o){var l=o.get(t);if(typeof l=="boolean")return l}return null}/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function Bm(e,t,n,o){if(!(!n||ah(e)||ah(t))){var l=n.get(e);l?l.set(t,o):(l=new wb,l.set(t,o),n.set(e,l))}}/*!
 * Primary Export
 */xb.exports=h0;xb.exports.MemoizeMap=wb;function h0(e,t,n){if(n&&n.comparator)return YT(e,t,n);var o=z3(e,t);return o!==null?o:YT(e,t,n)}function z3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t?!0:ah(e)||ah(t)?!1:null}/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function YT(e,t,n){n=n||{},n.memoize=n.memoize===!1?!1:n.memoize||new wb;var o=n&&n.comparator,l=KT(e,t,n.memoize);if(l!==null)return l;var h=KT(t,e,n.memoize);if(h!==null)return h;if(o){var y=o(e,t);if(y===!1||y===!0)return Bm(e,t,n.memoize,y),y;var u=z3(e,t);if(u!==null)return u}var S=XT(e);if(S!==XT(t))return Bm(e,t,n.memoize,!1),!1;Bm(e,t,n.memoize,!0);var w=FG(e,t,S,n);return Bm(e,t,n.memoize,w),w}function FG(e,t,n,o){switch(n){case"String":case"Number":case"Boolean":case"Date":return h0(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return D3(e,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ru(e,t,o);case"RegExp":return OG(e,t);case"Generator":return $G(e,t,o);case"DataView":return ru(new Uint8Array(e.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return ru(new Uint8Array(e),new Uint8Array(t),o);case"Set":return JT(e,t,o);case"Map":return JT(e,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return VG(e,t,o)}}/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */function OG(e,t){return e.toString()===t.toString()}/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function JT(e,t,n){if(e.size!==t.size)return!1;if(e.size===0)return!0;var o=[],l=[];return e.forEach(function(y,u){o.push([y,u])}),t.forEach(function(y,u){l.push([y,u])}),ru(o.sort(),l.sort(),n)}/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function ru(e,t,n){var o=e.length;if(o!==t.length)return!1;if(o===0)return!0;for(var l=-1;++l<o;)if(h0(e[l],t[l],n)===!1)return!1;return!0}/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function $G(e,t,n){return ru(Sx(e),Sx(t),n)}/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */function BG(e){return typeof Symbol!="undefined"&&typeof e=="object"&&typeof Symbol.iterator!="undefined"&&typeof e[Symbol.iterator]=="function"}/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function QT(e){if(BG(e))try{return Sx(e[Symbol.iterator]())}catch{return[]}return[]}/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function Sx(e){for(var t=e.next(),n=[t.value];t.done===!1;)t=e.next(),n.push(t.value);return n}/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function eC(e){var t=[];for(var n in e)t.push(n);return t}function tC(e){var t=Object.getOwnPropertySymbols(e);return t}/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function D3(e,t,n,o){var l=n.length;if(l===0)return!0;for(var h=0;h<l;h+=1)if(h0(e[n[h]],t[n[h]],o)===!1)return!1;return!0}/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function VG(e,t,n){var o=eC(e),l=eC(t),h=tC(e),y=tC(t);if(o=o.concat(h),l=l.concat(y),o.length&&o.length===l.length)return ru(nC(o).sort(),nC(l).sort())===!1?!1:D3(e,t,o,n);var u=QT(e),S=QT(t);return u.length&&u.length===S.length?(u.sort(),S.sort(),ru(u,S,n)):o.length===0&&u.length===0&&l.length===0&&S.length===0}/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */function ah(e){return e===null||typeof e!="object"}function nC(e){return e.map(function(n){return typeof n=="symbol"?n.toString():n})}var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.findOrCreate=void 0;function NG(e,t,n){const o=e.findIndex(h=>t(h));if(o>=0)return e[o];const l=n();return e.push(l),l}d0.findOrCreate=NG;var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.asArraysFactory=void 0;function UG(e){return()=>e.map(t=>t.items)}f0.asArraysFactory=UG;var p0={};Object.defineProperty(p0,"__esModule",{value:!0});p0.asEntriesFactory=void 0;function jG(e){return t=>{var n,o;const l=(n=t==null?void 0:t.keyName)!==null&&n!==void 0?n:"key",h=(o=t==null?void 0:t.itemsName)!==null&&o!==void 0?o:"items";return e.map(y=>({[l]:y.key,[h]:y.items}))}}p0.asEntriesFactory=jG;var m0={};Object.defineProperty(m0,"__esModule",{value:!0});m0.asMapFactory=void 0;function GG(e){return()=>{const t=new Map;for(const n of e)t.set(n.key,n.items);return t}}m0.asMapFactory=GG;var g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.asObjectFactory=void 0;function WG(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"}function qG(e){return()=>{const t={};for(const n of e)WG(n.key)&&(t[n.key]=n.items);return t}}g0.asObjectFactory=qG;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.asTuplesFactory=void 0;function ZG(e){return()=>e.map(t=>[t.key,t.items])}y0.asTuplesFactory=ZG;var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.keysFactory=void 0;function HG(e){return()=>e.map(t=>t.key)}_0.keysFactory=HG;var XG=uf&&uf.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(c0,"__esModule",{value:!0});c0.group=void 0;const KG=XG(xb.exports),YG=d0,JG=f0,QG=p0,eW=m0,tW=g0,nW=y0,rW=_0;function iW(e,t){const n=[];let o=0;for(const l of e){const h=t(l,o);o++;const y=S=>(0,KG.default)(S.key,h),u=()=>({key:h,items:[]});(0,YG.findOrCreate)(n,y,u).items.push(l)}return n}function oW(e){return Object.freeze({by:n=>{const l=iW(e,typeof n=="function"?n:h=>h[n]);return Object.freeze({asArrays:(0,JG.asArraysFactory)(l),asEntries:(0,QG.asEntriesFactory)(l),asMap:(0,eW.asMapFactory)(l),asObject:(0,tW.asObjectFactory)(l),asTuples:(0,nW.asTuplesFactory)(l),keys:(0,rW.keysFactory)(l)})}})}c0.group=oW;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.group=void 0;var t=c0;Object.defineProperty(e,"group",{enumerable:!0,get:function(){return t.group}})})(I3);const bb={scheme:"Light Theme",author:"mac gainor (https://github.com/mac-s-g)",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},R3={scheme:"Dark Theme",author:"Chris Kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},L3=()=>null;L3.when=()=>!1;var xv,wv,bv,Sv,Ev,kv,Tv,Cv,Pv,Iv,Mv,Av,zv,Dv,Rv;const aW=e=>T3(P3({enableClipboard:(xv=e.enableClipboard)!==null&&xv!==void 0?xv:!0,indentWidth:(wv=e.indentWidth)!==null&&wv!==void 0?wv:3,groupArraysAfterLength:(bv=e.groupArraysAfterLength)!==null&&bv!==void 0?bv:100,collapseStringsAfterLength:e.collapseStringsAfterLength===!1?Number.MAX_VALUE:(Sv=e.collapseStringsAfterLength)!==null&&Sv!==void 0?Sv:50,maxDisplayLength:(Ev=e.maxDisplayLength)!==null&&Ev!==void 0?Ev:30,rootName:(kv=e.rootName)!==null&&kv!==void 0?kv:"root",onChange:(Tv=e.onChange)!==null&&Tv!==void 0?Tv:()=>{},onCopy:(Cv=e.onCopy)!==null&&Cv!==void 0?Cv:void 0,keyRenderer:(Pv=e.keyRenderer)!==null&&Pv!==void 0?Pv:L3,editable:(Iv=e.editable)!==null&&Iv!==void 0?Iv:!1,defaultInspectDepth:(Mv=e.defaultInspectDepth)!==null&&Mv!==void 0?Mv:5,objectSortKeys:(Av=e.objectSortKeys)!==null&&Av!==void 0?Av:!1,quotesOnKeys:(zv=e.quotesOnKeys)!==null&&zv!==void 0?zv:!0,displayDataTypes:(Dv=e.displayDataTypes)!==null&&Dv!==void 0?Dv:!0,inspectCache:{},hoverPath:null,colorspace:bb,value:e.value,displayObjectSize:(Rv=e.displayObjectSize)!==null&&Rv!==void 0?Rv:!0},(t,n)=>({getInspectCache:(o,l)=>{const h=l!==void 0?o.join(".")+`[${l}]nt`:o.join(".");return n().inspectCache[h]},setInspectCache:(o,l,h)=>{const y=h!==void 0?o.join(".")+`[${h}]nt`:o.join(".");t(u=>({inspectCache:{...u.inspectCache,[y]:typeof l=="function"?l(u.inspectCache[y]):l}}))},setHover:(o,l)=>{t({hoverPath:o?{path:o,nestedIndex:l}:null})}}))),{useStore:sn,useStoreApi:F3,Provider:sW}=C3(),Sb=()=>sn(e=>e.colorspace.base07);function lW({timeout:e=2e3}={}){const[t,n]=W.exports.useState(!1),o=W.exports.useRef(null),l=W.exports.useCallback(S=>{const w=o.current;w&&window.clearTimeout(w),o.current=window.setTimeout(()=>n(!1),e),n(S)},[e]),h=sn(S=>S.onCopy),y=W.exports.useCallback((S,w)=>{if(typeof h=="function")try{const C=h(S,w);C instanceof Promise?C.then(()=>{l(!0)}).catch(A=>{console.error(`error when copy ${S.length===0?"src":`src[${S.join(".")}`}]`,A)}):l(!0)}catch(C){console.error(`error when copy ${S.length===0?"src":`src[${S.join(".")}`}]`,C)}else{const C=JSON.stringify(typeof w=="function"?w.toString():w,null,"  ");"clipboard"in navigator?navigator.clipboard.writeText(C).then(()=>l(!0)).catch(()=>YE(C)):YE(C)}},[l,h]),u=W.exports.useCallback(()=>{n(!1),o.current&&clearTimeout(o.current)},[]);return{copy:y,reset:u,copied:t}}const uW=(e,t,n)=>{if(e===null||n===null||typeof e!="object"||typeof n!="object")return!1;if(Object.is(e,n)&&t.length!==0)return"";const o=[],l=[...t];let h=e;for(;h!==n||l.length!==0;){if(typeof h!="object"||h===null)return!1;if(Object.is(h,n))return o.reduce((u,S,w)=>typeof S=="number"?u+`[${S}]`:u+`${w===0?"":"."}${S}`,"");const y=l.shift();o.push(y),h=h[y]}return!1};function Eb(e,t){const n=sn(o=>o.value);return W.exports.useMemo(()=>uW(n,e,t),[e,t,n])}function cW(e,t,n){const o=e.length,l=Eb(e,t),h=sn(A=>A.getInspectCache),y=sn(A=>A.setInspectCache),u=sn(A=>A.defaultInspectDepth);W.exports.useEffect(()=>{if(h(e,n)===void 0)if(n!==void 0)y(e,!1,n);else{const z=l?!1:o<u;y(e,z)}},[u,o,h,l,n,e,y]);const[S,w]=W.exports.useState(()=>{const A=h(e,n);return A!==void 0?A:n!==void 0||l?!1:o<u}),C=W.exports.useCallback(A=>{w(z=>{const G=typeof A=="boolean"?A:A(z);return y(e,G,n),G})},[n,e,y]);return[S,C]}class hW extends Error{constructor(t){super(t?`${t}
`:`The behavior is not expected and not allowed.
If you see this in development, please fix the error ASAP.
If you see this in production, please contract our customer service.
`)}}const Qs=_h(e=>wt(Rr,{component:"div",...e}))`
  display: inline-block;
`,O3=({dataType:e,enable:t=!0})=>t?wt(Qs,{className:"data-type-label",sx:{mx:.5,fontSize:"0.7rem",opacity:.8},children:e}):null;function Ja(e,t,n){var o;const l=(o=n.displayTypeLabel)!==null&&o!==void 0?o:!0,h=Re.memo(t),y=w=>{const C=sn(z=>z.displayDataTypes),A=sn(z=>z.colorspace[n.colorKey]);return Ri(Qs,{sx:{color:A},children:[l&&C&&wt(O3,{dataType:e}),wt(Qs,{className:`${e}-value`,children:wt(h,{value:w.value})})]})};if(y.displayName=`easy-${e}-type`,!n.fromString)return{Component:y};const u=n.fromString,S=({value:w,setValue:C})=>{const A=sn(z=>z.colorspace[n.colorKey]);return wt(lG,{value:`${w}`,onChange:W.exports.useCallback(z=>{const G=u(z.target.value);C(G)},[C]),size:"small",multiline:!0,sx:{color:A,padding:.5,borderStyle:"solid",borderColor:"black",borderWidth:1,fontSize:"0.8rem",fontFamily:"monospace",display:"inline-flex"}})};return S.displayName=`easy-${e}-type-editor`,{Component:y,Editor:S}}const dW=e=>{const t=e.toString();let n=!0;const o=t.indexOf(")"),l=t.indexOf("=>");return l!==-1&&l>o&&(n=!1),n?t.substring(t.indexOf("{",o)+1,t.lastIndexOf("}")):t.substring(t.indexOf("=>")+2)},fW=e=>{const t=e.toString();return t.indexOf("function")!==-1?t.substring(8,t.indexOf("{")).trim():t.substring(0,t.indexOf("=>")+2).trim()},pW="{",mW="}",gW=e=>Ri(vb,{children:[wt(O3,{dataType:"function"}),Ri(Rr,{component:"span",className:"data-function-start",sx:{letterSpacing:.5},children:[fW(e.value)," ",pW]})]}),yW=()=>wt(vb,{children:wt(Rr,{component:"span",className:"data-function-end",children:mW})}),_W=e=>{const t=sn(n=>n.colorspace.base05);return wt(vb,{children:wt(Rr,{className:"data-function",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?2:0,color:t},children:e.inspect?dW(e.value):wt(Rr,{component:"span",className:"data-function-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})})},vW=e=>wt(wx,{...e,children:wt("path",{d:"M 12 2 C 10.615 1.998 9.214625 2.2867656 7.890625 2.8847656 L 8.9003906 4.6328125 C 9.9043906 4.2098125 10.957 3.998 12 4 C 15.080783 4 17.738521 5.7633175 19.074219 8.3222656 L 17.125 9 L 21.25 11 L 22.875 7 L 20.998047 7.6523438 C 19.377701 4.3110398 15.95585 2 12 2 z M 6.5097656 4.4882812 L 2.2324219 5.0820312 L 3.734375 6.3808594 C 1.6515335 9.4550558 1.3615962 13.574578 3.3398438 17 C 4.0308437 18.201 4.9801562 19.268234 6.1601562 20.115234 L 7.1699219 18.367188 C 6.3019219 17.710187 5.5922656 16.904 5.0722656 16 C 3.5320014 13.332354 3.729203 10.148679 5.2773438 7.7128906 L 6.8398438 9.0625 L 6.5097656 4.4882812 z M 19.929688 13 C 19.794687 14.08 19.450734 15.098 18.927734 16 C 17.386985 18.668487 14.531361 20.090637 11.646484 19.966797 L 12.035156 17.9375 L 8.2402344 20.511719 L 10.892578 23.917969 L 11.265625 21.966797 C 14.968963 22.233766 18.681899 20.426323 20.660156 17 C 21.355156 15.801 21.805219 14.445 21.949219 13 L 19.929688 13 z"})}),xW="{",wW="[",bW="}",SW="]";function $3(e){let t,n="";return Array.isArray(e)?t=e.length:e instanceof Map||e instanceof Set?(n=e[Symbol.toStringTag],t=e.size):t=Object.keys(e).length,Object.prototype.hasOwnProperty.call(e,Symbol.toStringTag)&&(n=e[Symbol.toStringTag]),`${t} Items${n?` (${n})`:""}`}const EW=e=>{const t=sn(u=>u.colorspace.base04),n=Sb(),o=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),l=W.exports.useMemo(()=>e.inspect?$3(e.value):"",[e.inspect,e.value]),h=sn(u=>u.displayObjectSize),y=Eb(e.path,e.value);return Ri(Rr,{component:"span",className:"data-object-start",sx:{letterSpacing:.5},children:[o?wW:xW,h?wt(Rr,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null,y&&!e.inspect?Ri(xo,{children:[wt(vW,{sx:{fontSize:12,color:n,mx:.5}}),y]}):null]})},kW=e=>{const t=sn(h=>h.colorspace.base04),n=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),o=sn(h=>h.displayObjectSize),l=W.exports.useMemo(()=>e.inspect?"":$3(e.value),[e.inspect,e.value]);return Ri(Rr,{component:"span",className:"data-object-end",children:[n?SW:bW,o?wt(Rr,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null]})};function TW(e){return typeof(e==null?void 0:e[Symbol.iterator])=="function"}const CW=e=>{const t=Sb(),n=sn(z=>z.colorspace.base02),o=sn(z=>z.groupArraysAfterLength),l=Eb(e.path,e.value),[h,y]=W.exports.useState(sn(z=>z.maxDisplayLength)),u=sn(z=>z.objectSortKeys),S=W.exports.useMemo(()=>{if(!e.inspect)return null;const z=e.value;if(TW(z)&&!Array.isArray(z)){const fe=[];if(z instanceof Map)for(const B of z){const[V,K]=B,le=`${V}`;fe.push(wt(bc,{path:[...e.path,le],value:K,editable:!1},le))}else{let B=0;for(const V of z)fe.push(wt(bc,{path:[...e.path,`iterator:${B}`],value:V,nestedIndex:B,editable:!1},B)),B++}return fe}if(Array.isArray(z)){if(z.length<=o){const B=z.slice(0,h).map((V,K)=>{const le=[...e.path,K];return wt(bc,{path:le,value:V},K)});if(z.length>h){const V=z.length-h;B.push(Ri(Qs,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>y(K=>K*2),children:["hidden ",V," items..."]},"last"))}return B}return I3.group(z).by((B,V)=>Math.floor(V/o)).asArrays().map((B,V)=>{const K=[...e.path];return wt(bc,{path:K,value:B,nestedIndex:V},V)})}let Z=Object.entries(z);u&&(Z=Z.sort(([fe],[B])=>u===!0?fe.localeCompare(B):u(fe,B)));const H=Z.slice(0,h).map(([fe,B])=>{const V=[...e.path,fe];return wt(bc,{path:V,value:B},fe)});if(Z.length>h){const fe=Z.length-h;H.push(Ri(Qs,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>y(B=>B*2),children:["hidden ",fe," items..."]},"last"))}return H},[e.inspect,e.value,e.path,o,h,t,u]),w=e.inspect?.6:0,C=sn(z=>z.indentWidth),A=e.inspect?C-w:C;return wt(Rr,{className:"data-object",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?A-.6:0,marginLeft:w,color:t,borderLeft:e.inspect?`1px solid ${n}`:"none"},children:e.inspect?S:l?null:wt(Rr,{component:"span",className:"data-object-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})},PW=()=>T3(P3({registry:[]},e=>({registerTypes:t=>{e(n=>({registry:typeof t=="function"?t(n.registry):t}))}}))),{Provider:IW,useStore:B3,useStoreApi:Lq}=C3(),MW={is:e=>typeof e=="object",Component:CW,PreComponent:EW,PostComponent:kW};function AW(e,t,n){let o;for(const l of n)if(l.is(e,t)&&(o=l,typeof e=="object"))return l;if(o===void 0){if(typeof e=="object")return MW;throw new hW("this is not possible")}return o}function zW(e,t){const n=B3(o=>o.registry);return W.exports.useMemo(()=>AW(e,t,n),[e,t,n])}function DW(){const e=[];function t(l){function h(y,u){var S,w;return Object.is(y.value,u.value)&&y.inspect&&u.inspect&&((S=y.path)===null||S===void 0?void 0:S.join("."))===((w=u.path)===null||w===void 0?void 0:w.join("."))}l.Component=W.exports.memo(l.Component,h),l.Editor&&(l.Editor=W.exports.memo(l.Editor,function(u,S){return Object.is(u.value,S.value)})),l.PreComponent&&(l.PreComponent=W.exports.memo(l.PreComponent,h)),l.PostComponent&&(l.PostComponent=W.exports.memo(l.PostComponent,h)),e.push(l)}t({is:l=>typeof l=="boolean",...Ja("bool",({value:l})=>wt(xo,{children:l?"true":"false"}),{colorKey:"base0E",fromString:l=>Boolean(l)})});const n={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};t({is:l=>l instanceof Date,...Ja("date",({value:l})=>wt(xo,{children:l.toLocaleTimeString("en-us",n)}),{colorKey:"base0D"})}),t({is:l=>l===null,...Ja("null",()=>{const l=sn(h=>h.colorspace.base02);return wt(Rr,{sx:{fontSize:"0.8rem",backgroundColor:l,fontWeight:"bold",borderRadius:"3px",padding:"0.5px 2px"},children:"NULL"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>l===void 0,...Ja("undefined",()=>{const l=sn(h=>h.colorspace.base02);return wt(Rr,{sx:{fontSize:"0.7rem",backgroundColor:l,borderRadius:"3px",padding:"0.5px 2px"},children:"undefined"})},{colorKey:"base05",displayTypeLabel:!1})}),t({is:l=>typeof l=="string",...Ja("string",l=>{const[h,y]=W.exports.useState(!1),u=sn(C=>C.collapseStringsAfterLength),S=h?l.value:l.value.slice(0,u),w=l.value.length>u;return Ri(Rr,{component:"span",sx:{overflowWrap:"anywhere",cursor:w?"pointer":"inherit"},onClick:()=>{y(C=>!C)},children:['"',S,h?wt("span",{children:"..."}):wt(xo,{}),'"']})},{colorKey:"base09",fromString:l=>l})}),t({is:l=>typeof l=="function",Component:_W,PreComponent:gW,PostComponent:yW});const o=l=>l%1===0;return t({is:l=>typeof l=="number"&&isNaN(l),...Ja("NaN",()=>{const l=sn(h=>h.colorspace.base02);return wt(Rr,{sx:{backgroundColor:l,fontSize:"0.8rem",fontWeight:"bold",borderRadius:"3px"},children:"NaN"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>typeof l=="number"&&!o(l),...Ja("float",({value:l})=>wt(xo,{children:`${l}`}),{colorKey:"base0B",fromString:l=>parseFloat(l)})}),t({is:l=>typeof l=="number"&&o(l),...Ja("int",({value:l})=>wt(xo,{children:`${l}`}),{colorKey:"base0F",fromString:l=>parseInt(l)})}),t({is:l=>typeof l=="bigint",...Ja("bigint",({value:l})=>wt(xo,{children:`${l}n`}),{colorKey:"base0F",fromString:l=>BigInt(l.replace(/\D/g,""))})}),e}const Vm=_h(e=>wt(Rr,{...e,component:"span"}))`
  cursor: pointer;
  padding-left: 0.7rem;
`,bc=e=>{const{value:t,path:n,nestedIndex:o}=e;var l;const h=(l=e.editable)!==null&&l!==void 0?l:void 0,y=sn(lt=>lt.editable),u=W.exports.useMemo(()=>y===!1||h===!1?!1:typeof y=="function"?!!y(n,t):y,[n,h,y,t]),[S,w]=W.exports.useState(typeof t=="function"?()=>t:t),C=n.length,A=n[C-1],z=sn(lt=>lt.hoverPath),G=W.exports.useMemo(()=>z&&n.every((lt,zn)=>lt===z.path[zn]&&o===z.nestedIndex),[z,n,o]),Z=sn(lt=>lt.setHover),H=sn(lt=>lt.value),[fe,B]=cW(n,t,o),[V,K]=W.exports.useState(!1),le=sn(lt=>lt.onChange),ue=Sb(),ge=sn(lt=>lt.colorspace.base0C),{Component:ye,PreComponent:Ee,PostComponent:je,Editor:ke}=zW(t,n),Ve=sn(lt=>lt.quotesOnKeys),$t=sn(lt=>lt.rootName),Tt=H===t,Ct=Number.isInteger(Number(A)),Nt=sn(lt=>lt.enableClipboard),{copy:xn,copied:dn}=lW(),Ne=W.exports.useMemo(()=>V?Ri(xo,{children:[wt(Vm,{children:wt(dG,{sx:{fontSize:".8rem"},onClick:()=>{K(!1),w(t)}})}),wt(Vm,{children:wt(qT,{sx:{fontSize:".8rem"},onClick:()=>{K(!1),le(n,t,S)}})})]}):Ri(xo,{children:[Nt&&wt(Vm,{onClick:lt=>{lt.preventDefault();try{xn(n,t)}catch(zn){console.error(zn)}},children:dn?wt(qT,{sx:{fontSize:".8rem"}}):wt(fG,{sx:{fontSize:".8rem"}})}),ke&&u&&wt(Vm,{onClick:lt=>{lt.preventDefault(),K(!0)},children:wt(pG,{sx:{fontSize:".8rem"}})})]}),[ke,dn,xn,u,V,Nt,le,n,S,t]),at=!!(Ee&&je),bt=sn(lt=>lt.keyRenderer),Bt=W.exports.useMemo(()=>({path:n,inspect:fe,setInspect:B,value:t}),[fe,n,B,t]);return Ri(Rr,{className:"data-key-pair","data-testid":"data-key-pair"+n.join("."),onMouseEnter:W.exports.useCallback(()=>Z(n,o),[Z,n,o]),children:[Ri(Qs,{component:"span",className:"data-key",sx:{lineHeight:1.5,color:ue,letterSpacing:.5,opacity:.8},onClick:W.exports.useCallback(lt=>{lt.isDefaultPrevented()||B(zn=>!zn)},[B]),children:[at?fe?wt(mG,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):wt(hG,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):null,Tt?$t!==!1?Ve?Ri(xo,{children:['"',$t,'"']}):wt(xo,{children:$t}):null:bt.when(Bt)?wt(bt,{...Bt}):o===void 0&&(Ct?wt(Rr,{component:"span",style:{color:ge},children:A}):Ve?Ri(xo,{children:['"',A,'"']}):wt(xo,{children:A})),Tt?$t!==!1?wt(Qs,{sx:{mx:.5},children:":"}):null:o===void 0&&wt(Qs,{sx:{mx:.5},children:":"}),Ee&&wt(Ee,{...Bt}),G&&at&&fe&&Ne]}),V&&u?ke&&wt(ke,{value:S,setValue:w}):ye?wt(ye,{...Bt}):wt(Rr,{component:"span",className:"data-value-fallback",children:`fallback: ${t}`}),je&&wt(je,{...Bt}),G&&at&&!fe&&Ne,G&&!at&&Ne]})},rC="(prefers-color-scheme: dark)";function RW(){const[e,t]=W.exports.useState(!1);return W.exports.useEffect(()=>{const n=l=>{t(l.matches)};t(window.matchMedia(rC).matches);const o=window.matchMedia(rC);return o.addEventListener("change",n),()=>o.removeEventListener("change",n)},[]),e}function Vo(e,t){const n=F3();W.exports.useEffect(()=>{t!==void 0&&n.setState({[e]:t})},[e,t,n])}const LW=e=>{const t=F3();Vo("value",e.value),Vo("editable",e.editable),Vo("indentWidth",e.indentWidth),Vo("onChange",e.onChange),Vo("groupArraysAfterLength",e.groupArraysAfterLength),Vo("keyRenderer",e.keyRenderer),Vo("maxDisplayLength",e.maxDisplayLength),Vo("enableClipboard",e.enableClipboard),Vo("rootName",e.rootName),Vo("displayDataTypes",e.displayDataTypes),Vo("displayObjectSize",e.displayObjectSize),Vo("onCopy",e.onCopy),W.exports.useEffect(()=>{e.theme==="light"?t.setState({colorspace:bb}):e.theme==="dark"?t.setState({colorspace:R3}):typeof e.theme=="object"&&t.setState({colorspace:e.theme})},[t,e.theme]);const n=W.exports.useRef(!0),o=W.exports.useMemo(()=>DW(),[]),l=B3(S=>S.registerTypes);if(n.current){var h;const S=[...o];(h=e.valueTypes)===null||h===void 0||h.forEach(w=>{S.push(w)}),l(S),n.current=!1}W.exports.useEffect(()=>{var S;const w=[...o];(S=e.valueTypes)===null||S===void 0||S.forEach(C=>{w.push(C)}),l(w)},[o,e.valueTypes,l]);const y=sn(S=>S.value),u=sn(S=>S.setHover);return wt(qj,{elevation:0,className:e.className,style:e.style,sx:{fontFamily:"monospace",userSelect:"none",contentVisibility:"auto"},onMouseLeave:W.exports.useCallback(()=>{u(null)},[u]),children:wt(bc,{value:y,path:W.exports.useMemo(()=>[],[])})})},FW=function(t){const n=RW();var o;const l=W.exports.useMemo(()=>t.theme==="auto"?n?"light":"dark":(o=t.theme)!==null&&o!==void 0?o:"light",[n,t.theme]),h=W.exports.useMemo(()=>{const u=typeof l=="object"?l.base00:l==="dark"?R3.base00:bb.base00;return gb({components:{MuiPaper:{styleOverrides:{root:{backgroundColor:u}}}},palette:{mode:l==="dark"?"dark":"light",background:{default:u}}})},[l]),y={...t,theme:l};return wt(rj,{theme:h,children:wt(IW,{createStore:PW,children:wt(sW,{createStore:()=>aW(t),children:wt(LW,{...y})})})})},OW=hn("div",{padding:"2rem"}),$W=hn("div",{paddingBottom:"2rem",fontFamily:"monospace"});function BW(e){let[t,n]=W.exports.useState(),[o,l]=W.exports.useState(null);return W.exports.useEffect(()=>{let h=e.file;(async()=>{n(await h.getMetadata()),l(await h.getHeader())})()},[e.file]),Pt(OW,{children:[o?Pt($W,{children:[Pt("div",{children:["root directory: offset=",o.rootDirectoryOffset," len=",o.rootDirectoryLength]}),Pt("div",{children:["metadata: offset=",o.jsonMetadataOffset," len=",o.jsonMetadataLength]}),Pt("div",{children:["leaf directories: offset=",o.leafDirectoryOffset," len=",o.leafDirectoryLength]}),Pt("div",{children:["tile data: offset=",o.tileDataOffset," len=",o.tileDataLength]}),Pt("div",{children:["num addressed tiles: ",o.numAddressedTiles]}),Pt("div",{children:["num tile entries: ",o.numTileEntries]}),Pt("div",{children:["num tile contents: ",o.numTileContents]}),Pt("div",{children:["clustered: ",o.clustered?"true":"false"]}),Pt("div",{children:["internal compression: ",o.internalCompression]}),Pt("div",{children:["tile compression: ",o.tileCompression]}),Pt("div",{children:["tile type: ",o.tileType]}),Pt("div",{children:["min zoom: ",o.minZoom]}),Pt("div",{children:["max zoom: ",o.maxZoom]}),Pt("div",{children:["min lon, min lat, max lon, max lat: ",o.minLon,", ",o.minLat,", ",o.maxLon,", ",o.maxLat]}),Pt("div",{children:["center zoom: ",o.centerZoom]}),Pt("div",{children:["center lon, center lat: ",o.centerLon,", ",o.centerLat]})]}):null,Oe(FW,{value:t,theme:"dark",defaultInspectDepth:1})]})}const VW=W.exports.forwardRef((e,t)=>{const{pressed:n,defaultPressed:o=!1,onPressedChange:l,...h}=e,[y=!1,u]=Wf({prop:n,onChange:l,defaultProp:o});return W.exports.createElement(no.button,Ze({type:"button","aria-pressed":y,"data-state":y?"on":"off","data-disabled":e.disabled?"":void 0},h,{ref:t,onClick:Oi(e.onClick,()=>{e.disabled||u(!y)})}))});function NW(e){const t=e+"CollectionProvider",[n,o]=qf(t),[l,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),y=z=>{const{scope:G,children:Z}=z,H=Re.useRef(null),fe=Re.useRef(new Map).current;return Re.createElement(l,{scope:G,itemMap:fe,collectionRef:H},Z)},u=e+"CollectionSlot",S=Re.forwardRef((z,G)=>{const{scope:Z,children:H}=z,fe=h(u,Z),B=ds(G,fe.collectionRef);return Re.createElement(Cf,{ref:B},H)}),w=e+"CollectionItemSlot",C="data-radix-collection-item";return[{Provider:y,Slot:S,ItemSlot:Re.forwardRef((z,G)=>{const{scope:Z,children:H,...fe}=z,B=Re.useRef(null),V=ds(G,B),K=h(w,Z);return Re.useEffect(()=>(K.itemMap.set(B,{ref:B,...fe}),()=>{K.itemMap.delete(B)})),Re.createElement(Cf,{[C]:"",ref:V},H)})},function(z){const G=h(e+"CollectionConsumer",z);return Re.useCallback(()=>{const Z=G.collectionRef.current;if(!Z)return[];const H=Array.from(Z.querySelectorAll(`[${C}]`));return Array.from(G.itemMap.values()).sort((fe,B)=>H.indexOf(fe.ref.current)-H.indexOf(B.ref.current))},[G.collectionRef,G.itemMap])},o]}const UW={bubbles:!1,cancelable:!0},[Ex,V3,jW]=NW("RovingFocusGroup"),[GW,v0]=qf("RovingFocusGroup",[jW]),[WW,qW]=GW("RovingFocusGroup"),ZW=W.exports.forwardRef((e,t)=>W.exports.createElement(Ex.Provider,{scope:e.__scopeRovingFocusGroup},W.exports.createElement(Ex.Slot,{scope:e.__scopeRovingFocusGroup},W.exports.createElement(HW,Ze({},e,{ref:t}))))),HW=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,dir:l="ltr",loop:h=!1,currentTabStopId:y,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:S,onEntryFocus:w,...C}=e,A=W.exports.useRef(null),z=ds(t,A),[G=null,Z]=Wf({prop:y,defaultProp:u,onChange:S}),[H,fe]=W.exports.useState(!1),B=rl(w),V=V3(n),K=W.exports.useRef(!1);return W.exports.useEffect(()=>{const le=A.current;if(le)return le.addEventListener("rovingFocusGroup.onEntryFocus",B),()=>le.removeEventListener("rovingFocusGroup.onEntryFocus",B)},[B]),W.exports.createElement(WW,{scope:n,orientation:o,dir:l,loop:h,currentTabStopId:G,onItemFocus:W.exports.useCallback(le=>Z(le),[Z]),onItemShiftTab:W.exports.useCallback(()=>fe(!0),[])},W.exports.createElement(no.div,Ze({tabIndex:H?-1:0,"data-orientation":o},C,{ref:z,style:{outline:"none",...e.style},onMouseDown:Oi(e.onMouseDown,()=>{K.current=!0}),onFocus:Oi(e.onFocus,le=>{const ue=!K.current;if(le.target===le.currentTarget&&ue&&!H){const ge=new Event("rovingFocusGroup.onEntryFocus",UW);if(le.currentTarget.dispatchEvent(ge),!ge.defaultPrevented){const ye=V().filter(Ee=>Ee.focusable);N3([ye.find(Ee=>Ee.active),ye.find(Ee=>Ee.id===G),...ye].filter(Boolean).map(Ee=>Ee.ref.current))}}K.current=!1}),onBlur:Oi(e.onBlur,()=>fe(!1))})))}),XW=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:l=!1,...h}=e,y=of(),u=qW("RovingFocusGroupItem",n),S=u.currentTabStopId===y,w=V3(n);return W.exports.createElement(Ex.ItemSlot,{scope:n,id:y,focusable:o,active:l},W.exports.createElement(no.span,Ze({tabIndex:S?0:-1,"data-orientation":u.orientation},h,{ref:t,onMouseDown:Oi(e.onMouseDown,C=>{o?u.onItemFocus(y):C.preventDefault()}),onFocus:Oi(e.onFocus,()=>u.onItemFocus(y)),onKeyDown:Oi(e.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey)return void u.onItemShiftTab();if(C.target!==C.currentTarget)return;const A=function(Z,H,fe){const B=function(V,K){return K!=="rtl"?V:V==="ArrowLeft"?"ArrowRight":V==="ArrowRight"?"ArrowLeft":V}(Z.key,fe);return H==="vertical"&&["ArrowLeft","ArrowRight"].includes(B)||H==="horizontal"&&["ArrowUp","ArrowDown"].includes(B)?void 0:KW[B]}(C,u.orientation,u.dir);if(A!==void 0){C.preventDefault();let Z=w().filter(H=>H.focusable).map(H=>H.ref.current);if(A==="last")Z.reverse();else if(A==="prev"||A==="next"){A==="prev"&&Z.reverse();const H=Z.indexOf(C.currentTarget);Z=u.loop?(G=H+1,(z=Z).map((fe,B)=>z[(G+B)%z.length])):Z.slice(H+1)}setTimeout(()=>N3(Z))}var z,G})})))}),KW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function N3(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}const U3=ZW,kb=XW,[j3,G3]=qf("ToggleGroup",[v0]),W3=v0(),YW=Re.forwardRef((e,t)=>{const{type:n,...o}=e;if(n==="single"){const l=o;return Re.createElement(JW,Ze({},l,{ref:t}))}if(n==="multiple"){const l=o;return Re.createElement(QW,Ze({},l,{ref:t}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")}),[q3,Z3]=j3("ToggleGroup"),JW=Re.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:l=()=>{},...h}=e,[y,u]=Wf({prop:n,defaultProp:o,onChange:l});return Re.createElement(q3,{scope:e.__scopeToggleGroup,type:"single",value:y?[y]:[],onItemActivate:u,onItemDeactivate:Re.useCallback(()=>u(""),[u])},Re.createElement(H3,Ze({},h,{ref:t})))}),QW=Re.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:l=()=>{},...h}=e,[y=[],u]=Wf({prop:n,defaultProp:o,onChange:l}),S=Re.useCallback(C=>u((A=[])=>[...A,C]),[u]),w=Re.useCallback(C=>u((A=[])=>A.filter(z=>z!==C)),[u]);return Re.createElement(q3,{scope:e.__scopeToggleGroup,type:"multiple",value:y,onItemActivate:S,onItemDeactivate:w},Re.createElement(H3,Ze({},h,{ref:t})))}),[eq,tq]=j3("ToggleGroup"),H3=Re.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:o=!1,rovingFocus:l=!0,orientation:h,dir:y="ltr",loop:u=!0,...S}=e,w=W3(n),C={role:"group",dir:y,...S};return Re.createElement(eq,{scope:n,rovingFocus:l,disabled:o},l?Re.createElement(U3,Ze({asChild:!0},w,{orientation:h,dir:y,loop:u}),Re.createElement(no.div,Ze({},C,{ref:t}))):Re.createElement(no.div,Ze({},C,{ref:t})))}),nq=Re.forwardRef((e,t)=>{const n=Z3("ToggleGroupItem",e.__scopeToggleGroup),o=tq("ToggleGroupItem",e.__scopeToggleGroup),l=W3(e.__scopeToggleGroup),h=n.value.includes(e.value),y=o.disabled||e.disabled,u={...e,pressed:h,disabled:y},S=Re.useRef(null);return o.rovingFocus?Re.createElement(kb,Ze({asChild:!0},l,{focusable:!y,active:h,ref:S}),Re.createElement(iC,Ze({},u,{ref:t}))):Re.createElement(iC,Ze({},u,{ref:t}))}),iC=Re.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:o,...l}=e,h=Z3("ToggleGroupItem",n),y={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u=h.type==="single"?y:void 0;return Re.createElement(VW,Ze({},u,l,{ref:t,onPressedChange:S=>{S?h.onItemActivate(o):h.onItemDeactivate(o)}}))}),rq=YW,iq=nq,[oq,Fq]=qf("Toolbar",[v0,G3]),Tb=v0(),X3=G3(),[aq,sq]=oq("Toolbar"),lq=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,orientation:o="horizontal",dir:l="ltr",loop:h=!0,...y}=e,u=Tb(n);return W.exports.createElement(aq,{scope:n,orientation:o},W.exports.createElement(U3,Ze({asChild:!0},u,{orientation:o,dir:l,loop:h}),W.exports.createElement(no.div,Ze({role:"toolbar","aria-orientation":o,dir:l},y,{ref:t}))))}),uq=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=Tb(n);return W.exports.createElement(kb,Ze({asChild:!0},l,{focusable:!e.disabled}),W.exports.createElement(no.button,Ze({type:"button"},o,{ref:t})))}),cq=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=Tb(n);return W.exports.createElement(kb,Ze({asChild:!0},l,{focusable:!0}),W.exports.createElement(no.a,Ze({},o,{ref:t,onKeyDown:Oi(e.onKeyDown,h=>{h.key===" "&&h.currentTarget.click()})})))}),hq=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=sq("ToolbarToggleGroup",n),h=X3(n);return W.exports.createElement(rq,Ze({"data-orientation":l.orientation},h,o,{ref:t,rovingFocus:!1}))}),dq=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=X3(n);return W.exports.createElement(uq,Ze({asChild:!0},e),W.exports.createElement(iq,Ze({},l,o,{ref:t})))}),fq=lq,pq=cq,mq=hq,gq=dq,yq=hn(fq,{display:"flex",height:"$4",width:"100%",boxSizing:"border-box",minWidth:"max-content",backgroundColor:"white",boxShadow:'0 2px 10px "black"'}),K3={all:"unset",flex:"0 0 auto",color:"$black",display:"inline-flex",padding:"0 $1 0 $1",fontSize:"$2",alignItems:"center","&:hover":{backgroundColor:"$hover",color:"$white"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px blue"}},_q=hn(pq,{...K3,backgroundColor:"transparent",color:"black",display:"inline-flex",justifyContent:"center",alignItems:"center"},{"&:hover":{backgroundColor:"$hover",color:"$white",cursor:"pointer"}}),vq=hn(mq,{display:"inline-flex",borderRadius:4}),xq=hn(gq,{...K3,boxShadow:0,backgroundColor:"white",marginLeft:2,cursor:"pointer","&:first-child":{marginLeft:0},"&[data-state=on]":{backgroundColor:"$primary",color:"$primaryText"}}),wq=yq,bq=_q,Sq=vq,Lv=xq;function Eq(e){let[t,n]=W.exports.useState("maplibre"),o;return t==="maplibre"?o=Oe(SN,{file:e.file}):t==="inspector"?o=Oe(n8,{file:e.file}):o=Oe(BW,{file:e.file}),Pt(If,{children:[Pt(wq,{"aria-label":"Formatting options",children:[Pt(Sq,{type:"single",defaultValue:"center","aria-label":"Text alignment",value:t,onValueChange:n,children:[Oe(Lv,{value:"maplibre","aria-label":"Right aligned",children:"Map View"}),Pt(Lv,{value:"inspector","aria-label":"Left aligned",children:[Oe(vL,{})," Tile Inspector"]}),Oe(Lv,{value:"metadata","aria-label":"Left aligned",children:"Metadata"})]}),Oe(bq,{css:{marginRight:10},children:e.file.source.getKey()})]}),o]})}const kq=hn("div",{height:"$4",display:"flex",alignItems:"center",padding:"0 $2 0 $2"}),Tq=hn("a",{fontWeight:500,color:"unset",textDecoration:"none"}),Cq=hn("a",{color:"white",textDecoration:"none",fontSize:"$1"}),Pq=hn("span",{marginLeft:"auto"}),Iq=hn(PF,{backgroundColor:"black",position:"fixed",inset:0,opacity:"40%",zIndex:3}),Mq=hn(IF,{backgroundColor:"black",color:"#ef4444",padding:"$1",borderRadius:6,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",zIndex:4,"&:focus":{outline:"none"}}),Aq="32666dd".substr(0,8);function zq(){IR();let[e,t]=W.exports.useState(),[n,o]=W.exports.useState();W.exports.useEffect(()=>{const y=new URLSearchParams(location.search).get("url");if(y){let u=new Gc(y);o(u)}},[]),W.exports.useEffect(()=>{n&&n.getHeader().catch(y=>{t(y.message)})},[n]),W.exports.useEffect(()=>{const y=new URL(window.location.href);n&&n.source.getKey().startsWith("http")?(y.searchParams.set("url",n.source.getKey()),history.pushState(null,"",y.toString())):(y.searchParams.delete("url"),history.pushState(null,"",y.toString()))},[n]);let l=y=>{y.preventDefault(),o(void 0)};const h=()=>{t(void 0)};return Pt("div",{children:[Pt(kq,{children:[Oe(Tq,{href:"/PMTiles/",onClick:l,children:"PMTiles Viewer"}),Oe(Pq,{children:Pt(Cq,{href:"https://github.com/protomaps/PMTiles",target:"_blank",children:[Oe(yL,{})," ",Aq]})})]}),n?Oe(Eq,{file:n}):Oe(ZO,{setFile:o}),Oe(TF,{open:e!==void 0,children:Pt(CF,{children:[Oe(Iq,{}),Pt(Mq,{onEscapeKeyDown:h,onPointerDownOutside:h,children:[Oe("div",{children:n?n.source.getKey():null}),Oe("div",{children:e}),Oe(MF,{})]})]})})]})}Ov.createRoot(document.getElementById("root")).render(Oe(Re.StrictMode,{children:Oe(zq,{})}));
